if (self.CavalryLogger) {
 CavalryLogger.start_js([ "h5MeC" ]);
}

__d("ActorURIConfig", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  PARAMETER_ACTOR: "av"
 };
}, null);

__d("ComposedBlockType", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  UNSTYLED: 0,
  PARAGRAPH: 1,
  UNORDERED_LIST_ITEM: 2,
  ORDERED_LIST_ITEM: 3,
  BLOCKQUOTE: 4,
  HEADER_ONE: 5,
  HEADER_TWO: 6,
  CODE: 7,
  MEDIA: 8,
  PULLQUOTE: 9
 };
}, null);

__d("ComposedEntityMutability", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  MUTABLE: 0,
  IMMUTABLE: 1,
  SEGMENTED: 2
 };
}, null);

__d("ComposedEntityType", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  MENTION: 0,
  LINK: 1,
  IMAGE: 2,
  VIDEO: 3,
  EMOTICON: 4,
  TOKEN: 5,
  HASHTAG: 6,
  IMPLICIT_LINK: 7
 };
}, null);

__d("ComposedInlineStyle", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  NONE: 0,
  BOLD: 1,
  ITALIC: 2,
  UNDERLINE: 4,
  CODE: 8,
  STRIKETHROUGH: 16,
  SUBSCRIPT: 32,
  SUPERSCRIPT: 64
 };
}, null);

__d("CreditCardFormParam", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  ACCOUNT_ID: "account_id",
  ACCOUNT_COUNTRY_CODE: "account_country_code",
  APP_ID: "app_id",
  CARD_EXPIRATION: "exp",
  CARD_FBID: "cc_fbid",
  CARD_ID: "cc_id",
  CARD_TYPE: "cardType",
  CITY: "city",
  CONTEXT_ID: "context_id",
  COUNTRY: "country",
  CSC_LENGTH: "csc_length",
  EMAIL: "email",
  FIRST_NAME: "firstName",
  TRACKING_ID: "tracking_id",
  JSFAIL_SOURCE: "jsfail_source",
  KEYPRESS_TIMES: "kpts",
  LAST_NAME: "lastName",
  MONTH: "month",
  STATE: "state",
  STREET: "street",
  STREET_2: "street2",
  VALIDATE_ADDRESS: "validate_address",
  VALIDATE_NAME: "validate_name",
  VALIDATE_ZIP: "validate_zip",
  YEAR: "year",
  ZIP: "zip",
  VALIDATOR_CHECKS: "checks",
  CARD_NUMBER: "creditCardNumber",
  CSC: "csc",
  CARD_NUMBER_FIRST_6: "creditCardNumber_first6",
  CARD_NUMBER_LAST_4: "creditCardNumber_last4",
  CARD_NUMBER_TOKEN: "creditCardNumber_token",
  CSC_TOKEN: "csc_token",
  AUTH_LEVEL_FLAG: "auth_level",
  AUTH_AMOUNT: "auth_amount",
  AUTH_CURRENCY: "auth_currency",
  AUTO_EXPAND_AUTH_LEVEL_FLAG: "auto_expand_auth_level",
  PAYMENT_ITEM_TYPE: "payment_item_type",
  CREDENTIAL_ID: "credential_id"
 };
}, null);

__d("CreditCardTypeEnum", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  VISA: 86,
  MASTERCARD: 77,
  DISCOVER: 68,
  AMERICANEXPRESS: 65,
  DINERSCLUB: 64,
  JCB: 74
 };
}, null);

__d("MercuryAudioType", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  AudioClip: "fb_voice_message",
  VoiceMessageWithTranscript: "fb_voice_message_with_transcript"
 };
}, null);

__d("MercuryParticipantTypes", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  USER: "user",
  THREAD: "thread",
  EVENT: "event",
  PAGE: "page",
  FRIEND: "friend",
  FB4C: "fb4c"
 };
}, null);

__d("MercurySendMessageFields", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  AUTO_RETRY_CNT: "auto_retry_cnt",
  MANUAL_RETRY_CNT: "manual_retry_cnt"
 };
}, null);

__d("MessagesViewerSetID", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  MESSAGES: "messages",
  MESSAGES_VIEW_ALL_IN_THREAD: "messages:view_all_in_thread"
 };
}, null);

__d("MessengerView", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  DETAIL: {
   COMPOSE: "detail/compose",
   THREAD: "detail/thread"
  },
  MASTER: {
   GROUPS: "master/groups",
   PEOPLE: "master/people",
   RECENT: "master/recent"
  }
 };
}, null);

__d("P2PChannelType", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  TRANSFER_STATUS_CHANGED: "P2P/TransferStatusChanged"
 };
}, null);

__d("P2PPasswordProtectionParam", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  STATUS: "status"
 };
}, null);

__d("P2PPasswordProtectionStatusTypes", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  NOT_SET: 0,
  DISABLED: 1,
  ENABLED: 2
 };
}, null);

__d("P2PPaymentCreditCardsTypes", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  SENDING: 1,
  RECEIVING: 2
 };
}, null);

__d("P2PPaymentLoggerEvent", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  ACTN_ADD_CREDIT_CARD: "Actn_AddCreditCard",
  ACTN_UPDATE_CREDIT_CARD: "Actn_UpdateCreditCard",
  ACTN_REMOVE_CREDIT_CARD: "Actn_RemoveCreditCard",
  ACTN_UNLOCK_CREDIT_CARD: "Actn_UnlockCreditCard",
  ACTN_TRANSFER_MONEY: "Actn_TransferMoney",
  ACTN_ACCEPT_MONEY: "Actn_AcceptMoney",
  ACTN_DECLINE_MONEY: "Actn_DeclineMoney",
  ACTN_SET_PRIMARY: "Actn_SetPrimary",
  ACTN_WITHDRAW_MONEY: "Actn_WithdrawMoney",
  ACTN_CREATE_PAYMENT_REQUEST: "Actn_CreatePaymentRequest",
  ACTN_ACCEPT_PAYMENT_REQUEST: "Actn_AcceptPaymentRequest",
  ACTN_DECLINE_PAYMENT_REQUEST: "Actn_DeclinePaymentRequest",
  ACTN_AUTH_FOR_SENDER_REVIEW: "Actn_AuthForSenderReview",
  ACTN_COMPLETE_SENDER_REVIEW: "Actn_CompleteSenderReview",
  ACTN_COMPLETE_RECEIVER_REVIEW: "Actn_CompleteReceiverReview",
  ACTN_COMPLETE_SENDER_VERIFICATION: "Actn_CompleteSenderVerification",
  ACTN_COMPLETE_RECEIVER_VERIFICATION: "Actn_CancelReceiverVerification",
  ACTN_CANCEL_SENDER_VERIFICATION: "Actn_CancelSenderVerification",
  ACTN_CANCEL_RECEIVER_VERIFICATION: "Actn_CancelReceiverVerification",
  ACTN_CANCEL_SENDER_RISK: "Actn_CancelSenderRisk",
  ACTN_CANCEL_EXPIRE: "Actn_CancelExpire",
  ACTN_CANCEL_FOR_SAME_CARD: "Actn_CancelForSameCard",
  ACTN_CANCEL_BY_CUSTOMER_SERVICE: "Actn_CancelByCustomerService",
  ACTN_CANCEL_RECEIVER_REVIEW: "Actn_CancelReceiverReview",
  ACTN_CANCEL_SENDER_REVIEW: "Actn_CancelSenderReview",
  ACTN_ADD_PIN: "Actn_AddPIN",
  ACTN_UPDATE_PIN: "Actn_UpdatePIN",
  ACTN_REMOVE_PIN: "Actn_RemovePIN",
  ACTN_RESET_PIN: "Actn_ResetPIN",
  ACTN_ENABLE_TOUCH_ID: "Actn_EnableTouchID",
  ACTN_VERIFY_TOUCH_ID: "Actn_VerifyTouchID",
  ACTN_DISABLE_TOUCH_ID: "Actn_DisableTouchID",
  UI_ACTN_INITIATE_SEND: "UI_Actn_Initiate_Send",
  UI_ACTN_CANCEL_SEND: "UI_Actn_Send_Money_Cancelled",
  UI_ACTN_INITIATE_ADD_CARD: "UI_Actn_Initiate_Add_Card",
  UI_ACTN_CANCEL_ADD_CARD: "UI_Actn_Cancel_Add_Card",
  UI_ACTN_CONFIRM_CARD_DETAILS: "UI_Actn_Confirm_Card_Details",
  UI_ACTN_ACCEPT_WITH_CARD: "UI_Actn_Accept_With_Card",
  UI_ACTN_ADD_CARD_SUCCESS: "UI_Actn_Add_Card_Success",
  UI_ACTN_ADD_CARD_FAIL: "UI_Actn_Add_Card_Fail",
  UI_ACTN_CONFIRM_SEND: "UI_Actn_Confirm_Send",
  UI_ACTN_SEND_SUCCESS: "UI_Actn_Send_Success",
  UI_ACTN_SEND_MONEY_CANCELLED: "UI_Actn_Send_Money_Cancelled",
  UI_ACTN_SEND_FAIL: "UI_Actn_Send_Fail",
  UI_ACTN_INITIATE_EDIT_CARD: "UI_Actn_Initiate_Edit_Card",
  UI_ACTN_CANCEL_EDIT_CARD: "UI_Actn_Cancel_Edit_Card",
  UI_ACTN_CONFIRM_EDIT_CARD_DETAILS: "UI_Actn_Confirm_Edit_Card_Details",
  UI_ACTN_EDIT_CARD_SUCCESS: "UI_Actn_Edit_Card_Success",
  UI_ACTN_EDIT_CARD_FAIL: "UI_Actn_Edit_Card_Fail",
  UI_ACTN_INITIATE_REMOVE_CARD: "UI_Actn_Initiate_Remove_Card",
  UI_ACTN_CONFIRM_REMOVE_CARD: "UI_Actn_Confirm_Remove_Card",
  UI_ACTN_REMOVE_CARD_SUCCESS: "UI_Actn_Remove_Card_Success",
  UI_ACTN_REMOVE_CARD_FAIL: "UI_Actn_Remove_Card_Fail",
  UI_ACTN_INITIATE_PASSWORD_PROTECTION_NUX: "UI_Actn_Initiate_Password_Protection_NUX",
  UI_ACTN_OPT_IN_PASSWORD_PROTECTION_NUX: "UI_Actn_Opt_In_Password_Protection_NUX",
  UI_ACTN_OPT_OUT_PASSWORD_PROTECTION_NUX: "UI_Actn_Opt_Out_Password_Protection_NUX",
  UI_ACTN_ENABLED_PASSWORD_PROTECTION_SETTING: "UI_Actn_Enabled_Password_Protection_Setting",
  UI_ACTN_DISABLED_PASSWORD_PROTECTION_SETTING: "UI_Actn_Disabled_Password_Protection_Setting",
  UI_ACTN_SEND_CLICKED: "UI_Actn_Send_Clicked",
  UI_ACTN_VERIFY_CSC: "UI_Actn_Verify_CSC",
  UI_ACTN_CONFIRM_AMOUNT: "UI_Actn_Confirm_Amount",
  UI_ACTN_EDIT_CARD: "UI_Actn_Edit_Card"
 };
}, null);

__d("P2PPaymentLoggerEventFlow", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  UI_FLOW_P2P_SEND: "UI_Flow_P2P_Send",
  UI_FLOW_P2P_RECEIVE: "UI_Flow_P2P_Receive",
  UI_FLOW_P2P_SETTINGS: "UI_Flow_P2P_Settings"
 };
}, null);

__d("P2PTransferParam", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  TRANSFER_ID: "transfer_id",
  STATUS: "status",
  RISK_RESULT: "risk_result"
 };
}, null);

__d("P2PTransferRiskResult", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  SUCCESS: "SUCCESS",
  UNDER_MANUAL_REVIEW: "UNDER_MANUAL_REVIEW",
  REQUIRE_VERIFICATION: "REQUIRE_VERIFICATION"
 };
}, null);

__d("P2PTransferStatus", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  PENDING_SENDER_MANUAL_REVIEW: 1,
  PENDING_SENDER_VERIFICATION: 2,
  CANCELED_SENDER_RISK: 3,
  PENDING_RECIPIENT_NUX: 4,
  CANCELED_DECLINED: 5,
  PENDING_RECIPIENT_VERIFICATION: 6,
  PENDING_RECIPIENT_MANUAL_REVIEW: 7,
  PENDING_RECIPIENT_PROCESSING: 8,
  PENDING_PUSH_FAIL: 9,
  CANCELED_RECIPIENT_RISK: 10,
  CANCELED_SYSTEM_FAIL: 11,
  CANCELED_EXPIRED: 12,
  COMPLETED: 13,
  INTERMEDIATE_PROCESSING: 14,
  PENDING_SENDER_INITED: 15,
  CANCELED_SAME_CARD: 16,
  PENDING_SENDER_VERIFICATION_PROCESSING: 17,
  PENDING_RECIPIENT_VERIFICATION_PROCESSING: 18
 };
}, null);

__d("PhotoResizeModeConst", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  CONTAIN: "s",
  COVER: "p"
 };
}, null);

__d("PUWErrorCodes", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  BAD_JPEG: 9901,
  WORKER_TERMINATED: 9902,
  UNKNOWN_RESIZE_ERROR: 9903,
  WORKER_ABORT: 9904
 };
}, null);

__d("SpotlightViewerLoggingEvents", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  LOADED: "loaded",
  LOADING: "loading",
  ERROR: "error",
  ABORT: "abort",
  OPEN_BEGIN: "open_begin",
  OPEN_COMPLETE: "open_complete",
  CLOSE_BEGIN: "close_begin",
  CLOSE_COMPLETE: "close_complete",
  PAGE_BEGIN: "page_begin",
  PAGE_COMPLETE: "page_complete",
  PHOTO_CHANGE_BEGIN: "photo_change_begin",
  PHOTO_CHANGE_COMPLETE: "photo_change_complete",
  DATA_FETCH_BEGIN: "data_fetch_begin",
  DATA_FETCH_COMPLETE: "data_fetch_complete",
  PHOTO_FETCH: "photo_fetch"
 };
}, null);

__d("StickerAssetType", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  IMAGE: "BestEffortImage",
  SPRITE: "SpriteImage",
  PADDED_SPRITE: "PaddedSpriteImage"
 };
}, null);

__d("StickerConstants", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  MOBILE_LIKE_STICKER_PACK_ID: "227877430692340",
  GRAVEYARD_PACK_ID: "604597256247273",
  LIKE_STICKER_ID: "227878347358915",
  HOT_LIKE_SMALL_STICKER_ID: "369239263222822",
  HOT_LIKE_MEDIUM_STICKER_ID: "369239343222814",
  HOT_LIKE_LARGE_STICKER_ID: "369239383222810",
  MRU_STICKER_PACK: "599061016853145",
  SEARCH_PACK_ID: "680229632032514",
  SPRITE_PADDING: "24",
  PayloadSource: {
   VIEW_ACTION: "view-action"
  },
  ActionTypes: {
   ADD_PACK: "ADD_PACK",
   REMOVE_PACK: "REMOVE_PACK",
   SELECT_PACK: "SELECT_PACK",
   RESET_NUM_NEW_PACKS: "RESET_NUM_NEW_PACKS"
  },
  EMOTICON_PACK_ID: "1471127876485636",
  DEFAULT_FRAME_RATE: 83,
  TRAY_SIZE: 64,
  THREAD_SIZE: 120
 };
}, null);

__d("StoryAttachmentStyle", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  FALLBACK: "fallback",
  SHARE: "share",
  OG_COMPOSER_SIMPLE: "og_composer_simple",
  SPORTS_MATCHUP: "sports_matchup",
  SHARE_LARGE_IMAGE: "share_large_image",
  PHOTO: "photo",
  COVER_PHOTO: "cover_photo",
  ALBUM: "album",
  NEW_ALBUM: "new_album",
  COUPON: "coupon",
  QUESTION: "question",
  ANSWER: "answer",
  OPTION: "option",
  GALLERY: "gallery",
  STREAM_PUBLISH: "stream_publish",
  MUSIC_AGGREGATION: "music_aggregation",
  ITEM_LIST: "list",
  HIGH_SCORE: "high_score",
  SCORE_LEADERBOARD: "score_leaderboard",
  FRIEND_LIST: "friend_list",
  CHECKIN: "checkin",
  POPULAR_OBJECTS: "popular_objects",
  AVATAR_LIST: "avatar_list",
  AVATAR: "avatar",
  AVATAR_WITH_VIDEO: "avatar_with_video",
  EVENT: "event",
  EXPERIENCE: "experience",
  LIFE_EVENT: "life_event",
  TRAVEL_SLIDESHOW_LIFE_EVENT: "travel_slideshow_life_event",
  GIFT: "gift",
  IMAGE_SHARE: "image_share",
  ANIMATED_IMAGE_SHARE: "animated_image_share",
  ANIMATED_IMAGE_AUTOPLAY: "animated_image_autoplay",
  NOTE: "note",
  TOPIC: "topic",
  FILE_UPLOAD: "file_upload",
  NOTIFICATION_TARGET: "notification_target",
  UNAVAILABLE: "unavailable",
  PAGE_RECOMMENDATION: "page_recommendation",
  PAGE_VIDEO_PLAYLIST: "page_video_playlist",
  VIDEO: "video",
  VIDEO_INLINE: "video_inline",
  VIDEO_AUTOPLAY: "video_autoplay",
  VIDEO_SHARE: "video_share",
  VIDEO_SHARE_HIGHLIGHTED: "video_share_highlighted",
  VIDEO_SHARE_YOUTUBE: "video_share_youtube",
  MAP: "map",
  OG_MAP: "og_map",
  PRODUCT: "product",
  EXTERNAL_PRODUCT: "external_product",
  FITNESS_COURSE: "fitness_course",
  APPLICATION: "application",
  STICKER: "sticker",
  EXTERNAL_OG_PRODUCT: "external_og_product",
  TRAVEL_LOG: "travel_log",
  MULTI_SHARE: "multi_share",
  MULTI_SHARE_NO_END_CARD: "multi_share_no_end_card",
  YEAR_IN_REVIEW: "year_in_review",
  AVATAR_LARGE_COVER: "avatar_large_cover",
  BROADCAST_REQUEST: "broadcast_request",
  COMMERCE_PRODUCT_ITEM: "commerce_product_item",
  COMMERCE_STORE: "commerce_store",
  THIRD_PARTY_PHOTO: "third_party_photo",
  PROMPT: "prompt",
  BIRTHDAY: "birthday",
  DONATIONS_CAMPAIGN: "donations_campaign",
  DONATE_PROMPT: "donate_prompt",
  DISCUSSION_CONVERSATION: "discussion_conversation",
  DISCUSSION_COMMENT: "discussion_comment",
  GROUP_SELL_PRODUCT_ITEM: "group_sell_product_item",
  GROUP_SELL_PRODUCT_ITEM_MARK_AS_SOLD: "group_sell_mark_as_sold",
  GAMETIME: "gametime",
  GROUP_REPORTED_POST_QUEUE: "group_reported_post_queue",
  GROUP_PENDING_POST_QUEUE: "group_pending_post_queue",
  GROUP_JOIN_REQUEST_QUEUE: "group_join_request_queue",
  GREETING_CARD: "greeting_card",
  LEAD_GEN: "lead_gen",
  ATTACHED_STORY: "attached_story",
  SOUVENIR: "souvenir",
  SLIDESHOW: "slideshow",
  ORION: "orion",
  ORION_REQUEST: "orion_request",
  RETAIL_ITEM: "retail_item",
  RETAIL_RECEIPT: "retail_receipt",
  INSTANT_ARTICLE: "instant_article",
  RETAIL_CANCELLATION: "retail_cancellation",
  JOIN_TOPIC_CONVERSATION: "join_topic_conversation",
  MOMENTS_APP_INVITATION: "moments_app_invitation",
  RETAIL_SHIPMENT: "retail_shipment",
  RETAIL_SHIPMENT_TRACKING_EVENT: "retail_shipment_tracking_event",
  SURVEY: "survey",
  MESSAGE_LOCATION: "message_location",
  JOB_OFFER: "job_offer",
  GROUP_ADD_MEMBERS: "group_add_memebers",
  RTC_CALL_LOG: "rtc_call_log",
  EVENT_CALENDAR: "event_calendar",
  FACEPILE: "facepile"
 };
}, null);

__d("isValidUniqueID", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 function g(h) {
  return h !== null && h !== void 0 && h !== "" && (typeof h === "string" || typeof h === "number");
 }
 e.exports = g;
}, null);

__d("SearchableEntry", [ "HTML", "isValidUniqueID", "invariant" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 function j(l) {
  switch (typeof l) {
  case "string":
   return l;

  case "object":
   var m = g.replaceJSONWrapper(l);
   if (g.isHTML(m)) {
    var n = m.getRootNode();
    return n.textContent || n.innerText || "";
   } else return "";

  default:
   return "";
  }
 }
 function k(l) {
  "use strict";
  i(h(l.uniqueID));
  i(!!l.title && typeof l.title === "string");
  this.$SearchableEntry0 = l.uniqueID + "";
  this.$SearchableEntry1 = l.title;
  this.$SearchableEntry2 = l.order || 0;
  this.$SearchableEntry3 = j(l.subtitle);
  this.$SearchableEntry4 = l.keywordString || "";
  this.$SearchableEntry5 = l.photo || "";
  this.$SearchableEntry6 = l.uri || "";
  this.$SearchableEntry7 = l.type || "";
  this.$SearchableEntry8 = l.auxiliaryData || null;
 }
 k.prototype.getUniqueID = function() {
  "use strict";
  return this.$SearchableEntry0;
 };
 k.prototype.getOrder = function() {
  "use strict";
  return this.$SearchableEntry2;
 };
 k.prototype.getTitle = function() {
  "use strict";
  return this.$SearchableEntry1;
 };
 k.prototype.getSubtitle = function() {
  "use strict";
  return this.$SearchableEntry3;
 };
 k.prototype.getKeywordString = function() {
  "use strict";
  return this.$SearchableEntry4;
 };
 k.prototype.getPhoto = function() {
  "use strict";
  return this.$SearchableEntry5;
 };
 k.prototype.getURI = function() {
  "use strict";
  return this.$SearchableEntry6;
 };
 k.prototype.getType = function() {
  "use strict";
  return this.$SearchableEntry7;
 };
 k.prototype.getAuxiliaryData = function() {
  "use strict";
  return this.$SearchableEntry8;
 };
 e.exports = k;
}, null);

__d("OrderedFriendsList", [ "AvailableListConstants", "PresenceStatus", "SearchableEntry", "ShortProfiles", "WorkModeConfig", "createArrayFromMixed", "isValidUniqueID", "InitialChatFriendsList" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m) {
 b.__markCompiled && b.__markCompiled();
 var n = [], o = [], p = {}, q = [], r = {}, s = [], t = {
  contains: function(u) {
   return u in p;
  },
  getList: function() {
   if (k.is_work_user) return l(n);
   t.reRank();
   var u = l(n);
   u = u.filter(function(v) {
    var w = j.getNowUnsafe(v);
    return !w || w.type == "friend";
   });
   return u;
  },
  getSearchableEntries: function(u, v) {
   var w = t.getList();
   j.getMulti(w.slice(0, u), function(x) {
    var y = [];
    for (var z in x) y.push(t.normalizeProfileEntry(x[z]));
    var aa = t.getGroups().map(t.normalizeThreadEntry);
    v(y.concat(aa).filter(function(ba) {
     return !!ba;
    }).sort(function(ba, ca) {
     return ba.getOrder() - ca.getOrder();
    }));
   });
  },
  normalizeProfileEntry: function(u) {
   var v = u.searchTokens || [];
   return new i({
    uniqueID: u.id,
    keywordString: v.join(" "),
    order: t.getRank(u.id),
    photo: u.thumbSrc,
    title: u.name,
    type: u.type,
    uri: u.uri,
    auxiliaryData: {
     isMessengerUser: u.is_messenger_user
    }
   });
  },
  normalizeThreadEntry: function(u, v) {
   var w = u.mercury_thread, x = u.participants_to_render, y = u.text, z = null;
   if (!y) y = w.name;
   var aa = x.map(function(ca) {
    return ca.name;
   }).join(", ");
   if (!y) {
    y = aa;
   } else z = aa;
   var ba = u.uid;
   if (!y || !m(ba)) return null;
   return new i({
    uniqueID: ba,
    order: v,
    photo: w.image_src,
    title: y,
    subtitle: z,
    type: "thread",
    auxiliaryData: {
     participantsToRender: x,
     thread: w
    }
   });
  },
  getRank: function(u) {
   return u in p ? p[u] : n.length;
  },
  getActiveList: function() {
   if (q.length > 0) return q;
   return t.getList();
  },
  getActiveRank: function(u) {
   return u in r ? r[u] : t.getRank(u);
  },
  reRank: function() {
   n = [];
   var u = 0;
   s.forEach(function(v) {
    var w = v.slice(0, -2), x = v.slice(-1);
    if (h.get(w) == x) {
     n[u] = w;
     p[w] = u++;
    }
   });
  },
  rankActive: function() {
   var u = 0;
   s.forEach(function(v) {
    var w = v.slice(0, -2), x = v.slice(-1);
    if (x == g.ACTIVE) {
     q[u] = w;
     r[w] = u++;
    }
   });
  },
  getGroups: function() {
   return o;
  }
 };
 (function() {
  var u = b("InitialChatFriendsList");
  n = u.list.length ? u.list : [];
  o = u.groups || [];
  if (!k.is_work_user) {
   s = n.slice();
   t.rankActive();
   t.reRank();
  } else n.forEach(function(v, w) {
   p[v] = w;
  });
 })();
 e.exports = a.OrderedFriendsList || t;
}, null);

__d("TokenizeUtil", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 var g = /[ ]+/g, h = /[^ ]+/g, i = new RegExp(j(), "g");
 function j() {
  return "[.,+*?$|#{}()'\\^\\-\\[\\]\\\\\\/!@%\"~=<>_:;" + "・、。〈-】〔-〟：-？！-／" + "［-｀｛-･⸮؟٪-٬؛،؍" + "﴾﴿᠁।၊။‐-‧‰-⁞" + "¡-±´-¸º»¿]";
 }
 var k = {}, l = {
  a: "а à á â ã ä å ā",
  b: "б",
  c: "ц ç č",
  d: "д ð ď đ",
  e: "э е è é ê ë ě ē",
  f: "ф",
  g: "г ğ ģ",
  h: "х ħ",
  i: "и ì í î ï ı ī",
  j: "й",
  k: "к ĸ ķ",
  l: "л ľ ĺ ŀ ł ļ",
  m: "м",
  n: "н ñ ň ŉ ŋ ņ",
  o: "о ø ö õ ô ó ò",
  p: "п",
  r: "р ř ŕ",
  s: "с ş š ſ",
  t: "т ť ŧ þ",
  u: "у ю ü û ú ù ů ū",
  v: "в",
  y: "ы ÿ ý",
  z: "з ž",
  ae: "æ",
  oe: "œ",
  ts: "ц",
  ch: "ч",
  ij: "ĳ",
  sh: "ш",
  ss: "ß",
  ya: "я"
 };
 for (var m in l) {
  var n = l[m].split(" ");
  for (var o = 0; o < n.length; o++) k[n[o]] = m;
 }
 var p = {};
 function q(w) {
  return w ? w.replace(i, " ") : "";
 }
 function r(w) {
  w = w.toLowerCase();
  var x = "", y = "";
  for (var z = w.length; z--; ) {
   y = w.charAt(z);
   x = (k[y] || y) + x;
  }
  return x.replace(g, " ");
 }
 function s(w) {
  var x = [], y = h.exec(w);
  while (y) {
   y = y[0];
   x.push(y);
   y = h.exec(w);
  }
  return x;
 }
 function t(w, x) {
  if (!p.hasOwnProperty(w)) {
   var y = r(w), z = q(y);
   p[w] = {
    value: w,
    flatValue: y,
    tokens: s(z),
    isPrefixQuery: z && z[z.length - 1] != " "
   };
  }
  if (x && typeof p[w].sortedTokens == "undefined") {
   p[w].sortedTokens = p[w].tokens.slice();
   p[w].sortedTokens.sort(function(aa, ba) {
    return ba.length - aa.length;
   });
  }
  return p[w];
 }
 function u(w, x, y) {
  var z = t(x, w == "prefix"), aa = w == "prefix" ? z.sortedTokens : z.tokens, ba = t(y).tokens, ca = {}, da = z.isPrefixQuery && w == "query" ? aa.length - 1 : null, ea = function(fa, ga) {
   for (var ha = 0; ha < ba.length; ++ha) {
    var ia = ba[ha];
    if (!ca[ha] && (ia == fa || (w == "query" && ga === da || w == "prefix") && ia.indexOf(fa) === 0)) return ca[ha] = true;
   }
   return false;
  };
  return Boolean(aa.length && aa.every(ea));
 }
 var v = {
  flatten: r,
  parse: t,
  getPunctuation: j,
  isExactMatch: u.bind(null, "exact"),
  isQueryMatch: u.bind(null, "query"),
  isPrefixMatch: u.bind(null, "prefix"),
  tokenize: s
 };
 e.exports = v;
}, null);

__d("ChatSortUsers", [ "AvailableListConstants", "OrderedFriendsList", "PresencePrivacy", "PresenceStatus", "ShortProfiles", "TokenizeUtil" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 function m(q, r) {
  var s = i.allows(q), t = i.allows(r);
  if (s !== t) return s ? -1 : 1;
  return 0;
 }
 var n = {};
 function o(q) {
  if (n[q]) return n[q];
  var r = (k.getNowUnsafe(q) || {}).name;
  if (r) return n[q] = l.flatten(r);
  return "~";
 }
 var p = {
  sortAlphabetical: function(q, r) {
   var s = o(q), t = o(r);
   if (s !== t) return s < t ? -1 : 1;
   return 0;
  },
  sortMobile: function(q, r) {
   var s = j.get(q) === g.MOBILE, t = j.get(r) === g.MOBILE;
   if (s !== t) return t ? -1 : 1;
   return p.sortAlphabetical(q, r);
  },
  sortCoefficient: function(q, r) {
   var s = h.getRank(q), t = h.getRank(r);
   if (s !== t) return s - t;
   return p.sortAlphabetical(q, r);
  },
  sort: function(q, r) {
   var s = m(q, r);
   if (s !== 0) return s;
   return p.sortCoefficient(q, r);
  }
 };
 e.exports = p;
}, null);

__d("TypingDetector", [ "ArbiterMixin", "Event", "Input", "Run", "TypingStates", "copyProperties", "createObjectFrom", "emptyFunction" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n) {
 b.__markCompiled && b.__markCompiled();
 function o(p, q) {
  this._input = p;
  this._ignoreKeys = {};
  this._getValueFn = q;
 }
 l(o.prototype, g, {
  _timeout: 7e3,
  _currentState: k.INACTIVE,
  init: function() {
   this.init = n;
   this.reset();
   this._subscription = h.listen(this._input, "keyup", this._update.bind(this));
   j.onUnload(this._onunload.bind(this));
  },
  reset: function() {
   clearTimeout(this._checkTimer);
   this._checkTimer = null;
   this._lastKeystrokeAt = null;
   this._currentState = k.INACTIVE;
  },
  setIgnoreKeys: function(p) {
   this._ignoreKeys = m(p);
  },
  destroy: function() {
   this._subscription.remove();
  },
  _onunload: function() {
   if (this._currentState == k.TYPING) this._transition(k.QUITTING);
  },
  _update: function(event) {
   var p = h.getKeyCode(event), q = this._currentState;
   if (!this._ignoreKeys[p]) {
    var r = this._getValueFn ? this._getValueFn() : i.getValue(this._input);
    if (r.trim().length === 0) {
     if (q == k.TYPING) this._transition(k.INACTIVE);
    } else if (q == k.TYPING) {
     this._recordKeystroke();
    } else if (q == k.INACTIVE) {
     this._transition(k.TYPING);
     this._recordKeystroke();
    }
   }
  },
  _transition: function(p) {
   this.reset();
   this._currentState = p;
   this.inform("change", p);
  },
  _recordKeystroke: function() {
   this._lastKeystrokeTime = Date.now();
   if (!this._checkTimer) this._checkTimer = setTimeout(this._checkTyping.bind(this), this._timeout);
  },
  _checkTyping: function() {
   var p = this._lastKeystrokeTime + this._timeout, q = Date.now();
   if (q > p) {
    this._transition(k.INACTIVE);
   } else {
    clearTimeout(this._checkTimer);
    this._checkTimer = setTimeout(this._checkTyping.bind(this), p - q + 10);
   }
  }
 });
 e.exports = o;
}, null);

__d("TypingDetectorController", [ "AsyncRequest", "AvailableList", "AvailableListConstants", "ChannelConnection", "ChatVisibility", "Keys", "TypingDetector", "TypingStates", "copyProperties", "emptyFunction", "setTimeoutAcrossTransitions", "shield" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r) {
 b.__markCompiled && b.__markCompiled();
 function s(t, u, v, w, x, y) {
  "use strict";
  this.userID = t;
  this.input = u;
  this.source = v;
  this.threadID = x;
  this.remoteState = n.INACTIVE;
  this.notifyTimer = null;
  w = w || {};
  this.notifyDelay = w.notifyDelay || this.notifyDelay;
  this._typingDetector = new m(u, y);
  this._typingDetector.init(w);
  this._typingDetector.subscribe("change", this._stateChange.bind(this));
 }
 s.prototype.setUserAndThread = function(t, u) {
  "use strict";
  if (this.userID !== t || this.threadID !== u) {
   this.resetState();
   this.userID = t;
   this.threadID = u;
  }
 };
 s.prototype.setIgnoreEnter = function(t) {
  "use strict";
  var u = t ? [ l.RETURN ] : [];
  this._typingDetector.setIgnoreKeys(u);
 };
 s.prototype.resetState = function() {
  "use strict";
  this._notifyState(n.INACTIVE);
  this.remoteState = n.INACTIVE;
  this._typingDetector.reset();
  clearTimeout(this.notifyTimer);
  this.notifyTimer = null;
 };
 s.prototype.destroy = function() {
  "use strict";
  this.resetState();
  this._typingDetector.destroy();
 };
 s.prototype._stateChange = function(t, u) {
  "use strict";
  if (u != n.QUITTING) {
   clearTimeout(this.notifyTimer);
   this.notifyTimer = q(r(this._notifyState, this, u), this.notifyDelay);
  } else this._notifyState(u, true);
 };
 s.prototype._notifyState = function(t, u) {
  "use strict";
  if (!this.userID && !this.threadID || !k.isOnline() || t === this.remoteState || j.disconnected()) return;
  this._sendRequest(t, this.userID, u);
 };
 s.prototype._sendRequest = function(t, u, v) {
  "use strict";
  this.remoteState = t;
  var w = {
   typ: t,
   to: u,
   source: this.source,
   thread: this.threadID
  };
  new g().setHandler(this._onTypResponse.bind(this, u)).setErrorHandler(p).setData(w).setURI("/ajax/messaging/typ.php").setAllowCrossPageTransition(true).setOption("asynchronous", !v).send();
 };
 s.prototype._onTypResponse = function(t, u) {
  "use strict";
  var v = u.getPayload() || {};
  if (v.offline) h.set(t, i.OFFLINE, "typing_response");
 };
 o(s.prototype, {
  notifyDelay: 1e3
 });
 e.exports = s;
}, null);

__d("AbstractSearchSource", [ "Promise" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 function h() {}
 var i = {
  bootstrap: function(j) {
   if (!this._bootstrapPromise) this._bootstrapPromise = new g(function(k) {
    this.bootstrapImpl(k);
   }.bind(this));
   return this._bootstrapPromise.then(j);
  },
  search: function(j, k, l) {
   this.searchImpl(j, k, l);
  },
  bootstrapImpl: function(j) {
   j();
  },
  searchImpl: function(j, k, l) {
   throw new Error("Abstract method #searchImpl is not implemented.");
  }
 };
 Object.assign(h.prototype, i);
 h.Mixin = i;
 e.exports = h;
}, null);

__d("SearchSourceCallbackManager", [ "createObjectFrom", "invariant" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 function i(k) {
  "use strict";
  this.$SearchSourceCallbackManager0 = k.parseFn;
  h(typeof this.$SearchSourceCallbackManager0 === "function");
  this.$SearchSourceCallbackManager1 = k.matchFn;
  h(typeof this.$SearchSourceCallbackManager1 === "function");
  this.$SearchSourceCallbackManager2 = k.alwaysPrefixMatch || false;
  this.$SearchSourceCallbackManager3 = k.indexFn || j;
  this.reset();
 }
 i.prototype.search = function(k, l, m) {
  "use strict";
  var n = this.$SearchSourceCallbackManager4(k, l, m);
  if (n) return 0;
  this.$SearchSourceCallbackManager5.push({
   queryString: k,
   callback: l,
   options: m
  });
  var o = this.$SearchSourceCallbackManager5.length - 1;
  this.$SearchSourceCallbackManager6.push(o);
  return o;
 };
 i.prototype.$SearchSourceCallbackManager4 = function(k, l, m) {
  "use strict";
  var n = this.$SearchSourceCallbackManager7(k), o = !!this.$SearchSourceCallbackManager8[k];
  if (!n.length) {
   l([], k);
   return o;
  }
  var p = n.map(function(q) {
   return this.$SearchSourceCallbackManager9[q];
  }, this);
  l(p, k);
  return o;
 };
 i.prototype.$SearchSourceCallbackManagera = function() {
  "use strict";
  var k = this.$SearchSourceCallbackManager6;
  this.$SearchSourceCallbackManager6 = [];
  k.forEach(this.$SearchSourceCallbackManagerb, this);
 };
 i.prototype.$SearchSourceCallbackManagerb = function(k) {
  "use strict";
  var l = this.$SearchSourceCallbackManager5[k];
  if (!l) return;
  var m = this.$SearchSourceCallbackManager4(l.queryString, l.callback, l.options);
  if (m) {
   delete this.$SearchSourceCallbackManager5[k];
   return;
  }
  this.$SearchSourceCallbackManager6.push(k);
 };
 i.prototype.reset = function() {
  "use strict";
  this.$SearchSourceCallbackManager9 = {};
  this.$SearchSourceCallbackManagerc = {};
  this.$SearchSourceCallbackManagerd = {};
  this.$SearchSourceCallbackManagere = {};
  this.$SearchSourceCallbackManager8 = {};
  this.$SearchSourceCallbackManager6 = [];
  this.$SearchSourceCallbackManager5 = [ void 0 ];
 };
 i.prototype.addLocalEntries = function(k) {
  "use strict";
  k.forEach(function(l) {
   var m = l.getUniqueID(), n = this.$SearchSourceCallbackManager3(l);
   this.$SearchSourceCallbackManager9[m] = l;
   this.$SearchSourceCallbackManagerc[m] = n;
   var o = this.$SearchSourceCallbackManager0(n);
   o.tokens.forEach(function(p) {
    if (!this.$SearchSourceCallbackManagerd.hasOwnProperty(p)) this.$SearchSourceCallbackManagerd[p] = {};
    this.$SearchSourceCallbackManagerd[p][m] = true;
   }, this);
  }, this);
  this.$SearchSourceCallbackManagera();
 };
 i.prototype.addQueryEntries = function(k, l) {
  "use strict";
  var m = this.$SearchSourceCallbackManager7(l), n = this.$SearchSourceCallbackManager0(l).flatValue;
  this.$SearchSourceCallbackManagere[n] = g(m, true);
  k.forEach(function(o) {
   var p = o.getUniqueID();
   this.$SearchSourceCallbackManager9[p] = o;
   this.$SearchSourceCallbackManagerc[p] = this.$SearchSourceCallbackManager3(o);
   this.$SearchSourceCallbackManagere[n][p] = true;
  }, this);
  this.$SearchSourceCallbackManagera();
 };
 i.prototype.unsubscribe = function(k) {
  "use strict";
  delete this.$SearchSourceCallbackManager5[k];
 };
 i.prototype.removeEntry = function(k) {
  "use strict";
  delete this.$SearchSourceCallbackManager9[k];
 };
 i.prototype.getAllEntriesMap = function() {
  "use strict";
  return this.$SearchSourceCallbackManager9;
 };
 i.prototype.setQueryStringAsExhausted = function(k) {
  "use strict";
  this.$SearchSourceCallbackManager8[k] = true;
 };
 i.prototype.unsetQueryStringAsExhausted = function(k) {
  "use strict";
  delete this.$SearchSourceCallbackManager8[k];
 };
 i.prototype.$SearchSourceCallbackManager7 = function(k) {
  "use strict";
  var l = this.$SearchSourceCallbackManagerf(k, this.$SearchSourceCallbackManagerg(k)), m = this.$SearchSourceCallbackManagerf(k, this.$SearchSourceCallbackManagerh(k)), n = l.concat(m), o = {}, p = [];
  n.forEach(function(q) {
   if (!o[q] && this.$SearchSourceCallbackManager9[q] !== void 0) {
    p.push(q);
    o[q] = true;
   }
  }, this);
  return p;
 };
 i.prototype.$SearchSourceCallbackManagerf = function(k, l) {
  "use strict";
  var m = this.$SearchSourceCallbackManageri(k, l), n = this.$SearchSourceCallbackManager9;
  function o(p, q) {
   if (m[p] !== m[q]) return m[p] ? -1 : 1;
   var r = n[p], s = n[q];
   if (r.getOrder() !== s.getOrder()) return r.getOrder() - s.getOrder();
   var t = r.getTitle().length, u = s.getTitle().length;
   if (t !== u) return t - u;
   return r.getUniqueID() - s.getUniqueID();
  }
  return l.sort(o).slice();
 };
 i.prototype.$SearchSourceCallbackManageri = function(k, l) {
  "use strict";
  var m = {};
  l.forEach(function(n) {
   m[n] = this.$SearchSourceCallbackManager1(k, this.$SearchSourceCallbackManagerc[n]);
  }, this);
  return m;
 };
 i.prototype.$SearchSourceCallbackManagerg = function(k) {
  "use strict";
  var l = this.$SearchSourceCallbackManager0(k, this.$SearchSourceCallbackManager2), m = this.$SearchSourceCallbackManager2 ? l.sortedTokens : l.tokens, n = m.length, o = l.isPrefixQuery ? n - 1 : null, p = {}, q = {}, r = {}, s = false, t = {}, u = 0;
  m.forEach(function(w, x) {
   if (t.hasOwnProperty(w)) return;
   u++;
   t[w] = true;
   for (var y in this.$SearchSourceCallbackManagerd) {
    var z = y === w && !p.hasOwnProperty(y), aa = false;
    if (!z) aa = (this.$SearchSourceCallbackManager2 || o === x) && y.indexOf(w) === 0;
    if (!z && !aa) continue;
    if (y === w) {
     if (q.hasOwnProperty(y)) s = true;
     p[y] = true;
    } else {
     if (p.hasOwnProperty(y) || q.hasOwnProperty(y)) s = true;
     q[y] = true;
    }
    for (var ba in this.$SearchSourceCallbackManagerd[y]) if (x === 0 || r.hasOwnProperty(ba) && r[ba] == u - 1) r[ba] = u;
   }
  }, this);
  var v = Object.keys(r).filter(function(w) {
   return r[w] == u;
  });
  if (s || u < n) v = this.$SearchSourceCallbackManagerj(k, v);
  return v;
 };
 i.prototype.$SearchSourceCallbackManagerh = function(k) {
  "use strict";
  var l = this.$SearchSourceCallbackManager0(k).flatValue, m = this.$SearchSourceCallbackManagerk(l);
  if (this.$SearchSourceCallbackManagere.hasOwnProperty(l)) return m;
  return this.$SearchSourceCallbackManagerj(k, m);
 };
 i.prototype.$SearchSourceCallbackManagerk = function(k) {
  "use strict";
  var l = 0, m = null, n = this.$SearchSourceCallbackManagere;
  Object.keys(n).forEach(function(o) {
   if (k.indexOf(o) === 0 && o.length > l) {
    l = o.length;
    m = o;
   }
  });
  return n.hasOwnProperty(m) ? Object.keys(n[m]) : [];
 };
 i.prototype.$SearchSourceCallbackManagerj = function(k, l) {
  "use strict";
  return l.filter(function(m) {
   return this.$SearchSourceCallbackManager1(k, this.$SearchSourceCallbackManagerc[m]);
  }, this);
 };
 function j(k) {
  return [ k.getTitle(), k.getKeywordString() ].join(" ");
 }
 e.exports = i;
}, null);

__d("ChatMiniSidebarSearchSource", [ "AbstractSearchSource", "AsyncRequest", "ChatSortUsers", "CurrentUser", "MercuryParticipantTypes", "OrderedFriendsList", "SearchableEntry", "SearchSourceCallbackManager", "ShortProfiles", "TokenizeUtil", "copyProperties", "emptyFunction", "isValidUniqueID" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 for (var t in g) if (g.hasOwnProperty(t)) v[t] = g[t];
 var u = g === null ? null : g.prototype;
 v.prototype = Object.create(u);
 v.prototype.constructor = v;
 v.__superConstructor__ = g;
 function v(w) {
  this.$ChatMiniSidebarSearchSource0 = new n({
   parseFn: p.parse,
   matchFn: p.isQueryMatch,
   indexFn: w.indexFn
  });
  this.$ChatMiniSidebarSearchSource1 = [];
  this.$ChatMiniSidebarSearchSource2 = w.queryRequests || [];
  this.$ChatMiniSidebarSearchSource3 = false;
 }
 v.prototype.bootstrapImpl = function(w) {
  o.fetchAll().then(function() {
   this.$ChatMiniSidebarSearchSource3 = true;
   this.$ChatMiniSidebarSearchSource4();
   w();
  }.bind(this));
 };
 v.prototype.searchImpl = function(w, x, y) {
  var z = null, aa = {}, ba = y && y.onQueryFinished, ca = y && y.onQueryStarted;
  ca && ca(w);
  var da = this.$ChatMiniSidebarSearchSource0.search(w, function(ga) {
   if (!z) {
    z = ga;
    z.forEach(function(ha) {
     return aa[ha.getUniqueID()] = true;
    });
   } else ga.forEach(function(ha) {
    var ia = ha.getUniqueID();
    if (!aa[ia]) {
     z.push(ha);
     aa[ia] = true;
    }
   });
   x(z, w);
   if (w.length === 1 && this.$ChatMiniSidebarSearchSource3) ba && ba(w);
  }.bind(this), y);
  if (!da || !this.$ChatMiniSidebarSearchSource2 || !this.$ChatMiniSidebarSearchSource2.length || w.length === 0) {
   ba && ba(w);
   return;
  }
  if (w.length === 1) {
   if (this.$ChatMiniSidebarSearchSource3) ba && ba(w);
   return;
  }
  var ea = {
   value: w,
   existing_ids: z && z.map(function(ga) {
    return ga.getUniqueID();
   }).join(","),
   needs_friends: !this.$ChatMiniSidebarSearchSource3,
   limit: y.threadLimit
  }, fa = this.$ChatMiniSidebarSearchSource2.length;
  this.$ChatMiniSidebarSearchSource2.forEach(function(ga) {
   this.$ChatMiniSidebarSearchSource5(ea, ga, function(ha) {
    this.$ChatMiniSidebarSearchSource6(this.$ChatMiniSidebarSearchSource7(this.$ChatMiniSidebarSearchSource8(ha)), w);
    fa--;
    if (fa === 0) {
     this.$ChatMiniSidebarSearchSource0.setQueryStringAsExhausted(w);
     ba && ba(w);
    }
   }.bind(this));
  }.bind(this), this);
 };
 v.prototype.getBootstrappedEntries = function(w) {
  return this.bootstrap(function() {
   return w(this.$ChatMiniSidebarSearchSource1 || []);
  }.bind(this));
 };
 v.prototype.getAllEntriesMap = function() {
  return this.$ChatMiniSidebarSearchSource0.getAllEntries();
 };
 v.prototype.$ChatMiniSidebarSearchSource4 = function() {
  var w = o.getCachedProfileIDs(), x = w.filter(function(z) {
   var aa = o.getNow(z);
   return z == j.getID() || aa.type === k.FRIEND;
  });
  x.sort(i.sort);
  var y = x.map(this.$ChatMiniSidebarSearchSource9);
  this.$ChatMiniSidebarSearchSource0.addLocalEntries(y);
  if (y.length) this.$ChatMiniSidebarSearchSource1 = this.$ChatMiniSidebarSearchSource1.concat(y);
 };
 v.prototype.$ChatMiniSidebarSearchSource7 = function(w) {
  return w.map(this.$ChatMiniSidebarSearchSourcea, this);
 };
 v.prototype.$ChatMiniSidebarSearchSourcea = function(w, x) {
  if (w.mercury_thread) return l.normalizeThreadEntry(w, x);
  var y = w.text, z = w.uid;
  if (!y || !s(z)) return null;
  return new m({
   uniqueID: z,
   title: y,
   order: l.getActiveRank(z),
   subtitle: w.subtext,
   type: w.render_type || w.type,
   photo: w.photo,
   uri: w.path,
   auxiliaryData: {
    isMessengerUser: w.is_messenger_user
   }
  });
 };
 v.prototype.$ChatMiniSidebarSearchSource8 = function(w) {
  var x = w.getPayload();
  if (Array.isArray(x)) {
   return x;
  } else if (x && x.entries) {
   return x.entries;
  } else return [];
 };
 v.prototype.$ChatMiniSidebarSearchSource9 = function(w, x) {
  var y = o.getNow(w), z = w == j.getID() ? k.FRIEND : y.type, aa = [ y.additionalName, y.alternateName ].concat(y.searchTokens || []).join(" ");
  return new m({
   uniqueID: w,
   title: y.name,
   order: x,
   subtitle: y.additionalName,
   keywordString: aa,
   type: z,
   photo: y.thumbSrc,
   uri: y.uri,
   auxiliaryData: {
    isMessengerUser: y.is_messenger_user
   }
  });
 };
 v.prototype.$ChatMiniSidebarSearchSource5 = function(w, x, y, z) {
  new h(x.uri).setData(q({}, w, x.data)).setMethod("GET").setReadOnly(true).setHandler(y).setErrorHandler(z || r).setAllowCrossPageTransition(true).send();
 };
 v.prototype.$ChatMiniSidebarSearchSource6 = function(w, x) {
  if (w.length) this.$ChatMiniSidebarSearchSource0.addQueryEntries(w, x);
 };
 v.prototype.addLocalEntries = function(w) {
  this.$ChatMiniSidebarSearchSource0.addLocalEntries(w);
 };
 v.prototype.refreshData = function() {
  o.fetchAll();
  d([ "AvailableList" ], function(w) {
   return w.update();
  });
 };
 e.exports = v;
}, null);

__d("ChatTypeaheadConstants", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 var g = {
  USER_TYPE: "user",
  THREAD_TYPE: "thread",
  FRIEND_TYPE: "friend",
  NON_FRIEND_TYPE: "non_friend",
  FB4C_TYPE: "fb4c",
  PAGE_TYPE: "page",
  HEADER_TYPE: "header"
 };
 e.exports = g;
}, null);

__d("CenteredContainer.react", [ "React", "cx" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 var i = g, j = i.PropTypes, k = g.createClass({
  displayName: "CenteredContainer",
  propTypes: {
   vertical: j.bool,
   horizontal: j.bool
  },
  getDefaultProps: function() {
   return {
    vertical: false,
    horizontal: true
   };
  },
  render: function() {
   var l = (this.props.vertical ? "_3bwv" : "") + (this.props.horizontal ? " " + "_3bww" : ""), m = g.Children.map(this.props.children, function(n) {
    return g.createElement("div", {
     className: "_3bwx"
    }, n);
   });
   return g.createElement("div", g.__spread({}, this.props), g.createElement("div", {
    className: l
   }, g.createElement("div", {
    className: "_3bwy"
   }, m)));
  }
 });
 e.exports = k;
}, null);

__d("getDOMImageSize", [ "URI" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 function h(m) {
  m.onload = null;
  m.onerror = null;
  m.onreadystatechange = null;
  m._callback = null;
  m._thisObj = null;
  m._srcStr = null;
  m.parentNode && m.parentNode.removeChild(m);
 }
 function i() {
  var m = this;
  if (m._callback) m._callback.call(m._thisObj, m.naturalWidth || m.width, m.naturalHeight || m.height, m._srcStr);
  h(m);
 }
 function j() {
  var m = this;
  if (m.readyState === "complete") i.call(m);
 }
 function k() {
  var m = this;
  if (m._callback) m._callback.call(m._thisObj, 0, 0, m._srcStr);
  h(m);
 }
 function l(m, n, o) {
  o = o || null;
  if (!m) {
   n.call(o, 0, 0, "");
   return;
  }
  var p = document.body;
  if (!p) {
   setTimeout(l.bind(this, m, n, o), 500);
   return;
  }
  var q;
  if (typeof m === "string") {
   q = m;
  } else if (typeof m === "object") if (typeof m.width === "number" && typeof m.height === "number") {
   if (typeof m.src === "string") {
    q = m.src;
    if (m.naturalWidth && m.naturalHeight) {
     n.call(o, m.naturalWidth, m.naturalHeight, q);
     return;
    }
   }
   if (typeof m.uri === "string") {
    q = m.uri;
    if (m.width && m.height) {
     n.call(o, m.width, m.height, q);
     return;
    }
   }
  } else if (m instanceof g) q = m.toString();
  if (!q) {
   n(0, 0, m);
   return;
  }
  var r = document.createElement("img");
  r.onreadystatechange = j;
  r.onload = i;
  r.onerror = k;
  r._callback = n;
  r._thisObj = o;
  r._srcStr = q;
  r.src = q;
  r.style.cssText = "position:absolute;left:0;top:0;width:auto;height:auto;clip:rect(0 0 0 0);";
  p.insertBefore(r, p.firstChild);
 }
 e.exports = l;
}, null);

__d("CachedDOMImageSizePool", [ "debounce", "getDOMImageSize" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 function i(j, k) {
  "use strict";
  this.$CachedDOMImageSizePool0 = {};
  this.$CachedDOMImageSizePool1 = k;
  this.$CachedDOMImageSizePool2 = 0;
  this.$CachedDOMImageSizePool3 = j;
  this.$CachedDOMImageSizePool4 = g(this.$CachedDOMImageSizePool5, 5e3, this);
  this.$CachedDOMImageSizePool6 = {};
  this.$CachedDOMImageSizePool7 = {};
 }
 i.prototype.get = function(j, k, l) {
  "use strict";
  if (!j) {
   k.call(l, 0, 0, j);
   return;
  }
  var m = this.$CachedDOMImageSizePool0[j];
  if (m) {
   m.lastAccessTime = Date.now();
   k.call(l, m.width, m.height, m.src);
  } else if (this.$CachedDOMImageSizePool6[j]) {
   this.$CachedDOMImageSizePool6[j].push(k);
   this.$CachedDOMImageSizePool7[j].push(l);
  } else {
   this.$CachedDOMImageSizePool6[j] = [ k ];
   this.$CachedDOMImageSizePool7[j] = [ l ];
   h(j, this.$CachedDOMImageSizePool8, this);
  }
 };
 i.prototype.set = function(j, k, l) {
  "use strict";
  if (this.$CachedDOMImageSizePool2 > this.$CachedDOMImageSizePool3) this.$CachedDOMImageSizePool4();
  var m = this.$CachedDOMImageSizePool0;
  if (j && !m[j]) {
   var n = {
    width: k,
    height: l,
    src: j,
    lastAccessTime: Date.now()
   };
   m[j] = n;
   this.$CachedDOMImageSizePool2++;
  }
 };
 i.prototype.$CachedDOMImageSizePool8 = function(j, k, l) {
  "use strict";
  this.set(l, j, k);
  var m = this.$CachedDOMImageSizePool6[l], n = this.$CachedDOMImageSizePool7[l];
  for (var o = 0, p = m.length; o < p; o++) m[o].call(n[o], j, k, l);
  delete this.$CachedDOMImageSizePool6[l];
  delete this.$CachedDOMImageSizePool7[l];
 };
 i.prototype.$CachedDOMImageSizePool5 = function() {
  "use strict";
  var j = Date.now(), k = this.$CachedDOMImageSizePool0, l = this.$CachedDOMImageSizePool2, m = this.$CachedDOMImageSizePool1;
  for (var n in k) {
   var o = k[n];
   if (j - o.lastAccessTime > m) {
    delete k[n];
    l--;
   }
  }
  this.$CachedDOMImageSizePool2 = l;
 };
 e.exports = i;
}, null);

__d("BackgroundImage.react", [ "CachedDOMImageSizePool", "React", "XUISpinner.react", "cx", "invariant", "joinClasses" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 var m = h, n = m.PropTypes, o = "(-?(\\d+\\.)?\\d+(px|\\%))", p = new RegExp("^" + o + "?(\\s" + o + ")?$", "g"), q = new g(50, 10 * 60 * 1e3), r = h.createClass({
  displayName: "BackgroundImage",
  propTypes: {
   src: n.string,
   width: n.number.isRequired,
   height: n.number.isRequired,
   backgroundSize: n.oneOf([ "contain", "cover", "containinside", "coverinside" ]),
   loadingIndicatorStyle: n.oneOf([ "none", "large", "small" ]),
   backgroundPosition: function(s, t, u) {
    var v = s[t];
    if (v) {
     k(typeof v === "string");
     k(v.match(p));
    }
   },
   onImageLoad: n.func,
   optimizeResizeSpeed: n.bool,
   onContextMenu: n.func
  },
  getInitialState: function() {
   return {
    imageWidth: null,
    imageHeight: null,
    imageSrc: this.props.src,
    loading: true
   };
  },
  getDefaultProps: function() {
   return {
    optimizeResizeSpeed: false,
    loadingIndicatorStyle: "none"
   };
  },
  componentDidMount: function() {
   this._resolveImageSize();
  },
  componentDidUpdate: function(s) {
   if (this.props.src !== this.state.imageSrc) this.setState({
    imageWidth: 0,
    imageHeight: 0,
    imageSrc: this.props.src,
    loading: true
   }, this._resolveImageSize);
  },
  _resolveImageSize: function() {
   var s = this.state.imageSrc;
   if (s) q.get(s, this._onImageSizeResolved, this);
  },
  render: function() {
   var s = {
    width: this.props.width + "px",
    height: this.props.height + "px"
   }, t = l(this.props.className, "_5f0d");
   return h.createElement("div", h.__spread({}, this.props, {
    className: l(this.props.className, t),
    style: Object.assign({}, this.props.style || {}, s),
    onContextMenu: this.props.onContextMenu
   }), this._renderImage(), this._renderContent(), this._renderLoadingIndicator());
  },
  _renderLoadingIndicator: function() {
   if (!this.state.loading || this.props.loadingIndicatorStyle === "none") return null;
   return h.createElement("div", {
    className: "_1qe- _5lar"
   }, h.createElement("div", {
    className: "_1qe_"
   }, h.createElement("div", {
    className: "_1qf0"
   }, h.createElement(i, {
    size: this.props.loadingIndicatorStyle
   }))));
  },
  _renderContent: function() {
   if (this.props.children) return h.createElement("div", {
    className: "_1qe-"
   }, h.createElement("div", {
    className: "_1qe_"
   }, h.createElement("div", {
    className: "_1qf0"
   }, this.props.children)));
  },
  _renderImage: function() {
   if (!this.state.imageWidth || !this.state.imageHeight) return;
   var s = this.props.width, t = this.props.height, u, v;
   switch (this.props.backgroundSize) {
   case "cover":
    u = "cover";
    v = false;
    break;

   case "coverinside":
    u = "cover";
    v = true;
    break;

   case "contain":
    u = "contain";
    v = false;
    break;

   case "containinside":
    u = "contain";
    v = true;
   }
   var w = this.state.imageWidth, x = this.state.imageHeight, y = s / t, z = w / x;
   if (u === "contain") if ((w > s || !v) && z >= y) {
    w = s;
    x = w / z;
   } else if (x > t || !v) {
    x = t;
    w = x * z;
   }
   if (u === "cover") if ((w > s || !v) && z >= y) {
    x = t;
    w = x * z;
   } else if (x > t || !v) {
    w = s;
    x = w / z;
   }
   var aa = this._getImageStyle(w, x);
   return h.createElement("img", {
    alt: "",
    className: "_5i4g" + (this.props.optimizeResizeSpeed ? " " + "_5sjv" : ""),
    style: aa,
    src: this.state.imageSrc
   });
  },
  _getImageStyle: function(s, t) {
   var u;
   if (this.props.backgroundPosition) {
    u = this.props.backgroundPosition.split(" ");
   } else u = [ "50%", "50%" ];
   return {
    width: Math.round(s) + "px",
    height: Math.round(t) + "px",
    left: this._getBackgroundPositionPxValue("left", u[0], s, t),
    top: this._getBackgroundPositionPxValue("top", u[1] || u[0], s, t)
   };
  },
  _getBackgroundPositionPxValue: function(s, t, u, v) {
   var w = parseFloat(t), x = t.substr(w.toString().length);
   if (x === "px") return t;
   if (s === "left") {
    return Math.round((this.props.width - u) * (w / 100)) + "px";
   } else return Math.round((this.props.height - v) * (w / 100)) + "px";
  },
  _onImageSizeResolved: function(s, t, u) {
   if (!this.isMounted() || this.state.imageSrc !== u) return;
   var v = this.props.onImageLoad ? this.props.onImageLoad.bind(null, s, t) : null;
   this.setState({
    imageWidth: s,
    imageHeight: t,
    loading: false
   }, v);
  }
 });
 e.exports = r;
}, null);

__d("SplitImage.react", [ "React", "Image.react", "cx", "joinClasses" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 var k = g.createClass({
  displayName: "SplitImage",
  render: function() {
   var l = this.props.size;
   return g.createElement("div", g.__spread({}, this.props, {
    className: j(this.props.className, "_55lt"),
    style: Object.assign({}, this.props.style || {}, {
     width: l,
     height: l
    })
   }), this.renderImages());
  },
  renderImages: function() {
   if (!this.props.srcs) return null;
   var l = this.props.srcs, m = Array.isArray(l);
   if (!m || l.length == 1) return this.renderOne(m ? l[0] : l);
   return l.length == 2 ? this.renderTwo(l) : this.renderThree(l);
  },
  renderOne: function(l) {
   return g.createElement(h, {
    src: l,
    width: this.props.size,
    height: this.props.size,
    alt: ""
   });
  },
  renderTwo: function(l) {
   var m = this.props.size, n = Math.floor(m / 2), o = -Math.floor(n / 2), p = "_55lu" + (this.props.border ? " " + "_57xo" : "");
   return g.createElement("div", null, g.createElement("div", {
    className: "_55lu",
    style: {
     width: n
    }
   }, g.createElement(h, {
    src: l[0],
    width: m,
    height: m,
    style: {
     marginLeft: o
    }
   })), g.createElement("div", {
    className: p,
    style: {
     width: n
    }
   }, g.createElement(h, {
    src: l[1],
    width: m,
    height: m,
    style: {
     marginLeft: o
    }
   })));
  },
  renderThree: function(l) {
   var m = this.props.size, n = Math.floor(m / 3 * 2), o = -Math.floor((m - n) / 2), p = Math.floor(m / 2), q = m - n, r = -Math.floor((p - q) / 2), s = "_55lu" + (this.props.border ? " " + "_57pl" : ""), t = "_55lu" + (this.props.border ? " " + "_57pm" : "");
   return g.createElement("div", null, g.createElement("div", {
    className: s,
    style: {
     width: n
    }
   }, g.createElement(h, {
    src: l[0],
    width: m,
    height: m,
    style: {
     marginLeft: o
    }
   })), g.createElement("div", {
    className: t,
    style: {
     width: q,
     height: p
    }
   }, g.createElement(h, {
    src: l[1],
    width: p,
    height: p,
    style: {
     marginLeft: r
    }
   })), g.createElement("div", {
    className: "_55lu",
    style: {
     width: q,
     height: p
    }
   }, g.createElement(h, {
    src: l[2],
    width: p,
    height: p,
    style: {
     marginLeft: r
    }
   })));
  }
 });
 e.exports = k;
}, null);

__d("EmoticonsList", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  emotes: {
   ":)": "smile",
   ":-)": "smile",
   ":]": "smile",
   "=)": "smile",
   "(:": "smile",
   "(=": "smile",
   ":(": "frown",
   ":-(": "frown",
   ":[": "frown",
   "=(": "frown",
   ")=": "frown",
   ":poop:": "poop",
   ":putnam:": "putnam",
   ":P": "tongue",
   ":-P": "tongue",
   ":-p": "tongue",
   ":p": "tongue",
   "=P": "tongue",
   "=D": "grin",
   ":-D": "grin",
   ":D": "grin",
   ":o": "gasp",
   ":-O": "gasp",
   ":O": "gasp",
   ":-o": "gasp",
   ";)": "wink",
   ";-)": "wink",
   "8-)": "glasses",
   "B-)": "glasses",
   "B|": "sunglasses",
   "8-|": "sunglasses",
   "8|": "sunglasses",
   "B-|": "sunglasses",
   ">:(": "grumpy",
   ">:-(": "grumpy",
   ":/": "unsure",
   ":-/": "unsure",
   ":\\": "unsure",
   ":-\\": "unsure",
   "=/": "unsure",
   "=\\": "unsure",
   ":'(": "cry",
   "3:)": "devil",
   "3:-)": "devil",
   "O:)": "angel",
   "O:-)": "angel",
   ":*": "kiss",
   ":-*": "kiss",
   "<3": "heart",
   "&lt;3": "heart",
   "♥": "heart",
   "^_^": "kiki",
   "-_-": "squint",
   "o.O": "confused",
   "O.o": "confused_rev",
   ">:o": "upset",
   ">:O": "upset",
   ">:-O": "upset",
   ">:-o": "upset",
   ">_<": "upset",
   ">.<": "upset",
   ":v": "pacman",
   ":|]": "robot",
   ":3": "colonthree",
   '<(")': "penguin",
   "(^^^)": "shark",
   "(y)": "like",
   ":like:": "like",
   "(Y)": "like"
  },
  symbols: {
   smile: ":)",
   frown: ":(",
   poop: ":poop:",
   putnam: ":putnam:",
   tongue: ":P",
   grin: "=D",
   gasp: ":o",
   wink: ";)",
   glasses: "8-)",
   sunglasses: "B|",
   grumpy: ">:(",
   unsure: ":/",
   cry: ":'(",
   devil: "3:)",
   angel: "O:)",
   kiss: ":*",
   heart: "<3",
   kiki: "^_^",
   squint: "-_-",
   confused: "o.O",
   confused_rev: "O.o",
   upset: ">:o",
   pacman: ":v",
   robot: ":|]",
   colonthree: ":3",
   penguin: '<(")',
   shark: "(^^^)",
   like: "(y)"
  },
  regexp: /(^|[\s'".])(:\)(?!\))|:\-\)(?!\))|:\]|=\)(?!\))|\(:|\(=|:\(|:\-\(|:\[|=\(|\)=|:poop:|:putnam:|:P|:\-P|:\-p|:p|=P|=D|:\-D|:D|:o|:\-O|:O|:\-o|;\)(?!\))|;\-\)(?!\))|8\-\)(?!\))|B\-\)(?!\))|B\||8\-\||8\||B\-\||>:\(|>:\-\(|:\/|:\-\/|:\\|:\-\\|=\/|=\\|:'\(|3:\)(?!\))|3:\-\)(?!\))|O:\)(?!\))|O:\-\)(?!\))|:\*|:\-\*|<3|&lt;3|\u2665|\^_\^|\-_\-|o\.O|O\.o|>:o|>:O|>:\-O|>:\-o|>_<|>\.<|:v|:\|\]|:3|<\("\)(?!\))|\(\^\^\^\)(?!\))|\(y\)(?!\))|:like:|\(Y\)(?!\)))([\s'".,!?]|<br>|$)/,
  noncapturingRegexp: /(?:^|[\s'".])(:\)(?!\))|:\-\)(?!\))|:\]|=\)(?!\))|\(:|\(=|:\(|:\-\(|:\[|=\(|\)=|:poop:|:putnam:|:P|:\-P|:\-p|:p|=P|=D|:\-D|:D|:o|:\-O|:O|:\-o|;\)(?!\))|;\-\)(?!\))|8\-\)(?!\))|B\-\)(?!\))|B\||8\-\||8\||B\-\||>:\(|>:\-\(|:\/|:\-\/|:\\|:\-\\|=\/|=\\|:'\(|3:\)(?!\))|3:\-\)(?!\))|O:\)(?!\))|O:\-\)(?!\))|:\*|:\-\*|<3|&lt;3|\u2665|\^_\^|\-_\-|o\.O|O\.o|>:o|>:O|>:\-O|>:\-o|>_<|>\.<|:v|:\|\]|:3|<\("\)(?!\))|\(\^\^\^\)(?!\))|\(y\)(?!\))|:like:|\(Y\)(?!\)))(?:[\s'".,!?]|<br>|$)/
 };
}, null);

__d("Utf16", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 var g = {
  decode: function(h) {
   switch (h.length) {
   case 1:
    return h.charCodeAt(0);

   case 2:
    return 65536 | (h.charCodeAt(0) - 55296) * 1024 | h.charCodeAt(1) - 56320;
   }
  },
  encode: function(h) {
   if (h < 65536) {
    return String.fromCharCode(h);
   } else return String.fromCharCode(55296 + (h - 65536 >> 10)) + String.fromCharCode(56320 + h % 1024);
  }
 };
 e.exports = g;
}, null);

__d("SupportedEmoji", [ "cx", "Utf16" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 var i = new RegExp("([‼⁉℀-⇿⌀-⟿" + "⤀-⧿⬀-⯿　-ヿ㈀-㋿]|" + "�[�-�]|�[�-�])([︀-️])?"), j = {
  126980: "_4_o0",
  127378: "_4_o1",
  127385: "_4_o2",
  127386: "_4_o3",
  127489: "_4_o4",
  127490: "_4_o5",
  127514: "_4_o6",
  127535: "_4_o7",
  127539: "_4_o8",
  127541: "_4_o9",
  127542: "_4_oa",
  127543: "_4_ob",
  127544: "_4_oc",
  127545: "_4_od",
  127546: "_4_oe",
  127568: "_4_of",
  127744: "_2b_",
  127746: "_2c0",
  127747: "_4_og",
  127748: "_4_oh",
  127749: "_4_oi",
  127750: "_4_oj",
  127751: "_4_ok",
  127752: "_4_ol",
  127754: "_2c1",
  127769: "_2c2",
  127775: "_2c3",
  127793: "_2c4",
  127796: "_2c5",
  127797: "_2c6",
  127799: "_2c7",
  127800: "_2c8",
  127801: "_2c9",
  127802: "_2ca",
  127803: "_2cb",
  127806: "_2cc",
  127808: "_2cd",
  127809: "_2ce",
  127810: "_2cf",
  127811: "_2cg",
  127813: "_4_om",
  127814: "_4_on",
  127817: "_4_oo",
  127818: "_2ch",
  127822: "_2ci",
  127827: "_2cj",
  127828: "_2ck",
  127832: "_4_op",
  127833: "_4_oq",
  127834: "_4_or",
  127835: "_4_os",
  127836: "_4_ot",
  127837: "_4_ou",
  127838: "_4_ov",
  127839: "_4_ow",
  127841: "_4_ox",
  127842: "_4_oy",
  127843: "_4_oz",
  127846: "_4_o-",
  127847: "_4_o_",
  127856: "_4_p0",
  127857: "_4_p1",
  127858: "_4_p2",
  127859: "_4_p3",
  127860: "_4_p4",
  127861: "_4_p5",
  127862: "_4_p6",
  127864: "_2cl",
  127866: "_2cm",
  127867: "_4_p7",
  127872: "_4_p8",
  127873: "_2cn",
  127875: "_2co",
  127876: "_2cp",
  127877: "_2cq",
  127880: "_2cr",
  127881: "_2cs",
  127884: "_4_p9",
  127885: "_2ct",
  127886: "_2cu",
  127887: "_2cv",
  127888: "_2cw",
  127890: "_4_pa",
  127891: "_2cx",
  127905: "_4_pb",
  127906: "_4_pc",
  127908: "_4_pd",
  127909: "_4_pe",
  127910: "_4_pf",
  127911: "_4_pg",
  127912: "_4_ph",
  127913: "_4_pi",
  127915: "_4_pj",
  127916: "_4_pk",
  127917: "_4_pl",
  127919: "_4_pm",
  127921: "_4_pn",
  127925: "_2cy",
  127926: "_2cz",
  127927: "_4_po",
  127928: "_4_pp",
  127930: "_4_pq",
  127932: "_2c-",
  127934: "_4_pr",
  127935: "_4_ps",
  127936: "_4_pt",
  127937: "_4_pu",
  127942: "_4_pv",
  127944: "_4_pw",
  127968: "_4_px",
  127969: "_4_py",
  127970: "_4_pz",
  127971: "_4_p-",
  127973: "_4_p_",
  127974: "_4_q0",
  127975: "_4_q1",
  127976: "_4_q2",
  127977: "_4_q3",
  127978: "_4_q4",
  127979: "_4_q5",
  127980: "_4_q6",
  127981: "_4_q7",
  127983: "_4_q8",
  127984: "_4_q9",
  128013: "_2c_",
  128014: "_2d0",
  128017: "_2d1",
  128018: "_2d2",
  128020: "_2d3",
  128023: "_2d4",
  128024: "_2d5",
  128025: "_2d6",
  128026: "_2d7",
  128027: "_2d8",
  128031: "_2d9",
  128032: "_2da",
  128033: "_2db",
  128037: "_2dc",
  128038: "_2dd",
  128039: "_2de",
  128040: "_2df",
  128041: "_2dg",
  128043: "_2dh",
  128044: "_2di",
  128045: "_2dj",
  128046: "_2dk",
  128047: "_2dl",
  128048: "_2dm",
  128049: "_2dn",
  128051: "_2do",
  128052: "_2dp",
  128053: "_2dq",
  128054: "_491",
  128055: "_2dr",
  128056: "_2ds",
  128057: "_2dt",
  128058: "_2du",
  128059: "_2dv",
  128062: "_2dw",
  128064: "_2dx",
  128066: "_2dy",
  128067: "_2dz",
  128068: "_2d-",
  128069: "_2d_",
  128070: "_2e0",
  128071: "_2e1",
  128072: "_2e2",
  128073: "_2e3",
  128074: "_2e4",
  128075: "_2e5",
  128076: "_2e6",
  128077: "_2e7",
  128078: "_2e8",
  128079: "_2e9",
  128080: "_2ea",
  128081: "_4_qa",
  128082: "_4_qb",
  128084: "_4_qc",
  128085: "_4_qd",
  128087: "_4_qe",
  128088: "_4_qf",
  128089: "_4_qg",
  128092: "_4_qh",
  128095: "_4_qi",
  128096: "_4_qj",
  128097: "_4_qk",
  128098: "_4_ql",
  128102: "_2eb",
  128103: "_2ec",
  128104: "_2ed",
  128105: "_2ee",
  128107: "_2ef",
  128110: "_2eg",
  128111: "_2eh",
  128113: "_2ei",
  128114: "_2ej",
  128115: "_2ek",
  128116: "_2el",
  128117: "_2em",
  128118: "_2en",
  128119: "_2eo",
  128120: "_2ep",
  128123: "_2eq",
  128124: "_2er",
  128125: "_2es",
  128126: "_2et",
  128127: "_2eu",
  128128: "_2ev",
  128130: "_2ew",
  128131: "_2ex",
  128132: "_4_qm",
  128133: "_2ey",
  128136: "_4_qn",
  128137: "_4_qo",
  128138: "_4_qp",
  128139: "_2ez",
  128140: "_4_qq",
  128141: "_4_qr",
  128142: "_4_qs",
  128143: "_2e-",
  128144: "_2e_",
  128145: "_2f0",
  128146: "_4_qt",
  128147: "_2f1",
  128148: "_2f2",
  128150: "_2f3",
  128151: "_2f4",
  128152: "_2f5",
  128153: "_2f6",
  128154: "_2f7",
  128155: "_2f8",
  128156: "_2f9",
  128157: "_2fa",
  128158: "_4_qu",
  128159: "_4_qv",
  128160: "_4_qw",
  128161: "_4_qx",
  128162: "_2fb",
  128163: "_4_qy",
  128164: "_2fc",
  128166: "_2fd",
  128167: "_4_qz",
  128168: "_2fe",
  128169: "_2ff",
  128170: "_2fg",
  128176: "_4_q-",
  128178: "_4_q_",
  128180: "_4_r0",
  128181: "_4_r1",
  128186: "_4_r2",
  128187: "_2fh",
  128188: "_4_r3",
  128189: "_2fi",
  128190: "_2fj",
  128191: "_2fk",
  128192: "_2fl",
  128214: "_4_r4",
  128221: "_4_r5",
  128222: "_2fm",
  128224: "_2fn",
  128225: "_4_r6",
  128226: "_4_r7",
  128227: "_4_r8",
  128232: "_4_r9",
  128233: "_4_ra",
  128234: "_4_rb",
  128235: "_4_rc",
  128236: "_4_rd",
  128237: "_4_re",
  128238: "_4_rf",
  128241: "_2fo",
  128242: "_2fp",
  128243: "_4_rg",
  128244: "_4_rh",
  128246: "_4_ri",
  128247: "_4_rj",
  128250: "_2fq",
  128251: "_4_rk",
  128252: "_4_rl",
  128264: "_4_rm",
  128269: "_4_rn",
  128270: "_4_ro",
  128271: "_4_rp",
  128272: "_4_rq",
  128273: "_4_rr",
  128274: "_4_rs",
  128275: "_4_rt",
  128276: "_2fr",
  128286: "_4_ru",
  128293: "_492",
  128296: "_4_rv",
  128299: "_4_rw",
  128304: "_4_rx",
  128305: "_4_ry",
  128306: "_4_rz",
  128307: "_4_r-",
  128308: "_4_r_",
  128309: "_4_s0",
  128310: "_4_s1",
  128311: "_4_s2",
  128312: "_4_s3",
  128313: "_4_s4",
  128507: "_4_s5",
  128508: "_4_s6",
  128509: "_4_s7",
  128513: "_2fs",
  128514: "_2ft",
  128515: "_2fu",
  128516: "_2fv",
  128518: "_2fw",
  128521: "_2fx",
  128522: "_1q3y",
  128524: "_2fz",
  128525: "_2f-",
  128527: "_2f_",
  128530: "_2g0",
  128531: "_2g1",
  128532: "_2g2",
  128534: "_2g3",
  128536: "_2g4",
  128538: "_2g5",
  128540: "_2g6",
  128541: "_2g7",
  128542: "_2g8",
  128544: "_2g9",
  128545: "_2ga",
  128546: "_2gb",
  128547: "_2gc",
  128548: "_2gd",
  128549: "_2ge",
  128552: "_2gf",
  128553: "_2gg",
  128554: "_2gh",
  128555: "_2gi",
  128557: "_2gj",
  128560: "_2gk",
  128561: "_2gl",
  128562: "_2gm",
  128563: "_2gn",
  128565: "_2go",
  128567: "_2gp",
  128568: "_2gq",
  128569: "_2gr",
  128570: "_2gs",
  128571: "_2gt",
  128572: "_2gu",
  128573: "_2gv",
  128575: "_2gw",
  128576: "_2gx",
  128587: "_2gy",
  128588: "_2gz",
  128589: "_2g-",
  128591: "_2g_",
  128640: "_4_s8",
  128643: "_4_s9",
  128644: "_4_sa",
  128645: "_4_sb",
  128649: "_4_sc",
  128652: "_4_sd",
  128655: "_4_se",
  128657: "_4_sf",
  128658: "_4_sg",
  128659: "_4_sh",
  128661: "_4_si",
  128663: "_4_sj",
  128665: "_4_sk",
  128666: "_4_sl",
  128674: "_4_sm",
  128676: "_4_sn",
  128677: "_4_so",
  128679: "_4_sp",
  128684: "_4_sq",
  128685: "_4_sr",
  128690: "_4_ss",
  128697: "_4_st",
  128698: "_4_su",
  128699: "_4_sv",
  128700: "_4_sw",
  128701: "_4_sx",
  128702: "_4_sy",
  128704: "_4_sz",
  9642: "_4_s-",
  9643: "_4_s_",
  9723: "_4_t0",
  9724: "_4_t1",
  9725: "_4_t2",
  9726: "_4_t3",
  9742: "_4_t4",
  9757: "_2h0",
  9786: "_2h1",
  9855: "_4_t5",
  9888: "_4_t6",
  9889: "_2h2",
  9898: "_4_t7",
  9899: "_4_t8",
  9917: "_4_t9",
  9918: "_4_ta",
  9924: "_2h3",
  9940: "_4_tb",
  9962: "_4_tc",
  9970: "_4_td",
  9971: "_4_te",
  9973: "_4_tf",
  9978: "_4_tg",
  9981: "_4_th",
  9994: "_2h4",
  9995: "_2h5",
  9996: "_2h6",
  10060: "_4_ti",
  10062: "_4_tj",
  10145: "_4_tk",
  10175: "_4_tl",
  11013: "_4_tm",
  11014: "_4_tn",
  11015: "_4_to",
  11035: "_4_tp",
  11036: "_4_tq",
  11088: "_4_tr",
  11093: "_4_ts",
  12349: "_4_tt",
  8598: "_4_tu",
  8599: "_4_tv",
  8600: "_4_tw",
  8601: "_4_tx",
  9728: "_2h7",
  9729: "_2h8",
  9748: "_2h9",
  9749: "_2ha",
  9824: "_4_ty",
  9827: "_4_tz",
  9829: "_4_t-",
  9830: "_4_t_",
  9832: "_4_u0",
  9986: "_4_u1",
  9992: "_4_u2",
  9993: "_4_u3",
  10006: "_4_u4",
  10024: "_2hb",
  10035: "_4_u5",
  10036: "_4_u6",
  10067: "_4_u7",
  10068: "_4_u8",
  10069: "_4_u9",
  10071: "_4_ua",
  10084: "_2hc",
  10548: "_4_ub",
  10549: "_4_uc",
  12951: "_4_ud",
  12953: "_4_ue"
 }, k = function(l) {
  var m = 0;
  while (l.length > 0) {
   var n = i.exec(l);
   if (!n || !n.length) return false;
   var o = n[1], p = n.index, q = h.decode(o), r = j[q];
   if (!r) {
    m += p + 1;
    l = l.substr(p + 1);
    continue;
   }
   n.index += m;
   n.emoji = r;
   return n;
  }
  return false;
 };
 e.exports = {
  findEmoji: k,
  emoji: j,
  _utf16Regex: i
 };
}, null);

__d("Newline.react", [ "React" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 var h = g.createClass({
  displayName: "Newline",
  render: function() {
   return g.createElement("br", g.__spread({}, this.props));
  }
 });
 e.exports = h;
}, null);

__d("Text.react", [ "React" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 var h = g.createClass({
  displayName: "Text",
  render: function() {
   return g.createElement("span", g.__spread({}, this.props), this.props.children);
  }
 });
 e.exports = h;
}, null);

__d("ES6StringUtils", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 var g = {
  fromCodePoint: function() {
   for (var h = [], i = 0, j = arguments.length; i < j; i++) h.push(arguments[i]);
   if (String.fromCodePoint) return String.fromCodePoint.apply(this, h);
   var k = [];
   for (var l = 0; l < h.length; l++) {
    var m = Number(h[l]);
    if (!isFinite(m) || m < 0 || 1114111 < m || Math.floor(m) != m) throw RangeError("Invalid code point: " + h[l]);
    if (m < 65536) {
     k.push(String.fromCharCode(m));
    } else {
     m -= 65536;
     k.push(String.fromCharCode((m >> 10) + 55296), String.fromCharCode(m % 1024 + 56320));
    }
   }
   return k.join("");
  },
  codePointAt: function(h) {
   "use strict";
   if (String.prototype.codePointAt) return String.prototype.codePointAt.call(this, h);
   if (this === null || this === void 0) throw TypeError("Invalid context: " + this);
   var i = String(this), j = i.length;
   h = h ? Number(h) : 0;
   if (h != h) h = 0;
   if (h < 0 || j <= h) return void 0;
   var k = i.charCodeAt(h);
   if (55296 <= k && k <= 56319 && j > h + 1) {
    var l = i.charCodeAt(h + 1);
    if (56320 <= l && l <= 57343) return (k - 55296) * 1024 + l - 56320 + 65536;
   }
   return k;
  }
 };
 e.exports = g;
}, null);

__d("UnicodeUtils", [ "ES6StringUtils" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var h = 55296, i = 57343, j = /[\uD800-\uDFFF]/;
 function k(s) {
  return h <= s && s <= i;
 }
 function l(s) {
  return j.test(s);
 }
 function m(s, t) {
  return 1 + k(s.charCodeAt(t));
 }
 function n(s) {
  if (!l(s)) return s.length;
  var t = 0;
  for (var u = 0; u < s.length; u += m(s, u)) t++;
  return t;
 }
 function o(s, t, u) {
  t = t || 0;
  u = u === void 0 ? Infinity : u || 0;
  if (!l(s)) return s.substr(t, u);
  var v = s.length;
  if (v <= 0 || t > v || u <= 0) return "";
  var w = 0;
  if (t > 0) {
   for (;t > 0 && w < v; t--) w += m(s, w);
   if (w >= v) return "";
  } else if (t < 0) {
   for (w = v; t < 0 && 0 < w; t++) w -= m(s, w - 1);
   if (w < 0) w = 0;
  }
  var x = v;
  if (u < v) for (x = w; u > 0 && x < v; u--) x += m(s, x);
  return s.substring(w, x);
 }
 function p(s, t, u) {
  t = t || 0;
  u = u === void 0 ? Infinity : u || 0;
  if (t < 0) t = 0;
  if (u < 0) u = 0;
  var v = Math.abs(u - t);
  t = t < u ? t : u;
  return o(s, t, v);
 }
 function q(s) {
  var t = [];
  for (var u = 0; u < s.length; u += m(s, u)) {
   var v = g.codePointAt.call(s, u);
   t.push(v);
  }
  return t;
 }
 var r = {
  isCodeUnitInSurrogateRange: k,
  getUTF16Length: m,
  strlen: n,
  substr: o,
  substring: p,
  getCodePoints: q
 };
 e.exports = r;
}, null);

__d("BaseTextWithEntities.react", [ "Newline.react", "React", "ReactFragment", "Text.react", "UnicodeUtils" ], function(a, b, c, d, e, f, g, h, i, j, k) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var l = h, m = l.PropTypes;
 function n(r, s) {
  return r.offset - s.offset;
 }
 var o = /(\r\n|[\r\n])/, p = m.shape({
  length: m.number.isRequired,
  offset: m.number.isRequired
 }), q = h.createClass({
  displayName: "BaseTextWithEntities",
  propTypes: {
   aggregatedRanges: m.array,
   imageRanges: m.array,
   ranges: m.arrayOf(p),
   rangeRenderer: m.func.isRequired,
   text: m.string.isRequired,
   textRenderer: m.func.isRequired
  },
  _getSortedRanges: function() {
   var r = [];
   [ this.props.ranges, this.props.aggregatedRanges, this.props.imageRanges ].filter(function(s) {
    return s != null;
   }).forEach(function(s) {
    return r = r.concat(s);
   });
   return r.sort(n);
  },
  _renderText: function(r) {
   var s = r.split(o), t = {};
   for (var u = 0; u < s.length; u++) {
    var v = s[u];
    if (v) if (u % 2 === 1) {
     t[u] = h.createElement(g, null);
    } else t[u] = this.props.textRenderer(s[u]);
   }
   return i.create(t);
  },
  render: function() {
   var r = 0, s = this.props.text, t = this._getSortedRanges(), u = {}, v = t.length;
   for (var w = 0, x = v; w < x; w++) {
    var y = t[w];
    if (y.offset < r) continue;
    if (y.offset > r) u["text" + w] = this._renderText(k.substring(s, r, y.offset));
    var z = k.substr(s, y.offset, y.length);
    u["range" + w] = this.props.rangeRenderer(z, y);
    r = y.offset + y.length;
   }
   if (s.length > r) u.end = this._renderText(k.substr(s, r));
   return h.createElement(j, {
    className: this.props.className,
    style: this.props.style
   }, i.create(u));
  }
 });
 e.exports = q;
}, null);

__d("TransformTextToDOMMixin", [ "DOMQuery", "createArrayFromMixed", "flattenArray" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 var j = 3, k = {
  transform: function(l, m) {
   return i(l.map(function(n) {
    if (!g.isElementNode(n)) {
     var o = n, p = [], q = this.MAX_ITEMS || j;
     while (q--) {
      var r = m ? [ o ].concat(m) : [ o ], s = this.match.apply(this, r);
      if (!s) break;
      p.push(o.substring(0, s.startIndex));
      p.push(s.element);
      o = o.substring(s.endIndex);
     }
     o && p.push(o);
     return p;
    }
    return n;
   }.bind(this)));
  },
  params: function() {
   var l = this;
   return {
    __params: true,
    obj: l,
    params: h(arguments)
   };
  }
 };
 e.exports = k;
}, null);

__d("DOMEmoji", [ "CSS", "JSXDOM", "TransformTextToDOMMixin", "SupportedEmoji", "copyProperties", "cx" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 var m = {
  MAX_ITEMS: 40,
  match: function(n) {
   var o = j.findEmoji(n);
   if (!o || !o.length) return false;
   var p = o[0], q = o.index, r = o.emoji;
   return {
    startIndex: q,
    endIndex: q + p.length,
    element: this._element(r)
   };
  },
  _element: function(n) {
   var o = h.span(null);
   g.addClass(o, "_1az");
   g.addClass(o, "_1a-");
   g.addClass(o, n);
   return o;
  }
 };
 e.exports = k(m, i);
}, null);

__d("DOMEmote", [ "CSS", "EmoticonsList", "JSXDOM", "TransformTextToDOMMixin", "fbt", "copyProperties" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 var m = {
  MAX_ITEMS: 40,
  match: function(n) {
   var o = h.regexp.exec(n);
   if (!o || !o.length) return false;
   var p = o[2], q = o.index + o[1].length;
   return {
    startIndex: q,
    endIndex: q + p.length,
    element: this._element(p, h.emotes[p])
   };
  },
  _element: function(n, o) {
   var p = k._("{emoticonName} emoticon", [ k.param("emoticonName", o) ]), q = i.span({
    className: "emoticon_text",
    "aria-hidden": "true"
   }, p), r = i.span({
    title: n,
    className: "emoticon"
   });
   g.addClass(r, "emoticon_" + o);
   return [ q, r ];
  }
 };
 e.exports = l(m, j);
}, null);

__d("transformTextToDOM", [ "createArrayFromMixed" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 function h(i, j) {
  var k = [ i ];
  j = g(j);
  j.forEach(function(l) {
   var m, n = l;
   if (l.__params) {
    m = l.params;
    n = l.obj;
   }
   k = n.transform(k, m);
  });
  return k;
 }
 e.exports = h;
}, null);

__d("emojiAndEmote", [ "DOMEmoji", "DOMEmote", "transformTextToDOM" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 var j = function(k) {
  var l = [ g, h ];
  return i(k, l);
 };
 e.exports = j;
}, null);

__d("Emoji", [ "DOMEmoji", "JSXDOM", "emojiAndEmote", "transformTextToDOM" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 var k = {
  htmlEmojiAndEmote: function(l, m) {
   return h.span(null, i(l)).innerHTML;
  },
  htmlEmojiAndEmoteWithoutFBID: function(l, m) {
   return h.span(null, i(l, false)).innerHTML;
  },
  htmlEmoji: function(l) {
   return h.span(null, j(l, g)).innerHTML;
  }
 };
 e.exports = k;
}, null);

__d("Emote", [ "DOMEmote", "JSXDOM", "transformTextToDOM" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 var j = {
  htmlEmoteWithoutFBID: function(k, l) {
   return h.span(null, i(k, g)).innerHTML;
  },
  htmlEmote: function(k, l) {
   return h.span(null, i(k, [ g ])).innerHTML;
  }
 };
 e.exports = j;
}, null);

__d("TextWithEmoticons.react", [ "Emoji", "Emote", "React" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 var j = i.createClass({
  displayName: "ReactTextWithEmoticons",
  render: function() {
   if (!this.props.renderEmoticons && !this.props.renderEmoji) return i.createElement("span", null, this.props.text);
   var k;
   if (this.props.renderEmoticons && this.props.renderEmoji) {
    k = g.htmlEmojiAndEmoteWithoutFBID(this.props.text);
   } else if (this.props.renderEmoticons) {
    k = h.htmlEmoteWithoutFBID(this.props.text);
   } else k = g.htmlEmoji(this.props.text);
   return i.createElement("span", {
    dangerouslySetInnerHTML: {
     __html: k
    }
   });
  }
 });
 e.exports = j;
}, null);

__d("TextWithEntities.react", [ "Link.react", "React", "BaseTextWithEntities.react", "TextWithEmoticons.react" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function k(m) {
  return m.replace(/<3\b|&hearts;/g, "♥");
 }
 var l = h.createClass({
  displayName: "TextWithEntities",
  _renderText: function(m) {
   if (this.props.renderEmoticons || this.props.renderEmoji) {
    return h.createElement(j, {
     text: m,
     renderEmoticons: this.props.renderEmoticons,
     renderEmoji: this.props.renderEmoji
    });
   } else return k(m);
  },
  _renderRange: function(m, n) {
   if (this.props.interpolator) {
    return this.props.interpolator(m, n);
   } else return h.createElement(g, {
    href: n.entity
   }, m);
  },
  render: function() {
   return h.createElement(i, h.__spread({}, this.props, {
    textRenderer: this._renderText,
    rangeRenderer: this._renderRange,
    ranges: this.props.ranges,
    imageRanges: this.props.imageRanges,
    aggregatedRanges: this.props.aggregatedRanges,
    text: this.props.text
   }));
  }
 });
 e.exports = l;
}, null);

__d("URLMatcher", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 var g = "!\"#%&'()*,-./:;<>?@[\\]^_`{|}", h = " -⁯«»（）", i = "(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])", j = "(?:(?:ht|f)tps?)://", k = "(?:(?:" + i + "[.]){3}" + i + ")", l = "\\[(?:(?:[A-Fa-f0-9]{1,4}::?){1,7}[A-Fa-f0-9]{1,4})\\]", m = "(?:\\b)www\\d{0,3}[.]", n = "[^\\s" + g + h + "]", o = "(?:(?:(?:[.:\\-_%@]|" + n + ")*" + n + ")|" + l + ")", p = "(?:[.][a-z]{2,4})", q = "(?::\\d+){0,1}", r = "(?=[/?#])", s = "(?:" + "(?:" + j + o + q + ")|" + "(?:" + k + q + ")|" + "(?:" + l + q + ")|" + "(?:" + m + o + p + q + ")|" + "(?:" + o + p + q + r + ")" + ")", t = "[/#?]", u = "\\([^\\s()<>]+\\)", v = "[^\\s()<>?#]+", w = new RegExp(s, "im"), x = "^\\[[0-9]{1,4}:[0-9]{1,4}:[A-Fa-f0-9]{1,4}\\]", y = new RegExp(x, "im"), z = "(?:" + "(?:" + t + ")" + "(?:" + "(?:" + u + "|" + v + ")*" + ")*" + ")*", aa = new RegExp("(" + "(?:" + s + ")" + "(?:" + z + ")" + ")", "im"), ba = new RegExp("(" + "(?:" + j + o + q + ")|" + "(?:" + m + o + p + q + ")" + ")"), ca = /[\s'";]/, da = new RegExp(t, "im"), ea = new RegExp("[\\s!\"#%&'()*,./:;<>?@[\\]^`{|}«» -⁯（）]", "im"), fa = new RegExp("[\\s()<>?#]", "im"), ga = new RegExp("\\s()<>"), ha = function(oa) {
  if (oa && oa.indexOf("@") != -1) {
   return ba.exec(oa) ? oa : null;
  } else return oa;
 }, ia = function(oa) {
  return ja(oa, aa);
 }, ja = function(oa, pa) {
  var qa = (pa.exec(oa) || [])[1] || null;
  return ha(qa);
 }, ka = function(oa) {
  return w.exec(oa);
 }, la = function(oa) {
  return !ca.test(oa.charAt(oa.length - 1));
 }, ma = function(oa) {
  do {
   var pa = w.exec(oa);
   if (!pa) return null;
   var qa = false;
   if (pa[0][0] === "[" && pa.index > 0 && oa[pa.index - 1] === "@") {
    var ra = y.exec(pa[0]);
    if (ra) {
     qa = true;
     oa = oa.substr(pa.index + ra[0].length);
    }
   }
  } while (qa);
  var sa = oa.substr(pa.index + pa[0].length);
  if (sa.length === 0 || !da.test(sa[0])) return ha(pa[0]);
  var ta = 0, ua = 0, va = 1, wa = 0, xa = ua;
  for (var ya = 1; ya < sa.length; ya++) {
   var za = sa[ya];
   if (xa === ua) {
    if (za === "(") {
     wa = wa + 1;
     xa = va;
    } else if (da.test(za) || !ea.test(za)) {
     ta = ya;
    } else if (fa.test(za)) break;
   } else if (za === "(") {
    wa = wa + 1;
   } else if (za === ")") {
    wa = wa - 1;
    if (wa === 0) {
     xa = ua;
     ta = ya;
    }
   } else if (ga.test(za)) break;
  }
  return ha(pa[0] + sa.substring(0, ta + 1));
 }, na = {};
 na.permissiveMatch = ia;
 na.matchToPattern = ja;
 na.matchHost = ka;
 na.trigger = la;
 na.match = ma;
 e.exports = na;
}, null);

__d("URLScraper", [ "ArbiterMixin", "DataStore", "Event", "URLMatcher", "copyProperties", "mixin" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 var m = "scraperLastPermissiveMatch", n = l(g);
 for (var o in n) if (n.hasOwnProperty(o)) q[o] = n[o];
 var p = n === null ? null : n.prototype;
 q.prototype = Object.create(p);
 q.prototype.constructor = q;
 q.__superConstructor__ = n;
 function q(r, s) {
  "use strict";
  this.input = r;
  this.enable();
  this.getValueFn = s;
 }
 q.prototype.reset = function() {
  "use strict";
  h.set(this.input, m, null);
 };
 q.prototype.enable = function() {
  "use strict";
  if (this.events) return;
  var r = function(s) {
   setTimeout(this.check.bind(this, s), 30);
  };
  this.events = i.listen(this.input, {
   paste: r.bind(this, false),
   keydown: r.bind(this, true)
  });
 };
 q.prototype.disable = function() {
  "use strict";
  if (!this.events) return;
  for (var event in this.events) this.events[event].remove();
  this.events = null;
 };
 q.prototype.check = function(r) {
  "use strict";
  var s = this.getValueFn ? this.getValueFn() : this.input.value;
  if (r && q.trigger(s)) return;
  var t = q.match(s), u = j.permissiveMatch(s);
  if (u && u != h.get(this.input, m)) {
   h.set(this.input, m, u);
   this.inform("match", {
    url: t || u,
    alt_url: u
   });
  }
 };
 k(q, j);
 e.exports = q;
}, null);

__d("getURLRanges", [ "URI", "URLScraper" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function i(j, k) {
  k = k || 0;
  var l = h.match(j);
  if (!l) return [];
  var m = l;
  if (!/^[a-z][a-z0-9\-+.]+:\/\//i.test(l)) m = "http://" + l;
  if (!g.isValidURI(m)) return [];
  k += j.indexOf(l);
  var n = l.length, o = [ {
   offset: k,
   length: l.length,
   entity: {
    url: m
   }
  } ];
  return o.concat(i(j.substr(k + n), k + n));
 }
 e.exports = i;
}, null);

__d("MercuryMessageBody.react", [ "EmoticonsList", "React", "Link.react", "ReactComponentWithPureRenderMixin", "SupportedEmoji", "TextWithEntities.react", "URI", "URLMatcher", "cancelAnimationFrame", "cx", "fbt", "getURLRanges", "isFacebookURI", "requestAnimationFrame" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t) {
 b.__markCompiled && b.__markCompiled();
 var u = h, v = u.PropTypes, w = function(y, z) {
  if (z.entity && z.entity.url) {
   var aa = new m(z.entity.url);
   if (s(aa) && !aa.getFragment()) z.entity.url = aa.addQueryData({
    __mref: "message_bubble"
   }).toString();
  }
  return h.createElement(i, {
   target: "_blank",
   href: z.entity
  }, y);
 }, x = h.createClass({
  displayName: "MercuryMessageBody",
  mixins: [ j ],
  propTypes: {
   body: v.string,
   ranges: v.array
  },
  getInitialState: function() {
   return {
    richText: false
   };
  },
  componentDidMount: function() {
   this._raf = t(function() {
    delete this._raf;
    var y = this.props, z = y.body, aa = y.ranges;
    if (aa && aa.length || g.noncapturingRegexp.test(z) || k.findEmoji(z) || n.match(z)) this.setState({
     richText: true
    });
   }.bind(this));
  },
  componentWillUnmount: function() {
   this._raf && o(this._raf);
  },
  render: function() {
   var y = this.props.body || "";
   if (y.startsWith("?OTR")) return h.createElement("span", {
    className: "_89h"
   }, q._("[encrypted message]"));
   y = y.replace(/\s+$/, "");
   if (y.length === 0) return null;
   if (!this.state.richText) return h.createElement("span", {
    className: this.props.className
   }, y);
   var z = this.props.ranges;
   if (z == undefined) z = r(y);
   return h.createElement(l, {
    className: this.props.className,
    interpolator: w,
    text: y,
    ranges: z,
    renderEmoticons: true,
    renderEmoji: true
   });
  }
 });
 e.exports = x;
}, null);

__d("DOMWrapper", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 var g, h, i = {
  setRoot: function(j) {
   g = j;
  },
  getRoot: function() {
   return g || document.body;
  },
  setWindow: function(j) {
   h = j;
  },
  getWindow: function() {
   return h || self;
  }
 };
 e.exports = i;
}, null);

__d("Flash", [ "DOMEventListener", "DOMWrapper", "QueryString", "UserAgent_DEPRECATED", "copyProperties", "guid", "htmlSpecialChars" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m) {
 b.__markCompiled && b.__markCompiled();
 var n = {}, o, p = h.getWindow().document;
 function q(v) {
  var w = p.getElementById(v);
  if (w) w.parentNode.removeChild(w);
  delete n[v];
 }
 function r() {
  for (var v in n) if (n.hasOwnProperty(v)) q(v);
 }
 function s(v) {
  return v.replace(/\d+/g, function(w) {
   return "000".substring(w.length) + w;
  });
 }
 function t(v) {
  if (!o) {
   if (j.ie() >= 9) g.add(window, "unload", r);
   o = true;
  }
  n[v] = v;
 }
 var u = {
  embed: function(v, w, x, y) {
   var z = l();
   v = m(v).replace(/&amp;/g, "&");
   x = k({
    allowscriptaccess: "always",
    flashvars: y,
    movie: v
   }, x || {});
   if (typeof x.flashvars == "object") x.flashvars = i.encode(x.flashvars);
   var aa = [];
   for (var ba in x) if (x.hasOwnProperty(ba) && x[ba]) aa.push('<param name="' + m(ba) + '" value="' + m(x[ba]) + '">');
   var ca = w.appendChild(p.createElement("span")), da = "<object " + (j.ie() ? 'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ' : 'type="application/x-shockwave-flash"') + 'data="' + v + '" ' + (x.height ? 'height="' + x.height + '" ' : "") + (x.width ? 'width="' + x.width + '" ' : "") + 'id="' + z + '">' + aa.join("") + "</object>";
   ca.innerHTML = da;
   var ea = ca.firstChild;
   t(z);
   return ea;
  },
  remove: q,
  getVersion: function() {
   var v = "Shockwave Flash", w = "application/x-shockwave-flash", x = "ShockwaveFlash.ShockwaveFlash", y;
   if (navigator.plugins && typeof navigator.plugins[v] == "object") {
    var z = navigator.plugins[v].description;
    if (z && navigator.mimeTypes && navigator.mimeTypes[w] && navigator.mimeTypes[w].enabledPlugin) y = z.match(/\d+/g);
   }
   if (!y) try {
    y = new ActiveXObject(x).GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/);
    y = Array.prototype.slice.call(y, 1);
   } catch (aa) {}
   return y;
  },
  checkMinVersion: function(v) {
   var w = u.getVersion();
   if (!w) return false;
   return s(w.join(".")) >= s(v);
  },
  isAvailable: function() {
   return !!u.getVersion();
  }
 };
 e.exports = u;
}, null);

__d("MercuryAudioPlayer", [ "Event", "Arbiter", "DOM", "Flash", "UserAgent_DEPRECATED", "copyProperties" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 var m = 200;
 function n() {
  if (k.webkit() && !k.chrome()) return false;
  var w = i.create("audio"), x = false;
  try {
   if (!!w.canPlayType) if (w.canPlayType("video/mp4;").replace(/^no$/, "")) x = true;
  } finally {
   return x;
  }
 }
 function o() {
  return j.isAvailable();
 }
 var p = function() {
  this.interval = null;
  this.arbiterInstance = null;
  this.audio = i.create("audio");
  g.listen(this.audio, "playing", function() {
   this.informAttachment("playing", this.audio.currentTime);
   this.interval = setInterval(function() {
    this.informAttachment("playing", this.audio.currentTime);
   }.bind(this), m);
  }.bind(this));
  g.listen(this.audio, "ended", function() {
   clearInterval(this.interval);
   this.informAttachment("finished");
  }.bind(this));
 };
 l(p.prototype, {
  setAudio: function(w, x) {
   this.audio.setAttribute("src", w);
   this.arbiterInstance = x;
  },
  informAttachment: function(w, x) {
   if (this.arbiterInstance) this.arbiterInstance.inform(w, x);
  },
  play: function() {
   this.audio.play();
   this.informAttachment("played");
  },
  resume: function() {
   this.audio.play();
   this.informAttachment("played");
  },
  pause: function() {
   this.audio.pause();
   clearInterval(this.interval);
   this.informAttachment("paused");
  },
  getType: function() {
   return "html5";
  }
 });
 var q = function() {
  this.src = null;
  this.arbiterInstance = null;
  var w = i.create("div");
  document.body.appendChild(w);
  this.swf = j.embed("/swf/SoundStreamPlayer.swf", w, null, {});
  this.interval = null;
  h.subscribe("soundstream/finished", function() {
   clearInterval(this.interval);
   this.informAttachment("finished");
  }.bind(this));
 };
 l(q.prototype, {
  setAudio: function(w, x) {
   this.src = w;
   this.arbiterInstance = x;
  },
  informAttachment: function(w, x) {
   if (this.arbiterInstance) this.arbiterInstance.inform(w, x);
  },
  play: function() {
   this.swf.playSound(this.src);
   this.interval = setInterval(function() {
    var w = this.swf.getCurrentTime();
    this.informAttachment("playing", w);
   }.bind(this), m);
   this.informAttachment("played");
  },
  resume: function() {
   this.swf.resume();
   this.informAttachment("played");
  },
  pause: function() {
   clearInterval(this.interval);
   this.swf.pause();
   this.informAttachment("paused");
  },
  getType: function() {
   return "flash";
  }
 });
 function r() {
  if (n()) {
   return new p();
  } else if (o()) return new q();
  return false;
 }
 var s = null, t = null, u = 0;
 function v(w, x) {
  this.src = w;
  this.arbiterInstance = x;
  this.audio_id = ++u;
  s !== null || (s = r());
  if (!s) return false;
 }
 l(v.prototype, {
  getType: function() {
   if (!s) {
    return false;
   } else return s.getType();
  },
  play: function(w) {
   if (w && t == this.audio_id) {
    s.resume();
   } else {
    this.pause();
    t = this.audio_id;
    s.setAudio(this.src, this.arbiterInstance);
    s.play();
   }
  },
  pause: function() {
   s.pause();
  }
 });
 e.exports = v;
}, null);

__d("MercuryShareAttachmentRenderLocations", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var g = {
  CHAT: "chat",
  CHAT_PREVIEW: "chat_preview",
  MESSENGER: "messenger",
  WEB_INBOX: "web_inbox",
  getValues: function() {
   return [ g.CHAT, g.CHAT_PREVIEW, g.MESSENGER, g.WEB_INBOX ];
  },
  isPreview: function(h) {
   return h === g.CHAT_PREVIEW;
  }
 };
 e.exports = g;
}, null);

__d("MercuryAttachmentAudioClip.react", [ "Arbiter", "ArbiterMixin", "MercuryAudioPlayer", "CurrentUser", "JSLogger", "LeftRight.react", "MercuryShareAttachmentRenderLocations", "React", "SubscriptionsHandler", "cx", "fbt", "joinClasses", "shield" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s) {
 b.__markCompiled && b.__markCompiled();
 var t = n, u = t.PropTypes, v = "MercuryAttachmentAudioClip/play", w = k.create("mercury_audio_clip"), x = n.createClass({
  displayName: "AudioClip",
  mixins: [ h ],
  propTypes: {
   duration: u.number,
   location: u.oneOf(m.getValues()),
   rootClassName: u.string,
   showHelp: u.bool,
   src: u.string.isRequired,
   width: u.number
  },
  getInitialState: function() {
   this.logged = false;
   var y = this.props.downloadOnly ? false : new i(this.props.src, this);
   return {
    time: 0,
    playing: false,
    started: false,
    duration: this.props.duration,
    audioPlayer: y
   };
  },
  componentDidMount: function() {
   this._subscriptionsHandler = new o();
   this._subscriptionsHandler.addSubscriptions(this.subscribe("playing", this.updateTime), this.subscribe("played", s(this.setState, this, {
    playing: true,
    started: true
   })), this.subscribe("paused", s(this.setState, this, {
    playing: false
   })), this.subscribe("finished", s(this.setState, this, {
    playing: false,
    started: false,
    time: this.props.duration
   })), g.subscribe(v, function(y, z) {
    if (this.props.src != z) this.setState({
     time: 0
    });
   }.bind(this)));
  },
  componentWillUnmount: function() {
   this._subscriptionsHandler && this._subscriptionsHandler.release();
  },
  updateTime: function(y, z) {
   this.setState({
    time: z
   });
  },
  play: function() {
   if (this.state.playing) {
    this.state.audioPlayer.pause();
   } else {
    this.state.audioPlayer.play(this.state.started);
    g.inform(v, this.props.src);
    if (!this.logged) {
     this.logged = true;
     w.log("play", {
      uid: j.getID(),
      duration: this.props.duration
     });
    }
   }
  },
  _formatSeconds: function(y) {
   if (y) {
    y = Math.ceil(y);
    var z = y % 60;
    if (z < 10) z = "0" + z;
    var aa = Math.floor(y / 60);
    return aa + ":" + z;
   } else return null;
  },
  _renderPlayer: function(y, z) {
   return n.createElement("a", {
    className: "_1miz _2e-1",
    href: "#",
    style: {
     width: y
    },
    onClick: this.play
   }, n.createElement("span", {
    className: "_1mi- _2e-2"
   }, n.createElement("i", {
    className: "_1mi_ _2e-3"
   })), n.createElement("span", {
    className: "_1mj0 _2e-4"
   }, z), n.createElement("div", {
    className: "_1mj1 _2e-5"
   }));
  },
  render: function() {
   var y = this.state.time, z = this.state.playing, aa = this._formatSeconds(this.state.duration), ba = this.props.location === m.MESSENGER, ca = this.props.width || 170;
   if (ba) {
    var da = this.props.duration;
    if (da > 10) {
     ca = 240;
    } else if (da > 5) {
     ca = 200;
    } else if (da > 2) {
     ca = 160;
    } else ca = 120;
   }
   var ea = null, fa = Math.ceil(y * (ca + 2) / this.state.duration);
   if (ba) fa = Math.ceil(y * (ca + 24) / this.state.duration);
   if (this.state.audioPlayer && this.state.audioPlayer.getType()) {
    var ga = this._renderPlayer(ca, aa), ha = this._renderPlayer(ca, aa), ia = "_1mj2" + (" " + "_2e-6") + (z && y !== 0 ? " " + "_1mj3" : "") + (z && y === 0 ? " " + "_4g4x" : "");
    ea = n.createElement("div", {
     className: ia
    }, ga, n.createElement("div", {
     className: "_1mj4 _2e-7",
     style: {
      width: fa
     }
    }, ha));
   } else ea = n.createElement("div", {
    className: "_1mj2"
   }, n.createElement("div", {
    className: "_1miz"
   }, n.createElement(l, null, n.createElement("a", {
    className: "_1mj5",
    href: this.props.src
   }, n.createElement("span", {
    className: "_3qi6"
   }, n.createElement("i", {
    className: "_1mj6"
   })), n.createElement("span", {
    className: "_1mj7"
   }, q._("Voice Message")), n.createElement("span", {
    className: "_1mj8"
   }, aa)), n.createElement("a", {
    href: this.props.src,
    className: "_1mj9"
   }, n.createElement("i", {
    className: "_1mja"
   })))));
   return n.createElement("div", {
    className: r("_1mjb" + (ba ? " " + "_454y" : ""), this.props.rootClassName)
   }, ea);
  }
 });
 e.exports = x;
}, null);

__d("MercuryAttachmentConstants", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 var g = {
  SIDE_LENGTH: 9
 };
 e.exports = g;
}, null);

__d("loadImage", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function g(h, i) {
  var j = new Image();
  j.onload = function() {
   i(j.width, j.height, j);
  };
  j.src = h;
 }
 e.exports = g;
}, null);

__d("PhotoResizeMath", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 var g = {
  getScaledPhotoDimensions: function(h, i, j, k, l) {
   var m = h / i, n = j / k;
   if (j && k && l === "stretch") return {
    width: j,
    height: k
   };
   if (!j && k || l === "contain" !== m >= n) return {
    width: k * m,
    height: k
   };
   if (j) return {
    width: j,
    height: j / m
   };
   return {
    width: h,
    height: i
   };
  }
 };
 e.exports = g;
}, null);

__d("PixelzFocus", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var g = {
  search: function(h, i) {
   var j = 0, k = h.length - 1;
   while (j <= k) {
    var l = j + Math.floor((k - j) / 2), m = h[l];
    if (m > i) {
     k = l - 1;
    } else if (m < i) {
     j = l + 1;
    } else return l;
   }
   return Math.min(j, k);
  },
  forceSpecificPoint: function(h, i, j) {
   var k = 1e-9, l = g.search(h, i - j - k) + 1, m = g.search(h, i + j);
   return h.slice(l, m + 1);
  },
  findBiggestSets: function(h, i) {
   var j = [], k = -1;
   for (var l = 0; l < h.length; ++l) {
    var m = h[l], n = l, o = g.search(h, m + i), p = o - n;
    if (p > k) j = [];
    if (p >= k) {
     k = p;
     j.push({
      low: n,
      high: o
     });
    }
   }
   return j;
  },
  getBestSet: function(h, i, j) {
   var k = -1, l = null;
   for (var m = 0; m < i.length; ++m) {
    var n = i[m], o = h[n.low], p = h[n.high], q = o + (p - o) / 2, r = Math.min(o - (q - j), q + j - p);
    if (r > k) {
     k = r;
     l = n;
    }
   }
   return l;
  },
  getFocusFromSet: function(h, i) {
   var j = h[i.low], k = h[i.high];
   return j + (k - j) / 2;
  },
  clampFocus: function(h, i) {
   var j = i / 2, k = 1 - i / 2;
   if (h < j) return j;
   if (h > k) return k;
   return h;
  },
  convertFromCenterToCSS: function(h, i) {
   if (Math.abs(1 - i) < 1e-5) return 0;
   return (h - i / 2) / (1 - i);
  },
  convertFromCSSToCenter: function(h, i) {
   return h * (1 - i) + i / 2;
  },
  getVisible: function(h, i) {
   if (h < i) return h / i;
   return i / h;
  },
  getHidden: function(h, i) {
   return 1 - g.getVisible(h, i);
  },
  focusHorizontally: function(h, i) {
   return h < i;
  },
  convertVectorFromCenterToCSS: function(h, i, j) {
   var k = g.focusHorizontally(i, j), l;
   if (k) {
    l = h.x / 100;
   } else l = h.x / 100;
   var m = g.convertFromCenterToCSS(l, g.getVisible(i, j));
   if (k) {
    return {
     x: m,
     y: 0
    };
   } else return {
    x: 0,
    y: m
   };
  },
  getCropRect: function(h, i, j) {
   var k = g.focusHorizontally(i, j), l = g.getVisible(i, j);
   if (k) {
    var m = (1 - l) * h.x;
    return {
     left: m,
     top: 0,
     width: l,
     height: 1
    };
   } else {
    var n = (1 - l) * h.y;
    return {
     left: 0,
     top: n,
     width: 1,
     height: l
    };
   }
  }
 };
 e.exports = g;
}, null);

__d("Pixelz.react", [ "arrayContains", "copyProperties", "cx", "loadImage", "joinClasses", "React", "PhotoResizeMath", "PixelzFocus" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var o = l, p = o.PropTypes, q = l.createClass({
  displayName: "Pixelz",
  propTypes: {
   width: p.number,
   height: p.number,
   resizeMode: p.oneOf([ "contain", "cover", "stretch" ]),
   alt: p.string,
   letterbox: p.bool,
   borderRadius: p.number,
   insetBorderColor: p.string,
   animated: p.bool,
   upscale: p.bool,
   cropRect: function(r, s, t) {
    var u = r[s], v = "Invalid prop `" + s + "` supplied to `" + t + "`, expected a rectangle with values normalized " + "between 0 and 1.";
    if (u.left < 0 || u.top < 0 || u.width < 0 || u.height < 0 || u.left + u.width > 1 || u.top + u.height > 1) return new Error(v);
   },
   focus: function(r, s, t) {
    var u = r[s], v = "Invalid prop `" + s + "` supplied to `" + t + "`, expected either a {x, y, type} vector where type " + "is `css` or `center` or an array of {x, y} vectors. All the vectors " + "have with values normalized between 0 and 1.";
    if (Array.isArray(u)) {
     for (var w = 0; w < u.length; ++w) if (!(u[w].x >= 0 && u[w].x <= 1) || !(u[w].y >= 0 && u[w].y <= 1)) return new Error(v);
    } else {
     if (!u.type) u.type = "css";
     if (!(u.x >= 0 && u.x <= 1) || !(u.y >= 0 && u.y <= 1) || !g([ "center", "css" ], u.type)) return new Error(v);
    }
   }
  },
  getDefaultProps: function() {
   return {
    resizeMode: "cover",
    alt: "",
    letterbox: true,
    upscale: true,
    cropRect: {
     width: 1,
     height: 1,
     top: 0,
     left: 0
    },
    focus: {
     x: .5,
     y: .5,
     type: "css"
    }
   };
  },
  getInitialState: function() {
   return {
    srcDimensions: {}
   };
  },
  getSrcDimensions: function() {
   var r = this.props.src, s = this.state.srcDimensions[r];
   if (s) return s;
   j(r, function(t, u) {
    var v = {};
    v[r] = {
     width: t,
     height: u
    };
    this.isMounted() && this.setState({
     srcDimensions: v
    });
   }.bind(this));
   return null;
  },
  getCropSrcDimensions: function() {
   var r = this.getSrcDimensions();
   return {
    width: r.width * this.props.cropRect.width,
    height: r.height * this.props.cropRect.height
   };
  },
  getUpscaleCropDimensions: function() {
   var r = this.getCropSrcDimensions();
   return m.getScaledPhotoDimensions(r.width, r.height, this.props.width, this.props.height, this.props.resizeMode);
  },
  getCropDimensions: function() {
   var r = this.getUpscaleCropDimensions(), s = this.getCropSrcDimensions();
   if (!this.props.upscale) return {
    width: Math.min(r.width, s.width),
    height: Math.min(r.height, s.height)
   };
   return r;
  },
  getCropAspectRatio: function() {
   var r = this.getCropDimensions();
   return r.width / r.height;
  },
  getContainerDimensions: function() {
   if (this.props.letterbox && this.props.width && this.props.height) return {
    width: this.props.width,
    height: this.props.height
   };
   return this.getCropDimensions();
  },
  getContainerAspectRatio: function() {
   var r = this.getContainerDimensions();
   return r.width / r.height;
  },
  getContainerPosition: function() {
   return {
    left: 0,
    top: 0
   };
  },
  getFocus: function() {
   var r = this.props.focus;
   if (!Array.isArray(r) && r.type === "css") return {
    x: r.x,
    y: r.y
   };
   var s = this.getContainerAspectRatio(), t = this.getCropAspectRatio(), u = n.getVisible(s, t), v = n.focusHorizontally(s, t), w;
   if (!Array.isArray(r)) {
    w = n.convertFromCenterToCSS(v ? r.x : r.y, u);
   } else {
    var x = r.map(function(aa) {
     return v ? aa.x : aa.y;
    });
    x.sort();
    var y = n.findBiggestSets(x, u), z = n.getBestSet(x, y, u);
    w = n.getFocusFromSet(x, z);
   }
   return {
    x: v ? w : .5,
    y: v ? .5 : w
   };
  },
  getCropPosition: function() {
   var r = this.getCropDimensions(), s = this.getContainerDimensions(), t = this.getFocus();
   return {
    left: t.x * (s.width - r.width),
    top: t.y * (s.height - r.height)
   };
  },
  getScaleDimensions: function() {
   var r = this.getCropDimensions();
   return {
    width: r.width / this.props.cropRect.width,
    height: r.height / this.props.cropRect.height
   };
  },
  getScalePosition: function() {
   var r = this.getScaleDimensions();
   return {
    left: -r.width * this.props.cropRect.left,
    top: -r.height * this.props.cropRect.top
   };
  },
  getClipCropRectangle: function() {
   var r = this.getContainerDimensions(), s = this.getCropDimensions(), t = this.getContainerPosition(), u = this.getCropPosition(), v = Math.max(t.left, u.left), w = Math.max(t.top, u.top), x = Math.min(t.top + r.height, u.top + s.height), y = Math.min(t.left + r.width, u.left + s.width);
   return {
    left: v,
    top: w,
    width: y - v,
    height: x - w
   };
  },
  getClipCropPosition: function() {
   var r = this.getClipCropRectangle();
   return {
    left: r.left,
    top: r.top
   };
  },
  getClipCropDimensions: function() {
   var r = this.getClipCropRectangle();
   return {
    width: r.width,
    height: r.height
   };
  },
  getClipScalePosition: function() {
   var r = this.getScalePosition(), s = this.getClipCropPosition(), t = this.getCropPosition();
   return {
    left: r.left + (t.left - s.left),
    top: r.top + (t.top - s.top)
   };
  },
  getClipScaleDimensions: function() {
   return this.getScaleDimensions();
  },
  areDimensionsEqual: function(r, s) {
   return r.width === s.width && r.height === s.height;
  },
  shouldAddAllNodesAndStyles: function() {
   return this.props.animated;
  },
  hasCrop: function() {
   if (this.shouldAddAllNodesAndStyles()) return true;
   var r = this.getContainerDimensions(), s = this.getClipCropDimensions(), t = this.getClipScaleDimensions();
   if (this.areDimensionsEqual(r, s) || this.areDimensionsEqual(s, t)) return false;
   return true;
  },
  hasContainer: function() {
   if (this.shouldAddAllNodesAndStyles() || this.hasInsetBorder()) return true;
   var r = this.getContainerDimensions(), s = this.getClipScaleDimensions();
   if (this.areDimensionsEqual(r, s)) return false;
   return true;
  },
  hasInsetBorder: function() {
   return this.shouldAddAllNodesAndStyles() || this.props.insetBorderColor;
  },
  applyPositionStyle: function(r, s) {
   if (this.shouldAddAllNodesAndStyles() || s.left) r.left = Math.round(s.left);
   if (this.shouldAddAllNodesAndStyles() || s.top) r.top = Math.round(s.top);
  },
  applyDimensionsStyle: function(r, s) {
   r.width = Math.round(s.width);
   r.height = Math.round(s.height);
  },
  applyBorderRadiusStyle: function(r) {
   if (this.shouldAddAllNodesAndStyles() || this.props.borderRadius) r.borderRadius = this.props.borderRadius || 0;
  },
  getScaleStyle: function() {
   var r = {}, s = this.getClipCropDimensions(), t = this.getClipScaleDimensions();
   if (this.shouldAddAllNodesAndStyles() || !this.areDimensionsEqual(s, t)) {
    this.applyPositionStyle(r, this.getClipScalePosition());
   } else this.applyPositionStyle(r, this.getClipCropPosition());
   this.applyDimensionsStyle(r, this.getClipScaleDimensions());
   this.applyBorderRadiusStyle(r);
   return r;
  },
  getCropStyle: function() {
   var r = {};
   this.applyPositionStyle(r, this.getClipCropPosition());
   this.applyDimensionsStyle(r, this.getClipCropDimensions());
   this.applyBorderRadiusStyle(r);
   return r;
  },
  getInsetBorderStyle: function() {
   var r = {
    borderColor: this.props.insetBorderColor || "transparent"
   };
   this.applyPositionStyle(r, this.getClipCropPosition());
   this.applyDimensionsStyle(r, this.getClipCropDimensions());
   this.applyBorderRadiusStyle(r);
   return r;
  },
  getContainerStyle: function() {
   var r = {};
   this.applyDimensionsStyle(r, this.getContainerDimensions());
   this.applyBorderRadiusStyle(r);
   return r;
  },
  getScale: function() {
   var r = this.getScaleStyle(), s = r.width, t = r.height;
   r = h({}, r);
   delete r.width;
   delete r.height;
   return l.createElement("img", l.__spread({}, this.props, {
    alt: this.props.alt,
    className: k(this.props.className, "_56wb" + (this.shouldAddAllNodesAndStyles() ? " " + "_56t5" : "")),
    src: this.props.src,
    style: Object.assign({}, this.props.style || {}, r),
    width: s,
    height: t
   }));
  },
  getCrop: function() {
   var r = this.getScale();
   if (!this.hasCrop()) return r;
   return l.createElement("div", {
    className: "_56ma" + (this.shouldAddAllNodesAndStyles() ? " " + "_56t5" : ""),
    style: this.getCropStyle()
   }, r);
  },
  getInsetBorder: function() {
   if (!this.hasInsetBorder()) return null;
   return l.createElement("div", {
    className: "_56lv" + (this.shouldAddAllNodesAndStyles() ? " " + "_56t5" : ""),
    style: this.getInsetBorderStyle()
   });
  },
  getContainer: function() {
   var r = this.getCrop();
   if (!this.hasContainer()) return r;
   var s = this.getInsetBorder();
   return l.createElement("div", {
    className: "_56jj" + (this.shouldAddAllNodesAndStyles() ? " " + "_56t5" : ""),
    style: this.getContainerStyle()
   }, r, s);
  },
  render: function() {
   var r = this.getSrcDimensions();
   if (!r) return l.createElement("span", null);
   return this.getContainer();
  }
 });
 e.exports = q;
}, null);

__d("CloseButton.react", [ "React", "Image.react", "cx", "joinClasses" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 var k = g.createClass({
  displayName: "CloseButton",
  render: function() {
   var l = this.props, m = l.size || "medium", n = l.appearance || "normal", o = m === "small", p = m === "huge", q = n === "dark", r = n === "inverted", s = l.ajaxify || null, t = l.rel || null, u = "uiCloseButton" + (o ? " " + "uiCloseButtonSmall" : "") + (p ? " " + "uiCloseButtonHuge" : "") + (o && q ? " " + "uiCloseButtonSmallDark" : "") + (o && r ? " " + "uiCloseButtonSmallInverted" : "") + (!o && q ? " " + "uiCloseButtonDark" : "") + (!o && r ? " " + "uiCloseButtonInverted" : "");
   return g.createElement("a", g.__spread({}, this.props, {
    ajaxify: s,
    href: "#",
    role: "button",
    "aria-label": l.tooltip,
    "data-hover": l.tooltip && "tooltip",
    "data-tooltip-alignh": l.tooltip && "center",
    className: j(this.props.className, u),
    rel: t
   }), g.createElement(h, {
    className: "uiCloseButtonHighContrast",
    src: "/images/chat/tab/close.png"
   }));
  }
 });
 e.exports = k;
}, null);

__d("InputLabel.react", [ "React", "cx", "invariant", "joinClasses" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 var k = g, l = k.PropTypes, m = 0;
 function n() {
  return "js_input_label_" + m++;
 }
 var o = g.createClass({
  displayName: "InputLabel",
  propTypes: {
   display: l.oneOf([ "block", "inline" ])
  },
  getDefaultProps: function() {
   return {
    display: "block"
   };
  },
  render: function() {
   i(this.props.children.length === 2);
   var p = this.props.children[0], q = this.props.children[1], r = p.type === "input";
   p = g.cloneElement(p, {
    className: j(p.props.className, "uiInputLabelInput" + (r && p.props.type === "radio" ? " " + "uiInputLabelRadio" : "") + (r && p.props.type === "checkbox" ? " " + "uiInputLabelCheckbox" : "")),
    id: p.props.id || n()
   });
   q = g.cloneElement(q, {
    className: j(q.props.className, "uiInputLabelLabel"),
    htmlFor: p.props.id
   });
   var s = "uiInputLabel" + (" " + "clearfix") + (this.props.display === "inline" ? " " + "inlineBlock" : "") + (r ? " " + "uiInputLabelLegacy" : "");
   return g.createElement("div", g.__spread({}, this.props, {
    className: j(this.props.className, s)
   }), p, q);
  }
 });
 e.exports = o;
}, null);

__d("ContextualLayer.react", [ "ContextualLayer", "React", "ReactLayer", "Style" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 var k = h, l = k.PropTypes, m = i.createClass({
  propTypes: {
   contextRef: l.string,
   context: function(n, o, p) {
    if (n.context == null == (n.contextRef == null)) return new Error("Exactly one of `context` or `contextRef` must be set on `" + (p + "`."));
    var q = n[o];
    if (q != null) {
     if (typeof q !== "object") return new Error("Invalid `" + o + "` supplied to `" + p + "`, " + "expected a React component.");
     if (h.isValidElement(q)) return new Error("Invalid `" + o + "` supplied to `" + p + "`, " + "expected a React component instance. You're passing a React " + "descriptor.");
    }
   }
  },
  immutableProps: {
   modal: null
  },
  createLayer: function(n) {
   var o = this._getContextNode(), p = {
    context: o,
    contextBounds: this.props.contextBounds,
    position: this.props.position,
    alignment: this.props.alignment,
    offsetX: this.props.offsetX,
    offsetY: this.props.offsetY,
    addedBehaviors: this.enumerateBehaviors(this.props.behaviors),
    shouldSetARIAProperties: this.props.shouldSetARIAProperties
   }, q = new g(p, n);
   this._node = n;
   this._matchContextSize(this.props);
   if (this.props.contextBounds) q.setContextWithBounds(o, this.props.contextBounds);
   q.conditionShow(this.props.shown);
   return q;
  },
  receiveProps: function(n) {
   this.updateBehaviors(n.behaviors);
   var o = this._getContextNode();
   if (n.contextBounds) {
    this.layer.setContextWithBounds(o, n.contextBounds);
   } else this.layer.setContext(o);
   this._matchContextSize(n);
   this.layer.setPosition(n.position);
   this.layer.setAlignment(n.alignment);
   this.layer.setOffsetX(n.offsetX);
   this.layer.setOffsetY(n.offsetY);
   this.layer.conditionShow(n.shown);
  },
  _getContextNode: function() {
   var n;
   if (this.props.context) {
    n = h.findDOMNode(this.props.context);
   } else if (this.props.contextRef) n = this.getNodeForOwnerRef(this.props.contextRef);
   return n;
  },
  _matchContextSize: function(n) {
   var o = this._node, p = this._getContextNode();
   if (n.containerWidthMatchContext) j.set(o, "width", p.offsetWidth + "px");
   if (n.containerHeightMatchContext) j.set(o, "height", p.offsetHeight + "px");
  }
 });
 e.exports = m;
}, null);

__d("List.react", [ "React", "cx", "joinClasses" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 var j = g, k = j.PropTypes, l = g.createClass({
  displayName: "List",
  propTypes: {
   border: k.oneOf([ "none", "light", "medium", "dark" ]),
   spacing: k.oneOf([ "none", "small", "medium", "large" ]),
   direction: k.oneOf([ "vertical", "horizontal" ]),
   valign: k.oneOf([ "baseline", "top", "middle", "bottom" ]),
   edgepadding: k.bool
  },
  getDefaultProps: function() {
   return {
    border: "medium",
    spacing: "medium",
    direction: "vertical",
    valign: "top"
   };
  },
  render: function() {
   var m = this.props.border, n = this.props.direction, o = this.props.spacing, p = n === "horizontal" && this.props.valign, q, r, s;
   q = (n === "vertical" ? "_4kg" : "") + (n === "horizontal" ? " " + "_4ki" : "") + (p === "top" ? " " + "_509-" : "") + (p === "middle" ? " " + "_509_" : "") + (p === "bottom" ? " " + "_50a0" : "");
   if (o !== "none" || m !== "none") r = (m === "none" ? "_6-i" : "") + (m === "light" ? " " + "_4ks" : "") + (m === "medium" ? " " + "_4kt" : "") + (m === "dark" ? " " + "_4ku" : "");
   if (o !== "none") s = (!this.props.edgepadding ? "_6-h" : "") + (o === "small" ? " " + "_704" : "") + (o === "medium" ? " " + "_6-j" : "") + (o === "large" ? " " + "_703" : "");
   var t = i("uiList", q, r, s);
   return g.createElement("ul", g.__spread({}, this.props, {
    className: i(this.props.className, t)
   }), this.props.children);
  }
 });
 e.exports = l;
}, null);

__d("Scrollable", [ "Event", "Parent", "UserAgent_DEPRECATED" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 var j = function(event) {
  var m = h.byClass(event.getTarget(), "scrollable");
  if (!m) return;
  if (typeof event.axis !== "undefined" && event.axis === event.HORIZONTAL_AXIS || event.wheelDeltaX && !event.wheelDeltaY || event.deltaX && !event.deltaY) return;
  var n = event.wheelDelta || -event.deltaY || -event.detail, o = m.scrollHeight, p = m.clientHeight;
  if (o > p) {
   var q = m.scrollTop;
   if (n > 0 && q === 0 || n < 0 && q >= o - p - 1) {
    event.prevent();
   } else if (i.ie() < 9) if (m.currentStyle) {
    var r = m.currentStyle.fontSize;
    if (r.indexOf("px") < 0) {
     var s = document.createElement("div");
     s.style.fontSize = r;
     s.style.height = "1em";
     r = s.style.pixelHeight;
    } else r = parseInt(r, 10);
    m.scrollTop = q - Math.round(n / 120 * r);
    event.prevent();
   }
  }
 }, k = document.documentElement;
 if (i.firefox()) {
  var l = "WheelEvent" in window ? "wheel" : "DOMMouseScroll";
  k.addEventListener(l, j, false);
 } else g.listen(k, "mousewheel", j);
}, null);

__d("ScrollableArea.react", [ "Bootloader", "React", "Style", "cx", "joinClasses", "Scrollable" ], function(a, b, c, d, e, f, g, h, i, j, k) {
 b.__markCompiled && b.__markCompiled();
 b("Scrollable");
 var l = h, m = l.PropTypes, n = "uiScrollableArea native", o = "uiScrollableAreaWrap scrollable", p = "uiScrollableAreaBody", q = "uiScrollableAreaContent", r = h.createClass({
  displayName: "ReactScrollableArea",
  propTypes: {
   width: m.number,
   height: m.oneOfType([ m.number, m.string ]),
   onScroll: m.func,
   shadow: m.bool,
   fade: m.bool,
   persistent: m.bool
  },
  render: function() {
   var s = {
    height: this.props.height
   };
   return h.createElement("div", h.__spread({}, this.props, {
    className: k(this.props.className, n),
    ref: "root",
    style: Object.assign({}, this.props.style || {}, s)
   }), h.createElement("div", {
    className: o,
    ref: "wrap"
   }, h.createElement("div", {
    className: p,
    ref: "body"
   }, h.createElement("div", {
    className: q
   }, this.props.children))));
  },
  getArea: function() {
   return this._area;
  },
  componentDidMount: function() {
   g.loadModules([ "ScrollableArea" ], this._loadScrollableArea);
  },
  componentDidUpdate: function(s) {
   if (s.width !== this.props.width) {
    this._setWidthFromProps();
    var t = this.getArea(), u = t.getScrollHeight();
    t.setScrollTop(u, false);
   }
  },
  _loadScrollableArea: function(s) {
   this._area = s.fromNative(h.findDOMNode(this.refs.root), {
    fade: this.props.fade,
    persistent: this.props.persistent,
    shadow: this.props.shadow === undefined ? true : this.props.shadow
   });
   this._setWidthFromProps();
   this.props.onScroll && this._area.subscribe("scroll", this.props.onScroll);
  },
  _setWidthFromProps: function() {
   var s = h.findDOMNode(this.refs.body);
   i.set(s, "width", this.props.width + "px");
  }
 });
 e.exports = r;
}, null);

__d("classWithMixins", [ "copyProperties" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 function h(i, j) {
  var k = function() {
   i.apply(this, arguments);
  };
  k.prototype = g(Object.create(i.prototype), j.prototype);
  return k;
 }
 e.exports = h;
}, null);

__d("Spotlight", [ "Arbiter", "ArbiterMixin", "DOM", "JSXDOM", "Layer", "LayerAutoFocus", "LayerTabIsolation", "ModalLayer", "Vector", "classWithMixins", "copyProperties", "csx", "cx", "joinClasses", "mixin" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u) {
 b.__markCompiled && b.__markCompiled();
 var v = p(k, u(h));
 for (var w in v) if (v.hasOwnProperty(w)) y[w] = v[w];
 var x = v === null ? null : v.prototype;
 y.prototype = Object.create(x);
 y.prototype.constructor = y;
 y.__superConstructor__ = v;
 function y(aa, ba) {
  "use strict";
  v.call(this, aa, ba);
  this.stageMinSize = new o(0, 0);
  this.stagePadding = new o(0, 0);
 }
 y.prototype._buildWrapper = function(aa, ba) {
  "use strict";
  var ca = t("_n8 _3qx", aa.rootClassName);
  return j.div({
   className: ca
  }, j.div({
   className: "_n9"
  }, ba));
 };
 y.prototype._getDefaultBehaviors = function() {
  "use strict";
  return x._getDefaultBehaviors.call(this).concat([ z, l, m, n ]);
 };
 y.prototype.getContentRoot = function() {
  "use strict";
  if (!this._content) this._content = i.find(this.getRoot(), "div._n3");
  return this._content;
 };
 y.prototype.configure = function(aa) {
  "use strict";
  if (aa.stageMinSize) this.stageMinSize = aa.stageMinSize;
  if (aa.stagePadding) this.stagePadding = aa.stagePadding;
 };
 y.prototype.onContentLoaded = function() {
  "use strict";
  this.inform("content-load");
 };
 y.prototype.updatePermalink = function(aa) {
  "use strict";
  this.inform("permalinkchange", aa);
 };
 q(y.prototype, {
  stageMinSize: null,
  stagePadding: null
 });
 function z(aa) {
  "use strict";
  this._layer = aa;
 }
 z.prototype.enable = function() {
  "use strict";
  this._subscription = this._layer.subscribe([ "show", "hide" ], function(aa, ba) {
   if (aa === "show") {
    g.inform("layer_shown", {
     type: "Spotlight"
    });
   } else g.inform("layer_hidden", {
    type: "Spotlight"
   });
  });
 };
 z.prototype.disable = function() {
  "use strict";
  this._subscription.unsubscribe();
  this._subscription = null;
 };
 q(z.prototype, {
  _subscription: null
 });
 e.exports = y;
}, null);

__d("Spotlight.react", [ "LayerHideOnBlur", "LayerHideOnEscape", "ReactLayer", "Spotlight" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 var k = i.createClass({
  getDefaultEnabledBehaviors: function() {
   return {
    hideOnBlur: g,
    hideOnEscape: h
   };
  },
  createLayer: function(l) {
   var m = this.enumerateBehaviors(this.props.behaviors), n = {
    addedBehaviors: m,
    rootClassName: this.props.rootClassName
   }, o = new j(n, l);
   o.conditionShow(this.props.shown);
   if (this.props.onBeforeHide) o.subscribe("beforehide", this.props.onBeforeHide);
   if (this.props.onHide) o.subscribe("hide", this.props.onHide);
   return o;
  },
  receiveProps: function(l) {
   this.layer.conditionShow(l.shown);
  }
 });
 e.exports = k;
}, null);

__d("TokenizerToken.react", [ "CloseButton.react", "React", "SearchableEntry", "cx", "fbt", "joinClasses" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 var m = h, n = m.PropTypes, o = h.createClass({
  displayName: "TokenizerToken",
  propTypes: {
   label: n.string.isRequired,
   entry: n.instanceOf(i),
   onRemove: n.func,
   highlighted: n.bool
  },
  render: function() {
   var p;
   if (this.props.onRemove) p = h.createElement(g, {
    "aria-label": k._("Remove {item}", [ k.param("item", this.props.label) ]),
    className: "_58zx",
    size: "small",
    onClick: this._onClick
   });
   var q = "_58zy" + (this.props.highlighted ? " " + "_58zz" : "");
   return h.createElement("span", h.__spread({}, this.props, {
    className: l(this.props.className, q),
    label: null
   }), this.props.label, p);
  },
  _onClick: function(p) {
   p.preventDefault();
   this.props.onRemove(this.props.entry);
  }
 });
 e.exports = o;
}, null);

__d("AbstractTextFieldMixin.react", [ "React", "Keys", "cx", "invariant", "joinClasses", "cloneWithProps" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 var m = g, n = m.PropTypes, o = {
  propTypes: {
   value: n.string,
   placeholder: n.string,
   tabIndex: n.string,
   maxLength: n.number,
   autoComplete: n.string,
   onBackspace: n.func,
   onBackTab: n.func,
   onBlur: n.func,
   onChange: n.func,
   onDownArrow: n.func,
   onEnter: n.func,
   onEscape: n.func,
   onFocus: n.func,
   onKeyDown: n.func,
   onLeftArrow: n.func,
   onNoShiftEnter: n.func,
   onRightArrow: n.func,
   onShiftEnter: n.func,
   onShiftDownArrow: n.func,
   onShiftUpArrow: n.func,
   onTab: n.func,
   onUpArrow: n.func,
   type: n.string,
   autoCapitalize: n.string,
   autoCorrect: n.string
  },
  getInitialState: function() {
   return {
    focused: false,
    value: this.props.defaultValue || ""
   };
  },
  getValue: function() {
   return this.props.value != null ? this.props.value : this.state.value;
  },
  onInputKeyDown: function(p) {
   var q = this.props, r = p.keyCode, s = p.shiftKey;
   if (r === h.BACKSPACE && !s && q.onBackspace) {
    q.onBackspace(p);
   } else if (r === h.TAB && !s && q.onTab) {
    q.onTab(p);
   } else if (r === h.TAB && s && q.onBackTab) {
    q.onBackTab(p);
   } else if (r === h.UP) {
    if (s) {
     if (q.onShiftUpArrow) q.onShiftUpArrowAttempt(p);
    } else if (q.onUpArrow) q.onUpArrow(p);
   } else if (r === h.DOWN && q.onDownArrow) {
    if (s) {
     if (q.onShiftDownArrow) q.onShiftDownArrow(p);
    } else if (q.onDownArrow) q.onDownArrow(p);
   } else if (r === h.LEFT && q.onLeftArrow) {
    q.onLeftArrow(p);
   } else if (r === h.RIGHT && q.onRightArrow) {
    q.onRightArrow(p);
   } else if (r === h.RETURN) {
    if (q.onEnter) q.onEnter(p);
    if (s) {
     if (q.onShiftEnter) q.onShiftEnter(p);
    } else if (q.onNoShiftEnter) q.onNoShiftEnter(p);
   } else if (r === h.ESC && q.onEscape) q.onEscape(p);
   if (q.onKeyDown) q.onKeyDown(p);
  },
  onInputChange: function(p) {
   if (this.props.onChange) this.props.onChange(p);
   if (this.props.value == null) this.setState({
    value: p.target.value
   });
  },
  focusInput: function() {
   this.getTextFieldDOM().focus();
  },
  blurInput: function() {
   this.getTextFieldDOM().blur();
  },
  onInputBlur: function(event) {
   if (this.props.onBlur) this.props.onBlur(event);
   if (!event.isDefaultPrevented()) this.setState({
    focused: false
   });
  },
  onInputFocus: function(event) {
   if (this.props.onFocus) this.props.onFocus(event);
   if (!event.isDefaultPrevented()) this.setState({
    focused: true
   });
  },
  getTextFieldDOM: function() {
   return g.findDOMNode(this.refs[this.getTextFieldRef()]);
  },
  getTextFieldRef: function() {
   return "textField";
  },
  setTextFieldPropsOn: function(p) {
   return l(p, {
    "aria-activedescendant": this.props["aria-activedescendant"],
    "aria-autocomplete": this.props["aria-autocomplete"],
    "aria-owns": this.props["aria-owns"],
    "data-testid": this.props["data-testid"],
    ref: this.getTextFieldRef(),
    role: this.props.role,
    placeholder: this.props.placeholder,
    autoCapitalize: this.props.autoCapitalize,
    autoComplete: this.props.autoComplete,
    autoCorrect: this.props.autoCorrect,
    onKeyDown: this.onInputKeyDown,
    onBlur: this.onInputBlur,
    onFocus: this.onInputFocus,
    onChange: this.onInputChange,
    disabled: this.props.disabled,
    defaultValue: this.props.defaultValue,
    name: this.props.name,
    value: this.getValue(),
    id: this.props.id,
    maxLength: this.props.maxLength,
    min: this.props.min,
    max: this.props.max,
    title: this.props.title,
    type: this.props.type || p.props.type
   });
  },
  render: function() {
   var p = k(this.props.className, "_58ak" + (!this.getValue() ? " " + "_3ct8" : ""));
   j(this.renderTextField);
   return g.createElement("label", {
    className: p
   }, this.renderTextField());
  }
 };
 e.exports = o;
}, null);

__d("AbstractTextInput.react", [ "AbstractTextFieldMixin.react", "React", "cx" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 var j = h.createClass({
  displayName: "AbstractTextInput",
  mixins: [ g ],
  renderTextField: function() {
   return this.setTextFieldPropsOn(h.createElement("input", {
    type: "text",
    className: "_58al",
    size: this.props.size,
    tabIndex: this.props.tabIndex,
    onClick: this.props.onClick,
    onKeyUp: this.props.onKeyUp,
    onPaste: this.props.onPaste
   }));
  }
 });
 e.exports = j;
}, null);

__d("SearchableTextInput.react", [ "EventListener", "React", "AbstractTextFieldMixin.react", "AbstractTextInput.react", "getActiveElement", "merge" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 var m = h, n = m.PropTypes, o = h.createClass({
  displayName: "SearchableTextInput",
  propTypes: l(i.propTypes, {
   queryString: n.string,
   searchSource: n.object,
   searchSourceOptions: n.object,
   onEntriesFound: n.func.isRequired,
   searchOnFocus: n.bool,
   searchOnUpdate: n.bool,
   onPaste: n.func,
   onFocus: n.func,
   onChange: n.func
  }),
  componentDidMount: function() {
   if (this.props.onPaste) this._listener = g.listen(this.refs.input.getTextFieldDOM(), "paste", this.props.onPaste);
  },
  componentWillReceiveProps: function(p) {},
  componentDidUpdate: function(p) {
   if (this.props.searchOnUpdate) if (p.queryString !== this.props.queryString) this.search(this.props.queryString);
  },
  componentWillUnmount: function() {
   if (this._listener) {
    this._listener.remove();
    this._listener = null;
   }
  },
  _onInputFocus: function() {
   this.props.searchSource.bootstrap(function() {
    if (this.props.searchOnFocus) this.search(this.props.queryString);
   }.bind(this));
   this.props.onFocus && this.props.onFocus();
  },
  _onSearchCallback: function(p, q) {
   if (this.props.queryString === q) this.props.onEntriesFound(p);
  },
  _onChange: function(event) {
   this.props.onChange && this.props.onChange(event);
   var p = event.target.value;
   setTimeout(function() {
    return this.search(p);
   }.bind(this));
  },
  search: function(p) {
   this.props.searchSource.search(p, this._onSearchCallback, this.props.searchSourceOptions);
  },
  focusInput: function() {
   var p = this.getTextFieldDOM();
   if (k() === p) {
    this._onInputFocus();
   } else p.offsetHeight && p.focus();
  },
  blurInput: function() {
   var p = this.getTextFieldDOM();
   p.offsetHeight && p.blur();
  },
  getTextFieldDOM: function() {
   return this.refs.input.getTextFieldDOM();
  },
  render: function() {
   var p = this.props.queryString || "";
   return h.createElement(j, h.__spread({}, this.props, {
    "aria-label": p,
    onChange: this._onChange,
    onFocus: this._onInputFocus,
    ref: "input",
    role: "combobox",
    value: p
   }));
  }
 });
 e.exports = o;
}, null);

__d("TypeaheadNavigation", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 var g = {
  moveUp: function(h, i, j) {
   var k = h.indexOf(i), l = k == -1 ? h.length - 1 : k - 1;
   j(l == -1 ? null : h[l]);
  },
  moveDown: function(h, i, j) {
   var k = h.indexOf(i) + 1;
   j(k == h.length ? null : h[k]);
  }
 };
 e.exports = g;
}, null);

__d("TypeaheadView.react", [ "React", "cx", "merge" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 var j = g, k = j.PropTypes, l = g.createClass({
  displayName: "TypeaheadView",
  propTypes: {
   entries: k.array.isRequired,
   extraRendererProps: k.object,
   highlightedEntry: k.object,
   isVisible: k.bool,
   queryString: k.string,
   Renderer: k.func.isRequired,
   selectedEntry: k.object
  },
  _onSelect: function(m, n) {
   if (this.props.onSelect) this.props.onSelect(m, n);
  },
  _onHighlight: function(m) {
   this.props.onHighlight(m);
  },
  render: function() {
   var m = !this.props.isVisible ? "hidden_elem" : "", n = i({
    highlightedEntry: this.props.highlightedEntry,
    selectedEntry: this.props.selectedEntry,
    entries: this.props.entries,
    onSelect: this._onSelect,
    onHighlight: this._onHighlight,
    onRenderHighlight: this.props.onRenderHighlight,
    ariaOwneeID: this.props.ariaOwneeID,
    queryString: this.props.queryString
   }, this.props.extraRendererProps), o = this.props.Renderer;
   return g.createElement("div", {
    className: m
   }, g.createElement(o, g.__spread({}, n)));
  }
 });
 e.exports = l;
}, null);

__d("AbstractTypeahead.react", [ "AbstractTextFieldMixin.react", "ContextualLayer.react", "InputSelection", "React", "ReactLayeredComponentMixin", "SearchableTextInput.react", "TypeaheadNavigation", "TypeaheadView.react", "cx", "getOrCreateDOMID", "joinClasses", "uniqueID" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r) {
 b.__markCompiled && b.__markCompiled();
 var s = j, t = s.PropTypes, u = [], v = 10, w = j.createClass({
  displayName: "AbstractTypeahead",
  mixins: [ k ],
  propTypes: Object.assign({}, g.propTypes, {
   inputClassName: t.string,
   inputID: t.string,
   autoCapitalize: t.string,
   autoComplete: t.string,
   autoCorrect: t.string,
   queryString: t.string,
   searchSource: t.object.isRequired,
   searchSourceOptions: t.object,
   excludedEntries: t.object,
   presenter: t.object.isRequired,
   onSelectAttempt: t.func,
   onEntriesFound: t.func,
   onEnterWithoutSelection: t.func,
   autoHighlight: t.bool,
   showEntriesOnFocus: t.bool,
   selectOnBlur: t.bool,
   selectOnTab: t.bool,
   focusedOnInit: t.bool,
   hideViewWithEntries: t.bool,
   disabled: t.bool,
   entriesWidthMatchContext: t.bool,
   selectedEntry: t.object,
   onTypeaheadVisibilityChanged: t.func,
   onPaste: t.func
  }),
  getDefaultProps: function() {
   return {
    autoComplete: "off",
    autoCorrect: "off",
    selectOnBlur: false,
    selectOnTab: true,
    hideViewWithEntries: true,
    entriesWidthMatchContext: true
   };
  },
  getInitialState: function() {
   return {
    highlightedEntry: null,
    isAutoHighlight: this.props.autoHighlight,
    activeDescendant: null,
    ariaOwneeID: r(),
    activeEntries: null,
    focused: !!this.props.focusedOnInit,
    viewIsVisible: !!this.props.focusedOnInit
   };
  },
  _onRenderHighlight: function(x) {
   var y = p(x);
   this.setState({
    activeDescendant: y
   });
  },
  _determineViewVisibility: function(x, y) {
   if (!x) return false;
   var z = x.length > 0 && (this.props.showEntriesOnFocus || this.props.queryString.length > 0);
   return !!(y && (this.props.presenter.alwaysVisibleOnFocus || z));
  },
  _onEntriesFound: function(x) {
   if (!this.isMounted()) return;
   if (this.props.excludedEntries) {
    var y = this.props.excludedEntries;
    x = x.filter(function(ga) {
     return !y.hasOwnProperty(ga.getUniqueID());
    });
   }
   var z = this.props.presenter, aa = typeof z.sortEntries == "function" ? z.sortEntries(x, this.state.activeEntries, this.props.queryString) : x, ba = aa.slice(0, z.maxEntries || v), ca = this._determineViewVisibility(ba, this.state.focused);
   if (!ba.length) {
    this.setState({
     activeDescendant: null,
     activeEntries: ba,
     highlightedEntry: null,
     isAutoHighlight: this.props.autoHighlight
    });
    this._setViewIsVisible(ca);
    return;
   }
   if (this.props.onEntriesFound) this.props.onEntriesFound(ba);
   var da = this.state.highlightedEntry, ea = da && ba.indexOf(da) !== -1;
   if (!this.props.autoHighlight) {
    this.setState({
     activeEntries: ba,
     highlightedEntry: ea ? da : null
    });
    if (ca) this._setViewIsVisible(true);
    return;
   }
   var fa = this.state.isAutoHighlight;
   if (fa) {
    da = ba[0];
   } else {
    da = ea ? da : ba[0];
    fa = !ea;
   }
   this.setState({
    activeEntries: ba,
    highlightedEntry: da,
    isAutoHighlight: fa
   });
   if (ca) this._setViewIsVisible(true);
  },
  _onInputFocus: function() {
   var x = this._determineViewVisibility(this.state.activeEntries, true);
   if (x) this._setViewIsVisible(true);
   this.setState({
    focused: true
   });
   this.props.onFocus && this.props.onFocus();
  },
  _onInputBlur: function() {
   if (this.props.hideViewWithEntries) this._close();
   if (this.props.selectOnBlur && this.state.highlightedEntry) this.props.onSelectAttempt(this.state.highlightedEntry);
   this.setState({
    focused: false
   });
   this.props.onBlur && this.props.onBlur();
  },
  _onInputClick: function() {
   var x = this.getTextFieldDOM(), y = i.get(x);
   if (y && y.start == y.end) x.select();
   this.props.onClick && this.props.onClick();
  },
  _onEscape: function() {
   this._close();
   this.blurInput();
   this.setState({
    focused: false
   });
   this.props.onEscape && this.props.onEscape();
  },
  _onEnter: function(event) {
   if (this.props.onEnterWithoutSelection && (!this.state.viewIsVisible || !this.state.highlightedEntry)) {
    this.props.onEnterWithoutSelection(event);
    return;
   }
   if (!this.state.viewIsVisible) return;
   if (!this.state.highlightedEntry) {
    event.preventDefault();
    return;
   }
   if (this.props.hideViewWithEntries) this._close();
   if (this.props.onSelectAttempt) this.props.onSelectAttempt(this.state.highlightedEntry);
   event.preventDefault();
  },
  _onTab: function(event) {
   if (this.props.selectOnTab && this.state.viewIsVisible && this.props.onSelectAttempt && this.state.highlightedEntry) {
    if (this.props.hideViewWithEntries) {
     this._close();
     event.preventDefault();
    }
    this.props.onSelectAttempt(this.state.highlightedEntry);
   }
  },
  _onDownArrow: function(event) {
   event.preventDefault();
   m.moveDown(this.state.activeEntries || u, this.state.highlightedEntry, this._setHighlight);
  },
  _onUpArrow: function(event) {
   event.preventDefault();
   m.moveUp(this.state.activeEntries || u, this.state.highlightedEntry, this._setHighlight);
  },
  _setHighlight: function(x) {
   this.setState({
    highlightedEntry: x,
    isAutoHighlight: !x
   });
  },
  _onInputChange: function(event) {
   if (this.props.onChange) this.props.onChange(event);
   this._setViewIsVisible(this.state.focused && (this.props.showEntriesOnFocus || event.target.value.length > 0) && (this.state.activeEntries != null && this.state.activeEntries.length > 0));
  },
  _onViewHighlight: function(x) {
   this.setState({
    highlightedEntry: x,
    isAutoHighlight: false
   });
  },
  _getView: function() {
   return j.createElement(n, {
    Renderer: this.props.presenter.ViewRenderer,
    extraRendererProps: this.props.presenter.extraRendererProps,
    highlightedEntry: this.state.highlightedEntry,
    selectedEntry: this.props.selectedEntry,
    isVisible: this.state.viewIsVisible,
    ariaOwneeID: this.state.ariaOwneeID,
    onHighlight: this._onViewHighlight,
    onRenderHighlight: this._onRenderHighlight,
    onSelect: this.props.onSelectAttempt,
    entries: this.state.activeEntries || u,
    queryString: this.props.queryString
   });
  },
  _setViewIsVisible: function(x) {
   if (x !== this.state.viewIsVisible) {
    if (this.props.onTypeaheadVisibilityChanged) this.props.onTypeaheadVisibilityChanged(x, this.state.activeEntries || u);
    this.setState({
     viewIsVisible: x
    });
   }
  },
  componentWillReceiveProps: function(x) {
   if (!x.queryString && !this.props.showEntriesOnFocus) this.clearActiveEntries();
  },
  componentDidUpdate: function() {
   var x = this._determineViewVisibility(this.state.activeEntries, this.state.focused);
   if (x) this._setViewIsVisible(true);
  },
  renderLayers: function() {
   if (!this.props.presenter.useLayer) return {};
   var x = null, y = null;
   if (this.props.context) {
    x = this.props.context;
   } else y = "input";
   return {
    typeaheadView: j.createElement(h, {
     behaviors: this.props.presenter.layerBehaviors,
     containerWidthMatchContext: this.props.entriesWidthMatchContext,
     contextRef: y,
     context: x,
     position: this.props.presenter.layerPosition || "below",
     shown: this.state.viewIsVisible,
     shouldSetARIAProperties: false
    }, this._getView())
   };
  },
  render: function() {
   var x = j.createElement(l, {
    "aria-activedescendant": this.state.activeDescendant,
    "aria-autocomplete": "list",
    "aria-owns": this.state.ariaOwneeID,
    ref: "input",
    autoCapitalize: this.props.autoCapitalize,
    autoComplete: this.props.autoComplete,
    autoCorrect: this.props.autoCorrect,
    className: this.props.inputClassName,
    id: this.props.inputID,
    queryString: this.props.queryString,
    placeholder: this.props.placeholder,
    searchSource: this.props.searchSource,
    searchSourceOptions: this.props.searchSourceOptions,
    searchOnFocus: !!this.props.showEntriesOnFocus,
    disabled: this.props.disabled,
    onEntriesFound: this._onEntriesFound,
    onEscape: this._onEscape,
    onBlur: this._onInputBlur,
    onFocus: this._onInputFocus,
    onChange: this._onInputChange,
    onDownArrow: this._onDownArrow,
    onUpArrow: this._onUpArrow,
    onTab: this._onTab,
    onEnter: this._onEnter,
    onBackspace: this.props.onBackspace,
    onPaste: this.props.onPaste,
    onClick: this._onInputClick
   }), y = null;
   if (!this.props.presenter.useLayer) y = this._getView();
   return j.createElement("span", j.__spread({}, this.props, {
    className: q(this.props.className, "_58ah"),
    onBlur: null,
    onClick: null,
    onFocus: null
   }), x, y);
  },
  componentDidMount: function() {
   if (this.props.focusedOnInit) this.refs.input.focusInput();
  },
  clearActiveEntries: function() {
   this.setState({
    activeDescendant: null,
    activeEntries: null,
    highlightedEntry: null
   });
  },
  focusInput: function() {
   this.refs.input.focusInput();
  },
  blurInput: function() {
   if (this.refs.input.blur) {
    this.refs.input.blur();
   } else if (this.refs.input.blurInput) this.refs.input.blurInput();
  },
  hideView: function() {
   this._setViewIsVisible(false);
  },
  _close: function() {
   this._setViewIsVisible(false);
   this.clearActiveEntries();
  },
  getTextFieldDOM: function() {
   return this.refs.input.getTextFieldDOM();
  }
 });
 e.exports = w;
}, null);

__d("XUIBadge.react", [ "React", "cx", "invariant", "joinClasses" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 var k = g, l = k.PropTypes;
 function m(o) {
  return parseInt(o, 10) === o;
 }
 var n = g.createClass({
  displayName: "XUIBadge",
  propTypes: {
   type: l.oneOf([ "regular", "special" ]),
   count: l.number.isRequired,
   maxcount: l.number
  },
  getDefaultProps: function() {
   return {
    type: "regular",
    maxcount: 20
   };
  },
  render: function() {
   var o = this.props.type, p = this.props.count, q = this.props.maxcount;
   i(m(p));
   i(m(q));
   var r = "_5ugh" + (p > q ? " " + "_5ugi" : "") + (o === "regular" ? " " + "_5ugf" : "") + (o === "special" ? " " + "_5ugg" : "") + (p === 0 ? " " + "hidden_elem" : "");
   return g.createElement("span", g.__spread({}, this.props, {
    className: j(this.props.className, r),
    type: null
   }), p > q ? q + "+" : p);
  }
 });
 e.exports = n;
}, null);

__d("AbstractCheckboxInput.react", [ "React", "cx", "invariant", "joinClasses" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 var k = g, l = k.PropTypes, m = g.createClass({
  displayName: "AbstractCheckboxInput",
  propTypes: {
   tooltip: l.string
  },
  render: function() {
   i(!this.props.children || this.props.children.length === 0);
   var n = j(this.props.className, "_kv1"), o = g.createElement("input", g.__spread({}, this.props, {
    className: null,
    type: "checkbox"
   }), undefined);
   return g.createElement("label", {
    className: n
   }, o, g.createElement("span", {
    "data-hover": this.props.tooltip ? "tooltip" : null,
    "aria-label": this.props.tooltip
   }));
  }
 });
 e.exports = m;
}, null);

__d("XUICheckboxInput.react", [ "AbstractCheckboxInput.react", "React", "cx", "joinClasses" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 var k = h.createClass({
  displayName: "XUICheckboxInput",
  render: function() {
   return h.createElement(g, h.__spread({}, this.props, {
    className: j(this.props.className, "_55sg")
   }), void 0);
  }
 });
 e.exports = k;
}, null);

__d("XUINotice.react", [ "React", "Image.react", "XUICloseButton.react", "cx", "fbt", "ix", "joinClasses" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var n = g, o = n.PropTypes, p = {
  notify: {
   altText: k._("Notice"),
   className: null,
   iconSrc: l("/images/deprecated/glyphs/flat/info-flat_m.png")
  },
  success: {
   altText: k._("Success"),
   className: "_3qh4",
   iconSrc: l("/images/deprecated/glyphs/flat/checkmark_white_m.png")
  },
  warn: {
   altText: k._("Warning"),
   className: "_585o",
   iconSrc: l("/images/deprecated/glyphs/flat/error-flat_m.png")
  }
 }, q = g.createClass({
  displayName: "XUINotice",
  propTypes: {
   onDismiss: o.func,
   use: o.oneOf(Object.keys(p)),
   size: o.oneOf([ "medium", "small" ])
  },
  getDefaultProps: function() {
   return {
    use: "notify",
    size: "medium"
   };
  },
  render: function() {
   var r = this.props, s = r.children, t = r.className, u = r.onDismiss, v = r.use, w = function(aa, ba) {
    var ca = {}, da = Object.prototype.hasOwnProperty;
    if (aa == null) throw new TypeError();
    for (var ea in aa) if (da.call(aa, ea) && !da.call(ba, ea)) ca[ea] = aa[ea];
    return ca;
   }(r, {
    children: 1,
    className: 1,
    onDismiss: 1,
    use: 1
   }), x = p[v];
   t = m("_585n", x.className, t);
   var y = null;
   if (u) y = g.createElement(i, {
    className: "_585q",
    href: "#",
    onClick: u
   });
   var z = "_585r" + (this.props.size === "medium" ? " " + "_50f4" : "") + (this.props.size === "small" ? " " + "_50f3" : "");
   return g.createElement("div", g.__spread({}, w, {
    className: t
   }), g.createElement(h, {
    alt: x.altText,
    className: "_585p",
    src: x.iconSrc
   }), y, g.createElement("div", {
    className: z
   }, s));
  }
 });
 e.exports = q;
}, null);

__d("XUIRadioInput.react", [ "React", "cx", "joinClasses", "invariant" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 var k = g.createClass({
  displayName: "XUIRadioInput",
  render: function() {
   j(!this.props.children || this.props.children.length === 0);
   var l = i(this.props.className, "_55sh"), m = g.createElement("input", g.__spread({}, this.props, {
    className: null,
    type: "radio"
   }), undefined);
   return g.createElement("label", {
    className: l
   }, m, g.createElement("span", null));
  }
 });
 e.exports = k;
}, null);

__d("XUIRadioList.react", [ "InputLabel.react", "React", "ReactChildren", "XUIRadioInput.react", "cloneWithProps" ], function(a, b, c, d, e, f, g, h, i, j, k) {
 b.__markCompiled && b.__markCompiled();
 var l = h, m = l.PropTypes, n = h.createClass({
  displayName: "XUIRadioList",
  propTypes: {
   name: m.string,
   onValueChange: m.func,
   selectedValue: m.any
  },
  render: function() {
   var o = i.map(this.props.children, function(p) {
    return k(p, {
     name: this.props.name,
     onSelect: this.props.onValueChange,
     selectedValue: this.props.selectedValue
    });
   }, this);
   return h.createElement("ul", h.__spread({}, this.props, {
    name: null
   }), o);
  }
 });
 n.Item = h.createClass({
  displayName: "XUIRadioList.Item",
  propTypes: {
   name: m.string,
   onSelect: m.func,
   selectedValue: m.any,
   value: m.any,
   disabled: m.bool
  },
  render: function() {
   return h.createElement("li", {
    className: this.props.className
   }, h.createElement(g, {
    display: "inline"
   }, h.createElement(j, {
    checked: this.props.selectedValue === this.props.value,
    name: this.props.name,
    onChange: this._handleChange,
    value: this.props.value,
    disabled: !!this.props.disabled
   }), h.createElement("label", null, this.props.children)));
  },
  _handleChange: function(event) {
   this.props.onSelect && this.props.onSelect(event.target.value);
  }
 });
 e.exports = n;
}, null);

__d("filterObject", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var g = Object.prototype.hasOwnProperty;
 function h(i, j, k) {
  if (!i) return null;
  var l = {};
  for (var m in i) if (g.call(i, m) && j.call(k, i[m], m, i)) l[m] = i[m];
  return l;
 }
 e.exports = h;
}, null);

__d("XUIError", [ "ARIA", "Bootloader", "CSS", "DataStore", "DOM", "Event", "JSXDOM", "Parent", "Promise", "cx", "filterObject", "getActiveElement", "getElementText", "invariant", "isNode", "memoize", "merge", "nl2br" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var y = "data-xui-error-alignh", z = "XUIError", aa = "data-xui-error", ba = "_1tp7", ca = "data-xui-error-position";
 l.listen(document.documentElement, "mouseover", function(event) {
  if (n.byClass(r(), ba)) return;
  var qa = n.byClass(event.getTarget(), ba);
  if (qa) {
   ma(qa);
  } else na();
 });
 l.listen(document.documentElement, "focusin", function(event) {
  var qa = n.byClass(event.getTarget(), ba);
  if (qa) {
   ma(qa);
  } else na();
 });
 l.listen(document.documentElement, "focusout", function(event) {
  na();
 });
 var da = v(function() {
  return new o(function(qa, ra) {
   h.loadModules([ "ContextualDialog", "ContextualLayerAutoFlip", "ContextualLayerUpdateOnScroll", "LayerRefocusOnHide", "React" ], function(sa, ta, ua, va, wa) {
    var xa = {
     ContextualDialog: sa,
     ContextualLayerAutoFlip: ta,
     ContextualLayerUpdateOnScroll: ua,
     LayerRefocusOnHide: va,
     React: wa
    };
    qa(w(xa, ea(xa)));
   });
  });
 });
 function ea(qa) {
  var ra = qa.ContextualDialog, sa = qa.ContextualLayerAutoFlip, ta = qa.ContextualLayerUpdateOnScroll, ua = qa.LayerRefocusOnHide, va = m.div({
   className: "_1tp8"
  }), wa = m.div({
   className: "_53ij _1tp9"
  }, m.div({
   className: "_1tpa"
  }), va), xa = new ra({
   addedBehaviors: [ ta, sa ],
   theme: {
    wrapperClassName: "_1tpb",
    arrowDimensions: {
     offset: 12,
     length: 16
    }
   }
  }, wa);
  xa.disableBehavior(ua);
  xa.shouldSetARIAProperties(false);
  return {
   dialog: xa,
   dialogBodyNode: wa,
   dialogMessageNode: va
  };
 }
 var fa = null;
 function ga(qa) {
  return w({
   message: qa.getAttribute(aa),
   position: qa.getAttribute(ca),
   alignh: qa.getAttribute(y)
  }, j.get(qa, z));
 }
 function ha(qa, ra) {
  j.set(qa, z, ra);
 }
 function ia(qa, ra) {
  j.set(qa, z, w(j.get(qa, z), ra));
 }
 function ja(qa) {
  j.remove(qa, z);
 }
 var ka = false, la = false;
 function ma(qa) {
  da().done(function(ra) {
   var sa = ra.React, ta = ra.dialog, ua = ra.dialogMessageNode, va = ga(qa), wa = va.message, xa = sa.isValidElement(wa);
   if (ka && !xa) sa.unmountComponentAtNode(ua);
   if (xa) {
    sa.render(wa, ua);
   } else {
    t(typeof wa === "string" || u(wa));
    if (typeof wa === "string") wa = x(wa);
    k.setContent(ua, wa);
   }
   ka = xa;
   ta.setContext(qa).setPosition(va.position || "right").setAlignment(va.alignh || (va.position === "above" || va.position === "below" ? "right" : null)).show();
   g.notify(s(ua));
   fa = qa;
  });
  la = true;
 }
 function na() {
  if (!la) return;
  da().done(function(qa) {
   var ra = qa.React, sa = qa.dialog, ta = qa.dialogMessageNode;
   if (!fa) return;
   if (ka) {
    ra.unmountComponentAtNode(ta);
    ka = false;
   }
   sa.hide();
   fa = null;
  });
 }
 function oa(qa) {
  if (k.contains(qa, r())) ma(qa);
 }
 var pa = {
  set: function(qa) {
   var ra = qa.target, sa = qa.message, ta = qa.position, ua = qa.alignh;
   t(sa !== null);
   i.addClass(ra, ba);
   ia(ra, q({
    message: sa,
    position: ta,
    alignh: ua
   }, function(va) {
    return va !== void 0;
   }));
   oa(ra);
  },
  clear: function(qa) {
   i.removeClass(qa, ba);
   qa.removeAttribute(aa);
   ja(qa);
   if (qa === fa) na();
  },
  updatePosition: function() {
   if (!la) return;
   da().done(function(qa) {
    var ra = qa.dialog;
    if (fa) ra.updatePosition();
   });
  },
  __setReactError: function(qa, ra) {
   var sa = ra.message, ta = ra.position, ua = ra.alignh;
   t(sa !== null);
   ha(qa, {
    message: sa,
    position: ta,
    alignh: ua
   });
   oa(qa);
  },
  __clearReactError: function(qa) {
   ja(qa);
   if (qa === fa) na();
  }
 };
 e.exports = pa;
}, null);

__d("XUIError.react", [ "React", "XUIError", "cx", "joinClasses", "onlyChild" ], function(a, b, c, d, e, f, g, h, i, j, k) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var l = g, m = l.PropTypes, n = "_1tp7", o = g.createClass({
  displayName: "ReactXUIError",
  propTypes: {
   xuiError: m.any,
   xuiErrorPosition: m.oneOf([ "above", "below", "left", "right" ]),
   xuiErrorAlignh: m.oneOf([ "left", "center", "right" ])
  },
  componentDidMount: function() {
   if (this.props.xuiError != null) h.__setReactError(g.findDOMNode(this), {
    message: this.props.xuiError,
    position: this.props.xuiErrorPosition,
    alignh: this.props.xuiErrorAlignh
   });
  },
  componentDidUpdate: function() {
   if (this.props.xuiError == null) {
    h.__clearReactError(g.findDOMNode(this));
   } else h.__setReactError(g.findDOMNode(this), {
    message: this.props.xuiError,
    position: this.props.xuiErrorPosition,
    alignh: this.props.xuiErrorAlignh
   });
  },
  componentWillUnmount: function() {
   h.__clearReactError(g.findDOMNode(this));
  },
  render: function() {
   var p = k(this.props.children);
   if (this.props.xuiError != null) p = g.cloneElement(p, {
    className: j(p.props.className, n)
   });
   return p;
  }
 });
 e.exports = o;
}, null);

__d("XUITextInput.react", [ "AbstractTextInput.react", "React", "XUIError.react", "cx", "joinClasses" ], function(a, b, c, d, e, f, g, h, i, j, k) {
 b.__markCompiled && b.__markCompiled();
 var l = h.createClass({
  displayName: "XUITextInput",
  propTypes: Object.assign({}, g.propTypes, i.propTypes),
  render: function() {
   var m = "_55r1" + (this.props.height == "tall" ? " " + "_55r2" : ""), n = h.createElement(g, h.__spread({}, this.props, {
    ref: "textInput",
    className: k(this.props.className, m)
   }));
   return h.createElement(i, h.__spread({}, this.props), n);
  },
  focusInput: function() {
   this.refs.textInput.focusInput();
  }
 });
 e.exports = l;
}, null);

__d("TypeaheadViewPropTypes", [ "React" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 var h = g, i = h.PropTypes, j = {
  ariaOwneeID: i.string,
  highlightedEntry: i.object,
  entries: i.array.isRequired,
  onSelect: i.func.isRequired,
  onHighlight: i.func,
  onRenderHighlight: i.func,
  role: i.string
 };
 e.exports = j;
}, null);

__d("destroyOnUnload", [ "Run" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 function h(i) {
  g.onLeave(i);
 }
 e.exports = h;
}, null);

__d("ActorURI", [ "ActorURIConfig", "URI" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 var i = {
  create: function(j, k) {
   return new h(j).addQueryData(g.PARAMETER_ACTOR, k);
  }
 };
 i.PARAMETER_ACTOR = g.PARAMETER_ACTOR;
 e.exports = i;
}, null);

__d("RangedCallbackManager", [ "CallbackManagerController", "createObjectFrom" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 function i(j, k, l) {
  "use strict";
  this.$RangedCallbackManager0 = [];
  this.$RangedCallbackManager1 = false;
  this.$RangedCallbackManager2 = false;
  this.$RangedCallbackManager3 = {};
  this.$RangedCallbackManager4 = new g(this.$RangedCallbackManager5.bind(this));
  this.$RangedCallbackManager6 = j;
  this.$RangedCallbackManager7 = k;
  this.$RangedCallbackManager8 = l;
 }
 i.prototype.executeOrEnqueue = function(j, k, l, m, n) {
  "use strict";
  return this.$RangedCallbackManager4.executeOrEnqueue({
   start: j,
   limit: k
  }, l, {
   strict: !!m,
   skipOnStrictHandler: n
  });
 };
 i.prototype.unsubscribe = function(j) {
  "use strict";
  this.$RangedCallbackManager4.unsubscribe(j);
 };
 i.prototype.getUnavailableResources = function(j) {
  "use strict";
  var k = this.$RangedCallbackManager4.getRequest(j), l = [];
  if (k && !this.$RangedCallbackManager1) {
   var m = k.request, n = this.$RangedCallbackManager9(k.options), o = m.start + m.limit;
   for (var p = n.length; p < o; p++) l.push(p);
  }
  return l;
 };
 i.prototype.addResources = function(j) {
  "use strict";
  j.forEach(function(k) {
   if (!this.$RangedCallbackManager3[k]) {
    this.$RangedCallbackManager3[k] = true;
    this.$RangedCallbackManager0.push(k);
    this.$RangedCallbackManager2 = null;
   }
  }.bind(this));
  this.resortResources();
  this.$RangedCallbackManager4.runPossibleCallbacks();
 };
 i.prototype.addResourcesWithoutSorting = function(j, k) {
  "use strict";
  var l = this.$RangedCallbackManager0.slice(0, k);
  l = l.concat(j);
  l = l.concat(this.$RangedCallbackManager0.slice(k));
  this.$RangedCallbackManager0 = l;
  Object.assign(this.$RangedCallbackManager3, h(j, true));
  this.$RangedCallbackManager2 = null;
  this.$RangedCallbackManager4.runPossibleCallbacks();
 };
 i.prototype.removeResources = function(j) {
  "use strict";
  j.forEach(function(k) {
   if (this.$RangedCallbackManager3[k]) {
    this.$RangedCallbackManager3[k] = false;
    var l = this.$RangedCallbackManager0.indexOf(k);
    if (l != -1) this.$RangedCallbackManager0.splice(l, 1);
   }
  }.bind(this));
 };
 i.prototype.removeAllResources = function() {
  "use strict";
  this.$RangedCallbackManager0 = [];
  this.$RangedCallbackManager3 = {};
 };
 i.prototype.resortResources = function() {
  "use strict";
  this.$RangedCallbackManager0 = this.$RangedCallbackManager0.sort(function(j, k) {
   return this.$RangedCallbackManager7(this.$RangedCallbackManager6(j), this.$RangedCallbackManager6(k));
  }.bind(this));
 };
 i.prototype.setReachedEndOfArray = function() {
  "use strict";
  if (!this.$RangedCallbackManager1) {
   this.$RangedCallbackManager1 = true;
   this.$RangedCallbackManager2 = null;
   this.$RangedCallbackManager4.runPossibleCallbacks();
  }
 };
 i.prototype.hasReachedEndOfArray = function() {
  "use strict";
  return this.$RangedCallbackManager1;
 };
 i.prototype.setError = function(j) {
  "use strict";
  if (this.$RangedCallbackManager2 !== j) {
   this.$RangedCallbackManager2 = j;
   this.$RangedCallbackManager4.runPossibleCallbacks();
  }
 };
 i.prototype.getError = function(j, k, l) {
  "use strict";
  var m = this.$RangedCallbackManager9({
   strict: l
  });
  return j + k > m.length ? this.$RangedCallbackManager2 : null;
 };
 i.prototype.hasResource = function(j) {
  "use strict";
  return this.$RangedCallbackManager3[j];
 };
 i.prototype.getResourceAtIndex = function(j) {
  "use strict";
  return this.$RangedCallbackManager0[j];
 };
 i.prototype.getAllResources = function() {
  "use strict";
  return this.$RangedCallbackManager0.concat();
 };
 i.prototype.getCurrentArraySize = function(j) {
  "use strict";
  return this.$RangedCallbackManager9(j).length;
 };
 i.prototype.$RangedCallbackManager9 = function(j) {
  "use strict";
  var k = this.$RangedCallbackManager0;
  if (j && j.strict) {
   var l = j.skipOnStrictHandler || this.$RangedCallbackManager8;
   if (l) k = k.filter(l);
  }
  return k;
 };
 i.prototype.$RangedCallbackManager5 = function(j, k) {
  "use strict";
  var l = this.$RangedCallbackManager9(k);
  if (!this.$RangedCallbackManager1 && !this.$RangedCallbackManager2 && j.start + j.limit > l.length) {
   return false;
  } else {
   var m = l.slice(j.start, j.start + j.limit), n = j.start + j.limit > l.length ? this.$RangedCallbackManager2 : null;
   return [ m, n ];
  }
 };
 i.prototype.getElementsUntil = function(j) {
  "use strict";
  var k = [];
  for (var l = 0; l < this.$RangedCallbackManager0.length; l++) {
   var m = this.$RangedCallbackManager6(this.$RangedCallbackManager0[l]);
   if (this.$RangedCallbackManager7(m, j) > 0) break;
   k.push(this.$RangedCallbackManager0[l]);
  }
  return k;
 };
 e.exports = i;
}, null);

__d("BlobFactory", [ "emptyFunction" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 var h, i = a.BlobBuilder || a.WebKitBlobBuilder || a.MozBlobBuilder || a.MSBlobBuilder;
 if (a.Blob) {
  var j;
  try {
   new a.Blob();
   j = true;
  } catch (k) {
   j = false;
  }
  h = {
   getBlob: function(l, m) {
    l = l || [];
    m = m || {};
    if (j) {
     return new a.Blob(l, m);
    } else {
     var n = new i();
     for (var o = 0; o < l.length; o++) n.append(l[o]);
     return n.getBlob(m.type);
    }
   },
   isSupported: g.thatReturnsTrue
  };
 } else h = {
  getBlob: function() {},
  isSupported: g.thatReturnsFalse
 };
 e.exports = h;
}, null);

__d("Set", [ "Map", "toIterator", "_shouldPolyfillES6Collection" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 e.exports = function(j, k) {
  if (!i("Set")) return j.Set;
  function l(n) {
   "use strict";
   if (this == null || typeof this !== "object" && typeof this !== "function") throw new TypeError("Wrong set object type.");
   m(this);
   if (n != null) {
    var o = h(n), p;
    while (!(p = o.next()).done) this.add(p.value);
   }
  }
  l.prototype.add = function(n) {
   "use strict";
   this._map.set(n, n);
   this.size = this._map.size;
   return this;
  };
  l.prototype.clear = function() {
   "use strict";
   m(this);
  };
  l.prototype["delete"] = function(n) {
   "use strict";
   var o = this._map["delete"](n);
   this.size = this._map.size;
   return o;
  };
  l.prototype.entries = function() {
   "use strict";
   return this._map.entries();
  };
  l.prototype.forEach = function(n) {
   "use strict";
   var o = arguments[1], p = this._map.keys(), q;
   while (!(q = p.next()).done) n.call(o, q.value, q.value, this);
  };
  l.prototype.has = function(n) {
   "use strict";
   return this._map.has(n);
  };
  l.prototype.values = function() {
   "use strict";
   return this._map.values();
  };
  l.prototype[h.ITERATOR_SYMBOL] = l.prototype.values;
  l.prototype.keys = l.prototype.values;
  function m(n) {
   n._map = new g();
   n.size = n._map.size;
  }
  return l;
 }(Function("return this")());
}, null);

__d("arraySort", [ "invariant" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 function h(i, j) {
  g(Array.isArray(i));
  var k = i.slice();
  if (j) return k.sort(j);
  return k.sort();
 }
 e.exports = h;
}, null);

__d("checkRangeOverlap", [ "invariant" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 function h(i, j, k, l) {
  g(i <= j && k <= l);
  return i < l && j > k;
 }
 e.exports = h;
}, null);

__d("clearImmediatePolyfill", [ "ImmediateImplementation" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = a.clearImmediate || b("ImmediateImplementation").clearImmediate;
}, null);

__d("extendArray", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 function g(h, i) {
  Array.prototype.push.apply(h, i);
  return h;
 }
 e.exports = g;
}, null);

__d("fillArray", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 function g(h, i) {
  var j = new Array(h);
  for (var k = 0; k < h; k++) j[k] = i;
  return j;
 }
 e.exports = g;
}, null);

__d("mergeDeepInto", [ "invariant", "mergeHelpers" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var i = h.ArrayStrategies, j = h.checkArrayStrategy, k = h.checkMergeArrayArgs, l = h.checkMergeLevel, m = h.checkMergeObjectArgs, n = h.isTerminal, o = h.normalizeMergeArg, p = function(t, u, v, w) {
  m(t, u);
  l(w);
  var x = u ? Object.keys(u) : [];
  for (var y = 0; y < x.length; y++) {
   var z = x[y];
   r(t, u, z, v, w);
  }
 }, q = function(t, u, v, w) {
  k(t, u);
  l(w);
  var x = Math.max(t.length, u.length);
  for (var y = 0; y < x; y++) r(t, u, y, v, w);
 }, r = function(t, u, v, w, x) {
  var y = u[v], z = u.hasOwnProperty(v), aa = z && n(y), ba = z && Array.isArray(y), ca = z && !ba && !ba, da = t[v], ea = t.hasOwnProperty(v), fa = ea && n(da), ga = ea && Array.isArray(da), ha = ea && !ga && !ga;
  if (fa) {
   if (aa) {
    t[v] = y;
   } else if (ba) {
    t[v] = [];
    q(t[v], y, w, x + 1);
   } else if (ca) {
    t[v] = {};
    p(t[v], y, w, x + 1);
   } else if (!z) t[v] = da;
  } else if (ga) {
   if (aa) {
    t[v] = y;
   } else if (ba) {
    g(i[w]);
    if (w === i.Clobber) da.length = 0;
    q(da, y, w, x + 1);
   } else if (ca) {
    t[v] = {};
    p(t[v], y, w, x + 1);
   } else !z;
  } else if (ha) {
   if (aa) {
    t[v] = y;
   } else if (ba) {
    t[v] = [];
    q(t[v], y, w, x + 1);
   } else if (ca) {
    p(da, y, w, x + 1);
   } else !z;
  } else if (!ea) if (aa) {
   t[v] = y;
  } else if (ba) {
   t[v] = [];
   q(t[v], y, w, x + 1);
  } else if (ca) {
   t[v] = {};
   p(t[v], y, w, x + 1);
  } else !z;
 }, s = function(t, u, v) {
  var w = o(u);
  j(v);
  p(t, w, v, 0);
 };
 e.exports = s;
}, null);

__d("mergeDeep", [ "mergeHelpers", "mergeDeepInto" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var i = g.checkArrayStrategy, j = g.checkMergeObjectArgs, k = g.normalizeMergeArg, l = function(m, n, o) {
  var p = k(m), q = k(n);
  j(p, q);
  i(o);
  var r = {};
  h(r, p, o);
  h(r, q, o);
  return r;
 };
 e.exports = l;
}, null);

__d("Grid.react", [ "React", "ReactChildren", "cx", "joinClasses" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 var k = g, l = k.PropTypes, m = g.createClass({
  displayName: "Grid",
  propTypes: {
   cols: l.number.isRequired,
   fixed: l.bool,
   alignv: l.oneOf([ "top", "middle", "bottom" ]),
   alignh: l.oneOf([ "left", "center", "right" ]),
   spacing: l.string
  },
  render: function() {
   var o = this.props, p = o.alignh, q = o.alignv, r = o.children, s = o.cols, t = o.fixed, u = o.spacing, v = h.count(r), w = [], x = [], y = 0;
   h.forEach(r, function(z, aa) {
    if (z === null || z === undefined) return;
    var ba = z.type === n;
    y += ba ? Math.max(z.props.colSpan || 0, 1) : 1;
    var ca = y === s ? "_51mw" : "";
    if (!ba) {
     z = g.createElement(n, {
      alignh: p,
      alignv: q,
      className: j(u, ca),
      key: aa
     }, z);
    } else z = g.cloneElement(z, {
     alignh: z.props.alignh || p,
     alignv: z.props.alignv || q,
     className: j(z.props.className, u, ca)
    });
    x.push(z);
    if (y % s === 0 || aa + 1 === v) {
     if (t && y < s) {
      for (var da = y; da < s; da++) x.push(g.createElement(n, null));
      y = s;
     }
     w.push(g.createElement("tr", {
      className: "_51mx",
      key: aa
     }, x));
     x = [];
     y = 0;
    }
   });
   return g.createElement("table", g.__spread({}, this.props, {
    className: j(this.props.className, "uiGrid" + (" " + "_51mz") + (t ? " " + "_5f0n" : "")),
    cellSpacing: "0",
    cellPadding: "0"
   }), g.createElement("tbody", null, w));
  }
 }), n = g.createClass({
  displayName: "GridItem",
  propTypes: {
   alignv: l.oneOf([ "top", "middle", "bottom" ]),
   alignh: l.oneOf([ "left", "center", "right" ])
  },
  render: function() {
   var o = j(this.props.className, "_51m-" + (this.props.alignv === "top" ? " " + "vTop" : "") + (this.props.alignv === "middle" ? " " + "vMid" : "") + (this.props.alignv === "bottom" ? " " + "vBot" : "") + (this.props.alignh === "left" ? " " + "hLeft" : "") + (this.props.alignh === "center" ? " " + "hCent" : "") + (this.props.alignh === "right" ? " " + "hRght" : ""));
   return g.createElement("td", g.__spread({}, this.props, {
    className: o
   }));
  }
 });
 m.GridItem = n;
 e.exports = m;
}, null);

__d("ImageBlock.react", [ "LeftRight.react", "React", "cx", "invariant", "joinClasses" ], function(a, b, c, d, e, f, g, h, i, j, k) {
 b.__markCompiled && b.__markCompiled();
 function l(o) {
  j(o.children && (o.children.length === 2 || o.children.length === 3));
 }
 function m(o) {
  return "img" + (" " + "_8o") + (o === "small" ? " " + "_8r" : "") + (o === "medium" ? " " + "_8s" : "") + (o === "large" ? " " + "_8t" : "");
 }
 var n = h.createClass({
  displayName: "ImageBlock",
  render: function() {
   l(this.props);
   var o = this.props.children[0], p = this.props.children[1], q = this.props.children[2], r = this.props.spacing || "small", s = {
    className: k(o.props.className, m(r), this.props.imageClassName)
   };
   if (o.type === "img") {
    if (o.props.alt === void 0) s.alt = "";
   } else if ((o.type === "a" || o.type === "link") && o.props.tabIndex === void 0 && o.props.title === void 0 && o.props["aria-label"] === void 0) {
    s.tabIndex = "-1";
    s["aria-hidden"] = "true";
   }
   o = h.cloneElement(o, s);
   var t = k(this.props.contentClassName, "_42ef" + (r === "small" ? " " + "_8u" : "")), u;
   if (!q) {
    u = h.createElement("div", {
     className: t
    }, p);
   } else u = h.createElement(g, {
    className: t,
    direction: g.DIRECTION.right
   }, p, q);
   return h.createElement(g, h.__spread({}, this.props, {
    direction: g.DIRECTION.left
   }), o, u);
  }
 });
 e.exports = n;
}, null);

__d("Layout.react", [ "React", "cx", "joinClasses" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 var j = g.createClass({
  displayName: "Layout",
  render: function() {
   var k = [], l = [], m = null;
   g.Children.forEach(this.props.children, function(o, p) {
    if (!o) return;
    var q = m !== null, r = g.cloneElement(o, {
     className: i(o.props.className, q ? "_4bl8" : ""),
     key: p
    });
    if (m === null) {
     if (o.type === j.FillColumn) {
      m = r;
     } else k.push(r);
    } else l.push(r);
   });
   l.reverse();
   var n = k.concat(l);
   if (m) n.push(m);
   return g.createElement("div", g.__spread({}, this.props, {
    className: i(this.props.className, "clearfix")
   }), n);
  }
 });
 j.Column = g.createClass({
  displayName: "Layout.Column",
  render: function() {
   return g.createElement("div", g.__spread({}, this.props, {
    className: i(this.props.className, "_4bl7")
   }));
  }
 });
 j.FillColumn = g.createClass({
  displayName: "Layout.FillColumn",
  render: function() {
   return g.createElement("div", g.__spread({}, this.props, {
    className: i(this.props.className, "_4bl9")
   }));
  }
 });
 e.exports = j;
}, null);

__d("StoreBasedStateMixinHelper", [ "SubscriptionsHandler", "invariant" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function i(j) {
  h(j.length > 0);
  this.$StoreBasedStateMixinHelper0 = j;
  this.$StoreBasedStateMixinHelper1 = new g();
 }
 i.prototype.subscribeCallback = function(j) {
  var k = this.$StoreBasedStateMixinHelper0.map(function(l) {
   if (l.hasChanged && l.getDispatchToken && l.addListener) {
    return l.addListener(j);
   } else if (l.subscribe) {
    return l.subscribe("change", j);
   } else if (l.addListener) {
    return l.addListener("change", j);
   } else h(false);
  });
  this.$StoreBasedStateMixinHelper1.addSubscriptions.apply(this.$StoreBasedStateMixinHelper1, k);
 };
 i.prototype.release = function() {
  this.$StoreBasedStateMixinHelper1.release();
 };
 e.exports = i;
}, null);

__d("PureStoreBasedStateMixin", [ "StoreBasedStateMixinHelper", "invariant", "setImmediate" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var j = function() {
  for (var k = [], l = 0, m = arguments.length; l < m; l++) k.push(arguments[l]);
  return {
   getInitialState: function() {
    return this.constructor.calculateState();
   },
   componentWillMount: function() {
    h(this.constructor.calculateState);
    this._recalculateStateID = null;
    var n = function() {
     if (this.isMounted()) this.setState(this.constructor.calculateState());
     this._recalculateStateID = null;
    }.bind(this);
    this._mixin = new g(k);
    this._mixin.subscribeCallback(function() {
     if (this._recalculateStateID === null) this._recalculateStateID = i(n);
    }.bind(this));
   },
   componentWillUnmount: function() {
    this._mixin.release();
    this._mixin = null;
   }
  };
 }.bind(this);
 e.exports = j;
}, null);

__d("StoreAndPropBasedStateMixin", [ "StoreBasedStateMixinHelper", "invariant", "setImmediate" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var j = function() {
  for (var k = [], l = 0, m = arguments.length; l < m; l++) k.push(arguments[l]);
  return {
   getInitialState: function() {
    return this.constructor.calculateState(this.props);
   },
   componentWillMount: function() {
    h(this.constructor.calculateState);
    this._recalculateStateID = null;
    var n = function() {
     if (this.isMounted()) this.setState(this.constructor.calculateState(this.props));
     this._recalculateStateID = null;
    }.bind(this);
    this._mixin = new g(k);
    this._mixin.subscribeCallback(function() {
     if (this._recalculateStateID === null) this._recalculateStateID = i(n);
    }.bind(this));
   },
   componentWillReceiveProps: function(n) {
    this.setState(this.constructor.calculateState(n));
   },
   componentWillUnmount: function() {
    this._mixin.release();
    this._mixin = null;
   }
  };
 }.bind(this);
 e.exports = j;
}, null);

__d("PhotosMimeType", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 function g(h) {
  "use strict";
  if (this instanceof g === false) return new g(h);
  this.$PhotosMimeType0 = h.split("/");
 }
 g.prototype.isImage = function() {
  "use strict";
  return this.$PhotosMimeType0[0] === "image";
 };
 g.prototype.isJpeg = function() {
  "use strict";
  return this.isImage() && (this.$PhotosMimeType0[1] === "jpeg" || this.$PhotosMimeType0[1] === "pjpeg");
 };
 e.exports = g;
}, null);

__d("DataTransfer", [ "PhotosMimeType", "createArrayFromMixed", "emptyFunction" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 var j = new RegExp("\r\n", "g"), k = "\n", l = {
  "text/rtf": 1,
  "text/html": 1
 };
 function m(o) {
  if (o.kind == "file") return o.getAsFile();
 }
 function n(o) {
  "use strict";
  this.data = o;
  this.types = o.types ? h(o.types) : [];
 }
 n.prototype.isRichText = function() {
  "use strict";
  return this.types.some(function(o) {
   return l[o];
  });
 };
 n.prototype.getText = function() {
  "use strict";
  var o;
  if (this.data.getData) if (!this.types.length) {
   o = this.data.getData("Text");
  } else if (this.types.indexOf("text/plain") != -1) o = this.data.getData("text/plain");
  return o ? o.replace(j, k) : null;
 };
 n.prototype.getHTML = function() {
  "use strict";
  if (this.data.getData) if (!this.types.length) {
   return this.data.getData("Text");
  } else if (this.types.indexOf("text/html") != -1) return this.data.getData("text/html");
 };
 n.prototype.isLink = function() {
  "use strict";
  return this.types.some(function(o) {
   return o.indexOf("url") != -1 || o.indexOf("text/uri-list") != -1;
  });
 };
 n.prototype.isImage = function() {
  "use strict";
  var o = this.types.some(function(s) {
   return s.indexOf("application/x-moz-file") != -1;
  });
  if (o) return true;
  var p = this.getFiles();
  for (var q = 0; q < p.length; q++) {
   var r = p[q].type;
   if (!g(r).isImage()) return false;
  }
  return true;
 };
 n.prototype.getCount = function() {
  "use strict";
  if (this.data.hasOwnProperty("items")) {
   return this.data.items.length;
  } else if (this.data.hasOwnProperty("mozItemCount")) {
   return this.data.mozItemCount;
  } else if (this.data.files) return this.data.files.length;
  return null;
 };
 n.prototype.getFiles = function() {
  "use strict";
  if (this.data.items) {
   return Array.prototype.slice.call(this.data.items).map(m).filter(i.thatReturnsArgument);
  } else if (this.data.files) {
   return Array.prototype.slice.call(this.data.files);
  } else return [];
 };
 n.prototype.hasFiles = function() {
  "use strict";
  return this.getFiles().length > 0;
 };
 e.exports = n;
}, null);

__d("DataViewPolyfill", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function g(h, i, j) {
  if (i === void 0) {
   this.$DataViewPolyfill0 = new Uint8Array(h);
  } else if (j === void 0) {
   this.$DataViewPolyfill0 = new Uint8Array(h, i);
  } else this.$DataViewPolyfill0 = new Uint8Array(h, i, j);
  this.byteLength = this.$DataViewPolyfill0.byteLength;
 }
 g.prototype.getUint8 = function(h) {
  if (h >= this.$DataViewPolyfill0.length) throw new Error("Trying to read beyond bounds of DataViewPolyfill");
  return this.$DataViewPolyfill0[h];
 };
 g.prototype.getUint16 = function(h, i) {
  var j = this.getUint8(h), k = this.getUint8(h + 1);
  return i ? k * 256 + j : j * 256 + k;
 };
 g.prototype.getUint32 = function(h, i) {
  var j = this.getUint8(h), k = this.getUint8(h + 1), l = this.getUint8(h + 2), m = this.getUint8(h + 3);
  return i ? ((m * 256 + l) * 256 + k) * 256 + j : ((j * 256 + k) * 256 + l) * 256 + m;
 };
 g.isSupported = function() {
  return !!a.Uint8Array;
 };
 e.exports = g;
}, null);

__d("Dispatcher", [ "invariant" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var h = 1, i = "ID_";
 function j() {
  this.$Dispatcher0 = {};
  this.$Dispatcher1 = {};
  this.$Dispatcher2 = {};
  this.$Dispatcher3 = false;
  this.$Dispatcher4 = null;
  this.$Dispatcher5 = {};
 }
 j.prototype.register = function(k) {
  var l = i + h++;
  this.$Dispatcher0[l] = k;
  return l;
 };
 j.prototype.unregister = function(k) {
  g(this.$Dispatcher0[k]);
  delete this.$Dispatcher0[k];
 };
 j.prototype.waitFor = function(k) {
  g(this.$Dispatcher3);
  for (var l = 0; l < k.length; l++) {
   var m = k[l];
   if (this.$Dispatcher1[m]) {
    g(this.$Dispatcher2[m]);
    continue;
   }
   g(this.$Dispatcher0[m]);
   this.$Dispatcher6(m);
  }
 };
 j.prototype.dispatch = function(k) {
  g(!this.$Dispatcher3);
  this.$Dispatcher7(k);
  try {
   for (var l in this.$Dispatcher0) {
    if (this.$Dispatcher1[l]) continue;
    this.$Dispatcher6(l);
   }
  } finally {
   if (Object.keys(this.$Dispatcher5).length) this.$Dispatcher8();
   this.$Dispatcher9();
  }
 };
 j.prototype.isDispatching = function() {
  return this.$Dispatcher3;
 };
 j.prototype.enqueueCompletionCallback = function(k, l) {
  g(this.$Dispatcher3);
  g(!this.$Dispatcher5[k]);
  this.$Dispatcher5[k] = l;
 };
 j.prototype.$Dispatcher6 = function(k) {
  this.$Dispatcher1[k] = true;
  this.$Dispatcher0[k](this.$Dispatcher4);
  this.$Dispatcher2[k] = true;
 };
 j.prototype.$Dispatcher7 = function(k) {
  for (var l in this.$Dispatcher0) {
   this.$Dispatcher1[l] = false;
   this.$Dispatcher2[l] = false;
  }
  this.$Dispatcher4 = k;
  this.$Dispatcher3 = true;
 };
 j.prototype.$Dispatcher8 = function() {
  for (var k in this.$Dispatcher5) this.$Dispatcher5[k]();
  this.$Dispatcher5 = {};
 };
 j.prototype.$Dispatcher9 = function() {
  this.$Dispatcher4 = null;
  this.$Dispatcher3 = false;
 };
 e.exports = j;
}, null);

__d("DocumentCharacters", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 var g = {
  BLOCK_DELIMITER: "\r",
  SOFT_NEWLINE: "\n",
  PHOTO: "📷",
  VIDEO: "📹"
 };
 e.exports = g;
}, null);

__d("DocumentCommands", [ "keyMirror" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 var h = g({
  UNDO: true,
  REDO: true,
  DELETE: true,
  DELETE_WORD: true,
  BACKSPACE: true,
  BACKSPACE_WORD: true,
  BACKSPACE_TO_END_OF_BLOCK: true,
  BOLD: true,
  ITALIC: true,
  UNDERLINE: true,
  CODE: true,
  INSERT_BLOCK_DELIMITER: true,
  TRANSPOSE_CHARACTERS: true,
  MOVE_SELECTION_TO_START_OF_BLOCK: true,
  MOVE_SELECTION_TO_END_OF_BLOCK: true,
  SECONDARY_CUT: true,
  SECONDARY_PASTE: true
 });
 e.exports = h;
}, null);

__d("DocumentRemovalDirection", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 var g = {
  BACKWARD: 0,
  FORWARD: 1
 };
 e.exports = g;
}, null);

__d("immutable", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 (function(g, h) {
  typeof f === "object" ? e.exports = h() : typeof define === "function" && define.amd ? define([], h) : g.Immutable = h();
 })(this, function() {
  "use strict";
  var g = Array.prototype.slice;
  function h(th, uh) {
   if (uh) th.prototype = Object.create(uh.prototype);
   th.prototype.constructor = th;
  }
  var i = "delete", j = 5, k = 1 << j, l = k - 1, m = {}, n = {
   value: false
  }, o = {
   value: false
  };
  function p(th) {
   th.value = false;
   return th;
  }
  function q(th) {
   th && (th.value = true);
  }
  function r() {}
  function s(th, uh) {
   uh = uh || 0;
   var vh = Math.max(0, th.length - uh), wh = new Array(vh);
   for (var xh = 0; xh < vh; xh++) wh[xh] = th[xh + uh];
   return wh;
  }
  function t(th) {
   if (th.size === void 0) th.size = th.__iterate(v);
   return th.size;
  }
  function u(th, uh) {
   return uh >= 0 ? +uh : t(th) + +uh;
  }
  function v() {
   return true;
  }
  function w(th, uh, vh) {
   return (th === 0 || vh !== void 0 && th <= -vh) && (uh === void 0 || vh !== void 0 && uh >= vh);
  }
  function x(th, uh) {
   return z(th, uh, 0);
  }
  function y(th, uh) {
   return z(th, uh, uh);
  }
  function z(th, uh, vh) {
   return th === void 0 ? vh : th < 0 ? Math.max(0, uh + th) : uh === void 0 ? th : Math.min(uh, th);
  }
  function aa(th) {
   return ea(th) ? th : bb(th);
  }
  h(ba, aa);
  function ba(th) {
   return fa(th) ? th : cb(th);
  }
  h(ca, aa);
  function ca(th) {
   return ga(th) ? th : db(th);
  }
  h(da, aa);
  function da(th) {
   return ea(th) && !ha(th) ? th : eb(th);
  }
  function ea(th) {
   return !!(th && th[ja]);
  }
  function fa(th) {
   return !!(th && th[ka]);
  }
  function ga(th) {
   return !!(th && th[la]);
  }
  function ha(th) {
   return fa(th) || ga(th);
  }
  function ia(th) {
   return !!(th && th[ma]);
  }
  aa.isIterable = ea;
  aa.isKeyed = fa;
  aa.isIndexed = ga;
  aa.isAssociative = ha;
  aa.isOrdered = ia;
  aa.Keyed = ba;
  aa.Indexed = ca;
  aa.Set = da;
  var ja = "@@__IMMUTABLE_ITERABLE__@@", ka = "@@__IMMUTABLE_KEYED__@@", la = "@@__IMMUTABLE_INDEXED__@@", ma = "@@__IMMUTABLE_ORDERED__@@", na = 0, oa = 1, pa = 2, qa = typeof Symbol === "function" && Symbol.iterator, ra = "@@iterator", sa = qa || ra;
  function ta(th) {
   this.next = th;
  }
  ta.prototype.toString = function() {
   return "[Iterator]";
  };
  ta.KEYS = na;
  ta.VALUES = oa;
  ta.ENTRIES = pa;
  ta.prototype.inspect = ta.prototype.toSource = function() {
   return this.toString();
  };
  ta.prototype[sa] = function() {
   return this;
  };
  function ua(th, uh, vh, wh) {
   var xh = th === 0 ? uh : th === 1 ? vh : [ uh, vh ];
   wh ? wh.value = xh : wh = {
    value: xh,
    done: false
   };
   return wh;
  }
  function va() {
   return {
    value: void 0,
    done: true
   };
  }
  function wa(th) {
   return !!za(th);
  }
  function xa(th) {
   return th && typeof th.next === "function";
  }
  function ya(th) {
   var uh = za(th);
   return uh && uh.call(th);
  }
  function za(th) {
   var uh = th && (qa && th[qa] || th[ra]);
   if (typeof uh === "function") return uh;
  }
  function ab(th) {
   return th && typeof th.length === "number";
  }
  h(bb, aa);
  function bb(th) {
   return th === null || th === void 0 ? mb() : ea(th) ? th.toSeq() : pb(th);
  }
  bb.of = function() {
   return bb(arguments);
  };
  bb.prototype.toSeq = function() {
   return this;
  };
  bb.prototype.toString = function() {
   return this.__toString("Seq {", "}");
  };
  bb.prototype.cacheResult = function() {
   if (!this._cache && this.__iterateUncached) {
    this._cache = this.entrySeq().toArray();
    this.size = this._cache.length;
   }
   return this;
  };
  bb.prototype.__iterate = function(th, uh) {
   return rb(this, th, uh, true);
  };
  bb.prototype.__iterator = function(th, uh) {
   return sb(this, th, uh, true);
  };
  h(cb, bb);
  function cb(th) {
   return th === null || th === void 0 ? mb().toKeyedSeq() : ea(th) ? fa(th) ? th.toSeq() : th.fromEntrySeq() : nb(th);
  }
  cb.of = function() {
   return cb(arguments);
  };
  cb.prototype.toKeyedSeq = function() {
   return this;
  };
  cb.prototype.toSeq = function() {
   return this;
  };
  h(db, bb);
  function db(th) {
   return th === null || th === void 0 ? mb() : !ea(th) ? ob(th) : fa(th) ? th.entrySeq() : th.toIndexedSeq();
  }
  db.of = function() {
   return db(arguments);
  };
  db.prototype.toIndexedSeq = function() {
   return this;
  };
  db.prototype.toString = function() {
   return this.__toString("Seq [", "]");
  };
  db.prototype.__iterate = function(th, uh) {
   return rb(this, th, uh, false);
  };
  db.prototype.__iterator = function(th, uh) {
   return sb(this, th, uh, false);
  };
  h(eb, bb);
  function eb(th) {
   return (th === null || th === void 0 ? mb() : !ea(th) ? ob(th) : fa(th) ? th.entrySeq() : th).toSetSeq();
  }
  eb.of = function() {
   return eb(arguments);
  };
  eb.prototype.toSetSeq = function() {
   return this;
  };
  bb.isSeq = kb;
  bb.Keyed = cb;
  bb.Set = eb;
  bb.Indexed = db;
  var fb = "@@__IMMUTABLE_SEQ__@@";
  bb.prototype[fb] = true;
  h(gb, db);
  function gb(th) {
   this._array = th;
   this.size = th.length;
  }
  gb.prototype.get = function(th, uh) {
   return this.has(th) ? this._array[u(this, th)] : uh;
  };
  gb.prototype.__iterate = function(th, uh) {
   var vh = this._array, wh = vh.length - 1;
   for (var xh = 0; xh <= wh; xh++) if (th(vh[uh ? wh - xh : xh], xh, this) === false) return xh + 1;
   return xh;
  };
  gb.prototype.__iterator = function(th, uh) {
   var vh = this._array, wh = vh.length - 1, xh = 0;
   return new ta(function() {
    return xh > wh ? va() : ua(th, xh, vh[uh ? wh - xh++ : xh++]);
   });
  };
  h(hb, cb);
  function hb(th) {
   var uh = Object.keys(th);
   this._object = th;
   this._keys = uh;
   this.size = uh.length;
  }
  hb.prototype.get = function(th, uh) {
   if (uh !== void 0 && !this.has(th)) return uh;
   return this._object[th];
  };
  hb.prototype.has = function(th) {
   return this._object.hasOwnProperty(th);
  };
  hb.prototype.__iterate = function(th, uh) {
   var vh = this._object, wh = this._keys, xh = wh.length - 1;
   for (var yh = 0; yh <= xh; yh++) {
    var zh = wh[uh ? xh - yh : yh];
    if (th(vh[zh], zh, this) === false) return yh + 1;
   }
   return yh;
  };
  hb.prototype.__iterator = function(th, uh) {
   var vh = this._object, wh = this._keys, xh = wh.length - 1, yh = 0;
   return new ta(function() {
    var zh = wh[uh ? xh - yh : yh];
    return yh++ > xh ? va() : ua(th, zh, vh[zh]);
   });
  };
  hb.prototype[ma] = true;
  h(ib, db);
  function ib(th) {
   this._iterable = th;
   this.size = th.length || th.size;
  }
  ib.prototype.__iterateUncached = function(th, uh) {
   if (uh) return this.cacheResult().__iterate(th, uh);
   var vh = this._iterable, wh = ya(vh), xh = 0;
   if (xa(wh)) {
    var yh;
    while (!(yh = wh.next()).done) if (th(yh.value, xh++, this) === false) break;
   }
   return xh;
  };
  ib.prototype.__iteratorUncached = function(th, uh) {
   if (uh) return this.cacheResult().__iterator(th, uh);
   var vh = this._iterable, wh = ya(vh);
   if (!xa(wh)) return new ta(va);
   var xh = 0;
   return new ta(function() {
    var yh = wh.next();
    return yh.done ? yh : ua(th, xh++, yh.value);
   });
  };
  h(jb, db);
  function jb(th) {
   this._iterator = th;
   this._iteratorCache = [];
  }
  jb.prototype.__iterateUncached = function(th, uh) {
   if (uh) return this.cacheResult().__iterate(th, uh);
   var vh = this._iterator, wh = this._iteratorCache, xh = 0;
   while (xh < wh.length) if (th(wh[xh], xh++, this) === false) return xh;
   var yh;
   while (!(yh = vh.next()).done) {
    var zh = yh.value;
    wh[xh] = zh;
    if (th(zh, xh++, this) === false) break;
   }
   return xh;
  };
  jb.prototype.__iteratorUncached = function(th, uh) {
   if (uh) return this.cacheResult().__iterator(th, uh);
   var vh = this._iterator, wh = this._iteratorCache, xh = 0;
   return new ta(function() {
    if (xh >= wh.length) {
     var yh = vh.next();
     if (yh.done) return yh;
     wh[xh] = yh.value;
    }
    return ua(th, xh, wh[xh++]);
   });
  };
  function kb(th) {
   return !!(th && th[fb]);
  }
  var lb;
  function mb() {
   return lb || (lb = new gb([]));
  }
  function nb(th) {
   var uh = Array.isArray(th) ? new gb(th).fromEntrySeq() : xa(th) ? new jb(th).fromEntrySeq() : wa(th) ? new ib(th).fromEntrySeq() : typeof th === "object" ? new hb(th) : void 0;
   if (!uh) throw new TypeError("Expected Array or iterable object of [k, v] entries, " + "or keyed object: " + th);
   return uh;
  }
  function ob(th) {
   var uh = qb(th);
   if (!uh) throw new TypeError("Expected Array or iterable object of values: " + th);
   return uh;
  }
  function pb(th) {
   var uh = qb(th) || typeof th === "object" && new hb(th);
   if (!uh) throw new TypeError("Expected Array or iterable object of values, or keyed object: " + th);
   return uh;
  }
  function qb(th) {
   return ab(th) ? new gb(th) : xa(th) ? new jb(th) : wa(th) ? new ib(th) : void 0;
  }
  function rb(th, uh, vh, wh) {
   var xh = th._cache;
   if (xh) {
    var yh = xh.length - 1;
    for (var zh = 0; zh <= yh; zh++) {
     var ai = xh[vh ? yh - zh : zh];
     if (uh(ai[1], wh ? ai[0] : zh, th) === false) return zh + 1;
    }
    return zh;
   }
   return th.__iterateUncached(uh, vh);
  }
  function sb(th, uh, vh, wh) {
   var xh = th._cache;
   if (xh) {
    var yh = xh.length - 1, zh = 0;
    return new ta(function() {
     var ai = xh[vh ? yh - zh : zh];
     return zh++ > yh ? va() : ua(uh, wh ? ai[0] : zh - 1, ai[1]);
    });
   }
   return th.__iteratorUncached(uh, vh);
  }
  h(tb, aa);
  function tb() {
   throw TypeError("Abstract");
  }
  h(ub, tb);
  function ub() {}
  h(vb, tb);
  function vb() {}
  h(wb, tb);
  function wb() {}
  tb.Keyed = ub;
  tb.Indexed = vb;
  tb.Set = wb;
  function xb(th, uh) {
   if (th === uh || th !== th && uh !== uh) return true;
   if (!th || !uh) return false;
   if (typeof th.valueOf === "function" && typeof uh.valueOf === "function") {
    th = th.valueOf();
    uh = uh.valueOf();
   }
   return typeof th.equals === "function" && typeof uh.equals === "function" ? th.equals(uh) : th === uh || th !== th && uh !== uh;
  }
  function yb(th, uh) {
   return uh ? zb(uh, th, "", {
    "": th
   }) : ac(th);
  }
  function zb(th, uh, vh, wh) {
   if (Array.isArray(uh)) return th.call(wh, vh, db(uh).map(function(xh, yh) {
    return zb(th, xh, yh, uh);
   }));
   if (bc(uh)) return th.call(wh, vh, cb(uh).map(function(xh, yh) {
    return zb(th, xh, yh, uh);
   }));
   return uh;
  }
  function ac(th) {
   if (Array.isArray(th)) return db(th).map(ac).toList();
   if (bc(th)) return cb(th).map(ac).toMap();
   return th;
  }
  function bc(th) {
   return th && th.constructor === Object;
  }
  var cc = typeof Math.imul === "function" && Math.imul(4294967295, 2) === -2 ? Math.imul : function th(uh, vh) {
   uh = uh | 0;
   vh = vh | 0;
   var wh = uh & 65535, xh = vh & 65535;
   return wh * xh + ((uh >>> 16) * xh + wh * (vh >>> 16) << 16 >>> 0) | 0;
  };
  function dc(th) {
   return th >>> 1 & 1073741824 | th & 3221225471;
  }
  function ec(th) {
   if (th === false || th === null || th === void 0) return 0;
   if (typeof th.valueOf === "function") {
    th = th.valueOf();
    if (th === false || th === null || th === void 0) return 0;
   }
   if (th === true) return 1;
   var uh = typeof th;
   if (uh === "number") {
    var vh = th | 0;
    if (vh !== th) vh ^= th * 4294967295;
    while (th > 4294967295) {
     th /= 4294967295;
     vh ^= th;
    }
    return dc(vh);
   }
   if (uh === "string") return th.length > nc ? fc(th) : gc(th);
   if (typeof th.hashCode === "function") return th.hashCode();
   return hc(th);
  }
  function fc(th) {
   var uh = qc[th];
   if (uh === void 0) {
    uh = gc(th);
    if (pc === oc) {
     pc = 0;
     qc = {};
    }
    pc++;
    qc[th] = uh;
   }
   return uh;
  }
  function gc(th) {
   var uh = 0;
   for (var vh = 0; vh < th.length; vh++) uh = 31 * uh + th.charCodeAt(vh) | 0;
   return dc(uh);
  }
  function hc(th) {
   var uh = kc && kc.get(th);
   if (uh) return uh;
   uh = th[mc];
   if (uh) return uh;
   if (!ic) {
    uh = th.propertyIsEnumerable && th.propertyIsEnumerable[mc];
    if (uh) return uh;
    uh = jc(th);
    if (uh) return uh;
   }
   if (Object.isExtensible && !Object.isExtensible(th)) throw new Error("Non-extensible objects are not allowed as keys.");
   uh = ++lc;
   if (lc & 1073741824) lc = 0;
   if (kc) {
    kc.set(th, uh);
   } else if (ic) {
    Object.defineProperty(th, mc, {
     enumerable: false,
     configurable: false,
     writable: false,
     value: uh
    });
   } else if (th.propertyIsEnumerable && th.propertyIsEnumerable === th.constructor.prototype.propertyIsEnumerable) {
    th.propertyIsEnumerable = function() {
     return this.constructor.prototype.propertyIsEnumerable.apply(this, arguments);
    };
    th.propertyIsEnumerable[mc] = uh;
   } else if (th.nodeType) {
    th[mc] = uh;
   } else throw new Error("Unable to set a non-enumerable property on object.");
   return uh;
  }
  var ic = function() {
   try {
    Object.defineProperty({}, "x", {});
    return true;
   } catch (th) {
    return false;
   }
  }();
  function jc(th) {
   if (th && th.nodeType > 0) switch (th.nodeType) {
   case 1:
    return th.uniqueID;

   case 9:
    return th.documentElement && th.documentElement.uniqueID;
   }
  }
  var kc = typeof WeakMap === "function" && new WeakMap(), lc = 0, mc = "__immutablehash__";
  if (typeof Symbol === "function") mc = Symbol(mc);
  var nc = 16, oc = 255, pc = 0, qc = {};
  function rc(th, uh) {
   if (!th) throw new Error(uh);
  }
  function sc(th) {
   rc(th !== Infinity);
  }
  h(tc, cb);
  function tc(th, uh) {
   this._iter = th;
   this._useKeys = uh;
   this.size = th.size;
  }
  tc.prototype.get = function(th, uh) {
   return this._iter.get(th, uh);
  };
  tc.prototype.has = function(th) {
   return this._iter.has(th);
  };
  tc.prototype.valueSeq = function() {
   return this._iter.valueSeq();
  };
  tc.prototype.reverse = function() {
   var th = this, uh = zc(this, true);
   if (!this._useKeys) uh.valueSeq = function() {
    return th._iter.toSeq().reverse();
   };
   return uh;
  };
  tc.prototype.map = function(th, uh) {
   var vh = this, wh = yc(this, th, uh);
   if (!this._useKeys) wh.valueSeq = function() {
    return vh._iter.toSeq().map(th, uh);
   };
   return wh;
  };
  tc.prototype.__iterate = function(th, uh) {
   var vh = this, wh;
   return this._iter.__iterate(this._useKeys ? function(xh, yh) {
    return th(xh, yh, vh);
   } : (wh = uh ? qd(this) : 0, function(xh) {
    return th(xh, uh ? --wh : wh++, vh);
   }), uh);
  };
  tc.prototype.__iterator = function(th, uh) {
   if (this._useKeys) return this._iter.__iterator(th, uh);
   var vh = this._iter.__iterator(oa, uh), wh = uh ? qd(this) : 0;
   return new ta(function() {
    var xh = vh.next();
    return xh.done ? xh : ua(th, uh ? --wh : wh++, xh.value, xh);
   });
  };
  tc.prototype[ma] = true;
  h(uc, db);
  function uc(th) {
   this._iter = th;
   this.size = th.size;
  }
  uc.prototype.contains = function(th) {
   return this._iter.contains(th);
  };
  uc.prototype.__iterate = function(th, uh) {
   var vh = this, wh = 0;
   return this._iter.__iterate(function(xh) {
    return th(xh, wh++, vh);
   }, uh);
  };
  uc.prototype.__iterator = function(th, uh) {
   var vh = this._iter.__iterator(oa, uh), wh = 0;
   return new ta(function() {
    var xh = vh.next();
    return xh.done ? xh : ua(th, wh++, xh.value, xh);
   });
  };
  h(vc, eb);
  function vc(th) {
   this._iter = th;
   this.size = th.size;
  }
  vc.prototype.has = function(th) {
   return this._iter.contains(th);
  };
  vc.prototype.__iterate = function(th, uh) {
   var vh = this;
   return this._iter.__iterate(function(wh) {
    return th(wh, wh, vh);
   }, uh);
  };
  vc.prototype.__iterator = function(th, uh) {
   var vh = this._iter.__iterator(oa, uh);
   return new ta(function() {
    var wh = vh.next();
    return wh.done ? wh : ua(th, wh.value, wh.value, wh);
   });
  };
  h(wc, cb);
  function wc(th) {
   this._iter = th;
   this.size = th.size;
  }
  wc.prototype.entrySeq = function() {
   return this._iter.toSeq();
  };
  wc.prototype.__iterate = function(th, uh) {
   var vh = this;
   return this._iter.__iterate(function(wh) {
    if (wh) {
     pd(wh);
     return th(wh[1], wh[0], vh);
    }
   }, uh);
  };
  wc.prototype.__iterator = function(th, uh) {
   var vh = this._iter.__iterator(oa, uh);
   return new ta(function() {
    while (true) {
     var wh = vh.next();
     if (wh.done) return wh;
     var xh = wh.value;
     if (xh) {
      pd(xh);
      return th === pa ? wh : ua(th, xh[0], xh[1], wh);
     }
    }
   });
  };
  uc.prototype.cacheResult = tc.prototype.cacheResult = vc.prototype.cacheResult = wc.prototype.cacheResult = td;
  function xc(th) {
   var uh = sd(th);
   uh._iter = th;
   uh.size = th.size;
   uh.flip = function() {
    return th;
   };
   uh.reverse = function() {
    var vh = th.reverse.apply(this);
    vh.flip = function() {
     return th.reverse();
    };
    return vh;
   };
   uh.has = function(vh) {
    return th.contains(vh);
   };
   uh.contains = function(vh) {
    return th.has(vh);
   };
   uh.cacheResult = td;
   uh.__iterateUncached = function(vh, wh) {
    var xh = this;
    return th.__iterate(function(yh, zh) {
     return vh(zh, yh, xh) !== false;
    }, wh);
   };
   uh.__iteratorUncached = function(vh, wh) {
    if (vh === pa) {
     var xh = th.__iterator(vh, wh);
     return new ta(function() {
      var yh = xh.next();
      if (!yh.done) {
       var zh = yh.value[0];
       yh.value[0] = yh.value[1];
       yh.value[1] = zh;
      }
      return yh;
     });
    }
    return th.__iterator(vh === oa ? na : oa, wh);
   };
   return uh;
  }
  function yc(th, uh, vh) {
   var wh = sd(th);
   wh.size = th.size;
   wh.has = function(xh) {
    return th.has(xh);
   };
   wh.get = function(xh, yh) {
    var zh = th.get(xh, m);
    return zh === m ? yh : uh.call(vh, zh, xh, th);
   };
   wh.__iterateUncached = function(xh, yh) {
    var zh = this;
    return th.__iterate(function(ai, bi, ci) {
     return xh(uh.call(vh, ai, bi, ci), bi, zh) !== false;
    }, yh);
   };
   wh.__iteratorUncached = function(xh, yh) {
    var zh = th.__iterator(pa, yh);
    return new ta(function() {
     var ai = zh.next();
     if (ai.done) return ai;
     var bi = ai.value, ci = bi[0];
     return ua(xh, ci, uh.call(vh, bi[1], ci, th), ai);
    });
   };
   return wh;
  }
  function zc(th, uh) {
   var vh = sd(th);
   vh._iter = th;
   vh.size = th.size;
   vh.reverse = function() {
    return th;
   };
   if (th.flip) vh.flip = function() {
    var wh = xc(th);
    wh.reverse = function() {
     return th.flip();
    };
    return wh;
   };
   vh.get = function(wh, xh) {
    return th.get(uh ? wh : -1 - wh, xh);
   };
   vh.has = function(wh) {
    return th.has(uh ? wh : -1 - wh);
   };
   vh.contains = function(wh) {
    return th.contains(wh);
   };
   vh.cacheResult = td;
   vh.__iterate = function(wh, xh) {
    var yh = this;
    return th.__iterate(function(zh, ai) {
     return wh(zh, ai, yh);
    }, !xh);
   };
   vh.__iterator = function(wh, xh) {
    return th.__iterator(wh, !xh);
   };
   return vh;
  }
  function ad(th, uh, vh, wh) {
   var xh = sd(th);
   if (wh) {
    xh.has = function(yh) {
     var zh = th.get(yh, m);
     return zh !== m && !!uh.call(vh, zh, yh, th);
    };
    xh.get = function(yh, zh) {
     var ai = th.get(yh, m);
     return ai !== m && uh.call(vh, ai, yh, th) ? ai : zh;
    };
   }
   xh.__iterateUncached = function(yh, zh) {
    var ai = this, bi = 0;
    th.__iterate(function(ci, di, ei) {
     if (uh.call(vh, ci, di, ei)) {
      bi++;
      return yh(ci, wh ? di : bi - 1, ai);
     }
    }, zh);
    return bi;
   };
   xh.__iteratorUncached = function(yh, zh) {
    var ai = th.__iterator(pa, zh), bi = 0;
    return new ta(function() {
     while (true) {
      var ci = ai.next();
      if (ci.done) return ci;
      var di = ci.value, ei = di[0], fi = di[1];
      if (uh.call(vh, fi, ei, th)) return ua(yh, wh ? ei : bi++, fi, ci);
     }
    });
   };
   return xh;
  }
  function bd(th, uh, vh) {
   var wh = wd().asMutable();
   th.__iterate(function(xh, yh) {
    wh.update(uh.call(vh, xh, yh, th), 0, function(zh) {
     return zh + 1;
    });
   });
   return wh.asImmutable();
  }
  function cd(th, uh, vh) {
   var wh = fa(th), xh = (ia(th) ? vf() : wd()).asMutable();
   th.__iterate(function(zh, ai) {
    xh.update(uh.call(vh, zh, ai, th), function(bi) {
     return bi = bi || [], bi.push(wh ? [ ai, zh ] : zh), bi;
    });
   });
   var yh = rd(th);
   return xh.map(function(zh) {
    return od(th, yh(zh));
   });
  }
  function dd(th, uh, vh, wh) {
   var xh = th.size;
   if (w(uh, vh, xh)) return th;
   var yh = x(uh, xh), zh = y(vh, xh);
   if (yh !== yh || zh !== zh) return dd(th.toSeq().cacheResult(), uh, vh, wh);
   var ai = zh - yh;
   if (ai < 0) ai = 0;
   var bi = sd(th);
   bi.size = ai === 0 ? ai : th.size && ai || void 0;
   if (!wh && kb(th) && ai >= 0) bi.get = function(ci, di) {
    ci = u(this, ci);
    return ci >= 0 && ci < ai ? th.get(ci + yh, di) : di;
   };
   bi.__iterateUncached = function(ci, di) {
    var ei = this;
    if (ai === 0) return 0;
    if (di) return this.cacheResult().__iterate(ci, di);
    var fi = 0, gi = true, hi = 0;
    th.__iterate(function(ii, ji) {
     if (!(gi && (gi = fi++ < yh))) {
      hi++;
      return ci(ii, wh ? ji : hi - 1, ei) !== false && hi !== ai;
     }
    });
    return hi;
   };
   bi.__iteratorUncached = function(ci, di) {
    if (ai && di) return this.cacheResult().__iterator(ci, di);
    var ei = ai && th.__iterator(ci, di), fi = 0, gi = 0;
    return new ta(function() {
     while (fi++ !== yh) ei.next();
     if (++gi > ai) return va();
     var hi = ei.next();
     if (wh || ci === oa) {
      return hi;
     } else if (ci === na) {
      return ua(ci, gi - 1, void 0, hi);
     } else return ua(ci, gi - 1, hi.value[1], hi);
    });
   };
   return bi;
  }
  function ed(th, uh, vh) {
   var wh = sd(th);
   wh.__iterateUncached = function(xh, yh) {
    var zh = this;
    if (yh) return this.cacheResult().__iterate(xh, yh);
    var ai = 0;
    th.__iterate(function(bi, ci, di) {
     return uh.call(vh, bi, ci, di) && ++ai && xh(bi, ci, zh);
    });
    return ai;
   };
   wh.__iteratorUncached = function(xh, yh) {
    var zh = this;
    if (yh) return this.cacheResult().__iterator(xh, yh);
    var ai = th.__iterator(pa, yh), bi = true;
    return new ta(function() {
     if (!bi) return va();
     var ci = ai.next();
     if (ci.done) return ci;
     var di = ci.value, ei = di[0], fi = di[1];
     if (!uh.call(vh, fi, ei, zh)) {
      bi = false;
      return va();
     }
     return xh === pa ? ci : ua(xh, ei, fi, ci);
    });
   };
   return wh;
  }
  function fd(th, uh, vh, wh) {
   var xh = sd(th);
   xh.__iterateUncached = function(yh, zh) {
    var ai = this;
    if (zh) return this.cacheResult().__iterate(yh, zh);
    var bi = true, ci = 0;
    th.__iterate(function(di, ei, fi) {
     if (!(bi && (bi = uh.call(vh, di, ei, fi)))) {
      ci++;
      return yh(di, wh ? ei : ci - 1, ai);
     }
    });
    return ci;
   };
   xh.__iteratorUncached = function(yh, zh) {
    var ai = this;
    if (zh) return this.cacheResult().__iterator(yh, zh);
    var bi = th.__iterator(pa, zh), ci = true, di = 0;
    return new ta(function() {
     var ei, fi, gi;
     do {
      ei = bi.next();
      if (ei.done) if (wh || yh === oa) {
       return ei;
      } else if (yh === na) {
       return ua(yh, di++, void 0, ei);
      } else return ua(yh, di++, ei.value[1], ei);
      var hi = ei.value;
      fi = hi[0];
      gi = hi[1];
      ci && (ci = uh.call(vh, gi, fi, ai));
     } while (ci);
     return yh === pa ? ei : ua(yh, fi, gi, ei);
    });
   };
   return xh;
  }
  function gd(th, uh) {
   var vh = fa(th), wh = [ th ].concat(uh).map(function(zh) {
    if (!ea(zh)) {
     zh = vh ? nb(zh) : ob(Array.isArray(zh) ? zh : [ zh ]);
    } else if (vh) zh = ba(zh);
    return zh;
   }).filter(function(zh) {
    return zh.size !== 0;
   });
   if (wh.length === 0) return th;
   if (wh.length === 1) {
    var xh = wh[0];
    if (xh === th || vh && fa(xh) || ga(th) && ga(xh)) return xh;
   }
   var yh = new gb(wh);
   if (vh) {
    yh = yh.toKeyedSeq();
   } else if (!ga(th)) yh = yh.toSetSeq();
   yh = yh.flatten(true);
   yh.size = wh.reduce(function(zh, ai) {
    if (zh !== void 0) {
     var bi = ai.size;
     if (bi !== void 0) return zh + bi;
    }
   }, 0);
   return yh;
  }
  function hd(th, uh, vh) {
   var wh = sd(th);
   wh.__iterateUncached = function(xh, yh) {
    var zh = 0, ai = false;
    function bi(ci, di) {
     var ei = this;
     ci.__iterate(function(fi, gi) {
      if ((!uh || di < uh) && ea(fi)) {
       bi(fi, di + 1);
      } else if (xh(fi, vh ? gi : zh++, ei) === false) ai = true;
      return !ai;
     }, yh);
    }
    bi(th, 0);
    return zh;
   };
   wh.__iteratorUncached = function(xh, yh) {
    var zh = th.__iterator(xh, yh), ai = [], bi = 0;
    return new ta(function() {
     while (zh) {
      var ci = zh.next();
      if (ci.done !== false) {
       zh = ai.pop();
       continue;
      }
      var di = ci.value;
      if (xh === pa) di = di[1];
      if ((!uh || ai.length < uh) && ea(di)) {
       ai.push(zh);
       zh = di.__iterator(xh, yh);
      } else return vh ? ci : ua(xh, bi++, di, ci);
     }
     return va();
    });
   };
   return wh;
  }
  function id(th, uh, vh) {
   var wh = rd(th);
   return th.toSeq().map(function(xh, yh) {
    return wh(uh.call(vh, xh, yh, th));
   }).flatten(true);
  }
  function jd(th, uh) {
   var vh = sd(th);
   vh.size = th.size && th.size * 2 - 1;
   vh.__iterateUncached = function(wh, xh) {
    var yh = this, zh = 0;
    th.__iterate(function(ai, bi) {
     return (!zh || wh(uh, zh++, yh) !== false) && wh(ai, zh++, yh) !== false;
    }, xh);
    return zh;
   };
   vh.__iteratorUncached = function(wh, xh) {
    var yh = th.__iterator(oa, xh), zh = 0, ai;
    return new ta(function() {
     if (!ai || zh % 2) {
      ai = yh.next();
      if (ai.done) return ai;
     }
     return zh % 2 ? ua(wh, zh++, uh) : ua(wh, zh++, ai.value, ai);
    });
   };
   return vh;
  }
  function kd(th, uh, vh) {
   if (!uh) uh = ud;
   var wh = fa(th), xh = 0, yh = th.toSeq().map(function(zh, ai) {
    return [ ai, zh, xh++, vh ? vh(zh, ai, th) : zh ];
   }).toArray();
   yh.sort(function(zh, ai) {
    return uh(zh[3], ai[3]) || zh[2] - ai[2];
   }).forEach(wh ? function(zh, ai) {
    yh[ai].length = 2;
   } : function(zh, ai) {
    yh[ai] = zh[1];
   });
   return wh ? cb(yh) : ga(th) ? db(yh) : eb(yh);
  }
  function ld(th, uh, vh) {
   if (!uh) uh = ud;
   if (vh) {
    var wh = th.toSeq().map(function(xh, yh) {
     return [ xh, vh(xh, yh, th) ];
    }).reduce(function(xh, yh) {
     return md(uh, xh[1], yh[1]) ? yh : xh;
    });
    return wh && wh[0];
   } else return th.reduce(function(xh, yh) {
    return md(uh, xh, yh) ? yh : xh;
   });
  }
  function md(th, uh, vh) {
   var wh = th(vh, uh);
   return wh === 0 && vh !== uh && (vh === void 0 || vh === null || vh !== vh) || wh > 0;
  }
  function nd(th, uh, vh) {
   var wh = sd(th);
   wh.size = new gb(vh).map(function(xh) {
    return xh.size;
   }).min();
   wh.__iterate = function(xh, yh) {
    var zh = this.__iterator(oa, yh), ai, bi = 0;
    while (!(ai = zh.next()).done) if (xh(ai.value, bi++, this) === false) break;
    return bi;
   };
   wh.__iteratorUncached = function(xh, yh) {
    var zh = vh.map(function(ci) {
     return ci = aa(ci), ya(yh ? ci.reverse() : ci);
    }), ai = 0, bi = false;
    return new ta(function() {
     var ci;
     if (!bi) {
      ci = zh.map(function(di) {
       return di.next();
      });
      bi = ci.some(function(di) {
       return di.done;
      });
     }
     if (bi) return va();
     return ua(xh, ai++, uh.apply(null, ci.map(function(di) {
      return di.value;
     })));
    });
   };
   return wh;
  }
  function od(th, uh) {
   return kb(th) ? uh : th.constructor(uh);
  }
  function pd(th) {
   if (th !== Object(th)) throw new TypeError("Expected [K, V] tuple: " + th);
  }
  function qd(th) {
   sc(th.size);
   return t(th);
  }
  function rd(th) {
   return fa(th) ? ba : ga(th) ? ca : da;
  }
  function sd(th) {
   return Object.create((fa(th) ? cb : ga(th) ? db : eb).prototype);
  }
  function td() {
   if (this._iter.cacheResult) {
    this._iter.cacheResult();
    this.size = this._iter.size;
    return this;
   } else return bb.prototype.cacheResult.call(this);
  }
  function ud(th, uh) {
   return th > uh ? 1 : th < uh ? -1 : 0;
  }
  function vd(th) {
   var uh = ya(th);
   if (!uh) {
    if (!ab(th)) throw new TypeError("Expected iterable or array-like: " + th);
    uh = ya(aa(th));
   }
   return uh;
  }
  h(wd, ub);
  function wd(th) {
   return th === null || th === void 0 ? ke() : xd(th) ? th : ke().withMutations(function(uh) {
    var vh = ba(th);
    sc(vh.size);
    vh.forEach(function(wh, xh) {
     return uh.set(xh, wh);
    });
   });
  }
  wd.prototype.toString = function() {
   return this.__toString("Map {", "}");
  };
  wd.prototype.get = function(th, uh) {
   return this._root ? this._root.get(0, void 0, th, uh) : uh;
  };
  wd.prototype.set = function(th, uh) {
   return le(this, th, uh);
  };
  wd.prototype.setIn = function(th, uh) {
   return this.updateIn(th, m, function() {
    return uh;
   });
  };
  wd.prototype.remove = function(th) {
   return le(this, th, m);
  };
  wd.prototype.deleteIn = function(th) {
   return this.updateIn(th, function() {
    return m;
   });
  };
  wd.prototype.update = function(th, uh, vh) {
   return arguments.length === 1 ? th(this) : this.updateIn([ th ], uh, vh);
  };
  wd.prototype.updateIn = function(th, uh, vh) {
   if (!vh) {
    vh = uh;
    uh = void 0;
   }
   var wh = ve(this, vd(th), uh, vh);
   return wh === m ? void 0 : wh;
  };
  wd.prototype.clear = function() {
   if (this.size === 0) return this;
   if (this.__ownerID) {
    this.size = 0;
    this._root = null;
    this.__hash = void 0;
    this.__altered = true;
    return this;
   }
   return ke();
  };
  wd.prototype.merge = function() {
   return se(this, void 0, arguments);
  };
  wd.prototype.mergeWith = function(th) {
   var uh = g.call(arguments, 1);
   return se(this, th, uh);
  };
  wd.prototype.mergeIn = function(th) {
   var uh = g.call(arguments, 1);
   return this.updateIn(th, ke(), function(vh) {
    return vh.merge.apply(vh, uh);
   });
  };
  wd.prototype.mergeDeep = function() {
   return se(this, te(void 0), arguments);
  };
  wd.prototype.mergeDeepWith = function(th) {
   var uh = g.call(arguments, 1);
   return se(this, te(th), uh);
  };
  wd.prototype.mergeDeepIn = function(th) {
   var uh = g.call(arguments, 1);
   return this.updateIn(th, ke(), function(vh) {
    return vh.mergeDeep.apply(vh, uh);
   });
  };
  wd.prototype.sort = function(th) {
   return vf(kd(this, th));
  };
  wd.prototype.sortBy = function(th, uh) {
   return vf(kd(this, uh, th));
  };
  wd.prototype.withMutations = function(th) {
   var uh = this.asMutable();
   th(uh);
   return uh.wasAltered() ? uh.__ensureOwner(this.__ownerID) : this;
  };
  wd.prototype.asMutable = function() {
   return this.__ownerID ? this : this.__ensureOwner(new r());
  };
  wd.prototype.asImmutable = function() {
   return this.__ensureOwner();
  };
  wd.prototype.wasAltered = function() {
   return this.__altered;
  };
  wd.prototype.__iterator = function(th, uh) {
   return new fe(this, th, uh);
  };
  wd.prototype.__iterate = function(th, uh) {
   var vh = this, wh = 0;
   this._root && this._root.iterate(function(xh) {
    wh++;
    return th(xh[1], xh[0], vh);
   }, uh);
   return wh;
  };
  wd.prototype.__ensureOwner = function(th) {
   if (th === this.__ownerID) return this;
   if (!th) {
    this.__ownerID = th;
    this.__altered = false;
    return this;
   }
   return ie(this.size, this._root, th, this.__hash);
  };
  function xd(th) {
   return !!(th && th[yd]);
  }
  wd.isMap = xd;
  var yd = "@@__IMMUTABLE_MAP__@@", zd = wd.prototype;
  zd[yd] = true;
  zd[i] = zd.remove;
  zd.removeIn = zd.deleteIn;
  function ae(th, uh) {
   this.ownerID = th;
   this.entries = uh;
  }
  ae.prototype.get = function(th, uh, vh, wh) {
   var xh = this.entries;
   for (var yh = 0, zh = xh.length; yh < zh; yh++) if (xb(vh, xh[yh][0])) return xh[yh][1];
   return wh;
  };
  ae.prototype.update = function(th, uh, vh, wh, xh, yh, zh) {
   var ai = xh === m, bi = this.entries, ci = 0;
   for (var di = bi.length; ci < di; ci++) if (xb(wh, bi[ci][0])) break;
   var ei = ci < di;
   if (ei ? bi[ci][1] === xh : ai) return this;
   q(zh);
   (ai || !ei) && q(yh);
   if (ai && bi.length === 1) return;
   if (!ei && !ai && bi.length >= af) return pe(th, bi, wh, xh);
   var fi = th && th === this.ownerID, gi = fi ? bi : s(bi);
   if (ei) {
    if (ai) {
     ci === di - 1 ? gi.pop() : gi[ci] = gi.pop();
    } else gi[ci] = [ wh, xh ];
   } else gi.push([ wh, xh ]);
   if (fi) {
    this.entries = gi;
    return this;
   }
   return new ae(th, gi);
  };
  function be(th, uh, vh) {
   this.ownerID = th;
   this.bitmap = uh;
   this.nodes = vh;
  }
  be.prototype.get = function(th, uh, vh, wh) {
   if (uh === void 0) uh = ec(vh);
   var xh = 1 << ((th === 0 ? uh : uh >>> th) & l), yh = this.bitmap;
   return (yh & xh) === 0 ? wh : this.nodes[we(yh & xh - 1)].get(th + j, uh, vh, wh);
  };
  be.prototype.update = function(th, uh, vh, wh, xh, yh, zh) {
   if (vh === void 0) vh = ec(wh);
   var ai = (uh === 0 ? vh : vh >>> uh) & l, bi = 1 << ai, ci = this.bitmap, di = (ci & bi) !== 0;
   if (!di && xh === m) return this;
   var ei = we(ci & bi - 1), fi = this.nodes, gi = di ? fi[ei] : void 0, hi = me(gi, th, uh + j, vh, wh, xh, yh, zh);
   if (hi === gi) return this;
   if (!di && hi && fi.length >= bf) return re(th, fi, ci, ai, hi);
   if (di && !hi && fi.length === 2 && ne(fi[ei ^ 1])) return fi[ei ^ 1];
   if (di && hi && fi.length === 1 && ne(hi)) return hi;
   var ii = th && th === this.ownerID, ji = di ? hi ? ci : ci ^ bi : ci | bi, ki = di ? hi ? xe(fi, ei, hi, ii) : ze(fi, ei, ii) : ye(fi, ei, hi, ii);
   if (ii) {
    this.bitmap = ji;
    this.nodes = ki;
    return this;
   }
   return new be(th, ji, ki);
  };
  function ce(th, uh, vh) {
   this.ownerID = th;
   this.count = uh;
   this.nodes = vh;
  }
  ce.prototype.get = function(th, uh, vh, wh) {
   if (uh === void 0) uh = ec(vh);
   var xh = (th === 0 ? uh : uh >>> th) & l, yh = this.nodes[xh];
   return yh ? yh.get(th + j, uh, vh, wh) : wh;
  };
  ce.prototype.update = function(th, uh, vh, wh, xh, yh, zh) {
   if (vh === void 0) vh = ec(wh);
   var ai = (uh === 0 ? vh : vh >>> uh) & l, bi = xh === m, ci = this.nodes, di = ci[ai];
   if (bi && !di) return this;
   var ei = me(di, th, uh + j, vh, wh, xh, yh, zh);
   if (ei === di) return this;
   var fi = this.count;
   if (!di) {
    fi++;
   } else if (!ei) {
    fi--;
    if (fi < cf) return qe(th, ci, fi, ai);
   }
   var gi = th && th === this.ownerID, hi = xe(ci, ai, ei, gi);
   if (gi) {
    this.count = fi;
    this.nodes = hi;
    return this;
   }
   return new ce(th, fi, hi);
  };
  function de(th, uh, vh) {
   this.ownerID = th;
   this.keyHash = uh;
   this.entries = vh;
  }
  de.prototype.get = function(th, uh, vh, wh) {
   var xh = this.entries;
   for (var yh = 0, zh = xh.length; yh < zh; yh++) if (xb(vh, xh[yh][0])) return xh[yh][1];
   return wh;
  };
  de.prototype.update = function(th, uh, vh, wh, xh, yh, zh) {
   if (vh === void 0) vh = ec(wh);
   var ai = xh === m;
   if (vh !== this.keyHash) {
    if (ai) return this;
    q(zh);
    q(yh);
    return oe(this, th, uh, vh, [ wh, xh ]);
   }
   var bi = this.entries, ci = 0;
   for (var di = bi.length; ci < di; ci++) if (xb(wh, bi[ci][0])) break;
   var ei = ci < di;
   if (ei ? bi[ci][1] === xh : ai) return this;
   q(zh);
   (ai || !ei) && q(yh);
   if (ai && di === 2) return new ee(th, this.keyHash, bi[ci ^ 1]);
   var fi = th && th === this.ownerID, gi = fi ? bi : s(bi);
   if (ei) {
    if (ai) {
     ci === di - 1 ? gi.pop() : gi[ci] = gi.pop();
    } else gi[ci] = [ wh, xh ];
   } else gi.push([ wh, xh ]);
   if (fi) {
    this.entries = gi;
    return this;
   }
   return new de(th, this.keyHash, gi);
  };
  function ee(th, uh, vh) {
   this.ownerID = th;
   this.keyHash = uh;
   this.entry = vh;
  }
  ee.prototype.get = function(th, uh, vh, wh) {
   return xb(vh, this.entry[0]) ? this.entry[1] : wh;
  };
  ee.prototype.update = function(th, uh, vh, wh, xh, yh, zh) {
   var ai = xh === m, bi = xb(wh, this.entry[0]);
   if (bi ? xh === this.entry[1] : ai) return this;
   q(zh);
   if (ai) {
    q(yh);
    return;
   }
   if (bi) {
    if (th && th === this.ownerID) {
     this.entry[1] = xh;
     return this;
    }
    return new ee(th, this.keyHash, [ wh, xh ]);
   }
   q(yh);
   return oe(this, th, uh, ec(wh), [ wh, xh ]);
  };
  ae.prototype.iterate = de.prototype.iterate = function(th, uh) {
   var vh = this.entries;
   for (var wh = 0, xh = vh.length - 1; wh <= xh; wh++) if (th(vh[uh ? xh - wh : wh]) === false) return false;
  };
  be.prototype.iterate = ce.prototype.iterate = function(th, uh) {
   var vh = this.nodes;
   for (var wh = 0, xh = vh.length - 1; wh <= xh; wh++) {
    var yh = vh[uh ? xh - wh : wh];
    if (yh && yh.iterate(th, uh) === false) return false;
   }
  };
  ee.prototype.iterate = function(th, uh) {
   return th(this.entry);
  };
  h(fe, ta);
  function fe(th, uh, vh) {
   this._type = uh;
   this._reverse = vh;
   this._stack = th._root && he(th._root);
  }
  fe.prototype.next = function() {
   var th = this._type, uh = this._stack;
   while (uh) {
    var vh = uh.node, wh = uh.index++, xh;
    if (vh.entry) {
     if (wh === 0) return ge(th, vh.entry);
    } else if (vh.entries) {
     xh = vh.entries.length - 1;
     if (wh <= xh) return ge(th, vh.entries[this._reverse ? xh - wh : wh]);
    } else {
     xh = vh.nodes.length - 1;
     if (wh <= xh) {
      var yh = vh.nodes[this._reverse ? xh - wh : wh];
      if (yh) {
       if (yh.entry) return ge(th, yh.entry);
       uh = this._stack = he(yh, uh);
      }
      continue;
     }
    }
    uh = this._stack = this._stack.__prev;
   }
   return va();
  };
  function ge(th, uh) {
   return ua(th, uh[0], uh[1]);
  }
  function he(th, uh) {
   return {
    node: th,
    index: 0,
    __prev: uh
   };
  }
  function ie(th, uh, vh, wh) {
   var xh = Object.create(zd);
   xh.size = th;
   xh._root = uh;
   xh.__ownerID = vh;
   xh.__hash = wh;
   xh.__altered = false;
   return xh;
  }
  var je;
  function ke() {
   return je || (je = ie(0));
  }
  function le(th, uh, vh) {
   var wh, xh;
   if (!th._root) {
    if (vh === m) return th;
    xh = 1;
    wh = new ae(th.__ownerID, [ [ uh, vh ] ]);
   } else {
    var yh = p(n), zh = p(o);
    wh = me(th._root, th.__ownerID, 0, void 0, uh, vh, yh, zh);
    if (!zh.value) return th;
    xh = th.size + (yh.value ? vh === m ? -1 : 1 : 0);
   }
   if (th.__ownerID) {
    th.size = xh;
    th._root = wh;
    th.__hash = void 0;
    th.__altered = true;
    return th;
   }
   return wh ? ie(xh, wh) : ke();
  }
  function me(th, uh, vh, wh, xh, yh, zh, ai) {
   if (!th) {
    if (yh === m) return th;
    q(ai);
    q(zh);
    return new ee(uh, wh, [ xh, yh ]);
   }
   return th.update(uh, vh, wh, xh, yh, zh, ai);
  }
  function ne(th) {
   return th.constructor === ee || th.constructor === de;
  }
  function oe(th, uh, vh, wh, xh) {
   if (th.keyHash === wh) return new de(uh, wh, [ th.entry, xh ]);
   var yh = (vh === 0 ? th.keyHash : th.keyHash >>> vh) & l, zh = (vh === 0 ? wh : wh >>> vh) & l, ai, bi = yh === zh ? [ oe(th, uh, vh + j, wh, xh) ] : (ai = new ee(uh, wh, xh), 
   yh < zh ? [ th, ai ] : [ ai, th ]);
   return new be(uh, 1 << yh | 1 << zh, bi);
  }
  function pe(th, uh, vh, wh) {
   if (!th) th = new r();
   var xh = new ee(th, ec(vh), [ vh, wh ]);
   for (var yh = 0; yh < uh.length; yh++) {
    var zh = uh[yh];
    xh = xh.update(th, 0, void 0, zh[0], zh[1]);
   }
   return xh;
  }
  function qe(th, uh, vh, wh) {
   var xh = 0, yh = 0, zh = new Array(vh);
   for (var ai = 0, bi = 1, ci = uh.length; ai < ci; ai++, bi <<= 1) {
    var di = uh[ai];
    if (di !== void 0 && ai !== wh) {
     xh |= bi;
     zh[yh++] = di;
    }
   }
   return new be(th, xh, zh);
  }
  function re(th, uh, vh, wh, xh) {
   var yh = 0, zh = new Array(k);
   for (var ai = 0; vh !== 0; ai++, vh >>>= 1) zh[ai] = vh & 1 ? uh[yh++] : void 0;
   zh[wh] = xh;
   return new ce(th, yh + 1, zh);
  }
  function se(th, uh, vh) {
   var wh = [];
   for (var xh = 0; xh < vh.length; xh++) {
    var yh = vh[xh], zh = ba(yh);
    if (!ea(yh)) zh = zh.map(function(ai) {
     return yb(ai);
    });
    wh.push(zh);
   }
   return ue(th, uh, wh);
  }
  function te(th) {
   return function(uh, vh) {
    return uh && uh.mergeDeepWith && ea(vh) ? uh.mergeDeepWith(th, vh) : th ? th(uh, vh) : vh;
   };
  }
  function ue(th, uh, vh) {
   vh = vh.filter(function(wh) {
    return wh.size !== 0;
   });
   if (vh.length === 0) return th;
   if (th.size === 0 && vh.length === 1) return th.constructor(vh[0]);
   return th.withMutations(function(wh) {
    var xh = uh ? function(zh, ai) {
     wh.update(ai, m, function(bi) {
      return bi === m ? zh : uh(bi, zh);
     });
    } : function(zh, ai) {
     wh.set(ai, zh);
    };
    for (var yh = 0; yh < vh.length; yh++) vh[yh].forEach(xh);
   });
  }
  function ve(th, uh, vh, wh) {
   var xh = th === m, yh = uh.next();
   if (yh.done) {
    var zh = xh ? vh : th, ai = wh(zh);
    return ai === zh ? th : ai;
   }
   rc(xh || th && th.set);
   var bi = yh.value, ci = xh ? m : th.get(bi, m), di = ve(ci, uh, vh, wh);
   return di === ci ? th : di === m ? th.remove(bi) : (xh ? ke() : th).set(bi, di);
  }
  function we(th) {
   th = th - (th >> 1 & 1431655765);
   th = (th & 858993459) + (th >> 2 & 858993459);
   th = th + (th >> 4) & 252645135;
   th = th + (th >> 8);
   th = th + (th >> 16);
   return th & 127;
  }
  function xe(th, uh, vh, wh) {
   var xh = wh ? th : s(th);
   xh[uh] = vh;
   return xh;
  }
  function ye(th, uh, vh, wh) {
   var xh = th.length + 1;
   if (wh && uh + 1 === xh) {
    th[uh] = vh;
    return th;
   }
   var yh = new Array(xh), zh = 0;
   for (var ai = 0; ai < xh; ai++) if (ai === uh) {
    yh[ai] = vh;
    zh = -1;
   } else yh[ai] = th[ai + zh];
   return yh;
  }
  function ze(th, uh, vh) {
   var wh = th.length - 1;
   if (vh && uh === wh) {
    th.pop();
    return th;
   }
   var xh = new Array(wh), yh = 0;
   for (var zh = 0; zh < wh; zh++) {
    if (zh === uh) yh = 1;
    xh[zh] = th[zh + yh];
   }
   return xh;
  }
  var af = k / 4, bf = k / 2, cf = k / 4;
  h(df, vb);
  function df(th) {
   var uh = nf();
   if (th === null || th === void 0) return uh;
   if (ef(th)) return th;
   var vh = ca(th), wh = vh.size;
   if (wh === 0) return uh;
   sc(wh);
   if (wh > 0 && wh < k) return lf(0, wh, j, null, new hf(vh.toArray()));
   return uh.withMutations(function(xh) {
    xh.setSize(wh);
    vh.forEach(function(yh, zh) {
     return xh.set(zh, yh);
    });
   });
  }
  df.of = function() {
   return this(arguments);
  };
  df.prototype.toString = function() {
   return this.__toString("List [", "]");
  };
  df.prototype.get = function(th, uh) {
   th = u(this, th);
   if (th < 0 || th >= this.size) return uh;
   th += this._origin;
   var vh = rf(this, th);
   return vh && vh.array[th & l];
  };
  df.prototype.set = function(th, uh) {
   return of(this, th, uh);
  };
  df.prototype.remove = function(th) {
   return !this.has(th) ? this : th === 0 ? this.shift() : th === this.size - 1 ? this.pop() : this.splice(th, 1);
  };
  df.prototype.clear = function() {
   if (this.size === 0) return this;
   if (this.__ownerID) {
    this.size = this._origin = this._capacity = 0;
    this._level = j;
    this._root = this._tail = null;
    this.__hash = void 0;
    this.__altered = true;
    return this;
   }
   return nf();
  };
  df.prototype.push = function() {
   var th = arguments, uh = this.size;
   return this.withMutations(function(vh) {
    sf(vh, 0, uh + th.length);
    for (var wh = 0; wh < th.length; wh++) vh.set(uh + wh, th[wh]);
   });
  };
  df.prototype.pop = function() {
   return sf(this, 0, -1);
  };
  df.prototype.unshift = function() {
   var th = arguments;
   return this.withMutations(function(uh) {
    sf(uh, -th.length);
    for (var vh = 0; vh < th.length; vh++) uh.set(vh, th[vh]);
   });
  };
  df.prototype.shift = function() {
   return sf(this, 1);
  };
  df.prototype.merge = function() {
   return tf(this, void 0, arguments);
  };
  df.prototype.mergeWith = function(th) {
   var uh = g.call(arguments, 1);
   return tf(this, th, uh);
  };
  df.prototype.mergeDeep = function() {
   return tf(this, te(void 0), arguments);
  };
  df.prototype.mergeDeepWith = function(th) {
   var uh = g.call(arguments, 1);
   return tf(this, te(th), uh);
  };
  df.prototype.setSize = function(th) {
   return sf(this, 0, th);
  };
  df.prototype.slice = function(th, uh) {
   var vh = this.size;
   if (w(th, uh, vh)) return this;
   return sf(this, x(th, vh), y(uh, vh));
  };
  df.prototype.__iterator = function(th, uh) {
   var vh = 0, wh = kf(this, uh);
   return new ta(function() {
    var xh = wh();
    return xh === jf ? va() : ua(th, vh++, xh);
   });
  };
  df.prototype.__iterate = function(th, uh) {
   var vh = 0, wh = kf(this, uh), xh;
   while ((xh = wh()) !== jf) if (th(xh, vh++, this) === false) break;
   return vh;
  };
  df.prototype.__ensureOwner = function(th) {
   if (th === this.__ownerID) return this;
   if (!th) {
    this.__ownerID = th;
    return this;
   }
   return lf(this._origin, this._capacity, this._level, this._root, this._tail, th, this.__hash);
  };
  function ef(th) {
   return !!(th && th[ff]);
  }
  df.isList = ef;
  var ff = "@@__IMMUTABLE_LIST__@@", gf = df.prototype;
  gf[ff] = true;
  gf[i] = gf.remove;
  gf.setIn = zd.setIn;
  gf.deleteIn = gf.removeIn = zd.removeIn;
  gf.update = zd.update;
  gf.updateIn = zd.updateIn;
  gf.mergeIn = zd.mergeIn;
  gf.mergeDeepIn = zd.mergeDeepIn;
  gf.withMutations = zd.withMutations;
  gf.asMutable = zd.asMutable;
  gf.asImmutable = zd.asImmutable;
  gf.wasAltered = zd.wasAltered;
  function hf(th, uh) {
   this.array = th;
   this.ownerID = uh;
  }
  hf.prototype.removeBefore = function(th, uh, vh) {
   if (vh === uh ? 1 << uh : this.array.length === 0) return this;
   var wh = vh >>> uh & l;
   if (wh >= this.array.length) return new hf([], th);
   var xh = wh === 0, yh;
   if (uh > 0) {
    var zh = this.array[wh];
    yh = zh && zh.removeBefore(th, uh - j, vh);
    if (yh === zh && xh) return this;
   }
   if (xh && !yh) return this;
   var ai = qf(this, th);
   if (!xh) for (var bi = 0; bi < wh; bi++) ai.array[bi] = void 0;
   if (yh) ai.array[wh] = yh;
   return ai;
  };
  hf.prototype.removeAfter = function(th, uh, vh) {
   if (vh === uh ? 1 << uh : this.array.length === 0) return this;
   var wh = vh - 1 >>> uh & l;
   if (wh >= this.array.length) return this;
   var xh = wh === this.array.length - 1, yh;
   if (uh > 0) {
    var zh = this.array[wh];
    yh = zh && zh.removeAfter(th, uh - j, vh);
    if (yh === zh && xh) return this;
   }
   if (xh && !yh) return this;
   var ai = qf(this, th);
   if (!xh) ai.array.pop();
   if (yh) ai.array[wh] = yh;
   return ai;
  };
  var jf = {};
  function kf(th, uh) {
   var vh = th._origin, wh = th._capacity, xh = uf(wh), yh = th._tail;
   return zh(th._root, th._level, 0);
   function zh(ci, di, ei) {
    return di === 0 ? ai(ci, ei) : bi(ci, di, ei);
   }
   function ai(ci, di) {
    var ei = di === xh ? yh && yh.array : ci && ci.array, fi = di > vh ? 0 : vh - di, gi = wh - di;
    if (gi > k) gi = k;
    return function() {
     if (fi === gi) return jf;
     var hi = uh ? --gi : fi++;
     return ei && ei[hi];
    };
   }
   function bi(ci, di, ei) {
    var fi, gi = ci && ci.array, hi = ei > vh ? 0 : vh - ei >> di, ii = (wh - ei >> di) + 1;
    if (ii > k) ii = k;
    return function() {
     do {
      if (fi) {
       var ji = fi();
       if (ji !== jf) return ji;
       fi = null;
      }
      if (hi === ii) return jf;
      var ki = uh ? --ii : hi++;
      fi = zh(gi && gi[ki], di - j, ei + (ki << di));
     } while (true);
    };
   }
  }
  function lf(th, uh, vh, wh, xh, yh, zh) {
   var ai = Object.create(gf);
   ai.size = uh - th;
   ai._origin = th;
   ai._capacity = uh;
   ai._level = vh;
   ai._root = wh;
   ai._tail = xh;
   ai.__ownerID = yh;
   ai.__hash = zh;
   ai.__altered = false;
   return ai;
  }
  var mf;
  function nf() {
   return mf || (mf = lf(0, 0, j));
  }
  function of(th, uh, vh) {
   uh = u(th, uh);
   if (uh >= th.size || uh < 0) return th.withMutations(function(zh) {
    uh < 0 ? sf(zh, uh).set(0, vh) : sf(zh, 0, uh + 1).set(uh, vh);
   });
   uh += th._origin;
   var wh = th._tail, xh = th._root, yh = p(o);
   if (uh >= uf(th._capacity)) {
    wh = pf(wh, th.__ownerID, 0, uh, vh, yh);
   } else xh = pf(xh, th.__ownerID, th._level, uh, vh, yh);
   if (!yh.value) return th;
   if (th.__ownerID) {
    th._root = xh;
    th._tail = wh;
    th.__hash = void 0;
    th.__altered = true;
    return th;
   }
   return lf(th._origin, th._capacity, th._level, xh, wh);
  }
  function pf(th, uh, vh, wh, xh, yh) {
   var zh = wh >>> vh & l, ai = th && zh < th.array.length;
   if (!ai && xh === void 0) return th;
   var bi;
   if (vh > 0) {
    var ci = th && th.array[zh], di = pf(ci, uh, vh - j, wh, xh, yh);
    if (di === ci) return th;
    bi = qf(th, uh);
    bi.array[zh] = di;
    return bi;
   }
   if (ai && th.array[zh] === xh) return th;
   q(yh);
   bi = qf(th, uh);
   if (xh === void 0 && zh === bi.array.length - 1) {
    bi.array.pop();
   } else bi.array[zh] = xh;
   return bi;
  }
  function qf(th, uh) {
   if (uh && th && uh === th.ownerID) return th;
   return new hf(th ? th.array.slice() : [], uh);
  }
  function rf(th, uh) {
   if (uh >= uf(th._capacity)) return th._tail;
   if (uh < 1 << th._level + j) {
    var vh = th._root, wh = th._level;
    while (vh && wh > 0) {
     vh = vh.array[uh >>> wh & l];
     wh -= j;
    }
    return vh;
   }
  }
  function sf(th, uh, vh) {
   var wh = th.__ownerID || new r(), xh = th._origin, yh = th._capacity, zh = xh + uh, ai = vh === void 0 ? yh : vh < 0 ? yh + vh : xh + vh;
   if (zh === xh && ai === yh) return th;
   if (zh >= ai) return th.clear();
   var bi = th._level, ci = th._root, di = 0;
   while (zh + di < 0) {
    ci = new hf(ci && ci.array.length ? [ void 0, ci ] : [], wh);
    bi += j;
    di += 1 << bi;
   }
   if (di) {
    zh += di;
    xh += di;
    ai += di;
    yh += di;
   }
   var ei = uf(yh), fi = uf(ai);
   while (fi >= 1 << bi + j) {
    ci = new hf(ci && ci.array.length ? [ ci ] : [], wh);
    bi += j;
   }
   var gi = th._tail, hi = fi < ei ? rf(th, ai - 1) : fi > ei ? new hf([], wh) : gi;
   if (gi && fi > ei && zh < yh && gi.array.length) {
    ci = qf(ci, wh);
    var ii = ci;
    for (var ji = bi; ji > j; ji -= j) {
     var ki = ei >>> ji & l;
     ii = ii.array[ki] = qf(ii.array[ki], wh);
    }
    ii.array[ei >>> j & l] = gi;
   }
   if (ai < yh) hi = hi && hi.removeAfter(wh, 0, ai);
   if (zh >= fi) {
    zh -= fi;
    ai -= fi;
    bi = j;
    ci = null;
    hi = hi && hi.removeBefore(wh, 0, zh);
   } else if (zh > xh || fi < ei) {
    di = 0;
    while (ci) {
     var li = zh >>> bi & l;
     if (li !== fi >>> bi & l) break;
     if (li) di += (1 << bi) * li;
     bi -= j;
     ci = ci.array[li];
    }
    if (ci && zh > xh) ci = ci.removeBefore(wh, bi, zh - di);
    if (ci && fi < ei) ci = ci.removeAfter(wh, bi, fi - di);
    if (di) {
     zh -= di;
     ai -= di;
    }
   }
   if (th.__ownerID) {
    th.size = ai - zh;
    th._origin = zh;
    th._capacity = ai;
    th._level = bi;
    th._root = ci;
    th._tail = hi;
    th.__hash = void 0;
    th.__altered = true;
    return th;
   }
   return lf(zh, ai, bi, ci, hi);
  }
  function tf(th, uh, vh) {
   var wh = [], xh = 0;
   for (var yh = 0; yh < vh.length; yh++) {
    var zh = vh[yh], ai = ca(zh);
    if (ai.size > xh) xh = ai.size;
    if (!ea(zh)) ai = ai.map(function(bi) {
     return yb(bi);
    });
    wh.push(ai);
   }
   if (xh > th.size) th = th.setSize(xh);
   return ue(th, uh, wh);
  }
  function uf(th) {
   return th < k ? 0 : th - 1 >>> j << j;
  }
  h(vf, wd);
  function vf(th) {
   return th === null || th === void 0 ? zf() : wf(th) ? th : zf().withMutations(function(uh) {
    var vh = ba(th);
    sc(vh.size);
    vh.forEach(function(wh, xh) {
     return uh.set(xh, wh);
    });
   });
  }
  vf.of = function() {
   return this(arguments);
  };
  vf.prototype.toString = function() {
   return this.__toString("OrderedMap {", "}");
  };
  vf.prototype.get = function(th, uh) {
   var vh = this._map.get(th);
   return vh !== void 0 ? this._list.get(vh)[1] : uh;
  };
  vf.prototype.clear = function() {
   if (this.size === 0) return this;
   if (this.__ownerID) {
    this.size = 0;
    this._map.clear();
    this._list.clear();
    return this;
   }
   return zf();
  };
  vf.prototype.set = function(th, uh) {
   return ag(this, th, uh);
  };
  vf.prototype.remove = function(th) {
   return ag(this, th, m);
  };
  vf.prototype.wasAltered = function() {
   return this._map.wasAltered() || this._list.wasAltered();
  };
  vf.prototype.__iterate = function(th, uh) {
   var vh = this;
   return this._list.__iterate(function(wh) {
    return wh && th(wh[1], wh[0], vh);
   }, uh);
  };
  vf.prototype.__iterator = function(th, uh) {
   return this._list.fromEntrySeq().__iterator(th, uh);
  };
  vf.prototype.__ensureOwner = function(th) {
   if (th === this.__ownerID) return this;
   var uh = this._map.__ensureOwner(th), vh = this._list.__ensureOwner(th);
   if (!th) {
    this.__ownerID = th;
    this._map = uh;
    this._list = vh;
    return this;
   }
   return xf(uh, vh, th, this.__hash);
  };
  function wf(th) {
   return xd(th) && ia(th);
  }
  vf.isOrderedMap = wf;
  vf.prototype[ma] = true;
  vf.prototype[i] = vf.prototype.remove;
  function xf(th, uh, vh, wh) {
   var xh = Object.create(vf.prototype);
   xh.size = th ? th.size : 0;
   xh._map = th;
   xh._list = uh;
   xh.__ownerID = vh;
   xh.__hash = wh;
   return xh;
  }
  var yf;
  function zf() {
   return yf || (yf = xf(ke(), nf()));
  }
  function ag(th, uh, vh) {
   var wh = th._map, xh = th._list, yh = wh.get(uh), zh = yh !== void 0, ai, bi;
   if (vh === m) {
    if (!zh) return th;
    if (xh.size >= k && xh.size >= wh.size * 2) {
     bi = xh.filter(function(ci, di) {
      return ci !== void 0 && yh !== di;
     });
     ai = bi.toKeyedSeq().map(function(ci) {
      return ci[0];
     }).flip().toMap();
     if (th.__ownerID) ai.__ownerID = bi.__ownerID = th.__ownerID;
    } else {
     ai = wh.remove(uh);
     bi = yh === xh.size - 1 ? xh.pop() : xh.set(yh, void 0);
    }
   } else if (zh) {
    if (vh === xh.get(yh)[1]) return th;
    ai = wh;
    bi = xh.set(yh, [ uh, vh ]);
   } else {
    ai = wh.set(uh, xh.size);
    bi = xh.set(xh.size, [ uh, vh ]);
   }
   if (th.__ownerID) {
    th.size = ai.size;
    th._map = ai;
    th._list = bi;
    th.__hash = void 0;
    return th;
   }
   return xf(ai, bi);
  }
  h(bg, vb);
  function bg(th) {
   return th === null || th === void 0 ? hg() : cg(th) ? th : hg().unshiftAll(th);
  }
  bg.of = function() {
   return this(arguments);
  };
  bg.prototype.toString = function() {
   return this.__toString("Stack [", "]");
  };
  bg.prototype.get = function(th, uh) {
   var vh = this._head;
   while (vh && th--) vh = vh.next;
   return vh ? vh.value : uh;
  };
  bg.prototype.peek = function() {
   return this._head && this._head.value;
  };
  bg.prototype.push = function() {
   if (arguments.length === 0) return this;
   var th = this.size + arguments.length, uh = this._head;
   for (var vh = arguments.length - 1; vh >= 0; vh--) uh = {
    value: arguments[vh],
    next: uh
   };
   if (this.__ownerID) {
    this.size = th;
    this._head = uh;
    this.__hash = void 0;
    this.__altered = true;
    return this;
   }
   return fg(th, uh);
  };
  bg.prototype.pushAll = function(th) {
   th = ca(th);
   if (th.size === 0) return this;
   sc(th.size);
   var uh = this.size, vh = this._head;
   th.reverse().forEach(function(wh) {
    uh++;
    vh = {
     value: wh,
     next: vh
    };
   });
   if (this.__ownerID) {
    this.size = uh;
    this._head = vh;
    this.__hash = void 0;
    this.__altered = true;
    return this;
   }
   return fg(uh, vh);
  };
  bg.prototype.pop = function() {
   return this.slice(1);
  };
  bg.prototype.unshift = function() {
   return this.push.apply(this, arguments);
  };
  bg.prototype.unshiftAll = function(th) {
   return this.pushAll(th);
  };
  bg.prototype.shift = function() {
   return this.pop.apply(this, arguments);
  };
  bg.prototype.clear = function() {
   if (this.size === 0) return this;
   if (this.__ownerID) {
    this.size = 0;
    this._head = void 0;
    this.__hash = void 0;
    this.__altered = true;
    return this;
   }
   return hg();
  };
  bg.prototype.slice = function(th, uh) {
   if (w(th, uh, this.size)) return this;
   var vh = x(th, this.size), wh = y(uh, this.size);
   if (wh !== this.size) return vb.prototype.slice.call(this, th, uh);
   var xh = this.size - vh, yh = this._head;
   while (vh--) yh = yh.next;
   if (this.__ownerID) {
    this.size = xh;
    this._head = yh;
    this.__hash = void 0;
    this.__altered = true;
    return this;
   }
   return fg(xh, yh);
  };
  bg.prototype.__ensureOwner = function(th) {
   if (th === this.__ownerID) return this;
   if (!th) {
    this.__ownerID = th;
    this.__altered = false;
    return this;
   }
   return fg(this.size, this._head, th, this.__hash);
  };
  bg.prototype.__iterate = function(th, uh) {
   if (uh) return this.toSeq().cacheResult.__iterate(th, uh);
   var vh = 0, wh = this._head;
   while (wh) {
    if (th(wh.value, vh++, this) === false) break;
    wh = wh.next;
   }
   return vh;
  };
  bg.prototype.__iterator = function(th, uh) {
   if (uh) return this.toSeq().cacheResult().__iterator(th, uh);
   var vh = 0, wh = this._head;
   return new ta(function() {
    if (wh) {
     var xh = wh.value;
     wh = wh.next;
     return ua(th, vh++, xh);
    }
    return va();
   });
  };
  function cg(th) {
   return !!(th && th[dg]);
  }
  bg.isStack = cg;
  var dg = "@@__IMMUTABLE_STACK__@@", eg = bg.prototype;
  eg[dg] = true;
  eg.withMutations = zd.withMutations;
  eg.asMutable = zd.asMutable;
  eg.asImmutable = zd.asImmutable;
  eg.wasAltered = zd.wasAltered;
  function fg(th, uh, vh, wh) {
   var xh = Object.create(eg);
   xh.size = th;
   xh._head = uh;
   xh.__ownerID = vh;
   xh.__hash = wh;
   xh.__altered = false;
   return xh;
  }
  var gg;
  function hg() {
   return gg || (gg = fg(0));
  }
  h(ig, wb);
  function ig(th) {
   return th === null || th === void 0 ? pg() : jg(th) ? th : pg().withMutations(function(uh) {
    var vh = da(th);
    sc(vh.size);
    vh.forEach(function(wh) {
     return uh.add(wh);
    });
   });
  }
  ig.of = function() {
   return this(arguments);
  };
  ig.fromKeys = function(th) {
   return this(ba(th).keySeq());
  };
  ig.prototype.toString = function() {
   return this.__toString("Set {", "}");
  };
  ig.prototype.has = function(th) {
   return this._map.has(th);
  };
  ig.prototype.add = function(th) {
   return mg(this, this._map.set(th, true));
  };
  ig.prototype.remove = function(th) {
   return mg(this, this._map.remove(th));
  };
  ig.prototype.clear = function() {
   return mg(this, this._map.clear());
  };
  ig.prototype.union = function() {
   var th = g.call(arguments, 0);
   th = th.filter(function(uh) {
    return uh.size !== 0;
   });
   if (th.length === 0) return this;
   if (this.size === 0 && th.length === 1) return this.constructor(th[0]);
   return this.withMutations(function(uh) {
    for (var vh = 0; vh < th.length; vh++) da(th[vh]).forEach(function(wh) {
     return uh.add(wh);
    });
   });
  };
  ig.prototype.intersect = function() {
   var th = g.call(arguments, 0);
   if (th.length === 0) return this;
   th = th.map(function(vh) {
    return da(vh);
   });
   var uh = this;
   return this.withMutations(function(vh) {
    uh.forEach(function(wh) {
     if (!th.every(function(xh) {
      return xh.contains(wh);
     })) vh.remove(wh);
    });
   });
  };
  ig.prototype.subtract = function() {
   var th = g.call(arguments, 0);
   if (th.length === 0) return this;
   th = th.map(function(vh) {
    return da(vh);
   });
   var uh = this;
   return this.withMutations(function(vh) {
    uh.forEach(function(wh) {
     if (th.some(function(xh) {
      return xh.contains(wh);
     })) vh.remove(wh);
    });
   });
  };
  ig.prototype.merge = function() {
   return this.union.apply(this, arguments);
  };
  ig.prototype.mergeWith = function(th) {
   var uh = g.call(arguments, 1);
   return this.union.apply(this, uh);
  };
  ig.prototype.sort = function(th) {
   return qg(kd(this, th));
  };
  ig.prototype.sortBy = function(th, uh) {
   return qg(kd(this, uh, th));
  };
  ig.prototype.wasAltered = function() {
   return this._map.wasAltered();
  };
  ig.prototype.__iterate = function(th, uh) {
   var vh = this;
   return this._map.__iterate(function(wh, xh) {
    return th(xh, xh, vh);
   }, uh);
  };
  ig.prototype.__iterator = function(th, uh) {
   return this._map.map(function(vh, wh) {
    return wh;
   }).__iterator(th, uh);
  };
  ig.prototype.__ensureOwner = function(th) {
   if (th === this.__ownerID) return this;
   var uh = this._map.__ensureOwner(th);
   if (!th) {
    this.__ownerID = th;
    this._map = uh;
    return this;
   }
   return this.__make(uh, th);
  };
  function jg(th) {
   return !!(th && th[kg]);
  }
  ig.isSet = jg;
  var kg = "@@__IMMUTABLE_SET__@@", lg = ig.prototype;
  lg[kg] = true;
  lg[i] = lg.remove;
  lg.mergeDeep = lg.merge;
  lg.mergeDeepWith = lg.mergeWith;
  lg.withMutations = zd.withMutations;
  lg.asMutable = zd.asMutable;
  lg.asImmutable = zd.asImmutable;
  lg.__empty = pg;
  lg.__make = ng;
  function mg(th, uh) {
   if (th.__ownerID) {
    th.size = uh.size;
    th._map = uh;
    return th;
   }
   return uh === th._map ? th : uh.size === 0 ? th.__empty() : th.__make(uh);
  }
  function ng(th, uh) {
   var vh = Object.create(lg);
   vh.size = th ? th.size : 0;
   vh._map = th;
   vh.__ownerID = uh;
   return vh;
  }
  var og;
  function pg() {
   return og || (og = ng(ke()));
  }
  h(qg, ig);
  function qg(th) {
   return th === null || th === void 0 ? vg() : rg(th) ? th : vg().withMutations(function(uh) {
    var vh = da(th);
    sc(vh.size);
    vh.forEach(function(wh) {
     return uh.add(wh);
    });
   });
  }
  qg.of = function() {
   return this(arguments);
  };
  qg.fromKeys = function(th) {
   return this(ba(th).keySeq());
  };
  qg.prototype.toString = function() {
   return this.__toString("OrderedSet {", "}");
  };
  function rg(th) {
   return jg(th) && ia(th);
  }
  qg.isOrderedSet = rg;
  var sg = qg.prototype;
  sg[ma] = true;
  sg.__empty = vg;
  sg.__make = tg;
  function tg(th, uh) {
   var vh = Object.create(sg);
   vh.size = th ? th.size : 0;
   vh._map = th;
   vh.__ownerID = uh;
   return vh;
  }
  var ug;
  function vg() {
   return ug || (ug = tg(zf()));
  }
  h(wg, ub);
  function wg(th, uh) {
   var vh = function zh(ai) {
    if (!(this instanceof vh)) return new vh(ai);
    this._map = wd(ai);
   }, wh = Object.keys(th), xh = vh.prototype = Object.create(xg);
   xh.constructor = vh;
   uh && (xh._name = uh);
   xh._defaultValues = th;
   xh._keys = wh;
   xh.size = wh.length;
   try {
    wh.forEach(function(zh) {
     Object.defineProperty(vh.prototype, zh, {
      get: function() {
       return this.get(zh);
      },
      set: function(ai) {
       rc(this.__ownerID);
       this.set(zh, ai);
      }
     });
    });
   } catch (yh) {}
   return vh;
  }
  wg.prototype.toString = function() {
   return this.__toString(zg(this) + " {", "}");
  };
  wg.prototype.has = function(th) {
   return this._defaultValues.hasOwnProperty(th);
  };
  wg.prototype.get = function(th, uh) {
   if (!this.has(th)) return uh;
   var vh = this._defaultValues[th];
   return this._map ? this._map.get(th, vh) : vh;
  };
  wg.prototype.clear = function() {
   if (this.__ownerID) {
    this._map && this._map.clear();
    return this;
   }
   var th = Object.getPrototypeOf(this).constructor;
   return th._empty || (th._empty = yg(this, ke()));
  };
  wg.prototype.set = function(th, uh) {
   if (!this.has(th)) throw new Error('Cannot set unknown key "' + th + '" on ' + zg(this));
   var vh = this._map && this._map.set(th, uh);
   if (this.__ownerID || vh === this._map) return this;
   return yg(this, vh);
  };
  wg.prototype.remove = function(th) {
   if (!this.has(th)) return this;
   var uh = this._map && this._map.remove(th);
   if (this.__ownerID || uh === this._map) return this;
   return yg(this, uh);
  };
  wg.prototype.wasAltered = function() {
   return this._map.wasAltered();
  };
  wg.prototype.__iterator = function(th, uh) {
   var vh = this;
   return ba(this._defaultValues).map(function(wh, xh) {
    return vh.get(xh);
   }).__iterator(th, uh);
  };
  wg.prototype.__iterate = function(th, uh) {
   var vh = this;
   return ba(this._defaultValues).map(function(wh, xh) {
    return vh.get(xh);
   }).__iterate(th, uh);
  };
  wg.prototype.__ensureOwner = function(th) {
   if (th === this.__ownerID) return this;
   var uh = this._map && this._map.__ensureOwner(th);
   if (!th) {
    this.__ownerID = th;
    this._map = uh;
    return this;
   }
   return yg(this, uh, th);
  };
  var xg = wg.prototype;
  xg[i] = xg.remove;
  xg.deleteIn = xg.removeIn = zd.removeIn;
  xg.merge = zd.merge;
  xg.mergeWith = zd.mergeWith;
  xg.mergeIn = zd.mergeIn;
  xg.mergeDeep = zd.mergeDeep;
  xg.mergeDeepWith = zd.mergeDeepWith;
  xg.mergeDeepIn = zd.mergeDeepIn;
  xg.setIn = zd.setIn;
  xg.update = zd.update;
  xg.updateIn = zd.updateIn;
  xg.withMutations = zd.withMutations;
  xg.asMutable = zd.asMutable;
  xg.asImmutable = zd.asImmutable;
  function yg(th, uh, vh) {
   var wh = Object.create(Object.getPrototypeOf(th));
   wh._map = uh;
   wh.__ownerID = vh;
   return wh;
  }
  function zg(th) {
   return th._name || th.constructor.name;
  }
  function ah(th, uh) {
   if (th === uh) return true;
   if (!ea(uh) || th.size !== void 0 && uh.size !== void 0 && th.size !== uh.size || th.__hash !== void 0 && uh.__hash !== void 0 && th.__hash !== uh.__hash || fa(th) !== fa(uh) || ga(th) !== ga(uh) || ia(th) !== ia(uh)) return false;
   if (th.size === 0 && uh.size === 0) return true;
   var vh = !ha(th);
   if (ia(th)) {
    var wh = th.entries();
    return uh.every(function(bi, ci) {
     var di = wh.next().value;
     return di && xb(di[1], bi) && (vh || xb(di[0], ci));
    }) && wh.next().done;
   }
   var xh = false;
   if (th.size === void 0) if (uh.size === void 0) {
    th.cacheResult();
   } else {
    xh = true;
    var yh = th;
    th = uh;
    uh = yh;
   }
   var zh = true, ai = uh.__iterate(function(bi, ci) {
    if (vh ? !th.has(bi) : xh ? !xb(bi, th.get(ci, m)) : !xb(th.get(ci, m), bi)) {
     zh = false;
     return false;
    }
   });
   return zh && th.size === ai;
  }
  h(bh, db);
  function bh(th, uh, vh) {
   if (!(this instanceof bh)) return new bh(th, uh, vh);
   rc(vh !== 0);
   th = th || 0;
   if (uh === void 0) uh = Infinity;
   vh = vh === void 0 ? 1 : Math.abs(vh);
   if (uh < th) vh = -vh;
   this._start = th;
   this._end = uh;
   this._step = vh;
   this.size = Math.max(0, Math.ceil((uh - th) / vh - 1) + 1);
   if (this.size === 0) {
    if (ch) return ch;
    ch = this;
   }
  }
  bh.prototype.toString = function() {
   if (this.size === 0) return "Range []";
   return "Range [ " + this._start + "..." + this._end + (this._step > 1 ? " by " + this._step : "") + " ]";
  };
  bh.prototype.get = function(th, uh) {
   return this.has(th) ? this._start + u(this, th) * this._step : uh;
  };
  bh.prototype.contains = function(th) {
   var uh = (th - this._start) / this._step;
   return uh >= 0 && uh < this.size && uh === Math.floor(uh);
  };
  bh.prototype.slice = function(th, uh) {
   if (w(th, uh, this.size)) return this;
   th = x(th, this.size);
   uh = y(uh, this.size);
   if (uh <= th) return new bh(0, 0);
   return new bh(this.get(th, this._end), this.get(uh, this._end), this._step);
  };
  bh.prototype.indexOf = function(th) {
   var uh = th - this._start;
   if (uh % this._step === 0) {
    var vh = uh / this._step;
    if (vh >= 0 && vh < this.size) return vh;
   }
   return -1;
  };
  bh.prototype.lastIndexOf = function(th) {
   return this.indexOf(th);
  };
  bh.prototype.__iterate = function(th, uh) {
   var vh = this.size - 1, wh = this._step, xh = uh ? this._start + vh * wh : this._start;
   for (var yh = 0; yh <= vh; yh++) {
    if (th(xh, yh, this) === false) return yh + 1;
    xh += uh ? -wh : wh;
   }
   return yh;
  };
  bh.prototype.__iterator = function(th, uh) {
   var vh = this.size - 1, wh = this._step, xh = uh ? this._start + vh * wh : this._start, yh = 0;
   return new ta(function() {
    var zh = xh;
    xh += uh ? -wh : wh;
    return yh > vh ? va() : ua(th, yh++, zh);
   });
  };
  bh.prototype.equals = function(th) {
   return th instanceof bh ? this._start === th._start && this._end === th._end && this._step === th._step : ah(this, th);
  };
  var ch;
  h(dh, db);
  function dh(th, uh) {
   if (!(this instanceof dh)) return new dh(th, uh);
   this._value = th;
   this.size = uh === void 0 ? Infinity : Math.max(0, uh);
   if (this.size === 0) {
    if (eh) return eh;
    eh = this;
   }
  }
  dh.prototype.toString = function() {
   if (this.size === 0) return "Repeat []";
   return "Repeat [ " + this._value + " " + this.size + " times ]";
  };
  dh.prototype.get = function(th, uh) {
   return this.has(th) ? this._value : uh;
  };
  dh.prototype.contains = function(th) {
   return xb(this._value, th);
  };
  dh.prototype.slice = function(th, uh) {
   var vh = this.size;
   return w(th, uh, vh) ? this : new dh(this._value, y(uh, vh) - x(th, vh));
  };
  dh.prototype.reverse = function() {
   return this;
  };
  dh.prototype.indexOf = function(th) {
   if (xb(this._value, th)) return 0;
   return -1;
  };
  dh.prototype.lastIndexOf = function(th) {
   if (xb(this._value, th)) return this.size;
   return -1;
  };
  dh.prototype.__iterate = function(th, uh) {
   for (var vh = 0; vh < this.size; vh++) if (th(this._value, vh, this) === false) return vh + 1;
   return vh;
  };
  dh.prototype.__iterator = function(th, uh) {
   var vh = this, wh = 0;
   return new ta(function() {
    return wh < vh.size ? ua(th, wh++, vh._value) : va();
   });
  };
  dh.prototype.equals = function(th) {
   return th instanceof dh ? xb(this._value, th._value) : ah(th);
  };
  var eh;
  function fh(th, uh) {
   var vh = function(wh) {
    th.prototype[wh] = uh[wh];
   };
   Object.keys(uh).forEach(vh);
   Object.getOwnPropertySymbols && Object.getOwnPropertySymbols(uh).forEach(vh);
   return th;
  }
  aa.Iterator = ta;
  fh(aa, {
   toArray: function() {
    sc(this.size);
    var th = new Array(this.size || 0);
    this.valueSeq().__iterate(function(uh, vh) {
     th[vh] = uh;
    });
    return th;
   },
   toIndexedSeq: function() {
    return new uc(this);
   },
   toJS: function() {
    return this.toSeq().map(function(th) {
     return th && typeof th.toJS === "function" ? th.toJS() : th;
    }).__toJS();
   },
   toJSON: function() {
    return this.toSeq().map(function(th) {
     return th && typeof th.toJSON === "function" ? th.toJSON() : th;
    }).__toJS();
   },
   toKeyedSeq: function() {
    return new tc(this, true);
   },
   toMap: function() {
    return wd(this.toKeyedSeq());
   },
   toObject: function() {
    sc(this.size);
    var th = {};
    this.__iterate(function(uh, vh) {
     th[vh] = uh;
    });
    return th;
   },
   toOrderedMap: function() {
    return vf(this.toKeyedSeq());
   },
   toOrderedSet: function() {
    return qg(fa(this) ? this.valueSeq() : this);
   },
   toSet: function() {
    return ig(fa(this) ? this.valueSeq() : this);
   },
   toSetSeq: function() {
    return new vc(this);
   },
   toSeq: function() {
    return ga(this) ? this.toIndexedSeq() : fa(this) ? this.toKeyedSeq() : this.toSetSeq();
   },
   toStack: function() {
    return bg(fa(this) ? this.valueSeq() : this);
   },
   toList: function() {
    return df(fa(this) ? this.valueSeq() : this);
   },
   toString: function() {
    return "[Iterable]";
   },
   __toString: function(th, uh) {
    if (this.size === 0) return th + uh;
    return th + " " + this.toSeq().map(this.__toStringMapper).join(", ") + " " + uh;
   },
   concat: function() {
    var th = g.call(arguments, 0);
    return od(this, gd(this, th));
   },
   contains: function(th) {
    return this.some(function(uh) {
     return xb(uh, th);
    });
   },
   entries: function() {
    return this.__iterator(pa);
   },
   every: function(th, uh) {
    sc(this.size);
    var vh = true;
    this.__iterate(function(wh, xh, yh) {
     if (!th.call(uh, wh, xh, yh)) {
      vh = false;
      return false;
     }
    });
    return vh;
   },
   filter: function(th, uh) {
    return od(this, ad(this, th, uh, true));
   },
   find: function(th, uh, vh) {
    var wh = vh;
    this.__iterate(function(xh, yh, zh) {
     if (th.call(uh, xh, yh, zh)) {
      wh = xh;
      return false;
     }
    });
    return wh;
   },
   forEach: function(th, uh) {
    sc(this.size);
    return this.__iterate(uh ? th.bind(uh) : th);
   },
   join: function(th) {
    sc(this.size);
    th = th !== void 0 ? "" + th : ",";
    var uh = "", vh = true;
    this.__iterate(function(wh) {
     vh ? vh = false : uh += th;
     uh += wh !== null && wh !== void 0 ? wh : "";
    });
    return uh;
   },
   keys: function() {
    return this.__iterator(na);
   },
   map: function(th, uh) {
    return od(this, yc(this, th, uh));
   },
   reduce: function(th, uh, vh) {
    sc(this.size);
    var wh, xh;
    if (arguments.length < 2) {
     xh = true;
    } else wh = uh;
    this.__iterate(function(yh, zh, ai) {
     if (xh) {
      xh = false;
      wh = yh;
     } else wh = th.call(vh, wh, yh, zh, ai);
    });
    return wh;
   },
   reduceRight: function(th, uh, vh) {
    var wh = this.toKeyedSeq().reverse();
    return wh.reduce.apply(wh, arguments);
   },
   reverse: function() {
    return od(this, zc(this, true));
   },
   slice: function(th, uh) {
    return od(this, dd(this, th, uh, true));
   },
   some: function(th, uh) {
    return !this.every(kh(th), uh);
   },
   sort: function(th) {
    return od(this, kd(this, th));
   },
   values: function() {
    return this.__iterator(oa);
   },
   butLast: function() {
    return this.slice(0, -1);
   },
   isEmpty: function() {
    return this.size !== void 0 ? this.size === 0 : !this.some(function() {
     return true;
    });
   },
   count: function(th, uh) {
    return t(th ? this.toSeq().filter(th, uh) : this);
   },
   countBy: function(th, uh) {
    return bd(this, th, uh);
   },
   equals: function(th) {
    return ah(this, th);
   },
   entrySeq: function() {
    var th = this;
    if (th._cache) return new gb(th._cache);
    var uh = th.toSeq().map(jh).toIndexedSeq();
    uh.fromEntrySeq = function() {
     return th.toSeq();
    };
    return uh;
   },
   filterNot: function(th, uh) {
    return this.filter(kh(th), uh);
   },
   findLast: function(th, uh, vh) {
    return this.toKeyedSeq().reverse().find(th, uh, vh);
   },
   first: function() {
    return this.find(v);
   },
   flatMap: function(th, uh) {
    return od(this, id(this, th, uh));
   },
   flatten: function(th) {
    return od(this, hd(this, th, true));
   },
   fromEntrySeq: function() {
    return new wc(this);
   },
   get: function(th, uh) {
    return this.find(function(vh, wh) {
     return xb(wh, th);
    }, void 0, uh);
   },
   getIn: function(th, uh) {
    var vh = this, wh = vd(th), xh;
    while (!(xh = wh.next()).done) {
     var yh = xh.value;
     vh = vh && vh.get ? vh.get(yh, m) : m;
     if (vh === m) return uh;
    }
    return vh;
   },
   groupBy: function(th, uh) {
    return cd(this, th, uh);
   },
   has: function(th) {
    return this.get(th, m) !== m;
   },
   hasIn: function(th) {
    return this.getIn(th, m) !== m;
   },
   isSubset: function(th) {
    th = typeof th.contains === "function" ? th : aa(th);
    return this.every(function(uh) {
     return th.contains(uh);
    });
   },
   isSuperset: function(th) {
    return th.isSubset(this);
   },
   keySeq: function() {
    return this.toSeq().map(ih).toIndexedSeq();
   },
   last: function() {
    return this.toSeq().reverse().first();
   },
   max: function(th) {
    return ld(this, th);
   },
   maxBy: function(th, uh) {
    return ld(this, uh, th);
   },
   min: function(th) {
    return ld(this, th ? lh(th) : oh);
   },
   minBy: function(th, uh) {
    return ld(this, uh ? lh(uh) : oh, th);
   },
   rest: function() {
    return this.slice(1);
   },
   skip: function(th) {
    return this.slice(Math.max(0, th));
   },
   skipLast: function(th) {
    return od(this, this.toSeq().reverse().skip(th).reverse());
   },
   skipWhile: function(th, uh) {
    return od(this, fd(this, th, uh, true));
   },
   skipUntil: function(th, uh) {
    return this.skipWhile(kh(th), uh);
   },
   sortBy: function(th, uh) {
    return od(this, kd(this, uh, th));
   },
   take: function(th) {
    return this.slice(0, Math.max(0, th));
   },
   takeLast: function(th) {
    return od(this, this.toSeq().reverse().take(th).reverse());
   },
   takeWhile: function(th, uh) {
    return od(this, ed(this, th, uh));
   },
   takeUntil: function(th, uh) {
    return this.takeWhile(kh(th), uh);
   },
   valueSeq: function() {
    return this.toIndexedSeq();
   },
   hashCode: function() {
    return this.__hash || (this.__hash = ph(this));
   }
  });
  var gh = aa.prototype;
  gh[ja] = true;
  gh[sa] = gh.values;
  gh.__toJS = gh.toArray;
  gh.__toStringMapper = mh;
  gh.inspect = gh.toSource = function() {
   return this.toString();
  };
  gh.chain = gh.flatMap;
  (function() {
   try {
    Object.defineProperty(gh, "length", {
     get: function() {
      if (!aa.noLengthWarning) {
       var uh;
       try {
        throw new Error();
       } catch (vh) {
        uh = vh.stack;
       }
       if (uh.indexOf("_wrapObject") === -1) {
        console && emptyFunction && false;
        return this.size;
       }
      }
     }
    });
   } catch (th) {}
  })();
  fh(ba, {
   flip: function() {
    return od(this, xc(this));
   },
   findKey: function(th, uh) {
    var vh;
    this.__iterate(function(wh, xh, yh) {
     if (th.call(uh, wh, xh, yh)) {
      vh = xh;
      return false;
     }
    });
    return vh;
   },
   findLastKey: function(th, uh) {
    return this.toSeq().reverse().findKey(th, uh);
   },
   keyOf: function(th) {
    return this.findKey(function(uh) {
     return xb(uh, th);
    });
   },
   lastKeyOf: function(th) {
    return this.toSeq().reverse().keyOf(th);
   },
   mapEntries: function(th, uh) {
    var vh = this, wh = 0;
    return od(this, this.toSeq().map(function(xh, yh) {
     return th.call(uh, [ yh, xh ], wh++, vh);
    }).fromEntrySeq());
   },
   mapKeys: function(th, uh) {
    var vh = this;
    return od(this, this.toSeq().flip().map(function(wh, xh) {
     return th.call(uh, wh, xh, vh);
    }).flip());
   }
  });
  var hh = ba.prototype;
  hh[ka] = true;
  hh[sa] = gh.entries;
  hh.__toJS = gh.toObject;
  hh.__toStringMapper = function(th, uh) {
   return uh + ": " + mh(th);
  };
  fh(ca, {
   toKeyedSeq: function() {
    return new tc(this, false);
   },
   filter: function(th, uh) {
    return od(this, ad(this, th, uh, false));
   },
   findIndex: function(th, uh) {
    var vh = this.toKeyedSeq().findKey(th, uh);
    return vh === void 0 ? -1 : vh;
   },
   indexOf: function(th) {
    var uh = this.toKeyedSeq().keyOf(th);
    return uh === void 0 ? -1 : uh;
   },
   lastIndexOf: function(th) {
    var uh = this.toKeyedSeq().lastKeyOf(th);
    return uh === void 0 ? -1 : uh;
   },
   reverse: function() {
    return od(this, zc(this, false));
   },
   slice: function(th, uh) {
    return od(this, dd(this, th, uh, false));
   },
   splice: function(th, uh) {
    var vh = arguments.length;
    uh = Math.max(uh | 0, 0);
    if (vh === 0 || vh === 2 && !uh) return this;
    th = x(th, this.size);
    var wh = this.slice(0, th);
    return od(this, vh === 1 ? wh : wh.concat(s(arguments, 2), this.slice(th + uh)));
   },
   findLastIndex: function(th, uh) {
    var vh = this.toKeyedSeq().findLastKey(th, uh);
    return vh === void 0 ? -1 : vh;
   },
   first: function() {
    return this.get(0);
   },
   flatten: function(th) {
    return od(this, hd(this, th, false));
   },
   get: function(th, uh) {
    th = u(this, th);
    return th < 0 || (this.size === Infinity || this.size !== void 0 && th > this.size) ? uh : this.find(function(vh, wh) {
     return wh === th;
    }, void 0, uh);
   },
   has: function(th) {
    th = u(this, th);
    return th >= 0 && (this.size !== void 0 ? this.size === Infinity || th < this.size : this.indexOf(th) !== -1);
   },
   interpose: function(th) {
    return od(this, jd(this, th));
   },
   interleave: function() {
    var th = [ this ].concat(s(arguments)), uh = nd(this.toSeq(), db.of, th), vh = uh.flatten(true);
    if (uh.size) vh.size = uh.size * th.length;
    return od(this, vh);
   },
   last: function() {
    return this.get(-1);
   },
   skipWhile: function(th, uh) {
    return od(this, fd(this, th, uh, false));
   },
   zip: function() {
    var th = [ this ].concat(s(arguments));
    return od(this, nd(this, nh, th));
   },
   zipWith: function(th) {
    var uh = s(arguments);
    uh[0] = this;
    return od(this, nd(this, th, uh));
   }
  });
  ca.prototype[la] = true;
  ca.prototype[ma] = true;
  fh(da, {
   get: function(th, uh) {
    return this.has(th) ? th : uh;
   },
   contains: function(th) {
    return this.has(th);
   },
   keySeq: function() {
    return this.valueSeq();
   }
  });
  da.prototype.has = gh.contains;
  fh(cb, ba.prototype);
  fh(db, ca.prototype);
  fh(eb, da.prototype);
  fh(ub, ba.prototype);
  fh(vb, ca.prototype);
  fh(wb, da.prototype);
  function ih(th, uh) {
   return uh;
  }
  function jh(th, uh) {
   return [ uh, th ];
  }
  function kh(th) {
   return function() {
    return !th.apply(this, arguments);
   };
  }
  function lh(th) {
   return function() {
    return -th.apply(this, arguments);
   };
  }
  function mh(th) {
   return typeof th === "string" ? JSON.stringify(th) : th;
  }
  function nh() {
   return s(arguments);
  }
  function oh(th, uh) {
   return th < uh ? 1 : th > uh ? -1 : 0;
  }
  function ph(th) {
   if (th.size === Infinity) return 0;
   var uh = ia(th), vh = fa(th), wh = uh ? 1 : 0, xh = th.__iterate(vh ? uh ? function(yh, zh) {
    wh = 31 * wh + rh(ec(yh), ec(zh)) | 0;
   } : function(yh, zh) {
    wh = wh + rh(ec(yh), ec(zh)) | 0;
   } : uh ? function(yh) {
    wh = 31 * wh + ec(yh) | 0;
   } : function(yh) {
    wh = wh + ec(yh) | 0;
   });
   return qh(xh, wh);
  }
  function qh(th, uh) {
   uh = cc(uh, 3432918353);
   uh = cc(uh << 15 | uh >>> -15, 461845907);
   uh = cc(uh << 13 | uh >>> -13, 5);
   uh = (uh + 3864292196 | 0) ^ th;
   uh = cc(uh ^ uh >>> 16, 2246822507);
   uh = cc(uh ^ uh >>> 13, 3266489909);
   uh = dc(uh ^ uh >>> 16);
   return uh;
  }
  function rh(th, uh) {
   return th ^ uh + 2654435769 + (th << 6) + (th >> 2) | 0;
  }
  var sh = {
   Iterable: aa,
   Seq: bb,
   Collection: tb,
   Map: wd,
   OrderedMap: vf,
   List: df,
   Stack: bg,
   Set: ig,
   OrderedSet: qg,
   Record: wg,
   Range: bh,
   Repeat: dh,
   is: xb,
   fromJS: yb
  };
  return sh;
 });
}, null);

__d("ContentState", [ "DocumentCharacters", "immutable" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var i = g.SOFT_NEWLINE, j = h.Record({
  blockMap: null,
  selectionBefore: null,
  selectionAfter: null
 });
 for (var k in j) if (j.hasOwnProperty(k)) m[k] = j[k];
 var l = j === null ? null : j.prototype;
 m.prototype = Object.create(l);
 m.prototype.constructor = m;
 m.__superConstructor__ = j;
 function m() {
  if (j !== null) j.apply(this, arguments);
 }
 m.prototype.getBlockMap = function() {
  return this.blockMap;
 };
 m.prototype.getSelectionBefore = function() {
  return this.selectionBefore;
 };
 m.prototype.getSelectionAfter = function() {
  return this.selectionAfter;
 };
 m.prototype.getBlockForKey = function(n) {
  return this.getBlockMap().get(n);
 };
 m.prototype.getKeyBefore = function(n) {
  return this.getBlockMap().reverse().keySeq().skipUntil(function(o) {
   return o === n;
  }).skip(1).first();
 };
 m.prototype.getKeyAfter = function(n) {
  return this.getBlockMap().keySeq().skipUntil(function(o) {
   return o === n;
  }).skip(1).first();
 };
 m.prototype.getBlockAfter = function(n) {
  return this.getBlockMap().skipUntil(function(o, p) {
   return p === n;
  }).skip(1).first();
 };
 m.prototype.getBlockBefore = function(n) {
  return this.getBlockMap().reverse().skipUntil(function(o, p) {
   return p === n;
  }).skip(1).first();
 };
 m.prototype.getBlocksAsArray = function() {
  return this.getBlockMap().toArray();
 };
 m.prototype.getLastBlock = function() {
  return this.getBlockMap().last();
 };
 m.prototype.getPlainText = function(n) {
  return this.getBlockMap().map(function(o) {
   return o.getText();
  }).join(n || i);
 };
 m.prototype.hasText = function() {
  var n = this.getBlockMap();
  return n.size > 1 || n.first().getLength() > 0;
 };
 e.exports = m;
}, null);

__d("SelectionState", [ "immutable" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var h = g.Record({
  anchorKey: null,
  anchorOffset: null,
  focusKey: null,
  focusOffset: null,
  isBackward: false,
  hasFocus: false
 });
 for (var i in h) if (h.hasOwnProperty(i)) k[i] = h[i];
 var j = h === null ? null : h.prototype;
 k.prototype = Object.create(j);
 k.prototype.constructor = k;
 k.__superConstructor__ = h;
 function k() {
  if (h !== null) h.apply(this, arguments);
 }
 k.prototype.serialize = function() {
  return "Anchor: " + this.getAnchorKey() + ":" + this.getAnchorOffset() + ", " + "Focus: " + this.getFocusKey() + ":" + this.getFocusOffset() + ", " + "Is Backward: " + this.getIsBackward() + ", " + "Has Focus: " + this.getHasFocus();
 };
 k.prototype.getAnchorKey = function() {
  return this.anchorKey;
 };
 k.prototype.getAnchorOffset = function() {
  return this.anchorOffset;
 };
 k.prototype.getFocusKey = function() {
  return this.focusKey;
 };
 k.prototype.getFocusOffset = function() {
  return this.focusOffset;
 };
 k.prototype.getIsBackward = function() {
  return this.isBackward;
 };
 k.prototype.getHasFocus = function() {
  return this.hasFocus;
 };
 k.prototype.hasEdgeWithin = function(l, m, n) {
  var o = this.getAnchorKey(), p = this.getFocusKey();
  if (o === p && o === l) {
   var q = this.getStartOffset(), r = this.getEndOffset();
   return m <= r && q <= n;
  }
  var s;
  if (l === o) {
   s = this.getAnchorOffset();
  } else if (l === p) {
   s = this.getFocusOffset();
  } else return false;
  return m <= s && n >= s;
 };
 k.prototype.isCollapsed = function() {
  return this.getAnchorKey() === this.getFocusKey() && this.getAnchorOffset() === this.getFocusOffset();
 };
 k.prototype.getStartKey = function() {
  return this.getIsBackward() ? this.getFocusKey() : this.getAnchorKey();
 };
 k.prototype.getStartOffset = function() {
  return this.getIsBackward() ? this.getFocusOffset() : this.getAnchorOffset();
 };
 k.prototype.getEndKey = function() {
  return this.getIsBackward() ? this.getAnchorKey() : this.getFocusKey();
 };
 k.prototype.getEndOffset = function() {
  return this.getIsBackward() ? this.getAnchorOffset() : this.getFocusOffset();
 };
 e.exports = k;
}, null);

__d("createEmptySelectionState", [ "SelectionState" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function h(i) {
  return new g({
   anchorKey: i,
   anchorOffset: 0,
   focusKey: i,
   focusOffset: 0,
   isBackward: false,
   hasFocus: false
  });
 }
 e.exports = h;
}, null);

__d("createOrderedMapFromBlockArray", [ "immutable" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 function h(i) {
  return g.OrderedMap(g.Seq(i).toKeyedSeq().mapKeys(function(j, k) {
   return k.getKey();
  }));
 }
 e.exports = h;
}, null);

__d("createContentStateFromBlocks", [ "ContentState", "createEmptySelectionState", "createOrderedMapFromBlockArray" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function j(k) {
  var l = i(k), m = h(l.first().getKey());
  return new g({
   blockMap: l,
   selectionBefore: m,
   selectionAfter: m
  });
 }
 e.exports = j;
}, null);

__d("findRangesImmutable", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 function g(h, i, j, k) {
  if (!h.size) return;
  var l = 0;
  h.reduce(function(m, n, o) {
   if (!i(m, n)) {
    if (j(m)) k(l, o);
    l = o;
   }
   return n;
  });
  j(h.last()) && k(l, h.count());
 }
 e.exports = g;
}, null);

__d("BlockTree", [ "immutable", "emptyFunction", "findRangesImmutable" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var j = g, k = j.List, l = j.Repeat, m = j.Record, n = h.thatReturnsTrue, o = "-", p = m({
  start: null,
  end: null
 }), q = m({
  start: null,
  end: null,
  decoratorKey: null,
  leaves: null
 }), r = {
  generate: function(u, v) {
   var w = u.getLength();
   if (!w) return k.of(new q({
    start: 0,
    end: 0,
    decoratorKey: null,
    leaves: k.of(new p({
     start: 0,
     end: 0
    }))
   }));
   var x = [], y = v ? v.getDecorations(u) : k(l(null, w)), z = u.getCharacterList();
   i(y, t, n, function(aa, ba) {
    x.push(new q({
     start: aa,
     end: ba,
     decoratorKey: y.get(aa),
     leaves: s(z.slice(aa, ba), aa)
    }));
   });
   return k(x);
  },
  getFingerprint: function(u) {
   return u.map(function(v) {
    var w = v.get("decoratorKey"), x = w !== null ? w + "." + (v.get("end") - v.get("start")) : "";
    return "" + x + "." + v.get("leaves").size;
   }).join(o);
  }
 };
 function s(u, v) {
  var w = [], x = u.map(function(y) {
   return y.getStyle();
  });
  i(x, t, n, function(y, z) {
   w.push(new p({
    start: y + v,
    end: z + v
   }));
  });
  return k(w);
 }
 function t(u, v) {
  return u === v;
 }
 e.exports = r;
}, null);

__d("EditorChangeType", [ "keyMirror" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var h = g({
  UNDO: true,
  REDO: true,
  CHANGE_SELECTION: true,
  INSERT_CHARACTERS: true,
  BACKSPACE_CHARACTER: true,
  DELETE_CHARACTER: true,
  REMOVE_RANGE: true,
  SPLIT_BLOCK: true,
  INSERT_FRAGMENT: true,
  CHANGE_INLINE_STYLE: true,
  CHANGE_BLOCK_TYPE: true,
  APPLY_ENTITY: true,
  RESET_BLOCK: true,
  ADJUST_DEPTH: true
 });
 e.exports = h;
}, null);

__d("EditorState", [ "BlockTree", "ComposedInlineStyle", "EditorChangeType", "immutable", "SelectionState" ], function(a, b, c, d, e, f, g, h, i, j, k) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var l = j.Record({
  allowUndo: true,
  currentContent: null,
  decorator: null,
  forceSelection: false,
  inCompositionMode: false,
  inlineStyleOverride: null,
  lastChangeType: null,
  nativelyRenderedContent: null,
  redoStack: null,
  selection: null,
  treeMap: null,
  undoStack: null
 });
 m.create = function(v) {
  v.treeMap = o(v.currentContent, v.decorator);
  return new m(new l(v));
 };
 m.set = function(v, w) {
  var x = v.getImmutable().withMutations(function(y) {
   var z = y.get("decorator"), aa = z;
   if (w.decorator === null) {
    aa = null;
   } else if (w.decorator) aa = w.decorator;
   var ba = w.currentContent || v.getCurrentContent();
   if (aa !== z) {
    var ca = y.get("treeMap"), da;
    if (aa && z) {
     da = q(ba.getBlockMap(), ca, aa, z);
    } else da = o(ba, aa);
    y.merge({
     decorator: aa,
     treeMap: da,
     nativelyRenderedContent: null
    });
    return;
   }
   var ea = v.getCurrentContent();
   if (ba !== ea) y.set("treeMap", p(v, ba.getBlockMap(), aa));
   y.merge(w);
  });
  return new m(x);
 };
 m.prototype.toJS = function() {
  return this.getImmutable().toJS();
 };
 m.prototype.getAllowUndo = function() {
  return this.getImmutable().get("allowUndo");
 };
 m.prototype.getCurrentContent = function() {
  return this.getImmutable().get("currentContent");
 };
 m.prototype.getUndoStack = function() {
  return this.getImmutable().get("undoStack");
 };
 m.prototype.getRedoStack = function() {
  return this.getImmutable().get("redoStack");
 };
 m.prototype.getSelection = function() {
  return this.getImmutable().get("selection");
 };
 m.prototype.getDecorator = function() {
  return this.getImmutable().get("decorator");
 };
 m.prototype.isInCompositionMode = function() {
  return this.getImmutable().get("inCompositionMode");
 };
 m.prototype.mustForceSelection = function() {
  return this.getImmutable().get("forceSelection");
 };
 m.prototype.getNativelyRenderedContent = function() {
  return this.getImmutable().get("nativelyRenderedContent");
 };
 m.prototype.getLastChangeType = function() {
  return this.getImmutable().get("lastChangeType");
 };
 m.prototype.getInlineStyleOverride = function() {
  return this.getImmutable().get("inlineStyleOverride");
 };
 m.prototype.getCurrentInlineStyle = function() {
  var v = this.getInlineStyleOverride();
  if (v != null) return v;
  var w = this.getCurrentContent(), x = this.getSelection();
  if (x.isCollapsed()) return s(w, x);
  return t(w, x);
 };
 m.prototype.getBlockTree = function(v) {
  return this.getImmutable().getIn([ "treeMap", v ]);
 };
 m.prototype.isAtDocumentStart = function() {
  var v = this.getCurrentContent().getBlockMap().first().getKey();
  return this.getSelection().hasEdgeWithin(v, 0, 0);
 };
 m.prototype.isAtDocumentEnd = function() {
  var v = this.getCurrentContent(), w = v.getBlockMap(), x = w.last(), y = x.getLength();
  return this.getSelection().hasEdgeWithin(x.getKey(), y, y);
 };
 m.acceptSelection = function(v, w) {
  return n(v, w, false);
 };
 m.forceSelection = function(v, w) {
  if (!w.getHasFocus()) w = w.set("hasFocus", true);
  return n(v, w, true);
 };
 m.moveSelectionToEnd = function(v) {
  var w = v.getCurrentContent(), x = w.getLastBlock(), y = x.getKey(), z = x.getLength();
  return m.acceptSelection(v, new k({
   anchorKey: y,
   anchorOffset: z,
   focusKey: y,
   focusOffset: z,
   isBackward: false
  }));
 };
 m.moveFocusToEnd = function(v) {
  var w = m.moveSelectionToEnd(v);
  return m.forceSelection(w, w.getSelection());
 };
 m.push = function(v, w, x) {
  if (v.getCurrentContent() === w) return v;
  var y = x !== i.INSERT_CHARACTERS;
  if (!v.getAllowUndo()) return m.set(v, {
   currentContent: w,
   lastChangeType: x,
   selection: w.getSelectionAfter(),
   forceSelection: y,
   inlineStyleOverride: null
  });
  var z = v.getSelection(), aa = v.getCurrentContent(), ba = v.getUndoStack(), ca = w;
  if (z !== aa.getSelectionAfter() || r(v, x)) {
   ba = ba.push(aa);
   ca = ca.set("selectionBefore", z);
  } else if (x === i.INSERT_CHARACTERS || x === i.BACKSPACE_CHARACTER || x === i.DELETE_CHARACTER) ca = ca.set("selectionBefore", aa.getSelectionBefore());
  return m.set(v, {
   currentContent: ca,
   undoStack: ba,
   redoStack: j.Stack(),
   lastChangeType: x,
   selection: w.getSelectionAfter(),
   forceSelection: y,
   inlineStyleOverride: null
  });
 };
 m.undo = function(v) {
  if (!v.getAllowUndo()) return v;
  var w = v.getUndoStack(), x = w.peek();
  if (!x) return v;
  var y = v.getCurrentContent();
  return m.set(v, {
   currentContent: x,
   undoStack: w.shift(),
   redoStack: v.getRedoStack().push(y),
   forceSelection: true,
   inlineStyleOverride: null,
   lastChangeType: i.UNDO,
   nativelyRenderedContent: null,
   selection: y.getSelectionBefore()
  });
 };
 m.redo = function(v) {
  if (!v.getAllowUndo()) return v;
  var w = v.getRedoStack(), x = w.peek();
  if (!x) return v;
  var y = v.getCurrentContent();
  return m.set(v, {
   currentContent: x,
   undoStack: v.getUndoStack().push(y),
   redoStack: w.shift(),
   forceSelection: true,
   inlineStyleOverride: null,
   lastChangeType: i.REDO,
   nativelyRenderedContent: null,
   selection: x.getSelectionAfter()
  });
 };
 function m(v) {
  this.$EditorState0 = v;
 }
 m.prototype.getImmutable = function() {
  return this.$EditorState0;
 };
 function n(v, w, x) {
  return m.set(v, {
   selection: w,
   forceSelection: x,
   nativelyRenderedContent: null,
   inlineStyleOverride: null
  });
 }
 function o(v, w) {
  return v.getBlockMap().map(function(x) {
   return g.generate(x, w);
  });
 }
 function p(v, w, x) {
  var y = v.getCurrentContent().getBlockMap(), z = v.getImmutable().get("treeMap");
  return z.merge(w.toSeq().filter(function(aa, ba) {
   return aa !== y.get(ba);
  }).map(function(aa) {
   return g.generate(aa, x);
  }));
 }
 function q(v, w, x, y) {
  return w.merge(v.toSeq().filter(function(z) {
   return x.getDecorations(z) !== y.getDecorations(z);
  }).map(function(z) {
   return g.generate(z, x);
  }));
 }
 function r(v, w) {
  var x = v.getLastChangeType();
  return w !== x || w !== i.INSERT_CHARACTERS && w !== i.BACKSPACE_CHARACTER && w !== i.DELETE_CHARACTER;
 }
 function s(v, w) {
  var x = w.getStartKey(), y = w.getStartOffset(), z = v.getBlockForKey(x);
  if (y > 0) return z.getInlineStyleAt(y - 1);
  if (z.getLength()) return z.getInlineStyleAt(0);
  return u(v, x);
 }
 function t(v, w) {
  var x = w.getStartKey(), y = w.getStartOffset(), z = v.getBlockForKey(x);
  if (y < z.getLength()) return z.getInlineStyleAt(y);
  if (y > 0) return z.getInlineStyleAt(y - 1);
  return u(v, x);
 }
 function u(v, w) {
  var x = v.getBlockBefore(w), y;
  while (x) {
   y = x.getLength();
   if (y) return x.getInlineStyleAt(y - 1);
   x = v.getBlockBefore(x.getKey());
  }
  return h.NONE;
 }
 e.exports = m;
}, null);

__d("createInitialEditorState", [ "EditorState", "immutable", "createEmptySelectionState" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function j(k, l) {
  var m = k.getBlockMap().first().getKey();
  return g.create({
   currentContent: k,
   undoStack: h.Stack(),
   redoStack: h.Stack(),
   decorator: l || null,
   selection: i(m)
  });
 }
 e.exports = j;
}, null);

__d("CharacterMetadata", [ "ComposedInlineStyle", "immutable" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 var i = g, j = i.NONE, k = h.Record({
  style: j,
  entity: null
 });
 for (var l in k) if (k.hasOwnProperty(l)) n[l] = k[l];
 var m = k === null ? null : k.prototype;
 n.prototype = Object.create(m);
 n.prototype.constructor = n;
 n.__superConstructor__ = k;
 function n() {
  "use strict";
  if (k !== null) k.apply(this, arguments);
 }
 n.prototype.getStyle = function() {
  "use strict";
  return this.get("style");
 };
 n.prototype.getEntity = function() {
  "use strict";
  return this.get("entity");
 };
 n.prototype.hasStyle = function(p) {
  "use strict";
  return !!(this.getStyle() & p);
 };
 n.applyStyle = function(p, q) {
  "use strict";
  return p.set("style", p.getStyle() | q);
 };
 n.removeStyle = function(p, q) {
  "use strict";
  var r = p.set("style", p.getStyle() & ~q);
  return h.is(r, o) ? o : r;
 };
 n.applyEntity = function(p, q) {
  "use strict";
  var r = p.getEntity() === q ? p : p.set("entity", q);
  return h.is(r, o) ? o : r;
 };
 var o = new n();
 n.EMPTY = o;
 e.exports = n;
}, null);

__d("ContentBlock", [ "ComposedBlockType", "ComposedInlineStyle", "immutable", "findRangesImmutable" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var k = g.UNSTYLED, l = h.NONE, m = i.Record({
  key: null,
  type: k,
  text: "",
  characterList: i.List(),
  depth: 0
 });
 for (var n in m) if (m.hasOwnProperty(n)) p[n] = m[n];
 var o = m === null ? null : m.prototype;
 p.prototype = Object.create(o);
 p.prototype.constructor = p;
 p.__superConstructor__ = m;
 function p() {
  if (m !== null) m.apply(this, arguments);
 }
 p.prototype.getKey = function() {
  return this.get("key");
 };
 p.prototype.getType = function() {
  return this.get("type");
 };
 p.prototype.getText = function() {
  return this.get("text");
 };
 p.prototype.getCharacterList = function() {
  return this.get("characterList");
 };
 p.prototype.getLength = function() {
  return this.getText().length;
 };
 p.prototype.getDepth = function() {
  return this.get("depth");
 };
 p.prototype.getInlineStyleAt = function(s) {
  var t = this.getCharacterList().get(s);
  return t ? t.getStyle() : l;
 };
 p.prototype.getEntityAt = function(s) {
  var t = this.getCharacterList().get(s);
  return t ? t.getEntity() : null;
 };
 p.prototype.findStyleRanges = function(s, t) {
  j(this.getCharacterList(), q, s, t);
 };
 p.prototype.findEntityRanges = function(s, t) {
  j(this.getCharacterList(), r, s, t);
 };
 p.prototype.getInlineStyles = function() {
  return this.getCharacterList().map(function(s) {
   return s.getStyle();
  });
 };
 p.prototype.getEntities = function() {
  return this.getCharacterList().map(function(s) {
   return s.getEntity();
  });
 };
 function q(s, t) {
  return s.getStyle() === t.getStyle();
 }
 function r(s, t) {
  return s.getEntity() === t.getEntity();
 }
 e.exports = p;
}, null);

__d("generateBlockKey", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 var g = {}, h = Math.pow(2, 24);
 function i() {
  var j;
  while (j === void 0 || g.hasOwnProperty(j) || !isNaN(+j)) j = Math.floor(Math.random() * h).toString(32);
  g[j] = true;
  return j;
 }
 e.exports = i;
}, null);

__d("createPlainBlocksFromText", [ "CharacterMetadata", "ComposedBlockType", "ContentBlock", "immutable", "generateBlockKey" ], function(a, b, c, d, e, f, g, h, i, j, k) {
 b.__markCompiled && b.__markCompiled();
 function l(m) {
  return m.map(function(n) {
   var o = n.length;
   return new i({
    key: k(),
    text: n,
    type: h.UNSTYLED,
    characterList: j.List(j.Repeat(g.EMPTY, o))
   });
  });
 }
 e.exports = l;
}, null);

__d("createEmptyEditorState", [ "createContentStateFromBlocks", "createInitialEditorState", "createPlainBlocksFromText" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function j(k) {
  var l = i([ "" ]), m = g(l);
  return h(m, k);
 }
 e.exports = j;
}, null);

__d("AbstractDocumentDecorator", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 function g() {
  "use strict";
 }
 g.prototype.getDecorations = function(h) {
  "use strict";
  throw new Error("Must implement `getDecorations`.");
 };
 g.prototype.getComponentForKey = function(h) {
  "use strict";
  throw new Error("Must implement `getComponentForKey`.");
 };
 g.prototype.getPropsForKey = function(h) {
  "use strict";
  throw new Error("Must implement `getPropsForKey`.");
 };
 e.exports = g;
}, null);

__d("DocumentCompositeDecorator", [ "AbstractDocumentDecorator", "immutable", "fillArray" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 var j = ".";
 for (var k in g) if (g.hasOwnProperty(k)) m[k] = g[k];
 var l = g === null ? null : g.prototype;
 m.prototype = Object.create(l);
 m.prototype.constructor = m;
 m.__superConstructor__ = g;
 function m(p) {
  "use strict";
  this.$DocumentCompositeDecorator0 = p.slice();
 }
 m.prototype.getDecorations = function(p) {
  "use strict";
  var q = i(p.getText().length, null);
  this.$DocumentCompositeDecorator0.forEach(function(r, s) {
   var t = 0, u = r.getStrategy();
   u(p, function(v, w) {
    if (n(q, v, w)) {
     o(q, v, w, s + j + t);
     t++;
    }
   });
  });
  return h.List(q);
 };
 m.prototype.getComponentForKey = function(p) {
  "use strict";
  var q = parseInt(p.split(j), 10);
  return this.$DocumentCompositeDecorator0[q].getComponent();
 };
 m.prototype.getPropsForKey = function(p) {
  "use strict";
  var q = parseInt(p.split(j), 10);
  return this.$DocumentCompositeDecorator0[q].getProps();
 };
 function n(p, q, r) {
  for (var s = q; s < r; s++) if (p[s] != null) return false;
  return true;
 }
 function o(p, q, r, s) {
  for (var t = q; t < r; t++) p[t] = s;
 }
 e.exports = m;
}, null);

__d("DocumentDecorator", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 function g(h, i, j) {
  "use strict";
  this.$DocumentDecorator0 = h;
  this.$DocumentDecorator1 = i;
  this.$DocumentDecorator2 = j || {};
 }
 g.prototype.getStrategy = function() {
  "use strict";
  return this.$DocumentDecorator0;
 };
 g.prototype.getComponent = function() {
  "use strict";
  return this.$DocumentDecorator1;
 };
 g.prototype.getProps = function() {
  "use strict";
  return this.$DocumentDecorator2;
 };
 e.exports = g;
}, null);

__d("DocumentEntityInstance", [ "ComposedEntityMutability", "ComposedEntityType", "arrayContains", "getObjectValues", "invariant" ], function(a, b, c, d, e, f, g, h, i, j, k) {
 b.__markCompiled && b.__markCompiled();
 var l = j(h), m = j(g);
 function n(o, p, q) {
  "use strict";
  k(i(l, o));
  k(i(m, p));
  this.$DocumentEntityInstance0 = o;
  this.$DocumentEntityInstance1 = p;
  this.$DocumentEntityInstance2 = q;
 }
 n.prototype.getType = function() {
  "use strict";
  return this.$DocumentEntityInstance0;
 };
 n.prototype.getMutability = function() {
  "use strict";
  return this.$DocumentEntityInstance1;
 };
 n.prototype.getData = function() {
  "use strict";
  return this.$DocumentEntityInstance2;
 };
 n.prototype.replaceData = function(o) {
  "use strict";
  this.$DocumentEntityInstance2 = o;
 };
 e.exports = n;
}, null);

__d("DocumentEntity", [ "DocumentEntityInstance", "invariant" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 var i = {}, j = 0, k = {
  create: function(l, m, n) {
   return k.add(new g(l, m, n));
  },
  add: function(l) {
   i[++j] = l;
   return j.toString();
  },
  get: function(l) {
   var m = i[l];
   h(!!m);
   return m;
  }
 };
 e.exports = k;
}, null);

__d("getEntityMatcher", [ "DocumentEntity" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 function h(i, j) {
  j = j || g.get;
  return function(k, l) {
   k.findEntityRanges(function(m) {
    var n = m.getEntity();
    return n !== null && i(j(n));
   }, l);
  };
 }
 e.exports = h;
}, null);

__d("DocumentStringKey", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 var g = {
  stringify: function(h) {
   return "_" + h;
  },
  unstringify: function(h) {
   return h.slice(1);
  }
 };
 e.exports = g;
}, null);

__d("createCharacterList", [ "CharacterMetadata", "ComposedInlineStyle", "immutable" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 function j(k, l) {
  var m = k.map(function(n, o) {
   var p = l[o];
   if (n === h.NONE && p === null) return g.EMPTY;
   return new g({
    style: n,
    entity: p
   });
  });
  return i.List(m);
 }
 e.exports = j;
}, null);

__d("decodeEntityRanges", [ "UnicodeUtils", "fillArray" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 var i = g, j = i.substr;
 function k(l, m) {
  var n = h(l.length, null);
  if (m) m.forEach(function(o) {
   var p = j(l, 0, o.offset).length, q = p + j(l, o.offset, o.length).length;
   for (var r = p; r < q; r++) n[r] = o.key;
  });
  return n;
 }
 e.exports = k;
}, null);

__d("decodeInlineStyleRanges", [ "ComposedInlineStyle", "UnicodeUtils", "fillArray" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 var j = h, k = j.substr, l = g, m = l.NONE;
 function n(o, p) {
  var q = i(o.length, m);
  if (p) p.forEach(function(r) {
   var s = k(o, 0, r.offset).length, t = s + k(o, r.offset, r.length).length;
   while (s < t) {
    q[s] |= r.style;
    s++;
   }
  });
  return q;
 }
 e.exports = n;
}, null);

__d("decodeBlocks", [ "ContentBlock", "DocumentEntity", "createCharacterList", "decodeEntityRanges", "decodeInlineStyleRanges", "generateBlockKey" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 function m(n, o) {
  var p = {};
  Object.keys(o).forEach(function(q) {
   var r = o[q];
   if (r) {
    var s = h.add(r);
    p[q] = s;
   }
  });
  return n.map(function(q, r) {
   var s = q.type, t = q.text, u = q.depth || 0, v = k(q.text, q.inlineStyleRanges), w;
   if (q.entityRanges) w = q.entityRanges.filter(function(y) {
    return p.hasOwnProperty(y.key);
   }).map(function(y) {
    y.key = p[y.key];
    return y;
   });
   var x = j(q.text, w);
   return new g({
    key: q.key || l(),
    type: s,
    text: t,
    depth: u,
    characterList: i(v, x)
   });
  });
 }
 e.exports = m;
}, null);

__d("findRanges", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 function g(h, i, j) {
  var k = 0, l = 0, m;
  for (var n = 0; n < h.length; n++) {
   l++;
   m = h[n];
   if (m !== h[n + 1]) {
    if (i(m)) j(k, l);
    k = l;
   }
  }
 }
 e.exports = g;
}, null);

__d("encodeEntityRanges", [ "DocumentStringKey", "UnicodeUtils", "findRanges" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 var j = h, k = j.strlen;
 function l(m, n, o) {
  var p = [];
  i(n, function(q) {
   return typeof q == "string";
  }, function(q, r) {
   var s = n[q];
   p.push({
    offset: k(m.slice(0, q)),
    length: k(m.slice(q, r)),
    key: Number(o[g.stringify(s)])
   });
  });
  return p;
 }
 e.exports = l;
}, null);

__d("encodeInlineStyleRanges", [ "ComposedInlineStyle", "UnicodeUtils", "findRanges", "getObjectValues" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 var k = [];
 function l(n, o, p) {
  var q = [], r = o.map(function(s) {
   return s & p;
  });
  i(r, function(s) {
   return !!s;
  }, function(s, t) {
   q.push({
    offset: h.strlen(n.slice(0, s)),
    length: h.strlen(n.slice(s, t)),
    style: p
   });
  });
  return q;
 }
 function m(n, o) {
  var p = j(g).filter(function(q) {
   return !!q;
  });
  return Array.prototype.concat.apply(k, p.map(function(q) {
   return l(n, o, q);
  }));
 }
 e.exports = m;
}, null);

__d("encodeBlocks", [ "DocumentEntity", "DocumentStringKey", "encodeEntityRanges", "encodeInlineStyleRanges", "isEmpty", "mapObject" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 function m(n) {
  var o = n.getBlockMap(), p = 0, q = {}, r = [];
  o.forEach(function(u, v) {
   u.findEntityRanges(function(z) {
    return z.getEntity() !== null;
   }, function(z, aa) {
    var ba = h.stringify(u.getEntityAt(z));
    if (!q.hasOwnProperty(ba)) q[ba] = "" + p++;
   });
   var w = u.getInlineStyles().toArray(), x = u.getEntities().toArray(), y = u.getText();
   r.push({
    key: v,
    text: y,
    type: u.getType(),
    depth: u.getDepth(),
    inlineStyleRanges: j(y, w),
    entityRanges: i(y, x, q)
   });
  });
  var s = Object.keys(q), t = {};
  s.forEach(function(u, v) {
   var w = g.get(h.unstringify(u)), x = null, y = null, z = w.getData();
   if (z) {
    x = z.id || null;
    y = l(z, function(aa) {
     return "" + aa;
    });
    delete y.id;
   }
   t[v] = {
    id: x,
    type: w.getType(),
    data: k(y) ? void 0 : y
   };
  });
  return {
   entityMap: t,
   blocks: r
  };
 }
 e.exports = m;
}, null);

__d("getEntityKeyForSelection", [ "ComposedEntityMutability", "DocumentEntity" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 var i = g, j = i.MUTABLE;
 function k(m, n) {
  var o;
  if (n.isCollapsed()) {
   var p = n.getAnchorKey(), q = n.getAnchorOffset();
   if (q > 0) {
    o = m.getBlockForKey(p).getEntityAt(q - 1);
    return l(o);
   }
   return null;
  }
  var r = n.getStartKey(), s = n.getStartOffset(), t = m.getBlockForKey(r);
  o = s === t.getLength() ? null : t.getEntityAt(s);
  return l(o);
 }
 function l(m) {
  if (m) {
   var n = h.get(m);
   return n.getMutability() === j ? m : null;
  }
  return null;
 }
 e.exports = k;
}, null);

__d("getTextAfterNearestEntity", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 function g(h, i) {
  var j = i;
  while (j > 0 && h.getEntityAt(j - 1) === null) j--;
  return h.getText().slice(j, i);
 }
 e.exports = g;
}, null);

__d("DocumentEntitySegments", [ "DocumentRemovalDirection" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 var h = g.FORWARD, i = {
  getRemovalRange: function(j, k, l, m, n) {
   var o = l.split(" ");
   o = o.map(function(y, z) {
    if (n === h) {
     if (z > 0) return " " + y;
    } else if (z < o.length - 1) return y + " ";
    return y;
   });
   var p = m, q, r, s = null, t = null;
   for (var u = 0; u < o.length; u++) {
    r = o[u];
    q = p + r.length;
    if (j < q && p < k) {
     if (s !== null) {
      t = q;
     } else {
      s = p;
      t = q;
     }
    } else if (s !== null) break;
    p = q;
   }
   var v = m + l.length, w = s === m, x = t === v;
   if (!w && x || w && !x) if (n === h) {
    if (t !== v) t++;
   } else if (s !== m) s--;
   return {
    start: s,
    end: t
   };
  }
 };
 e.exports = i;
}, null);

__d("ContentStateInlineStyle", [ "CharacterMetadata", "immutable" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var i = {
  add: function(k, l, m) {
   return j(k, l, m, true);
  },
  remove: function(k, l, m) {
   return j(k, l, m, false);
  }
 };
 function j(k, l, m, n) {
  var o = k.getBlockMap(), p = l.getStartKey(), q = l.getStartOffset(), r = l.getEndKey(), s = l.getEndOffset(), t = o.skipUntil(function(u, v) {
   return v === p;
  }).takeUntil(function(u, v) {
   return v === r;
  }).concat(h.Map([ [ r, o.get(r) ] ])).map(function(u, v) {
   var w, x;
   if (p === r) {
    w = q;
    x = s;
   } else {
    w = v === p ? q : 0;
    x = v === r ? s : u.getLength();
   }
   var y = u.getCharacterList(), z;
   while (w < x) {
    z = y.get(w);
    y = y.set(w, n ? g.applyStyle(z, m) : g.removeStyle(z, m));
    w++;
   }
   return u.set("characterList", y);
  });
  return k.merge({
   blockMap: o.merge(t),
   selectionBefore: l,
   selectionAfter: l
  });
 }
 e.exports = i;
}, null);

__d("applyEntityToContentBlock", [ "CharacterMetadata" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function h(i, j, k, l) {
  var m = i.getCharacterList();
  while (j < k) {
   m = m.set(j, g.applyEntity(m.get(j), l));
   j++;
  }
  return i.set("characterList", m);
 }
 e.exports = h;
}, null);

__d("applyEntityToContentState", [ "immutable", "applyEntityToContentBlock" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function i(j, k, l) {
  var m = j.getBlockMap(), n = k.getStartKey(), o = k.getStartOffset(), p = k.getEndKey(), q = k.getEndOffset(), r = m.skipUntil(function(s, t) {
   return t === n;
  }).takeUntil(function(s, t) {
   return t === p;
  }).merge(g.OrderedMap([ [ p, m.get(p) ] ])).map(function(s, t) {
   var u, v;
   if (n === p) {
    u = o;
    v = q;
   } else {
    u = t === n ? o : 0;
    v = t === p ? 0 : s.getLength();
   }
   return h(s, u, v, l);
  });
  return j.merge({
   blockMap: m.merge(r),
   selectionBefore: k,
   selectionAfter: k
  });
 }
 e.exports = i;
}, null);

__d("getRangesForDocumentEntity", [ "invariant" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 function h(i, j) {
  var k = [];
  i.findEntityRanges(function(l) {
   return l.getEntity() === j;
  }, function(l, m) {
   k.push({
    start: l,
    end: m
   });
  });
  g(!!k.length);
  return k;
 }
 e.exports = h;
}, null);

__d("getCharacterRemovalRange", [ "ComposedEntityMutability", "DocumentEntity", "DocumentEntitySegments", "checkRangeOverlap", "getRangesForDocumentEntity", "invariant" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 var m = g.MUTABLE, n = g.IMMUTABLE;
 function o(p, q, r) {
  var s = q.getStartOffset(), t = q.getEndOffset(), u = p.getEntityAt(s);
  if (!u) return q;
  var v = h.get(u), w = v.getMutability();
  if (w === m) return q;
  var x = k(p, u).filter(function(aa) {
   return j(s, t, aa.start, aa.end);
  });
  l(x.length == 1);
  var y = x[0];
  if (w === n) return q.merge({
   anchorOffset: y.start,
   focusOffset: y.end,
   isBackward: false
  });
  var z = i.getRemovalRange(s, t, p.getText().slice(y.start, y.end), y.start, r);
  return q.merge({
   anchorOffset: z.start,
   focusOffset: z.end,
   isBackward: false
  });
 }
 e.exports = o;
}, null);

__d("removeEntitiesAtEdges", [ "CharacterMetadata", "ComposedEntityMutability", "DocumentEntity", "findRangesImmutable", "isEmpty" ], function(a, b, c, d, e, f, g, h, i, j, k) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var l = h.MUTABLE;
 function m(p, q) {
  var r = p.getBlockMap(), s = {}, t = q.getStartKey(), u = q.getStartOffset(), v = r.get(t), w = o(v, u);
  if (w !== v) s[t] = w;
  var x = q.getEndKey(), y = q.getEndOffset(), z = r.get(x);
  if (t === x) z = w;
  var aa = o(z, y);
  if (aa !== z) s[x] = aa;
  if (k(s)) return p.set("selectionAfter", q);
  return p.merge({
   blockMap: r.merge(s),
   selectionAfter: q
  });
 }
 function n(p, q, r) {
  var s;
  j(p, function(t, u) {
   return t.getEntity() === u.getEntity();
  }, function(t) {
   return t.getEntity() === q;
  }, function(t, u) {
   if (t <= r && u >= r) s = {
    start: t,
    end: u
   };
  });
  return s;
 }
 function o(p, q) {
  var r = p.getCharacterList(), s = q > 0 ? r.get(q - 1) : undefined, t = q < r.count() ? r.get(q) : undefined, u = s ? s.getEntity() : undefined, v = t ? t.getEntity() : undefined;
  if (v && v === u) {
   var w = i.get(v);
   if (w.getMutability() !== l) {
    var x = n(r, v, q), y = x.start, z = x.end, aa;
    while (y < z) {
     aa = r.get(y);
     r = r.set(y, g.applyEntity(aa, null));
     y++;
    }
    return p.set("characterList", r);
   }
  }
  return p;
 }
 e.exports = m;
}, null);

__d("getContentStateFragment", [ "generateBlockKey", "removeEntitiesAtEdges" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function i(j, k) {
  var l = k.getStartKey(), m = k.getStartOffset(), n = k.getEndKey(), o = k.getEndOffset(), p = h(j, k), q = p.getBlockMap(), r = q.keySeq(), s = r.indexOf(l), t = r.indexOf(n) + 1;
  return q.slice(s, t).map(function(u, v) {
   var w = g(), x = u.getText(), y = u.getCharacterList();
   if (l === n) return u.merge({
    key: w,
    text: x.slice(m, o),
    characterList: y.slice(m, o)
   });
   if (v === l) return u.merge({
    key: w,
    text: x.slice(m),
    characterList: y.slice(m)
   });
   if (v === n) return u.merge({
    key: w,
    text: x.slice(0, o),
    characterList: y.slice(0, o)
   });
   return u.set("key", w);
  });
 }
 e.exports = i;
}, null);

__d("insertIntoList", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function g(h, i, j) {
  if (j === h.count()) {
   i.forEach(function(k) {
    h = h.push(k);
   });
  } else if (j === 0) {
   i.reverse().forEach(function(k) {
    h = h.unshift(k);
   });
  } else h = h.slice(0, j).concat(i, h.slice(j));
  return h;
 }
 e.exports = g;
}, null);

__d("insertFragmentIntoContentState", [ "createOrderedMapFromBlockArray", "generateBlockKey", "insertIntoList", "invariant" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function k(l, m, n) {
  j(m.isCollapsed());
  var o = m.getStartKey(), p = m.getStartOffset(), q = l.getBlockMap(), r = n.size, s, t;
  if (r === 1) {
   var u = q.get(o), v = n.first(), w = u.getText(), x = u.getCharacterList(), y = u.merge({
    text: w.slice(0, p) + v.getText() + w.slice(p),
    characterList: i(x, v.getCharacterList(), p)
   });
   q = q.set(o, y);
   s = o;
   t = p + v.getText().length;
   return l.merge({
    blockMap: q.set(o, y),
    selectionBefore: m,
    selectionAfter: m.merge({
     anchorKey: s,
     anchorOffset: t,
     focusKey: s,
     focusOffset: t,
     isBackward: false
    })
   });
  }
  var z = [];
  l.getBlockMap().forEach(function(aa, ba) {
   if (ba !== o) {
    z.push(aa);
    return;
   }
   var ca = aa.getText(), da = aa.getCharacterList(), ea = ca.length, fa = ca.slice(0, p), ga = da.slice(0, p), ha = n.first(), ia = aa.merge({
    text: fa + ha.getText(),
    characterList: ga.concat(ha.getCharacterList())
   });
   z.push(ia);
   n.slice(1, r - 1).forEach(function(na) {
    z.push(na.set("key", h()));
   });
   var ja = ca.slice(p, ea), ka = da.slice(p, ea), la = n.last();
   s = h();
   var ma = la.merge({
    key: s,
    text: la.getText() + ja,
    characterList: la.getCharacterList().concat(ka)
   });
   z.push(ma);
  });
  t = n.last().getLength();
  return l.merge({
   blockMap: g(z),
   selectionBefore: m,
   selectionAfter: m.merge({
    anchorKey: s,
    anchorOffset: t,
    focusKey: s,
    focusOffset: t,
    isBackward: false
   })
  });
 }
 e.exports = k;
}, null);

__d("insertTextIntoContentState", [ "immutable", "insertIntoList", "invariant" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function j(k, l, m, n) {
  i(l.isCollapsed());
  var o = m.length;
  if (!o) return k;
  var p = k.getBlockMap(), q = l.getStartKey(), r = l.getStartOffset(), s = p.get(q), t = s.getText(), u = s.merge({
   text: t.slice(0, r) + m + t.slice(r, s.getLength()),
   characterList: h(s.getCharacterList(), g.Repeat(n, o), r)
  }), v = r + o;
  return k.merge({
   blockMap: p.set(q, u),
   selectionAfter: l.merge({
    anchorOffset: v,
    focusOffset: v
   })
  });
 }
 e.exports = j;
}, null);

__d("removeRangeFromContentState", [ "immutable" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function h(j, k) {
  if (k.isCollapsed()) return j;
  var l = j.getBlockMap(), m = k.getStartKey(), n = k.getStartOffset(), o = k.getEndKey(), p = k.getEndOffset(), q = l.get(m), r = l.get(o), s;
  if (q === r) {
   s = i(q.getCharacterList(), n, p);
  } else s = q.getCharacterList().slice(0, n).concat(r.getCharacterList().slice(p));
  var t = q.merge({
   text: q.getText().slice(0, n) + r.getText().slice(p),
   characterList: s
  }), u = l.toSeq().skipUntil(function(v, w) {
   return w === m;
  }).takeUntil(function(v, w) {
   return w === o;
  }).concat(g.Map([ [ o, null ] ])).map(function(v, w) {
   return w === m ? t : null;
  });
  l = l.merge(u).filter(function(v) {
   return !!v;
  });
  return j.merge({
   blockMap: l,
   selectionBefore: k,
   selectionAfter: k.merge({
    anchorKey: m,
    anchorOffset: n,
    focusKey: m,
    focusOffset: n,
    isBackward: false
   })
  });
 }
 function i(j, k, l) {
  if (k === 0) {
   while (k < l) {
    j = j.shift();
    k++;
   }
  } else if (l === j.count()) {
   while (l > k) {
    j = j.pop();
    l--;
   }
  } else j = j.slice(0, k).concat(j.slice(l));
  return j;
 }
 e.exports = h;
}, null);

__d("setBlockTypeForContentState", [ "immutable" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function h(i, j, k) {
  var l = j.getStartKey(), m = j.getEndKey(), n = i.getBlockMap(), o = n.toSeq().skipUntil(function(p, q) {
   return q === l;
  }).takeUntil(function(p, q) {
   return q === m;
  }).concat(g.Map([ [ m, n.get(m) ] ])).map(function(p) {
   return p.set("type", k);
  });
  return i.merge({
   blockMap: n.merge(o),
   selectionBefore: j,
   selectionAfter: j
  });
 }
 e.exports = h;
}, null);

__d("splitBlockInContentState", [ "generateBlockKey", "invariant" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function i(j, k) {
  h(k.isCollapsed());
  var l = k.getAnchorKey(), m = k.getAnchorOffset(), n = j.getBlockMap(), o = n.get(l), p = o.getText(), q = o.getCharacterList(), r = o.merge({
   text: p.slice(0, m),
   characterList: q.slice(0, m)
  }), s = g(), t = r.merge({
   key: s,
   text: p.slice(m),
   characterList: q.slice(m)
  }), u = n.toSeq().takeUntil(function(x) {
   return x === o;
  }), v = n.toSeq().skipUntil(function(x) {
   return x === o;
  }).rest(), w = u.concat([ [ r.getKey(), r ], [ t.getKey(), t ] ], v).toOrderedMap();
  return j.merge({
   blockMap: w,
   selectionBefore: k,
   selectionAfter: k.merge({
    anchorKey: s,
    anchorOffset: 0,
    focusKey: s,
    focusOffset: 0,
    isBackward: false
   })
  });
 }
 e.exports = i;
}, null);

__d("DocumentModifier", [ "CharacterMetadata", "ComposedInlineStyle", "ContentStateInlineStyle", "DocumentRemovalDirection", "applyEntityToContentState", "getCharacterRemovalRange", "getContentStateFragment", "insertFragmentIntoContentState", "insertTextIntoContentState", "invariant", "removeEntitiesAtEdges", "removeRangeFromContentState", "setBlockTypeForContentState", "splitBlockInContentState" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var u = h.NONE, v = {
  replaceText: function(w, x, y, z, aa) {
   if (z === void 0) z = u;
   if (aa === void 0) aa = null;
   var ba = q(w, x), ca = r(ba, x), da;
   if (z === u && aa === null) {
    da = g.EMPTY;
   } else da = new g({
    style: z,
    entity: aa
   });
   return o(ca, ca.getSelectionAfter(), y, da);
  },
  insertText: function(w, x, y, z, aa) {
   p(x.isCollapsed());
   if (z === void 0) z = u;
   if (aa === void 0) aa = null;
   var ba;
   if (z === u && aa === null) {
    ba = g.EMPTY;
   } else ba = new g({
    style: z,
    entity: aa
   });
   var ca = q(w, x);
   return o(ca, ca.getSelectionAfter(), y, ba);
  },
  moveText: function(w, x, y) {
   var z = m(w, x), aa = v.removeRange(w, x, j.BACKWARD);
   return v.replaceWithFragment(aa, y, z);
  },
  replaceWithFragment: function(w, x, y) {
   var z = q(w, x), aa = r(z, x);
   return n(aa, aa.getSelectionAfter(), y);
  },
  removeRange: function(w, x, y) {
   if (x.getAnchorKey() === x.getFocusKey()) {
    var z = x.getAnchorKey(), aa = x.getStartOffset(), ba = x.getEndOffset(), ca = w.getBlockForKey(z), da = ca.getEntityAt(aa), ea = ca.getEntityAt(ba - 1);
    if (da && da === ea) {
     var fa = l(ca, x, y);
     return r(w, fa);
    }
   }
   var ga = q(w, x);
   return r(ga, x);
  },
  splitBlock: function(w, x) {
   var y = q(w, x), z = r(y, x);
   return t(z, z.getSelectionAfter());
  },
  applyInlineStyle: function(w, x, y) {
   return i.add(w, x, y);
  },
  removeInlineStyle: function(w, x, y) {
   return i.remove(w, x, y);
  },
  setBlockType: function(w, x, y) {
   return s(w, x, y);
  },
  applyEntity: function(w, x, y) {
   var z = q(w, x);
   return k(z, x, y);
  }
 };
 e.exports = v;
}, null);

__d("DocumentRemovableWord", [ "TokenizeUtil" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 var h = g.getPunctuation();
 h = h.replace("'", "").slice(1, -1);
 var i = "\\s" + h, j = "^(" + "[" + i + "]*" + "[^" + i + "]+" + "|[" + i + "]+" + ")", k = new RegExp(j), l = "(" + "[^" + i + "]+" + "[" + i + "]*" + "|[" + i + "]+" + ")$", m = new RegExp(l);
 function n(p, q) {
  var r = q ? m.exec(p) : k.exec(p);
  return r ? r[0] : null;
 }
 var o = {
  getBackward: function(p) {
   return n(p, true);
  },
  getForward: function(p) {
   return n(p, false);
  }
 };
 e.exports = o;
}, null);

__d("getTextContentFromFiles", [ "DocumentCharacters" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 var h = g.BLOCK_DELIMITER, i = /\.textClipping$/, j = {
  "text/plain": true,
  "text/html": true,
  "text/rtf": true
 };
 function k(m, n) {
  var o = 0, p = [];
  m.forEach(function(q) {
   l(q, function(r) {
    o++;
    r && p.push(r);
    if (o == m.length) n(p.join(h));
   });
  });
 }
 function l(m, n) {
  if (!a.FileReader || m.type && !(m.type in j)) {
   n("");
   return;
  }
  if (m.type === "" && i.test(m.name)) {
   n(m.name.replace(i, ""));
   return;
  }
  var o = new FileReader();
  o.onload = function() {
   n(o.result);
  };
  o.onerror = function() {
   n("");
  };
  o.readAsText(m);
 }
 e.exports = k;
}, null);

__d("DocumentOffsetKey", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 var g = "-", h = {
  encode: function(i, j, k) {
   return i + g + j + g + k;
  },
  decode: function(i) {
   var j = i.split(g), k = j[0], l = j[1], m = j[2];
   return {
    blockKey: k,
    decoratorKey: parseInt(l, 10),
    leafKey: parseInt(m, 10)
   };
  }
 };
 e.exports = h;
}, null);

__d("TextEditorBanzai", [ "BanzaiScuba", "containsNode", "encodeBlocks" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 var j = 3, k = {
  logSetSelectionError: function(q, r) {
   var s = n();
   s.addNormal("error_type", "setSelection");
   var t = r, u = t[0], v = t[1], w = t[2], x = t[3], y = t[4];
   s.addNormal("selection_state", u.serialize());
   var z = l(v);
   s.addNormal("node_html", z);
   s.addNormal("selection_params", "Key: " + w + ", Start: " + x + ", End: " + y);
   s.addNormal("error_text", q.message);
   s.post();
  },
  logGetSelectionError: function(q, r) {
   var s = n();
   s.addNormal("error_type", "getSelection");
   var t = r, u = t[0], v = t[1], w = u.getCurrentContent(), x = i(w), y = x.blocks;
   y.forEach(function(ca) {
    ca.length = ca.text.length;
    delete ca.text;
   });
   var z = u.getSelection();
   s.addNormal("content_state", JSON.stringify(y));
   s.addNormal("selection_state", z.serialize());
   s.addNormal("error_text", q.message);
   var aa = l(v);
   s.addNormal("node_html", aa);
   var ba = o(v);
   s.addNormal("dom_selection", ba);
   s.post();
  }
 };
 function l(q) {
  if (!q) return "[empty]";
  var r = m(q);
  return r.nodeType === j ? r.textContent : r.innerHTML;
 }
 function m(q) {
  if (q.nodeType === j) {
   var r = q.textContent.length;
   return document.createTextNode("[text " + r + "]");
  }
  var s = q.cloneNode(), t = q.childNodes;
  for (var u = 0; u < t.length; u++) s.appendChild(m(t[u]));
  return s;
 }
 function n() {
  return new g("text_editor_error_log", null, {
   addBrowserFields: true
  });
 }
 function o(q) {
  if (!a.getSelection) return "[not available]";
  var r = a.getSelection(), s = r.anchorNode, t = r.anchorOffset, u = r.focusNode, v = r.focusOffset;
  s = p(s, q);
  u = p(u, q);
  return JSON.stringify({
   anchorNode: s,
   anchorOffset: t,
   focusNode: u,
   focusOffset: v
  });
 }
 function p(q, r) {
  if (!q) return "[none]";
  if (!h(r, q)) return "[outside root]";
  return l(q);
 }
 e.exports = k;
}, null);

__d("getSelectionOffsetKeyForNode", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 function g(h) {
  return h.getAttribute && h.getAttribute("data-offset-key");
 }
 e.exports = g;
}, null);

__d("findAncestorOffsetKey", [ "getSelectionOffsetKeyForNode" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 function h(i) {
  while (i && i !== document.documentElement) {
   var j = g(i);
   if (j != null) return j;
   i = i.parentNode;
  }
  return null;
 }
 e.exports = h;
}, null);

__d("getUpdatedSelectionState", [ "DocumentOffsetKey" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 function h(i, j, k, l, m) {
  var n = i.getSelection(), o = g.decode(j), p = o.blockKey, q = i.getBlockTree(p).getIn([ o.decoratorKey, "leaves", o.leafKey ]), r = g.decode(l), s = r.blockKey, t = i.getBlockTree(s).getIn([ r.decoratorKey, "leaves", r.leafKey ]), u = q.get("start"), v = t.get("start"), w = q ? u + k : null, x = t ? v + m : null, y = n.getAnchorKey() === p && n.getAnchorOffset() === w && n.getFocusKey() === s && n.getFocusOffset() === x;
  if (y) return n;
  var z = false;
  if (p === s) {
   var aa = q.get("end"), ba = t.get("end");
   if (v === u && ba === aa) {
    z = m < k;
   } else z = v < u;
  } else {
   var ca = i.getCurrentContent().getBlockMap().keySeq().skipUntil(function(da) {
    return da === p || da === s;
   }).first();
   z = ca === s;
  }
  return n.merge({
   anchorKey: p,
   anchorOffset: w,
   focusKey: s,
   focusOffset: x,
   isBackward: z
  });
 }
 e.exports = h;
}, null);

__d("getDocumentSelection", [ "DocumentCharacters", "ErrorUtils", "TextEditorBanzai", "findAncestorOffsetKey", "getSelectionOffsetKeyForNode", "getUpdatedSelectionState", "invariant" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m) {
 b.__markCompiled && b.__markCompiled();
 var n = g.SOFT_NEWLINE;
 function o(u, v) {
  var w = [ u, v ];
  return h.applyWithGuard(p, null, w, function(x) {
   return i.logGetSelectionError(x, w);
  }, "TextEditor:getSelection");
 }
 function p(u, v) {
  var w = a.getSelection();
  if (w.rangeCount === 0) return {
   selectionState: u.getSelection().set("hasFocus", false),
   needsRecovery: false
  };
  var x = w.anchorNode, y = w.focusNode, z = w.anchorOffset, aa = w.focusOffset, ba = x.nodeType === Node.TEXT_NODE, ca = y.nodeType === Node.TEXT_NODE;
  if (ba && ca) return {
   selectionState: l(u, j(x), z, j(y), aa),
   needsRecovery: false
  };
  var da = null, ea = null;
  if (ba) {
   da = {
    key: j(x),
    offset: z
   };
   ea = s(v, y, aa);
  } else if (ca) {
   ea = {
    key: j(y),
    offset: aa
   };
   da = s(v, x, z);
  } else {
   da = s(v, x, z);
   ea = s(v, y, aa);
  }
  return {
   selectionState: l(u, da.key, da.offset, ea.key, ea.offset),
   needsRecovery: true
  };
 }
 function q(u) {
  while (u.firstChild && k(u.firstChild)) u = u.firstChild;
  return u;
 }
 function r(u) {
  while (u.lastChild && k(u.lastChild)) u = u.lastChild;
  return u;
 }
 function s(u, v, w) {
  var x = j(v);
  m(x != null || u === v || u.firstChild === v);
  if (u === v) {
   v = v.firstChild;
   m(v.getAttribute("data-contents") === "true");
   if (w > 0) w = v.childNodes.length;
  }
  if (w === 0) return {
   key: x || k(q(v)),
   offset: 0
  };
  var y = v.childNodes[w - 1], z, aa;
  if (!k(y)) {
   z = x;
   aa = t(y);
  } else {
   var ba = r(y);
   z = k(ba);
   aa = t(ba);
  }
  return {
   key: z,
   offset: aa
  };
 }
 function t(u) {
  var v = u.textContent;
  return v === n ? 0 : v.length;
 }
 e.exports = o;
}, null);

__d("isSelectionAtLeafStart", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function g(h) {
  var i = h.getSelection(), j = i.getAnchorKey(), k = h.getBlockTree(j), l = i.getStartOffset(), m = false;
  k.some(function(n) {
   if (l === n.get("start")) {
    m = true;
    return true;
   }
   if (l < n.get("end")) return n.get("leaves").some(function(o) {
    var p = o.get("start");
    if (l === p) {
     m = true;
     return true;
    }
    if (l < p) return false;
   });
  });
  return m;
 }
 e.exports = g;
}, null);

__d("setDocumentSelection", [ "ErrorUtils", "TextEditorBanzai", "containsNode" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function j(n, o, p, q, r) {
  var s = [ n, o, p, q, r ];
  return g.applyWithGuard(k, null, s, function(t) {
   return h.logSetSelectionError(t, s);
  }, "TextEditor:setSelection");
 }
 function k(n, o, p, q, r) {
  if (!i(document.documentElement, o)) return;
  var s = a.getSelection(), t = n.getAnchorKey(), u = n.getAnchorOffset(), v = n.getFocusKey(), w = n.getFocusOffset(), x = n.getIsBackward();
  if (!s.extend && x) {
   var y = t, z = u;
   t = v;
   u = w;
   v = y;
   w = z;
   x = false;
  }
  var aa = t === p && q <= u && r >= u, ba = v === p && q <= w && r >= w;
  if (aa && ba) {
   s.removeAllRanges();
   m(s, o, u - q);
   l(s, o, w - q);
   return;
  }
  if (!x) {
   if (aa) {
    s.removeAllRanges();
    m(s, o, u - q);
   }
   if (ba) l(s, o, w - q);
  } else {
   if (ba) {
    s.removeAllRanges();
    m(s, o, w - q);
   }
   if (aa) {
    var ca = s.focusNode, da = s.focusOffset;
    s.removeAllRanges();
    m(s, o, u - q);
    l(s, ca, da);
   }
  }
 }
 function l(n, o, p) {
  if (n.extend) {
   n.extend(o, p);
  } else {
   var q = n.getRangeAt(0);
   q.setEnd(o, p);
   n.addRange(q.cloneRange());
  }
 }
 function m(n, o, p) {
  var q = document.createRange();
  q.setStart(o, p);
  n.addRange(q);
 }
 e.exports = j;
}, null);

__d("applyEmoticonToContentBlock", [ "CharacterMetadata", "ComposedEntityMutability", "ComposedEntityType", "DocumentEntity", "EmoticonsList", "immutable" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var m = l, n = m.List, o = "　";
 function p(q, r, s) {
  if (!k.emotes[r]) return q;
  var t = j.create(i.EMOTICON, h.IMMUTABLE, {
   type: k.emotes[r],
   originalEmoticon: r
  }), u = q.getText(), v = q.getCharacterList(), w = r.length, x = v.get(s);
  return q.merge({
   text: u.slice(0, s) + o + u.slice(s + w),
   characterList: v.slice(0, s).concat(n.of(g.applyEntity(x, t)), v.slice(s + w))
  });
 }
 e.exports = p;
}, null);

__d("applyEmoticonToContentState", [ "EmoticonsList", "applyEmoticonToContentBlock", "getTextAfterNearestEntity" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var j = new RegExp(g.regexp.source, "g");
 function k(l, m) {
  var n = m.getAnchorKey(), o = m.getAnchorOffset(), p = l.getBlockForKey(n), q = i(p, o), r, s;
  while (s !== null) {
   s = j.exec(q);
   if (s !== null) r = s;
  }
  if (!r) return l;
  var t = r[1];
  if (!t && o !== q.length) return l;
  var u = r[2], v = o - q.length, w = v + r.index + r[1].length, x = l.getBlockMap().set(n, h(p, u, w));
  o -= u.length - 1;
  return l.merge({
   blockMap: x,
   selectionBefore: m,
   selectionAfter: m.merge({
    anchorOffset: o,
    focusOffset: o
   })
  });
 }
 e.exports = k;
}, null);

__d("insertEmoticonIntoContentState", [ "DocumentModifier", "applyEmoticonToContentBlock" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function i(j, k, l) {
  var m = g.replaceText(k, l, j), n = l.getAnchorKey(), o = l.getAnchorOffset(), p = m.getBlockForKey(n), q = m.getBlockMap().set(n, h(p, j, o));
  o++;
  return k.merge({
   blockMap: q,
   selectionBefore: l,
   selectionAfter: l.merge({
    anchorOffset: o,
    focusOffset: o
   })
  });
 }
 e.exports = i;
}, null);

__d("insertEmoticonIntoEditorState", [ "DocumentModifier", "EditorChangeType", "EditorState", "insertEmoticonIntoContentState" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var k = " ";
 function l(m, n) {
  var o = n.getSelection(), p = n.getCurrentContent(), q = o.getStartOffset(), r = o.getEndOffset(), s = p.getBlockForKey(o.getStartKey()).getText(), t = p.getBlockForKey(o.getEndKey()).getText(), u = "";
  if (r <= t.length && t[r] !== k) u = k;
  if (q > 0 && s[q - 1] !== k) {
   p = g.insertText(p, o, k);
   o = p.getSelectionAfter();
  }
  var v = j(m, p, o);
  p = g.insertText(v, v.getSelectionAfter(), u);
  return i.push(n, p, h.INSERT_CHARACTERS);
 }
 e.exports = l;
}, null);

__d("FluxStore", [ "EventEmitter", "invariant" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var i = "change";
 function j(k) {
  var l = this.constructor;
  this.__className = l.name;
  this.__changed = false;
  this.__dispatcher = k;
  this.__changeEvent = this.$FluxStore0();
  this.__emitter = new g();
  this.$FluxStore1 = k.register(function(m) {
   if (m.action) {
    h(m.action.type || m.action.actionType);
   } else h(m.type);
   this.__changed = false;
   this.__onDispatch.call(this, m);
  }.bind(this));
 }
 j.prototype.addListener = function(k) {
  return this.__emitter.addListener(this.__changeEvent, k);
 };
 j.prototype.getDispatcher = function() {
  return this.__dispatcher;
 };
 j.prototype.getDispatchToken = function() {
  return this.$FluxStore1;
 };
 j.prototype.hasChanged = function() {
  h(this.__dispatcher.isDispatching());
  return this.__changed;
 };
 j.prototype.__emitChange = function() {
  h(this.__dispatcher.isDispatching());
  this.__changed = true;
  this.__dispatcher.enqueueCompletionCallback(this.getDispatchToken(), function() {
   return this.__emitter.emit(this.__changeEvent);
  }.bind(this));
 };
 j.prototype.__onDispatch = function(k) {
  h(false);
 };
 j.prototype.$FluxStore0 = function() {
  return i;
 };
 e.exports = j;
}, null);

__d("keyMirrorRecursive", [ "invariant" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function h(k, l) {
  return i(k, l);
 }
 function i(k, l) {
  var m = {}, n;
  g(j(k));
  for (n in k) {
   if (!k.hasOwnProperty(n)) continue;
   var o = k[n], p = l ? l + "." + n : n;
   if (j(o)) {
    o = i(o, p);
   } else o = p;
   m[n] = o;
  }
  return m;
 }
 function j(k) {
  return k instanceof Object && !Array.isArray(k);
 }
 e.exports = h;
}, null);

__d("LoadObjectOperations", [ "keyMirrorRecursive" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var h = g({
  CREATING: "",
  DELETING: "",
  LOADING: "",
  UPDATING: ""
 });
 e.exports = h;
}, null);

__d("LoadObject", [ "immutable", "LoadObjectOperations", "Map", "invariant", "nullthrows" ], function(a, b, c, d, e, f, g, h, i, j, k) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var l = [ void 0, null, false, true, 0, "" ], m = "SECRET_" + Math.random(), n = new i(new i(l.map(function(s) {
  return [ s, new i([ [ true, new i() ], [ false, new i() ] ]) ];
 }))), o = g.Record({
  operation: void 0,
  value: void 0,
  error: void 0,
  internalHasValue: false
 });
 for (var p in o) if (o.hasOwnProperty(p)) r[p] = o[p];
 var q = o === null ? null : o.prototype;
 r.prototype = Object.create(q);
 r.prototype.constructor = r;
 r.__superConstructor__ = o;
 function r(s, t, u, v, w) {
  j(s === m);
  o.call(this, {
   operation: t,
   value: u,
   error: v,
   internalHasValue: w
  });
 }
 r.$LoadObject0 = function(s, t, u, v) {
  var w = r.$LoadObject1(s, t, u, v);
  return w || new r(m, s, t, u, v);
 };
 r.$LoadObject1 = function(s, t, u, v) {
  if (u !== void 0 || !n.has(t)) return null;
  var w = k(n.get(t)), x = k(w.get(v));
  if (!x.has(s)) {
   var y = new r(m, s, t, u, v);
   x.set(s, y);
  }
  return k(x.get(s));
 };
 r.prototype.getOperation = function() {
  return this.get("operation");
 };
 r.prototype.getValue = function() {
  return this.get("value");
 };
 r.prototype.getValueEnforcing = function() {
  j(this.hasValue());
  var s = this.getValue();
  return s;
 };
 r.prototype.getError = function() {
  return this.get("error");
 };
 r.prototype.hasValue = function() {
  return !!this.get("internalHasValue");
 };
 r.prototype.hasOperation = function() {
  return this.getOperation() !== void 0;
 };
 r.prototype.hasError = function() {
  return this.getError() !== void 0;
 };
 r.prototype.setOperation = function(s) {
  var t = r.$LoadObject1(s, this.getValue(), this.getError(), this.hasValue());
  return t || this.set("operation", s);
 };
 r.prototype.setValue = function(s) {
  var t = r.$LoadObject1(this.getOperation(), s, this.getError(), true);
  return t || this.set("value", s).set("internalHasValue", true);
 };
 r.prototype.setError = function(s) {
  var t = r.$LoadObject1(this.getOperation(), this.getValue(), s, this.hasValue());
  return t || this.set("error", s);
 };
 r.prototype.removeOperation = function() {
  var s = this.remove("operation"), t = r.$LoadObject1(s.getOperation(), s.getValue(), s.getError(), s.hasValue());
  return t || s;
 };
 r.prototype.removeValue = function() {
  var s = this.remove("value").remove("internalHasValue"), t = r.$LoadObject1(s.getOperation(), s.getValue(), s.getError(), s.hasValue());
  return t || s;
 };
 r.prototype.removeError = function() {
  var s = this.remove("error"), t = r.$LoadObject1(s.getOperation(), s.getValue(), s.getError(), s.hasValue());
  return t || s;
 };
 r.prototype.isCreating = function() {
  return this.getOperation() === h.CREATING;
 };
 r.prototype.isDeleting = function() {
  return this.getOperation() === h.DELETING;
 };
 r.prototype.isDone = function() {
  return !this.hasOperation();
 };
 r.prototype.isLoading = function() {
  return this.getOperation() === h.LOADING;
 };
 r.prototype.isUpdating = function() {
  return this.getOperation() === h.UPDATING;
 };
 r.prototype.creating = function() {
  return this.setOperation(h.CREATING);
 };
 r.prototype.deleting = function() {
  return this.setOperation(h.DELETING);
 };
 r.prototype.done = function() {
  return this.removeOperation();
 };
 r.prototype.loading = function() {
  return this.setOperation(h.LOADING);
 };
 r.prototype.updating = function() {
  return this.setOperation(h.UPDATING);
 };
 r.prototype.map = function(s) {
  if (!this.hasValue()) return this;
  var t = this.getValueEnforcing(), u = s(t), v = this.setValue(u);
  return v;
 };
 r.creating = function() {
  return r.$LoadObject0(h.CREATING, void 0, void 0, false);
 };
 r.deleting = function() {
  return r.$LoadObject0(h.DELETING, void 0, void 0, false);
 };
 r.done = function() {
  return r.$LoadObject0(void 0, void 0, void 0, false);
 };
 r.loading = function() {
  return r.$LoadObject0(h.LOADING, void 0, void 0, false);
 };
 r.updating = function() {
  return r.$LoadObject0(h.UPDATING, void 0, void 0, false);
 };
 e.exports = r;
}, null);

__d("cssVar", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 function g(h) {
  throw new Error("cssVar" + '("' + h + '"): Unexpected class transformation.');
 }
 e.exports = g;
}, null);

__d("xuiglyph", [ "ix" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function h(i) {
  if (typeof i === "string") i = {
   name: i
  };
  var j = Object.assign({
   name: void 0,
   shade: "dark",
   size: "small"
  }, i);
  return g.call(null, j.name + ":" + j.shade + ":" + j.size);
 }
 e.exports = h;
}, null);

__d("Emscripten", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  isSupported: function() {
   return typeof Int32Array !== "undefined" && typeof Float64Array !== "undefined" && !!new Int32Array(1).subarray && !!new Int32Array(1).set;
  }
 };
}, null);

__d("XHRHttpError", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 var g = "HTTP_CLIENT_ERROR", h = "HTTP_PROXY_ERROR", i = "HTTP_SERVER_ERROR", j = "HTTP_TRANSPORT_ERROR", k = "HTTP_UNKNOWN_ERROR";
 function l(m, n) {
  if (n === 0) {
   var o = m.getProtocol();
   if (o === "file" || o === "ftp") return null;
   return j;
  } else if (n >= 100 && n < 200) {
   return h;
  } else if (n >= 200 && n < 300) {
   return null;
  } else if (n >= 400 && n < 500) {
   return g;
  } else if (n >= 500 && n < 600) {
   return i;
  } else if (n >= 12001 && n < 12156) {
   return j;
  } else return k;
 }
 e.exports = {
  getErrorCode: l,
  HTTP_CLIENT_ERROR: g,
  HTTP_PROXY_ERROR: h,
  HTTP_SERVER_ERROR: i,
  HTTP_TRANSPORT_ERROR: j,
  HTTP_UNKNOWN_ERROR: k
 };
}, null);

__d("xhrSimpleDataSerializer", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 function g(h) {
  var i = [], j;
  for (j in h) i.push(encodeURIComponent(j) + "=" + encodeURIComponent(h[j]));
  return i.join("&");
 }
 e.exports = g;
}, null);

__d("XHRRequest", [ "ErrorUtils", "TimeSlice", "URI", "XHRHttpError", "getSameOriginTransport", "invariant", "xhrSimpleDataSerializer" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m) {
 b.__markCompiled && b.__markCompiled();
 var n = {
  errorCode: null,
  errorMsg: null,
  errorType: null
 }, o = {
  loadedBytes: null,
  totalBytes: null
 };
 function p(q) {
  "use strict";
  this.setURI(q);
  this.setMethod("POST");
  this.setTransportBuilder(k);
  this.setDataSerializer(m);
  this.$XHRRequest0 = this.$XHRRequest0.bind(this);
 }
 p.prototype.setURI = function(q) {
  "use strict";
  this.$XHRRequest1 = new i(q);
  return this;
 };
 p.prototype.getURI = function() {
  "use strict";
  return this.$XHRRequest1;
 };
 p.prototype.setMethod = function(q) {
  "use strict";
  this.$XHRRequest2 = q;
  return this;
 };
 p.prototype.getMethod = function() {
  "use strict";
  return this.$XHRRequest2;
 };
 p.prototype.setData = function(q) {
  "use strict";
  this.$XHRRequest3 = q;
  return this;
 };
 p.prototype.getData = function() {
  "use strict";
  return this.$XHRRequest3;
 };
 p.prototype.setRawData = function(q) {
  "use strict";
  this.$XHRRequest4 = q;
  return this;
 };
 p.prototype.setRequestHeader = function(q, r) {
  "use strict";
  if (!this.$XHRRequest5) this.$XHRRequest5 = {};
  this.$XHRRequest5[q] = r;
  return this;
 };
 p.prototype.setTimeout = function(q) {
  "use strict";
  this.$XHRRequest6 = q;
  return this;
 };
 p.prototype.setResponseHandler = function(q) {
  "use strict";
  this.$XHRRequest7 = q;
  return this;
 };
 p.prototype.setErrorHandler = function(q) {
  "use strict";
  this.$XHRRequest8 = q;
  return this;
 };
 p.prototype.setAbortHandler = function(q) {
  "use strict";
  this.$XHRRequest9 = q;
  return this;
 };
 p.prototype.setTimeoutHandler = function(q) {
  "use strict";
  this.$XHRRequesta = q;
  return this;
 };
 p.prototype.setUploadProgressHandler = function(q) {
  "use strict";
  this.$XHRRequestb = q;
  return this;
 };
 p.prototype.setTransportBuilder = function(q) {
  "use strict";
  this.$XHRRequestc = q;
  return this;
 };
 p.prototype.setDataSerializer = function(q) {
  "use strict";
  this.$XHRRequestd = q;
  return this;
 };
 p.prototype.send = function() {
  "use strict";
  var q = this.$XHRRequest6, r = this.$XHRRequestc(), s = this.getURI();
  this.$XHRRequeste = r;
  var t;
  l(this.$XHRRequest2 === "POST" || !this.$XHRRequest4);
  if (this.$XHRRequest2 === "GET" || this.$XHRRequest4) {
   s.addQueryData(this.$XHRRequest3);
   t = this.$XHRRequest4;
  } else t = this.$XHRRequestd(this.$XHRRequest3);
  r.onreadystatechange = h.guard(this.$XHRRequest0, "XHRRequest onreadystatechange");
  if (r.upload && this.$XHRRequestb) r.upload.onprogress = this.$XHRRequestf.bind(this);
  if (q) this.$XHRRequestg = setTimeout(this.$XHRRequesth.bind(this), q);
  r.open(this.$XHRRequest2, s.toString(), true);
  if (this.$XHRRequest5) for (var u in this.$XHRRequest5) r.setRequestHeader(u, this.$XHRRequest5[u]);
  r.send(t);
 };
 p.prototype.abort = function() {
  "use strict";
  this.$XHRRequesti();
  if (this.$XHRRequest9) g.applyWithGuard(this.$XHRRequest9, null, null, null, "XHRRequest:_abortHandler");
 };
 p.prototype.$XHRRequesti = function() {
  "use strict";
  var q = this.$XHRRequeste;
  if (q) {
   q.onreadystatechange = null;
   q.abort();
  }
  this.$XHRRequestj();
 };
 p.prototype.$XHRRequesth = function() {
  "use strict";
  this.$XHRRequesti();
  if (this.$XHRRequesta) g.applyWithGuard(this.$XHRRequesta, null, null, null, "XHRRequest:_abortHandler");
 };
 p.prototype.$XHRRequest0 = function() {
  "use strict";
  var q = this.$XHRRequeste, r = q, s = r.readyState;
  if (s >= 2) {
   var t = s === 4, u = this.getURI(), v = j.getErrorCode(u, q.status), w = this.$XHRRequest7;
   if (v !== null) {
    if (t) {
     n.errorCode = v;
     n.errorMsg = q.responseText;
     n.errorType = "HTTP";
     if (this.$XHRRequest8) g.applyWithGuard(this.$XHRRequest8, null, [ n ], null, "XHRRequest:_errorHandler");
    }
   } else if (w) {
    var x = null;
    if (w.includeHeaders) x = q.getAllResponseHeaders();
    if (t || w.parseStreaming && s === 3) g.applyWithGuard(w, null, [ q.responseText, x, t ], null, "XHRRequest:handler");
   }
   if (t) this.$XHRRequestj();
  }
 };
 p.prototype.$XHRRequestf = function(q) {
  "use strict";
  o.loadedBytes = q.loaded;
  o.totalBytes = q.total;
  if (this.$XHRRequestb) g.applyWithGuard(this.$XHRRequestb, null, [ o ], null, "XHRRequest:_uploadProgressHandler");
 };
 p.prototype.$XHRRequestj = function() {
  "use strict";
  clearTimeout(this.$XHRRequestg);
  delete this.$XHRRequeste;
 };
 e.exports = p;
}, null);

__d("getCrossOriginTransport", [ "ex", "invariant" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 function i() {
  try {
   var k = new XMLHttpRequest();
   if (!("withCredentials" in k) && typeof XDomainRequest !== "undefined") k = new XDomainRequest();
   return k;
  } catch (j) {
   throw new Error(g("getCrossOriginTransport: %s", j.message));
  }
 }
 i.withCredentials = function() {
  var j = i();
  h("withCredentials" in j);
  var k = j.open;
  j.open = function() {
   k.apply(this, arguments);
   this.withCredentials = true;
  };
  return j;
 };
 e.exports = i;
}, null);

__d("WebWorker", [ "BanzaiLogger", "WebWorkerConfig", "BlobFactory", "EventListener", "URI", "areSameOrigin", "destroyOnUnload", "SubscriptionsHandler", "XHRRequest", "arrayContains", "emptyFunction", "getCrossOriginTransport", "performanceNow", "invariant", "memoize", "merge", "filterObject" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w) {
 b.__markCompiled && b.__markCompiled();
 var x = a.URL || a.webkitURL;
 function y(ea) {
  "use strict";
  this.$WebWorker0 = false;
  this.$WebWorker1 = null;
  this.$WebWorker2 = ea;
  this.$WebWorker3 = null;
  this.$WebWorker4 = q;
  this.$WebWorker5 = q;
  this.$WebWorker6 = [];
  this.$WebWorker7 = false;
  this.$WebWorker8 = new n();
  m(function() {
   if (!this.$WebWorker7) this.terminate();
  }.bind(this));
  this.$WebWorker9("constructed");
 }
 y.prototype.setMessageHandler = function(ea) {
  "use strict";
  this.$WebWorker4 = ea || q;
  return this;
 };
 y.prototype.setErrorHandler = function(ea) {
  "use strict";
  this.$WebWorker5 = ea || q;
  return this;
 };
 y.prototype.postMessage = function(ea, fa) {
  "use strict";
  t(!this.isCurrentState("constructed"));
  t(!this.isCurrentState("terminated"));
  if (this.isCurrentState("preparing")) {
   this.$WebWorker6.push(this.postMessage.bind(this, ea, fa));
   return this;
  }
  var ga = {
   type: "message",
   message: ea
  };
  if (fa) {
   this.$WebWorker3.postMessage(ga, fa);
  } else this.$WebWorker3.postMessage(ga);
  return this;
 };
 y.prototype.terminate = function() {
  "use strict";
  if (this.isCurrentState("executing")) this.$WebWorker3.terminate();
  if (!this.isCurrentState("terminated")) {
   this.$WebWorker9("terminated");
   this.$WebWorker3 = null;
   this.$WebWorkera();
   this.$WebWorker6 = [];
  }
  return this;
 };
 y.prototype.execute = function() {
  "use strict";
  t(!this.isCurrentState("terminated"));
  if ([ "preparing", "executing" ].some(this.isCurrentState, this)) return this;
  this.$WebWorker9("preparing");
  y.prepareResource(this.$WebWorker2, this.$WebWorkerb.bind(this));
  return this;
 };
 y.prototype.setAllowCrossPageTransition = function(ea) {
  "use strict";
  this.$WebWorker7 = ea;
  return this;
 };
 y.prototype.isCurrentState = function(ea) {
  "use strict";
  t(p(y.states, ea));
  return ea === this.$WebWorker1;
 };
 y.prototype.$WebWorkerb = function() {
  "use strict";
  t(!this.isCurrentState("executing"));
  if (this.isCurrentState("terminated")) return;
  t(this.$WebWorker2.sameOriginURL || this.$WebWorker2.source);
  if (this.$WebWorker2.sameOriginURL) {
   this.$WebWorker3 = new a.Worker(this.$WebWorker2.sameOriginURL);
  } else {
   this.$WebWorker3 = new a.Worker(y.evalWorkerURL);
   this.$WebWorker3.postMessage(this.$WebWorker2.source);
  }
  this.$WebWorkerc("ping", Date.now());
  this.$WebWorkerd();
  this.$WebWorker9("executing");
  this.$WebWorker6.forEach(function(ea) {
   return ea();
  });
  this.$WebWorker6 = null;
 };
 y.prototype.$WebWorkera = function() {
  "use strict";
  this.$WebWorker8.release();
 };
 y.prototype.$WebWorkerc = function(ea) {
  "use strict";
  for (var fa = [], ga = 1, ha = arguments.length; ga < ha; ga++) fa.push(arguments[ga]);
  this.$WebWorker3.postMessage({
   type: ea,
   args: fa
  });
 };
 y.prototype.$WebWorkere = function(event, ea) {
  "use strict";
  y.$WebWorkere(event, this.$WebWorker2.name, v(ea, {
   cross_page_transition: !!this.$WebWorker7,
   state: this.$WebWorker1
  }));
 };
 y.$WebWorkerf = function() {
  "use strict";
  return Object.keys(w({
   object_url: y.$WebWorkerg(),
   eval_url: ca(),
   data_url: y.$WebWorkerh(),
   worker: y.isSupported(),
   transferables: y.areTransferablesSupported()
  }, function(ea) {
   return !!ea;
  }));
 };
 y.prototype.$WebWorkerd = function() {
  "use strict";
  this.$WebWorker8.addSubscriptions(j.listen(this.$WebWorker3, "message", this.$WebWorkeri.bind(this)), j.listen(this.$WebWorker3, "error", this.$WebWorkerj.bind(this)));
 };
 y.prototype.$WebWorkerj = function(ea) {
  "use strict";
  var fa = this.$WebWorker5(ea);
  if (!fa && !ea.defaultPrevented) this.$WebWorkere("exception", {
   message: ea.message
  });
 };
 y.prototype.$WebWorkeri = function(event) {
  "use strict";
  var ea = event.data;
  switch (ea.type) {
  case "message":
   this.$WebWorker4(ea.message);
   break;

  case "pong":
   this.$WebWorker0 = true;
   this.$WebWorkere("executed", {
    dt: Math.floor(ea.args[1] - ea.args[0]),
    bytes: this.$WebWorker2.source.length
   });
   break;

  case "terminate":
   this.terminate();
   break;

  case "haste-error":
   this.terminate();
   this.$WebWorkere("haste_error", {
    message: ea.message
   });
   break;

  case "console":
   var fa = ea.args.shift();
   t(p([ "log", "error", "info", "debug", "warn" ], fa));
   a.console[fa].apply(a.console, ea.args);
   break;
  }
 };
 y.prototype.$WebWorker9 = function(ea) {
  "use strict";
  t(p(y.states, ea));
  this.$WebWorkere("transition", {
   next_state: ea
  });
  this.$WebWorker1 = ea;
 };
 y.prepareResource = function(ea, fa) {
  "use strict";
  fa = fa || q;
  t(ea.sameOriginURL || ea.url || ea.source);
  t(!!y.isSupported());
  if (ea.sameOriginURL) {
   fa();
  } else if (ea.url && l(new k(ea.url), new k(a.location.href))) {
   ea.sameOriginURL = ea.url;
   fa();
  } else if (ea.source) {
   if (y.$WebWorkerk()) ea.sameOriginURL = y.$WebWorkerl(ea.source);
   fa();
  } else if (!ea.loading) {
   var ga = s();
   ea.loading = [ fa ];
   y.$WebWorkerm(ea.url, function(ha) {
    if (ha) {
     ea.source = ha;
     if (y.$WebWorkerk()) ea.sameOriginURL = y.$WebWorkerl(ha);
    }
    y.$WebWorkere("prepared", ea.name, {
     dt: Math.floor(s() - ga),
     bytes: ha.length
    });
    ea.loading.forEach(function(ia) {
     return ia();
    });
    ea.loading = false;
   });
  } else ea.loading.push(fa);
  return ea;
 };
 y.releaseResource = function(ea) {
  "use strict";
  if (ea.sameOriginURL.indexOf("blob:") === 0) {
   if (x.revokeObjectURL) x.revokeObjectURL(ea.sameOriginURL);
   ea.sameOriginURL = null;
  }
  return ea;
 };
 y.isSupported = function() {
  "use strict";
  return ba && (y.$WebWorkerk() || ca());
 };
 y.areTransferablesSupported = function() {
  "use strict";
  return y.isSupported() && da();
 };
 y.$WebWorkerm = function(ea, fa) {
  "use strict";
  new o(ea).setTransportBuilder(r).setMethod("GET").setResponseHandler(function(ga) {
   fa(ga);
  }).setErrorHandler(fa.bind(null, null)).send();
 };
 y.$WebWorkerl = function(ea) {
  "use strict";
  t(y.$WebWorkerk());
  if (y.$WebWorkerg()) {
   var fa = i.getBlob([ ea ], {
    type: "application/javascript"
   });
   return x.createObjectURL(fa);
  }
  if (y.$WebWorkerh()) return "data:application/javascript," + encodeURIComponent(ea);
 };
 y.$WebWorkerg = function() {
  "use strict";
  return i.isSupported() && z();
 };
 y.$WebWorkerh = function() {
  "use strict";
  return aa();
 };
 y.$WebWorkerk = function() {
  "use strict";
  return y.$WebWorkerg() || y.$WebWorkerh();
 };
 y.$WebWorkere = function(event, ea, fa) {
  "use strict";
  if (!h.logging.enabled) return;
  g.log(h.logging.config, v(fa, {
   features_array: y.$WebWorkerf(),
   event: event,
   resource: ea
  }));
 };
 var z = u(function() {
  var ea, fa;
  if (!x || !x.createObjectURL) return false;
  try {
   ea = x.createObjectURL(i.getBlob([ "" ], {
    type: "application/javascript"
   }));
   var ha = new a.Worker(ea);
   ha.terminate();
   fa = true;
  } catch (ga) {
   fa = false;
  } finally {
   if (x.revokeObjectURL) x.revokeObjectURL(ea);
  }
  return fa;
 }), aa = u(function() {
  var ea;
  try {
   var ga = new a.Worker("data:application/javascript,");
   ga.terminate();
   ea = true;
  } catch (fa) {
   ea = false;
  }
  return ea;
 }), ba = !!a.Worker, ca = u(function() {
  var ea;
  try {
   var ga = new a.Worker(y.evalWorkerURL);
   ga.terminate();
   ea = true;
  } catch (fa) {
   ea = false;
  }
  return ea;
 }), da = u(function() {
  var ea;
  try {
   var ga = new a.Worker(y.evalWorkerURL), ha = new ArrayBuffer(0);
   ga.postMessage({
    buffer: ha
   }, [ ha ]);
   ga.terminate();
   ea = true;
  } catch (fa) {
   ea = false;
  }
  return ea;
 });
 y.states = [ "constructed", "preparing", "executing", "terminated" ];
 y.evalWorkerURL = h.evalWorkerURL;
 e.exports = y;
}, null);

__d("PooledWebWorker", [ "WebWorker" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 for (var h in g) if (g.hasOwnProperty(h)) j[h] = g[h];
 var i = g === null ? null : g.prototype;
 j.prototype = Object.create(i);
 j.prototype.constructor = j;
 j.__superConstructor__ = g;
 function j(k, l, m) {
  "use strict";
  i.constructor.call(this, m);
  this.$PooledWebWorker0 = l;
  this.$PooledWebWorker1 = k;
 }
 j.prototype.getIndex = function() {
  "use strict";
  return this.$PooledWebWorker0;
 };
 j.prototype.getPool = function() {
  "use strict";
  return this.$PooledWebWorker1;
 };
 e.exports = j;
}, null);

__d("WebWorkerPool", [ "PooledWebWorker", "emptyFunction" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 i.isSupported = function() {
  "use strict";
  return g.isSupported();
 };
 function i(j, k) {
  "use strict";
  this.$WebWorkerPool0 = [];
  for (var l = 0; l < k; l++) this.$WebWorkerPool0.push(new g(this, l, j).setErrorHandler(this.$WebWorkerPool1).setMessageHandler(this.$WebWorkerPool2).execute());
  this.$WebWorkerPool3 = 0;
 }
 i.prototype.setMessageHandler = function(j) {
  "use strict";
  this.$WebWorkerPool4 = j || h;
  return this;
 };
 i.prototype.setAllowCrossPageTransition = function(j) {
  "use strict";
  this.$WebWorkerPool0.forEach(function(k) {
   return k.setAllowCrossPageTransition(j);
  });
  return this;
 };
 i.prototype.setErrorHandler = function(j) {
  "use strict";
  this.$WebWorkerPool5 = j || h;
  return this;
 };
 i.prototype.postMessage = function() {
  "use strict";
  for (var j = [], k = 0, l = arguments.length; k < l; k++) j.push(arguments[k]);
  var m = this.getWorker();
  m.postMessage.apply(m, j);
  return m;
 };
 i.prototype.$WebWorkerPool2 = function() {
  "use strict";
  for (var j = [], k = 0, l = arguments.length; k < l; k++) j.push(arguments[k]);
  j.unshift(this);
  this.getPool().$WebWorkerPool4.apply(this.getPool(), j);
 };
 i.prototype.$WebWorkerPool1 = function() {
  "use strict";
  for (var j = [], k = 0, l = arguments.length; k < l; k++) j.push(arguments[k]);
  j.unshift(this);
  return this.getPool().$WebWorkerPool5.apply(this.getPool(), j);
 };
 i.prototype.getWorker = function() {
  "use strict";
  var j = this.$WebWorkerPool0[this.$WebWorkerPool3];
  this.$WebWorkerPool3 = (this.$WebWorkerPool3 + 1) % this.$WebWorkerPool0.length;
  return j;
 };
 e.exports = i;
}, null);

__d("JpegResizer", [ "Emscripten", "JpegResizerConfig", "JpegResizeWorkerResource", "WebWorker", "WebWorkerPool", "PUWErrorCodes" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 var m = null;
 n.isSupported = function() {
  "use strict";
  return k.isSupported() && g.isSupported() && !h.isGKBlacklisted;
 };
 n.getSingleton = function() {
  "use strict";
  if (!m) m = new n(n.DEFAULT_POOL_SIZE).setAllowCrossPageTransition(true);
  return m;
 };
 n.prepareResource = function(o) {
  "use strict";
  j.prepareResource(i, o);
 };
 function n(o) {
  "use strict";
  o = o || n.DEFAULT_POOL_SIZE;
  j.prepareResource(i);
  this.$JpegResizer0 = new k(i, o).setErrorHandler(this.$JpegResizer1.bind(this)).setMessageHandler(this.$JpegResizer2.bind(this));
  this.$JpegResizer3 = {};
  this.$JpegResizer4 = n.DEFAULT_RESIZE_HEIGHT;
  this.$JpegResizer5 = n.DEFAULT_RESIZE_WIDTH;
 }
 n.prototype.setHighQuality = function(o) {
  "use strict";
  if (o) {
   this.$JpegResizer4 = n.DEFAULT_RESIZE_HEIGHT;
   this.$JpegResizer5 = n.DEFAULT_RESIZE_WIDTH;
  } else {
   this.$JpegResizer4 = n.LOW_QUALITY_RESIZE_HEIGHT;
   this.$JpegResizer5 = n.LOW_QUALITY_RESIZE_WIDTH;
  }
  return this;
 };
 n.prototype.setAllowCrossPageTransition = function(o) {
  "use strict";
  this.$JpegResizer0.setAllowCrossPageTransition(o);
  return this;
 };
 n.prototype.resizeBlob = function(o, p, q) {
  "use strict";
  var r = this.$JpegResizer0.getWorker();
  if (r.isCurrentState("terminated")) {
   var s = new Error("Worker terminated");
   s.code = l.WORKER_TERMINATED;
   p(s);
   return this;
  }
  var t = r.postMessage({
   blob: o,
   height: this.$JpegResizer4,
   width: this.$JpegResizer5
  }).getIndex();
  this.$JpegResizer6(t).unshift({
   done: p,
   progress: q
  });
  return this;
 };
 n.prototype.$JpegResizer6 = function(o) {
  "use strict";
  if (!this.$JpegResizer3.hasOwnProperty(o)) this.$JpegResizer3[o] = [];
  return this.$JpegResizer3[o];
 };
 n.prototype.$JpegResizer1 = function(o, p) {
  "use strict";
  o.terminate();
  var q = this.$JpegResizer6(o.getIndex());
  this.$JpegResizer7(p);
  q.forEach(function(r) {
   return r.done(p);
  });
  q.length = 0;
 };
 n.prototype.$JpegResizer2 = function(o, p) {
  "use strict";
  if (p.error) this.$JpegResizer7(p.error);
  if (p.done) {
   this.$JpegResizer6(o.getIndex()).pop().done(p.error, p.blob, p.skipped);
  } else {
   var q = this.$JpegResizer6(o.getIndex()), r = q[q.length - 1].progress;
   if (r) r({
    written: p.written,
    total: p.total
   });
  }
 };
 n.prototype.$JpegResizer7 = function(o) {
  "use strict";
  var p = o.message;
  if (p.indexOf("Not a JPEG file") !== -1) {
   o.code = l.BAD_JPEG;
  } else if (p.indexOf("abort()") !== -1) {
   o.code = l.WORKER_ABORT;
  } else o.code = l.UNKNOWN_RESIZE_ERROR;
 };
 n.DEFAULT_POOL_SIZE = 3;
 n.DEFAULT_RESIZE_HEIGHT = 2048;
 n.DEFAULT_RESIZE_WIDTH = 2048;
 n.LOW_QUALITY_RESIZE_HEIGHT = 960;
 n.LOW_QUALITY_RESIZE_WIDTH = 960;
 e.exports = n;
}, null);

__d("clearImmediate", [ "clearImmediatePolyfill" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 e.exports = g.bind(a);
}, null);

__d("PaymentMethodUtils", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 var g = 16, h = 4, i = [ {
  pattern: /^5[1-5]/,
  name: "mc",
  cscDigits: 3,
  digits: 16,
  supported: true,
  code: 77
 }, {
  pattern: /^4/,
  name: "visa",
  cscDigits: 3,
  digits: 16,
  supported: true,
  code: 86
 }, {
  pattern: /^3[47]/,
  name: "amex",
  cscDigits: 4,
  digits: 15,
  supported: true,
  code: 65
 }, {
  pattern: /^35(2[8-9]|[3-8])/,
  name: "jcb",
  cscDigits: 3,
  digits: 16,
  supported: true,
  code: 74
 }, {
  pattern: /^(6011|65|64[4-9]|622([2-8]|1[3-9]|12[6-9]|9[0-1]|92[0-5]))/,
  name: "disc",
  cscDigits: 3,
  digits: 16,
  supported: true,
  code: 68
 }, {
  pattern: /^30[0-5]/,
  name: "diners",
  digits: 14,
  cscDigits: 3,
  supported: false,
  code: 64
 }, {
  name: "unknown",
  digits: 16,
  cscDigits: 3,
  supported: false,
  code: 85
 } ], j = function(l) {
  return l.replace(/[iIl]/g, "1").replace(/[Oo]/g, "0").replace(/[^\d]/gi, "");
 }, k = {
  getCardType: function(l) {
   l = j(l);
   l = l.substr(0, 6);
   for (var m = 0; m < i.length; m++) if (l.match(i[m].pattern)) return i[m];
  },
  getCardTypeFromCode: function(l) {
   for (var m = 0; m < i.length; m++) if (l == i[m].code) return i[m];
   return null;
  },
  isValidCCNumber: function(l) {
   l = j(l);
   var m = k.getCardType(l);
   if (m.digits !== l.length) return false;
   if (!m.supported) return false;
   return k.isValidLuhn(l);
  },
  isValidLuhn: function(l) {
   l = j(l);
   var m = l.split("").reverse(), n = "";
   for (var o = 0; o < m.length; o++) {
    var p = parseInt(m[o], 10);
    if (o % 2 !== 0) p = p * 2;
    n = n + p;
   }
   var q = 0;
   for (o = 0; o < n.length; o++) q = q + parseInt(n.charAt(o), 10);
   return !!(q !== 0 && q % 10 === 0);
  },
  getMaxCardLength: function(l) {
   return g;
  },
  getMaxCSCLength: function() {
   return h;
  }
 };
 e.exports = k;
}, null);

__d("PhotoStoreCore", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 var g = {
  actions: {
   UPDATE: "update"
  },
  _photoCache: {},
  _postCreateCallbacks: {},
  getPhotoCache: function(h) {
   if (!this._photoCache[h]) throw new Error("Photo cache requested for unknown set ID");
   return this._photoCache[h];
  },
  hasBeenCreated: function(h) {
   return !!this._photoCache[h];
  },
  clearSetCache: function(h) {
   delete this._photoCache[h];
   delete this._postCreateCallbacks[h];
  },
  getByIndex: function(h, i, j) {
   this.getPhotoCache(h).getItemAtIndex(i, j);
  },
  getByIndexImmediate: function(h, i) {
   if (this._photoCache[h]) return this._photoCache[h].getItemAtIndexImmediate(i);
   return void 0;
  },
  getItemsInAvailableRange: function(h) {
   var i = this.getAvailableRange(h), j = [];
   for (var k = i.offset; k < i.length; k++) j.push(this.getByIndexImmediate(h, k));
   return j;
  },
  getItemsAfterIndex: function(h, i, j, k) {
   var l = this.getCursorByIndexImmediate(h, i);
   this.fetchForward(h, l, j, k);
  },
  getAllByIDImmediate: function(h) {
   var i = Object.keys(this._photoCache);
   return i.map(function(j) {
    return this.getByIndexImmediate(j, this.getIndexForID(j, h));
   }.bind(this)).filter(function(j) {
    return !!j;
   });
  },
  getIndexForID: function(h, i) {
   if (this._photoCache[h]) return this._photoCache[h].getIndexForID(i);
   return void 0;
  },
  getEndIndex: function(h) {
   var i = this.getAvailableRange(h);
   return i.offset + i.length - 1;
  },
  getCursorByIndexImmediate: function(h, i) {
   var j = this.getByIndexImmediate(h, i);
   if (j) return this._photoCache[h].getCursorForID(j.id);
   return void 0;
  },
  hasNextPage: function(h) {
   var i = this.getCursorByIndexImmediate(h, this.getEndIndex(h));
   return this.getPhotoCache(h).hasNextPage(i);
  },
  getAvailableRange: function(h) {
   return this.getPhotoCache(h).getAvailableRange();
  },
  hasLooped: function(h) {
   return this.getPhotoCache(h).hasLooped();
  },
  fetchForward: function(h, i, j, k) {
   this.getPhotoCache(h).getItemsAfterCursor(i, j, k);
  },
  fetchBackward: function(h, i, j, k) {
   this.getPhotoCache(h).getItemsBeforeCursor(i, j, k);
  },
  executePostCreate: function(h, i) {
   if (this._photoCache[h]) {
    i && i();
   } else this._postCreateCallbacks[h] = i;
  },
  runPostCreateCallback: function(h) {
   var i = this._postCreateCallbacks[h];
   if (i) {
    i();
    delete this._postCreateCallbacks[h];
   }
  },
  setPreFetchCallback: function(h, i) {
   this.getPhotoCache(h).setPreFetchCallback(i);
  },
  updateData: function(h) {
   var i = h.set_id;
   if (!this._photoCache[i]) {
    this._photoCache[i] = new h.cache_class(h);
    this.runPostCreateCallback(i);
   } else if (h.query_metadata.action == g.actions.UPDATE) {
    this._photoCache[i].updateData(h);
   } else this._photoCache[i].addData(h);
  },
  updateFeedbackData: function(h) {
   var i = Object.keys(h);
   i.forEach(function(j) {
    return g.getAllByIDImmediate(j).forEach(function(k) {
     k.feedback = h[j].feedback;
    });
   });
  },
  reset: function() {
   Object.keys(this._photoCache).forEach(function(h) {
    return this.clearSetCache(h);
   }.bind(this));
  }
 };
 e.exports = g;
}, null);

__d("AbstractTextEditorPlaceholder.react", [ "EditorState", "React", "cx" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 var j = h, k = j.PropTypes, l = h.createClass({
  displayName: "AbstractTextEditorPlaceholder",
  propTypes: {
   editorState: k.instanceOf(g).isRequired,
   text: k.string.isRequired
  },
  shouldComponentUpdate: function(m, n) {
   if (this.props.text !== m.text) return true;
   var o = this.props.editorState, p = m.editorState, q = o.getSelection(), r = p.getSelection();
   return q.getHasFocus() !== r.getHasFocus();
  },
  render: function() {
   var m = this.props.editorState.getSelection().getHasFocus(), n = "_5ywb" + (m ? " " + "_5ywc" : "");
   return h.createElement("div", {
    className: n
   }, h.createElement("div", {
    className: "_3br6"
   }, this.props.text));
  }
 });
 e.exports = l;
}, null);

__d("getDefaultKeyBinding", [ "DocumentCommands", "Keys", "UserAgent" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var j = i.isPlatform("Mac OS X"), k = i.isPlatform("Windows"), l = i.isBrowser("Firefox"), m = j && l && l < 29;
 function n(u) {
  return u.ctrlKey && !u.altKey;
 }
 function o(u) {
  return j ? u.metaKey && !u.altKey : n(u);
 }
 function p(u) {
  return j && u.altKey || n(u);
 }
 function q(u) {
  if (o(u)) return u.shiftKey ? g.REDO : g.UNDO;
 }
 function r(u) {
  if (k && u.shiftKey) return null;
  return p(u) ? g.DELETE_WORD : g.DELETE;
 }
 function s(u) {
  if (o(u) && j) return g.BACKSPACE_TO_END_OF_BLOCK;
  return p(u) ? g.BACKSPACE_WORD : g.BACKSPACE;
 }
 function t(u) {
  switch (u.keyCode) {
  case 66:
   return o(u) ? g.BOLD : null;

  case 68:
   return n(u) ? g.DELETE : null;

  case 72:
   return n(u) ? g.BACKSPACE : null;

  case 73:
   return o(u) ? g.ITALIC : null;

  case 74:
   return o(u) ? g.CODE : null;

  case 75:
   if (!k && n(u)) return g.SECONDARY_CUT;
   return null;

  case 79:
   return n(u) ? g.INSERT_BLOCK_DELIMITER : null;

  case 84:
   return j && n(u) ? g.TRANSPOSE_CHARACTERS : null;

  case 85:
   if (j && n(u)) return g.BACKSPACE_TO_END_OF_BLOCK;
   return o(u) ? g.UNDERLINE : null;

  case 87:
   return j && n(u) ? g.BACKSPACE_WORD : null;

  case 89:
   if (n(u)) return k ? g.REDO : g.SECONDARY_PASTE;
   return null;

  case 90:
   return q(u) || null;

  case h.DELETE:
   return r(u);

  case h.BACKSPACE:
   return s(u);

  case h.LEFT:
   return m && o(u) ? g.MOVE_SELECTION_TO_START_OF_BLOCK : null;

  case h.RIGHT:
   return m && o(u) ? g.MOVE_SELECTION_TO_END_OF_BLOCK : null;

  default:
   return null;
  }
 }
 e.exports = t;
}, null);

__d("AbstractTextEditorProps", [ "EditorState", "React", "emptyFunction", "getDefaultKeyBinding" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 var k = h, l = k.PropTypes, m = i.thatReturns(""), n = i.thatReturns(null), o = {
  propTypes: {
   editorState: l.instanceOf(g).isRequired,
   placeholder: l.string,
   textAlignment: l.oneOf([ "left", "center", "right" ]),
   blockRendererFn: l.func,
   blockStyleFn: l.func,
   inlineStyleFn: l.func,
   keyBindingFn: l.func,
   readOnly: l.bool,
   spellCheck: l.bool,
   stripPastedStyles: l.bool,
   handleReturn: l.func,
   handleKeyCommand: l.func,
   handleBeforeInput: l.func,
   handlePastedFiles: l.func,
   onEscape: l.func,
   onTab: l.func,
   onUpArrow: l.func,
   onDownArrow: l.func,
   onPasteRawText: l.func,
   onBlur: l.func,
   onFocus: l.func
  },
  getDefaultProps: function() {
   return {
    blockRendererFn: n,
    blockStyleFn: m,
    inlineStyleFn: m,
    keyBindingFn: j,
    readOnly: false,
    spellCheck: false,
    stripPastedStyles: false
   };
  }
 };
 e.exports = o;
}, null);

__d("TextEditorCompositionHandler", [ "ComposedInlineStyle", "DocumentModifier", "EditorChangeType", "EditorState", "Keys", "isSelectionAtLeafStart" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 var m = g.NONE, n = 20, o = {
  onBeforeInput: function(p) {
   this._textInputData = (this._textInputData || "") + p.data;
  },
  onCompositionStart: function() {
   this._stillComposing = true;
  },
  onCompositionEnd: function(p) {
   this._resolved = false;
   this._stillComposing = false;
   setTimeout(function() {
    if (!this._resolved) o.resolveComposition.call(this);
   }.bind(this), n);
  },
  onKeyDown: function(p) {
   if (p.which === k.RIGHT || p.which === k.LEFT) p.preventDefault();
  },
  onKeyPress: function(p) {
   if (p.which === k.RETURN) p.preventDefault();
  },
  resolveComposition: function() {
   if (this._stillComposing) return;
   this._resolved = true;
   var p = this._textInputData;
   this._textInputData = "";
   var q = j.set(this.props.editorState, {
    inCompositionMode: false
   }), r = !p || l(q);
   if (r) this.restoreEditorDOM();
   this.exitCurrentMode();
   this.removeRenderGuard();
   if (p) {
    var s = h.replaceText(q.getCurrentContent(), q.getSelection(), p, m, null);
    this.update(j.push(q, s, i.INSERT_CHARACTERS));
    return;
   }
   if (r) this.update(j.set(q, {
    nativelyRenderedContent: null,
    forceSelection: true
   }));
  }
 };
 e.exports = o;
}, null);

__d("ElementForBlockType", [ "ComposedBlockType" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 var h = {
  getElement: function(i) {
   switch (i) {
   case g.HEADER_ONE:
    return "h2";

   case g.HEADER_TWO:
    return "h3";

   case g.UNORDERED_LIST_ITEM:
   case g.ORDERED_LIST_ITEM:
    return "li";

   case g.BLOCKQUOTE:
    return "blockquote";

   case g.MEDIA:
    return "figure";

   default:
    return "div";
   }
  },
  getWrapperElement: function(i) {
   switch (i) {
   case g.UNORDERED_LIST_ITEM:
   case g.ORDERED_LIST_ITEM:
    return "ul";

   case g.CODE:
    return "pre";

   default:
    return null;
   }
  }
 };
 e.exports = h;
}, null);

__d("TextEditorTextNode.react", [ "React", "UserAgent_DEPRECATED", "getTextContentAccessor" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var j = h.ie() <= 11, k = i();
 function l(p) {
  return j ? p[k] === "\n" : p.tagName === "BR";
 }
 var m = j ? g.createElement("span", {
  key: "A"
 }, "\n") : g.createElement("br", {
  key: "A"
 }), n = j ? g.createElement("span", {
  key: "B"
 }, "\n") : g.createElement("br", {
  key: "B"
 }), o = g.createClass({
  displayName: "TextEditorTextNode",
  shouldComponentUpdate: function(p) {
   var q = g.findDOMNode(this), r = p.children === "";
   if (r) return !l(q);
   return q[k] !== p.children;
  },
  componentWillUpdate: function() {
   this.forceFlag = !this.forceFlag;
  },
  render: function() {
   if (this.props.children === "") return this.forceFlag ? m : n;
   return g.createElement("span", {
    key: this.forceFlag ? "A" : "B"
   }, this.props.children);
  }
 });
 e.exports = o;
}, null);

__d("TextEditorLeaf.react", [ "DocumentCharacters", "React", "SelectionState", "TextEditorTextNode.react", "setDocumentSelection" ], function(a, b, c, d, e, f, g, h, i, j, k) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var l = h, m = l.PropTypes, n = g.SOFT_NEWLINE, o = 3, p = h.createClass({
  displayName: "TextEditorLeaf",
  propTypes: {
   selection: m.instanceOf(i),
   start: m.number.isRequired,
   blockKey: m.string.isRequired,
   text: m.string.isRequired,
   style: m.number,
   inlineStyleFn: m.func.isRequired,
   isLast: m.bool.isRequired
  },
  _setSelection: function() {
   var q = this.props.selection;
   if (q == null || !q.getHasFocus()) return;
   var r = this.props.start, s = r + this.props.text.length, t = this.props.blockKey;
   if (!q.hasEdgeWithin(t, r, s)) return;
   var u = h.findDOMNode(this), v = u.firstChild, w;
   if (v.nodeType === o) {
    w = v;
   } else if (v.tagName === "BR") {
    w = u;
   } else w = v.firstChild;
   k(q, w, t, r, s);
  },
  shouldComponentUpdate: function(q) {
   return h.findDOMNode(this.refs.leaf).textContent !== q.text || q.forceSelection;
  },
  componentDidUpdate: function() {
   this._setSelection();
  },
  componentDidMount: function() {
   this._setSelection();
  },
  render: function() {
   var q = this.props.text;
   if (q.endsWith(n) && this.props.isLast) q += n;
   var r;
   if (this.props.style) r = this.props.inlineStyleFn(this.props.style);
   return h.createElement("span", {
    "data-offset-key": this.props.offsetKey,
    className: r,
    ref: "leaf"
   }, h.createElement(j, null, q));
  }
 });
 e.exports = p;
}, null);

__d("TextEditorBlock.react", [ "AbstractDocumentDecorator", "ContentBlock", "DocumentOffsetKey", "ElementForBlockType", "React", "SelectionState", "Style", "TextEditorLeaf.react", "UnicodeBidiDirection", "cx", "getElementPosition", "getScrollPosition", "getViewportDimensions", "joinClasses" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t) {
 b.__markCompiled && b.__markCompiled();
 var u = k, v = u.PropTypes, w = o.LTR, x = o.RTL, y = 10, z = k.createClass({
  displayName: "TextEditorBlock",
  propTypes: {
   block: v.instanceOf(h).isRequired,
   tree: v.object.isRequired,
   selection: v.instanceOf(l).isRequired,
   decorator: v.instanceOf(g),
   forceSelection: v.bool.isRequired,
   direction: v.string.isRequired,
   blockProps: v.object,
   startIndent: v.bool,
   blockStyleFn: v.func.isRequired,
   inlineStyleFn: v.func.isRequired
  },
  shouldComponentUpdate: function(ba) {
   return this.props.block !== ba.block || this.props.tree !== ba.tree || this.props.direction !== ba.direction || aa(ba.selection, ba.block.getKey()) && ba.forceSelection;
  },
  componentDidMount: function() {
   var ba = this.props.selection, ca = ba.getEndKey();
   if (!ba.getHasFocus() || ca !== this.props.block.getKey()) return;
   var da = k.findDOMNode(this), ea = m.getScrollParent(da), fa = r(ea), ga;
   if (ea === window) {
    var ha = q(da), ia = ha.y + ha.height, ja = s().height;
    ga = ia - ja;
    if (ga > 0) window.scrollTo(fa.x, fa.y + ga + y);
   } else {
    var ka = da.offsetHeight + da.offsetTop, la = ea.offsetHeight + fa.y;
    ga = ka - la;
    if (ga > 0) ea.scrollTop += ga + y;
   }
  },
  _renderChildren: function() {
   var ba = this.props.block, ca = ba.getKey(), da = ba.getText(), ea = this.props.tree.size - 1, fa = aa(this.props.selection, ca);
   return this.props.tree.map(function(ga, ha) {
    var ia = ga.get("leaves"), ja = ia.size - 1, ka = ia.map(function(pa, qa) {
     var ra = i.encode(ca, ha, qa), sa = pa.get("start"), ta = pa.get("end");
     return k.createElement(n, {
      key: ra,
      offsetKey: ra,
      blockKey: ca,
      start: sa,
      selection: fa ? this.props.selection : null,
      forceSelection: this.props.forceSelection,
      text: da.slice(sa, ta),
      style: ba.getInlineStyleAt(sa),
      inlineStyleFn: this.props.inlineStyleFn,
      isLast: ha === ea && qa === ja
     });
    }.bind(this)).toArray(), la = ga.get("decoratorKey");
    if (la == null) return ka;
    var ma = this.props.decorator.getComponentForKey(la);
    if (!ma) return ka;
    var na = this.props.decorator.getPropsForKey(la), oa = i.encode(ca, ha, 0);
    return k.createElement(ma, k.__spread({}, na, {
     key: oa,
     entityKey: ba.getEntityAt(ga.get("start")),
     offsetKey: oa
    }), ka);
   }.bind(this)).toArray();
  },
  render: function() {
   var ba = this.props.block, ca = ba.getKey(), da = ba.getDepth(), ea = j.getElement(ba.getType()), fa = t(this.props.blockStyleFn(ba.getType()), "_209g" + (this.props.direction === w ? " " + "_2vxa" : "") + (this.props.direction === x ? " " + "_2vxb" : ""));
   if (ea === "li") {
    var ga = this.props.startIndent;
    fa = t(fa, (ga && da === 0 ? "_2yj9" : "") + (ga && da === 1 ? " " + "_2yja" : "") + (ga && da === 2 ? " " + "_2yjb" : "") + (ga && da === 3 ? " " + "_2yje" : "") + (ga && da === 4 ? " " + "_2yjf" : "") + (da === 0 ? " " + "_2yjg" : "") + (da === 1 ? " " + "_2yjh" : "") + (da === 2 ? " " + "_2yji" : "") + (da === 3 ? " " + "_2yjj" : "") + (da === 4 ? " " + "_2yjn" : ""));
   }
   var ha = Object.assign({
    "data-block": true,
    "data-offset-key": i.encode(ca, 0, 0),
    className: fa
   }, this.props.blockProps);
   return k.createElement(ea, k.__spread({}, ha), this._renderChildren());
  }
 });
 function aa(ba, ca) {
  return ba.getAnchorKey() === ca || ba.getFocusKey() === ca;
 }
 e.exports = z;
}, null);

__d("UnicodeBidi", [ "Locale", "UnicodeBidiDirection" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var i = {
  L: "A-Za-zªµºÀ-ÖØ-öø-ƺƻ" + "Ƽ-ƿǀ-ǃǄ-ʓʔʕ-ʯʰ-ʸ" + "ʻ-ˁː-ˑˠ-ˤˮͰ-ͳͶ-ͷ" + "ͺͻ-ͽͿΆΈ-ΊΌΎ-Ρ" + "Σ-ϵϷ-ҁ҂Ҋ-ԯԱ-Ֆՙ" + "՚-՟ա-և։ःऄ-हऻऽ" + "ा-ीॉ-ौॎ-ॏॐक़-ॡ।-॥" + "०-९॰ॱॲ-ঀং-ঃঅ-ঌ" + "এ-ঐও-নপ-রলশ-হঽ" + "া-ীে-ৈো-ৌৎৗড়-ঢ়" + "য়-ৡ০-৯ৰ-ৱ৴-৹৺ਃ" + "ਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼" + "ਵ-ਸ਼ਸ-ਹਾ-ੀਖ਼-ੜਫ਼੦-੯" + "ੲ-ੴઃઅ-ઍએ-ઑઓ-નપ-ર" + "લ-ળવ-હઽા-ીૉો-ૌૐ" + "ૠ-ૡ૦-૯૰ଂ-ଃଅ-ଌଏ-ଐ" + "ଓ-ନପ-ରଲ-ଳଵ-ହଽାୀ" + "େ-ୈୋ-ୌୗଡ଼-ଢ଼ୟ-ୡ୦-୯" + "୰ୱ୲-୷ஃஅ-ஊஎ-ஐஒ-க" + "ங-சஜஞ-டண-தந-பம-ஹ" + "ா-ிு-ூெ-ைொ-ௌௐௗ" + "௦-௯௰-௲ఁ-ఃఅ-ఌఎ-ఐ" + "ఒ-నప-హఽు-ౄౘ-ౙౠ-ౡ" + "౦-౯౿ಂ-ಃಅ-ಌಎ-ಐಒ-ನ" + "ಪ-ಳವ-ಹಽಾಿೀ-ೄೆ" + "ೇ-ೈೊ-ೋೕ-ೖೞೠ-ೡ೦-೯" + "ೱ-ೲം-ഃഅ-ഌഎ-ഐഒ-ഺഽ" + "ാ-ീെ-ൈൊ-ൌൎൗൠ-ൡ" + "൦-൯൰-൵൹ൺ-ൿං-ඃඅ-ඖ" + "ක-නඳ-රලව-ෆා-ෑෘ-ෟ" + "෦-෯ෲ-ෳ෴ก-ะา-ำเ-ๅ" + "ๆ๏๐-๙๚-๛ກ-ຂຄງ-ຈ" + "ຊຍດ-ທນ-ຟມ-ຣລວ" + "ສ-ຫອ-ະາ-ຳຽເ-ໄໆ" + "໐-໙ໜ-ໟༀ༁-༃༄-༒༓༔" + "༕-༗༚-༟༠-༩༪-༳༴༶༸" + "༾-༿ཀ-ཇཉ-ཬཿ྅ྈ-ྌ" + "྾-࿅࿇-࿌࿎-࿏࿐-࿔࿕-࿘" + "࿙-࿚က-ဪါ-ာေးျ-ြဿ" + "၀-၉၊-၏ၐ-ၕၖ-ၗၚ-ၝၡ" + "ၢ-ၤၥ-ၦၧ-ၭၮ-ၰၵ-ႁ" + "ႃ-ႄႇ-ႌႎႏ႐-႙ႚ-ႜ" + "႞-႟Ⴀ-ჅჇჍა-ჺ჻ჼ" + "ჽ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈ" + "ኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅ" + "ወ-ዖዘ-ጐጒ-ጕጘ-ፚ፠-፨" + "፩-፼ᎀ-ᎏᎠ-Ᏼᐁ-ᙬ᙭-᙮" + "ᙯ-ᙿᚁ-ᚚᚠ-ᛪ᛫-᛭ᛮ-ᛰ" + "ᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱ᜵-᜶" + "ᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳាើ-ៅ" + "ះ-ៈ។-៖ៗ៘-៚ៜ០-៩" + "᠐-᠙ᠠ-ᡂᡃᡄ-ᡷᢀ-ᢨᢪ" + "ᢰ-ᣵᤀ-ᤞᤣ-ᤦᤩ-ᤫᤰ-ᤱ" + "ᤳ-ᤸ᥆-᥏ᥐ-ᥭᥰ-ᥴᦀ-ᦫ" + "ᦰ-ᧀᧁ-ᧇᧈ-ᧉ᧐-᧙᧚ᨀ-ᨖ" + "ᨙ-ᨚ᨞-᨟ᨠ-ᩔᩕᩗᩡᩣ-ᩤ" + "ᩭ-ᩲ᪀-᪉᪐-᪙᪠-᪦ᪧ᪨-᪭" + "ᬄᬅ-ᬳᬵᬻᬽ-ᭁᭃ-᭄ᭅ-ᭋ" + "᭐-᭙᭚-᭠᭡-᭪᭴-᭼ᮂᮃ-ᮠ" + "ᮡᮦ-ᮧ᮪ᮮ-ᮯ᮰-᮹ᮺ-ᯥᯧ" + "ᯪ-ᯬᯮ᯲-᯳᯼-᯿ᰀ-ᰣᰤ-ᰫ" + "ᰴ-ᰵ᰻-᰿᱀-᱉ᱍ-ᱏ᱐-᱙" + "ᱚ-ᱷᱸ-ᱽ᱾-᱿᳀-᳇᳓᳡" + "ᳩ-ᳬᳮ-ᳱᳲ-ᳳᳵ-ᳶᴀ-ᴫ" + "ᴬ-ᵪᵫ-ᵷᵸᵹ-ᶚᶛ-ᶿḀ-ἕ" + "Ἐ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝ" + "Ὗ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌ" + "ῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‎" + "ⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝ" + "ℤΩℨK-ℭℯ-ℴℵ-ℸℹ" + "ℼ-ℿⅅ-ⅉⅎ⅏Ⅰ-ↂↃ-ↄ" + "ↅ-ↈ⌶-⍺⎕⒜-ⓩ⚬⠀-⣿" + "Ⰰ-Ⱞⰰ-ⱞⱠ-ⱻⱼ-ⱽⱾ-ⳤ" + "Ⳬ-ⳮⳲ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ" + "⵰ⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾ" + "ⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々〆〇" + "〡-〩〮-〯〱-〵〸-〺〻〼" + "ぁ-ゖゝ-ゞゟァ-ヺー-ヾヿ" + "ㄅ-ㄭㄱ-ㆎ㆐-㆑㆒-㆕㆖-㆟" + "ㆠ-ㆺㇰ-ㇿ㈀-㈜㈠-㈩㈪-㉇" + "㉈-㉏㉠-㉻㉿㊀-㊉㊊-㊰㋀-㋋" + "㋐-㋾㌀-㍶㍻-㏝㏠-㏾㐀-䶵" + "一-鿌ꀀ-ꀔꀕꀖ-ꒌꓐ-ꓷꓸ-ꓽ" + "꓾-꓿ꔀ-ꘋꘌꘐ-ꘟ꘠-꘩ꘪ-ꘫ" + "Ꙁ-ꙭꙮꚀ-ꚛꚜ-ꚝꚠ-ꛥꛦ-ꛯ" + "꛲-꛷Ꜣ-ꝯꝰꝱ-ꞇ꞉-꞊Ꞌ-ꞎ" + "Ꞑ-ꞭꞰ-Ʇꟷꟸ-ꟹꟺꟻ-ꠁ" + "ꠃ-ꠅꠇ-ꠊꠌ-ꠢꠣ-ꠤꠧ꠰-꠵" + "꠶-꠷ꡀ-ꡳꢀ-ꢁꢂ-ꢳꢴ-ꣃ" + "꣎-꣏꣐-꣙ꣲ-ꣷ꣸-꣺ꣻ꤀-꤉" + "ꤊ-ꤥ꤮-꤯ꤰ-ꥆꥒ-꥓꥟ꥠ-ꥼ" + "ꦃꦄ-ꦲꦴ-ꦵꦺ-ꦻꦽ-꧀꧁-꧍" + "ꧏ꧐-꧙꧞-꧟ꧠ-ꧤꧦꧧ-ꧯ" + "꧰-꧹ꧺ-ꧾꨀ-ꨨꨯ-ꨰꨳ-ꨴ" + "ꩀ-ꩂꩄ-ꩋꩍ꩐-꩙꩜-꩟ꩠ-ꩯ" + "ꩰꩱ-ꩶ꩷-꩹ꩺꩻꩽꩾ-ꪯꪱ" + "ꪵ-ꪶꪹ-ꪽꫀꫂꫛ-ꫜꫝ꫞-꫟" + "ꫠ-ꫪꫫꫮ-ꫯ꫰-꫱ꫲꫳ-ꫴꫵ" + "ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮ" + "ꬰ-ꭚ꭛ꭜ-ꭟꭤ-ꭥꯀ-ꯢꯣ-ꯤ" + "ꯦ-ꯧꯩ-ꯪ꯫꯬꯰-꯹가-힣" + "ힰ-ퟆퟋ-ퟻ-豈-舘並-龎" + "ﬀ-ﬆﬓ-ﬗＡ-Ｚａ-ｚｦ-ｯｰ" + "ｱ-ﾝﾞ-ﾟﾠ-ﾾￂ-ￇￊ-ￏ" + "ￒ-ￗￚ-ￜ",
  R: "֐־׀׃׆׈-׏א-ת׫-ׯ" + "װ-ײ׳-״׵-׿߀-߉ߊ-ߪ" + "ߴ-ߵߺ߻-߿ࠀ-ࠕࠚࠤࠨ" + "࠮-࠯࠰-࠾࠿ࡀ-ࡘ࡜-࡝࡞" + "࡟-࢟‏יִײַ-ﬨשׁ-זּ﬷טּ-לּ" + "﬽מּ﬿נּ-סּ﭂ףּ-פּ﭅צּ-ﭏ",
  AL: "؈؋؍؛؜؝؞-؟ؠ-ؿـ" + "ف-ي٭ٮ-ٯٱ-ۓ۔ەۥ-ۦ" + "ۮ-ۯۺ-ۼ۽-۾ۿ܀-܍܎܏" + "ܐܒ-ܯ݋-݌ݍ-ޥޱ޲-޿" + "ࢠ-ࢲࢳ-ࣣﭐ-ﮱ﮲-﯁﯂-﯒" + "ﯓ-ﴽ﵀-﵏ﵐ-ﶏ﶐-﶑ﶒ-ﷇ" + "﷈-﷏ﷰ-ﷻ﷼﷾-﷿ﹰ-ﹴ﹵" + "ﹶ-ﻼ﻽-﻾"
 }, j = i.L + i.R + i.AL, k = i.R + i.AL, l = new RegExp("[" + j + "]"), m = new RegExp("[" + k + "]");
 function n(t) {
  var u = l.exec(t);
  if (!u) return h.NEUTRAL;
  var v = m.exec(u[0]);
  return v ? h.RTL : h.LTR;
 }
 function o(t, u) {
  u = u || h.NEUTRAL;
  if (!t.length) return u;
  var v = n(t);
  return v === h.NEUTRAL ? u : v;
 }
 function p(t, u) {
  if (!u || !h.isStrong(u)) u = g.getDirection();
  return o(t, u);
 }
 function q(t, u) {
  return p(t, u) === h.LTR;
 }
 function r(t, u) {
  return p(t, u) === h.RTL;
 }
 var s = {
  firstStrongCharDir: n,
  resolveBlockDir: o,
  getDirection: p,
  isDirectionLTR: q,
  isDirectionRTL: r
 };
 e.exports = s;
}, null);

__d("UnicodeBidiService", [ "Locale", "UnicodeBidi", "UnicodeBidiDirection", "invariant" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function k(l) {
  if (!l) l = g.getDirection();
  j(i.isStrong(l));
  this.defaultDir = l;
  this.reset();
 }
 k.prototype.reset = function() {
  this.lastDir = this.defaultDir;
 };
 k.prototype.getDirection = function(l) {
  this.lastDir = h.getDirection(l, this.lastDir);
  return this.lastDir;
 };
 e.exports = k;
}, null);

__d("TextEditorContents.react", [ "DocumentOffsetKey", "EditorState", "ElementForBlockType", "React", "TextEditorBlock.react", "UnicodeBidiService", "cx" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var n = j, o = n.PropTypes, p = j.createClass({
  displayName: "TextEditorContents",
  propTypes: {
   bidiService: o.instanceOf(l).isRequired,
   blockRendererFn: o.func,
   blockStyleFn: o.func.isRequired,
   editorState: o.instanceOf(h).isRequired,
   inlineStyleFn: o.func.isRequired
  },
  shouldComponentUpdate: function(r) {
   var s = this.props.editorState, t = r.editorState, u = s.getSelection().getHasFocus(), v = t.getSelection().getHasFocus();
   if (u !== v) return true;
   var w = t.getNativelyRenderedContent(), x = s.isInCompositionMode(), y = t.isInCompositionMode();
   if (s === t || w !== null && t.getCurrentContent() === w || x && y) return false;
   var z = s.getCurrentContent(), aa = t.getCurrentContent(), ba = s.getDecorator(), ca = t.getDecorator();
   return x !== y || z !== aa || ba !== ca || t.mustForceSelection();
  },
  render: function() {
   var r = this.props.editorState, s = r.getCurrentContent(), t = r.getSelection(), u = r.mustForceSelection(), v = s.getBlocksAsArray(), w = [], x = null, y = null, z = null, aa, ba, ca, da, ea, fa, ga, ha;
   for (var ia = 0; ia < v.length; ia++) {
    ca = v[ia];
    da = ca.getKey();
    ea = ca.getText();
    fa = ca.getType();
    var ja = this.props.blockRendererFn(ca) || q, ka = ja.component, la = ja.props;
    aa = ka;
    ga = j.createElement(aa, {
     key: da,
     tree: r.getBlockTree(da),
     decorator: r.getDecorator(),
     block: ca,
     selection: t,
     forceSelection: u,
     direction: this.props.bidiService.getDirection(ea),
     blockProps: la,
     startIndent: z === null || ca.getDepth() > z,
     blockStyleFn: this.props.blockStyleFn,
     inlineStyleFn: this.props.inlineStyleFn
    });
    ha = i.getWrapperElement(fa);
    if (ha) {
     if (y !== ha) {
      ba = [];
      x = j.createElement(ha, {
       className: "_4noe",
       key: da + "-wrap",
       "data-offset-key": g.encode(da, 0, 0)
      }, ba);
      y = ha;
      w.push(x);
     }
     z = ca.getDepth();
     ba.push(ga);
    } else {
     ba = null;
     x = null;
     y = null;
     z = null;
     w.push(ga);
    }
   }
   return j.createElement("div", {
    "data-contents": "true"
   }, w);
  }
 }), q = {
  component: k,
  props: null
 };
 e.exports = p;
}, null);

__d("TextEditorModes", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 var g = {
  EDIT: 0,
  COMPOSITE: 1,
  DRAG: 2,
  RENDER: 3,
  CUT: 4
 };
 e.exports = g;
}, null);

__d("getSafeBodyFromHTML", [ "UserAgent" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 var h = g.isBrowser("IE <= 9");
 function i(j) {
  var k, l = null;
  if (!h && document.implementation && document.implementation.createHTMLDocument) {
   k = document.implementation.createHTMLDocument("foo");
   k.documentElement.innerHTML = j;
   l = k.getElementsByTagName("body")[0];
  }
  return l;
 }
 e.exports = i;
}, null);

__d("TextEditorPasteHandler", [ "CharacterMetadata", "ComposedBlockType", "ComposedInlineStyle", "ContentBlock", "DocumentCharacters", "immutable", "arrayContains", "fillArray", "generateBlockKey", "getSafeBodyFromHTML" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {
 b.__markCompiled && b.__markCompiled();
 var q = h, r = q.UNSTYLED, s = i, t = s.BOLD, u = s.ITALIC, v = s.UNDERLINE, w = s.NONE, x = g, y = x.EMPTY, z = k, aa = z.BLOCK_DELIMITER, ba = z.SOFT_NEWLINE, ca = l, da = ca.List, ea = ca.Repeat, fa = "&nbsp;", ga = " ", ha = new RegExp(aa, "g"), ia = new RegExp(ba, "g"), ja = new RegExp(fa, "g"), ka = [ "p", "h1", "h2", "h3", "li", "blockquote", "pre" ], la = {
  strong: t,
  b: t,
  em: u,
  i: u,
  u: v
 };
 function ma() {
  return {
   text: "",
   inlines: [],
   blocks: []
  };
 }
 function na() {
  return {
   text: ga,
   inlines: [ w ],
   blocks: []
  };
 }
 function oa() {
  return {
   text: ba,
   inlines: [ w ],
   blocks: []
  };
 }
 function pa(xa) {
  return {
   text: aa,
   inlines: [ w ],
   blocks: [ xa ]
  };
 }
 function qa(xa, ya) {
  switch (xa) {
  case "h1":
   return h.HEADER_ONE;

  case "h2":
   return h.HEADER_TWO;

  case "li":
   if (ya === "ol") return h.ORDERED_LIST_ITEM;
   return h.UNORDERED_LIST_ITEM;

  case "blockquote":
   return h.BLOCKQUOTE;

  case "pre":
   return h.CODE;

  default:
   return h.UNSTYLED;
  }
 }
 function ra(xa, ya, za) {
  var ab = la[xa];
  if (ab) {
   za |= ab;
  } else if (ya.style) {
   za |= ya.style.fontWeight === "bold" ? t : 0;
   za |= ya.style.fontStyle === "italic" ? u : 0;
   za |= ya.style.textDecoration === "underline" ? v : 0;
  }
  return za;
 }
 function sa(xa, ya) {
  if (xa.text.slice(-1) === aa && ya.text.slice(0, 1) === aa) {
   xa.text = xa.text.slice(0, -1);
   xa.inlines.pop();
   xa.blocks.pop();
  }
  if (xa.text.slice(-1) === aa && (ya.text === ga || ya.text === ba)) return xa;
  return {
   text: xa.text + ya.text,
   inlines: xa.inlines.concat(ya.inlines),
   blocks: xa.blocks.concat(ya.blocks)
  };
 }
 function ta(xa) {
  return ka.some(function(ya) {
   return xa.indexOf("<" + ya) !== -1;
  });
 }
 function ua(xa, ya, za, ab, bb) {
  var cb = xa.nodeName.toLowerCase(), db = false;
  if (cb === "#text") {
   var eb = xa.textContent;
   if (eb.trim() === "" && ab !== "pre") return na();
   if (ab !== "pre") eb = eb.replace(ia, ga);
   return {
    text: eb,
    inlines: n(eb.length, ya),
    blocks: []
   };
  }
  if (cb === "br") return oa();
  var fb = ma(), gb;
  ya = ra(cb, xa, ya);
  if (cb === "ul" || cb === "ol") za = cb;
  if (!ab && m(bb, cb)) {
   fb = pa(qa(cb, za));
   ab = cb;
   db = true;
  }
  xa = xa.firstChild;
  while (xa) {
   gb = ua(xa, ya, za, ab, bb);
   fb = sa(fb, gb);
   xa = xa.nextSibling;
  }
  if (db) fb = sa(fb, pa(r));
  return fb;
 }
 function va(xa) {
  xa = xa.trim().replace(ha, "").replace(ja, ga);
  var ya = p(xa);
  if (!ya) return null;
  var za = ta(xa) ? ka : [ "div" ], ab = ua(ya, w, "ul", null, za);
  if (ab.text.indexOf(aa) === 0) ab = {
   text: ab.text.slice(1),
   inlines: ab.inlines.slice(1),
   blocks: ab.blocks
  };
  if (ab.text.slice(-1) === aa) {
   ab.text = ab.text.slice(0, -1);
   ab.inlines = ab.inlines.slice(0, -1);
   ab.blocks.pop();
  }
  if (ab.blocks.length === 0) ab.blocks.push(r);
  if (ab.text.split(aa).length === ab.blocks.length + 1) ab.blocks.unshift(r);
  return ab;
 }
 var wa = {
  processHTML: function(xa) {
   var ya = va(xa);
   if (!ya) return null;
   var za = 0;
   return ya.text.split(aa).map(function(ab, bb) {
    var cb = za + ab.length, db = da(ya.inlines.slice(za, cb).map(function(eb) {
     return new g({
      style: eb
     });
    }));
    za = cb + 1;
    return new j({
     key: o(),
     type: ya.blocks[bb],
     text: ab,
     characterList: db
    });
   });
  },
  processText: function(xa) {
   return xa.map(function(ya) {
    return new j({
     key: o(),
     type: r,
     text: ya,
     characterList: da(ea(y, ya.length))
    });
   });
  }
 };
 e.exports = wa;
}, null);

__d("TextEditorEditHandler", [ "BlockTree", "DataTransfer", "DocumentCharacters", "DocumentCommands", "DocumentModifier", "DocumentOffsetKey", "DocumentRemovableWord", "DocumentRemovalDirection", "EditorChangeType", "EditorState", "Keys", "React", "TextEditorModes", "TextEditorPasteHandler", "UnicodeUtils", "UserAgent", "areEqual", "createOrderedMapFromBlockArray", "findAncestorOffsetKey", "getActiveElement", "getContentStateFragment", "getDocumentSelection", "getEntityKeyForSelection", "getTextContentFromFiles", "isSelectionAtLeafStart" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, aa, ba, ca, da, ea) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var fa = i.SOFT_NEWLINE, ga = v.isEngine("WebKit"), ha = null, ia = {
  onFocus: function(jb) {
   var kb = this.props.editorState, lb = kb.getSelection();
   if (lb.getHasFocus()) return;
   var mb = lb.set("hasFocus", true);
   this.props.onFocus && this.props.onFocus(jb);
   this.update(p.acceptSelection(kb, mb));
  },
  onBlur: function(jb) {
   if (ga && z() === document.body) a.getSelection().removeAllRanges();
   var kb = this.props.editorState, lb = kb.getSelection();
   if (!lb.getHasFocus()) return;
   var mb = lb.set("hasFocus", false);
   this.props.onBlur && this.props.onBlur(jb);
   this.update(p.acceptSelection(kb, mb));
  },
  onBeforeInput: function(jb) {
   var kb = jb.data;
   if (!kb) return;
   if (this.props.handleBeforeInput && this.props.handleBeforeInput(kb)) {
    jb.preventDefault();
    return;
   }
   var lb = this.props.editorState, mb = lb.getSelection();
   if (!mb.isCollapsed()) {
    jb.preventDefault();
    this.update(ma(lb, kb, lb.getCurrentInlineStyle(), ca(lb.getCurrentContent(), lb.getSelection())));
    return;
   }
   var nb = !ea(lb), ob = ma(lb, kb, lb.getCurrentInlineStyle(), ca(lb.getCurrentContent(), lb.getSelection()));
   if (!nb) {
    jb.preventDefault();
    this.update(ob);
    return;
   }
   var pb = mb.getAnchorKey(), qb = lb.getBlockTree(pb), rb = g.getFingerprint(qb), sb = g.getFingerprint(ob.getBlockTree(pb));
   if (ib(kb) || rb !== sb) {
    jb.preventDefault();
   } else ob = p.set(ob, {
    nativelyRenderedContent: ob.getCurrentContent()
   });
   this.update(ob);
  },
  onSelect: function(jb) {
   if (this._blockSelectEvents) return;
   var kb = this.props.editorState, lb = ba(kb, r.findDOMNode(this.refs.editorContainer).firstChild), mb = lb.selectionState;
   if (mb !== kb.getSelection()) {
    if (!!lb.needsRecovery) {
     kb = p.forceSelection(kb, mb);
    } else kb = p.acceptSelection(kb, mb);
    this.update(kb);
   }
  },
  onKeyDown: function(jb) {
   var kb = jb.which, lb = this.props.editorState;
   switch (kb) {
   case q.RETURN:
    jb.preventDefault();
    if (!this.props.handleReturn || !this.props.handleReturn(jb)) this.update(xa(lb));
    return;

   case q.ESC:
    jb.preventDefault();
    this.props.onEscape && this.props.onEscape(jb);
    return;

   case q.TAB:
    this.props.onTab && this.props.onTab(jb);
    return;

   case q.UP:
    this.props.onUpArrow && this.props.onUpArrow(jb);
    return;

   case q.DOWN:
    this.props.onDownArrow && this.props.onDownArrow(jb);
    return;
   }
   var mb = this.props.keyBindingFn(jb);
   if (!mb) return;
   jb.preventDefault();
   if (this.props.handleKeyCommand && this.props.handleKeyCommand(mb)) return;
   if (mb === j.UNDO) {
    ka(lb, this.update);
    return;
   }
   var nb = ja(mb, lb);
   if (nb !== lb) this.update(nb);
  },
  onCharacterData: function(jb) {
   var kb = y(jb), lb = this.props.editorState, mb = lb.getSelection(), nb = lb.getCurrentContent(), ob = l.decode(kb), pb = ob.blockKey, qb = lb.getBlockTree(pb), rb = qb.getIn([ ob.decoratorKey, "leaves", ob.leafKey ]), sb = nb.getBlockForKey(pb);
   if (sb.getText().slice(rb.start, rb.end) === jb.textContent) return;
   var tb = lb.getSelection().merge({
    anchorOffset: rb.start,
    focusOffset: rb.end,
    isBackward: false
   }), ub = k.replaceText(nb, tb, jb.textContent, sb.getInlineStyleAt(rb.start), null), vb = ba(this.props.editorState, r.findDOMNode(this.refs.editorContainer).firstChild), wb = ub.merge({
    selectionBefore: mb,
    selectionAfter: vb.selectionState
   });
   this.update(p.push(lb, wb, o.INSERT_CHARACTERS));
  },
  onDragStart: function(jb) {
   this._internalDrag = true;
   this.setMode(s.DRAG);
  },
  onDragOver: function(jb) {
   this._internalDrag = false;
   this.setMode(s.DRAG);
   jb.preventDefault();
  },
  onCompositionStart: function(jb) {
   this.setRenderGuard();
   this.captureEditorDOM();
   this.setMode(s.COMPOSITE);
   this.update(p.set(this.props.editorState, {
    inCompositionMode: true
   }));
  },
  onCut: function(jb) {
   var kb = this.props.editorState, lb = kb.getSelection();
   if (lb.isCollapsed()) {
    jb.preventDefault();
    return;
   }
   this.setRenderGuard();
   this.captureEditorDOM();
   eb(kb, function(mb) {
    this._clipboard = mb;
    this.setMode(s.CUT);
    setTimeout(function() {
     this.restoreEditorDOM();
     this.removeRenderGuard();
     this.exitCurrentMode();
     this.update(db(kb));
    }.bind(this), 0);
   }.bind(this));
  },
  onCopy: function() {
   eb(this.props.editorState, function(jb) {
    this._clipboard = jb;
   }.bind(this));
  },
  onPaste: function(jb) {
   jb.preventDefault();
   var kb = new h(jb.clipboardData);
   if (!kb.isRichText()) {
    var lb = kb.getFiles(), mb = kb.getText();
    if (lb.length > 0) {
     if (this.props.handlePastedFiles && this.props.handlePastedFiles(lb)) return;
     da(lb, function(xb) {
      xb = xb || mb;
      if (!xb) return;
      var yb = xb.split(fa), zb = t.processText(yb), ac = this.props.editorState, bc = x(zb), cc = k.replaceWithFragment(ac.getCurrentContent(), ac.getSelection(), bc);
      this.update(p.push(ac, cc, o.INSERT_FRAGMENT));
     }.bind(this));
     return;
    }
   }
   var nb, ob = kb.getText();
   this.props.onPasteRawText && this.props.onPasteRawText(ob);
   if (ob) nb = ob.split(fa);
   if (!this.props.stripPastedStyles) {
    if (this._clipboard) {
     var pb = nb.filter(bb), qb = this._clipboard.toSeq().map(function(xb) {
      return xb.getText();
     }).filter(bb).toArray(), rb = w(pb, qb);
     if (rb) {
      this.update(cb(this.props.editorState, this._clipboard));
      return;
     }
    }
    var sb = kb.getHTML();
    if (sb) {
     var tb = t.processHTML(sb);
     if (tb) {
      var ub = x(tb);
      this.update(cb(this.props.editorState, ub));
      return;
     }
    }
    this._clipboard = null;
   }
   if (nb) {
    var vb = t.processText(nb), wb = x(vb);
    this.update(cb(this.props.editorState, wb));
   }
  }
 };
 function ja(jb, kb) {
  switch (jb) {
  case j.UNDO:
   return ka(kb);

  case j.REDO:
   return la(kb);

  case j.DELETE:
   return oa(kb);

  case j.DELETE_WORD:
   return pa(kb);

  case j.BACKSPACE:
   return sa(kb);

  case j.BACKSPACE_WORD:
   return va(kb);

  case j.BACKSPACE_TO_END_OF_BLOCK:
   return wa(kb);

  case j.INSERT_BLOCK_DELIMITER:
   return xa(kb);

  case j.TRANSPOSE_CHARACTERS:
   return ya(kb);

  case j.MOVE_SELECTION_TO_START_OF_BLOCK:
   return za(kb);

  case j.MOVE_SELECTION_TO_END_OF_BLOCK:
   return ab(kb);

  case j.SECONDARY_CUT:
   return qa(kb);

  case j.SECONDARY_PASTE:
   return ra(kb);

  default:
   return kb;
  }
 }
 function ka(jb, kb) {
  var lb = p.undo(jb);
  if (!jb.getNativelyRenderedContent()) {
   kb(lb);
   return;
  }
  kb(p.set(jb, {
   nativelyRenderedContent: null
  }));
  setTimeout(function() {
   kb(lb);
  });
 }
 function la(jb) {
  return p.redo(jb);
 }
 function ma(jb, kb, lb, mb) {
  var nb = k.replaceText(jb.getCurrentContent(), jb.getSelection(), kb, lb, mb || null);
  return p.push(jb, nb, o.INSERT_CHARACTERS);
 }
 function na(jb, kb, lb) {
  var mb = jb.getSelection(), nb = jb.getCurrentContent(), ob = mb;
  if (mb.isCollapsed()) {
   if (lb === n.FORWARD) {
    if (jb.isAtDocumentEnd()) return nb;
   } else if (jb.isAtDocumentStart()) return nb;
   ob = kb(jb);
   if (ob === mb) return nb;
  }
  return k.removeRange(nb, ob, lb);
 }
 function oa(jb) {
  var kb = na(jb, function(mb) {
   var nb = mb.getSelection(), ob = mb.getCurrentContent(), pb = nb.getAnchorKey(), qb = nb.getAnchorOffset(), rb = ob.getBlockForKey(pb).getText()[qb];
   return ua(mb, rb ? u.getUTF16Length(rb, 0) : 1);
  }, n.FORWARD);
  if (kb === jb.getCurrentContent()) return jb;
  kb = kb.set("selectionBefore", jb.getSelection());
  var lb = jb.getSelection().isCollapsed() ? o.DELETE_CHARACTER : o.REMOVE_RANGE;
  return p.push(jb, kb, lb);
 }
 function pa(jb) {
  var kb = na(jb, function(lb) {
   var mb = lb.getSelection(), nb = mb.getStartOffset(), ob = mb.getStartKey(), pb = lb.getCurrentContent(), qb = pb.getBlockForKey(ob).getText().slice(nb), rb = m.getForward(qb) || "";
   return ua(lb, rb.length || 1);
  }, n.FORWARD);
  if (kb === jb.getCurrentContent()) return jb;
  return p.push(jb, kb, o.REMOVE_RANGE);
 }
 function qa(jb) {
  var kb = jb.getCurrentContent(), lb = jb.getSelection(), mb;
  if (lb.isCollapsed()) {
   var nb = lb.getAnchorKey(), ob = kb.getBlockForKey(nb).getLength();
   if (ob === lb.getAnchorOffset()) return jb;
   mb = lb.set("focusOffset", ob);
  } else mb = lb;
  ha = aa(kb, mb);
  var pb = k.removeRange(kb, mb, n.FORWARD);
  if (pb === kb) return jb;
  return p.push(jb, pb, o.REMOVE_RANGE);
 }
 function ra(jb) {
  return ha ? cb(jb, ha) : jb;
 }
 function sa(jb) {
  var kb = na(jb, function(mb) {
   var nb = mb.getSelection(), ob = mb.getCurrentContent(), pb = nb.getAnchorKey(), qb = nb.getAnchorOffset(), rb = ob.getBlockForKey(pb).getText()[qb - 1];
   return ta(mb, rb ? u.getUTF16Length(rb, 0) : 1);
  }, n.BACKWARD);
  if (kb === jb.getCurrentContent()) return jb;
  kb = kb.set("selectionBefore", jb.getSelection());
  var lb = jb.getSelection().isCollapsed() ? o.BACKSPACE_CHARACTER : o.REMOVE_RANGE;
  return p.push(jb, kb, lb);
 }
 function ta(jb, kb) {
  var lb = jb.getSelection(), mb = jb.getCurrentContent(), nb = lb.getStartKey(), ob = lb.getStartOffset(), pb = nb, qb;
  if (kb > ob) {
   var rb = mb.getKeyBefore(nb);
   pb = rb;
   var sb = mb.getBlockForKey(rb);
   qb = sb.getText().length;
  } else qb = ob - kb;
  return lb.merge({
   focusKey: pb,
   focusOffset: qb,
   isBackward: true
  });
 }
 function ua(jb, kb) {
  var lb = jb.getSelection(), mb = lb.getStartKey(), nb = lb.getStartOffset(), ob = jb.getCurrentContent(), pb = mb, qb, rb = ob.getBlockForKey(mb);
  if (kb > rb.getText().length - nb) {
   pb = ob.getKeyAfter(mb);
   qb = 0;
  } else qb = nb + kb;
  return lb.merge({
   focusKey: pb,
   focusOffset: qb
  });
 }
 function va(jb) {
  var kb = na(jb, function(lb) {
   var mb = lb.getSelection(), nb = mb.getStartOffset();
   if (nb === 0) return ta(lb, 1);
   var ob = mb.getStartKey(), pb = lb.getCurrentContent(), qb = pb.getBlockForKey(ob).getText().slice(0, nb), rb = m.getBackward(qb) || "";
   return ta(lb, rb.length || 1);
  }, n.BACKWARD);
  if (kb === jb.getCurrentContent()) return jb;
  return p.push(jb, kb, o.REMOVE_RANGE);
 }
 function wa(jb) {
  var kb = na(jb, function(lb) {
   var mb = lb.getSelection();
   if (mb.getStartOffset() === 0) return ta(lb, 1);
   return mb.merge({
    focusOffset: 0,
    isBackward: true
   });
  }, n.BACKWARD);
  if (kb === jb.getCurrentContent()) return jb;
  return p.push(jb, kb, o.REMOVE_RANGE);
 }
 function xa(jb) {
  var kb = k.splitBlock(jb.getCurrentContent(), jb.getSelection());
  return p.push(jb, kb, o.SPLIT_BLOCK);
 }
 function ya(jb) {
  var kb = jb.getSelection();
  if (!kb.isCollapsed()) return jb;
  var lb = kb.getAnchorOffset();
  if (lb === 0) return jb;
  var mb = kb.getAnchorKey(), nb = jb.getCurrentContent(), ob = nb.getBlockForKey(mb), pb = ob.getLength();
  if (pb <= 1) return jb;
  var qb, rb;
  if (lb === pb) {
   qb = kb.set("anchorOffset", lb - 1);
   rb = kb;
  } else {
   qb = kb.set("focusOffset", lb + 1);
   rb = qb.set("anchorOffset", lb + 1);
  }
  var sb = aa(nb, qb), tb = k.removeRange(nb, qb, n.BACKWARD), ub = tb.getSelectionAfter(), vb = ub.getAnchorOffset() - 1, wb = ub.merge({
   anchorOffset: vb,
   focusOffset: vb
  }), xb = k.replaceWithFragment(tb, wb, sb), yb = p.push(jb, xb, o.INSERT_FRAGMENT);
  return p.acceptSelection(yb, rb);
 }
 function za(jb) {
  var kb = jb.getSelection(), lb = kb.getStartKey();
  return p.set(jb, {
   selection: kb.merge({
    anchorKey: lb,
    anchorOffset: 0,
    focusKey: lb,
    focusOffset: 0,
    isBackward: false
   }),
   forceSelection: true
  });
 }
 function ab(jb) {
  var kb = jb.getSelection(), lb = kb.getEndKey(), mb = jb.getCurrentContent(), nb = mb.getBlockForKey(lb).getLength();
  return p.set(jb, {
   selection: kb.merge({
    anchorKey: lb,
    anchorOffset: nb,
    focusKey: lb,
    focusOffset: nb,
    isBackward: false
   }),
   forceSelection: true
  });
 }
 function bb(jb) {
  return jb.length > 0;
 }
 function cb(jb, kb) {
  var lb = k.replaceWithFragment(jb.getCurrentContent(), jb.getSelection(), kb);
  return p.push(jb, lb, o.INSERT_FRAGMENT);
 }
 function db(jb) {
  var kb = k.removeRange(jb.getCurrentContent(), jb.getSelection(), n.FORWARD);
  return p.push(jb, kb, o.REMOVE_RANGE);
 }
 function eb(jb, kb) {
  var lb = jb.getSelection();
  if (!lb.isCollapsed()) kb(aa(jb.getCurrentContent(), lb));
 }
 var fb = "'", gb = "/", hb = v.isBrowser("Firefox");
 function ib(jb) {
  return hb && (jb == fb || jb == gb);
 }
 e.exports = ia;
}, null);

__d("TextEditorDragHandler", [ "DataTransfer", "DocumentModifier", "EditorState", "EditorChangeType", "ex", "findAncestorOffsetKey", "getTextContentFromFiles", "getUpdatedSelectionState" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function o(event, s) {
  var t, u;
  if (document.caretRangeFromPoint) {
   var v = document.caretRangeFromPoint(event.x, event.y);
   t = v.startContainer;
   u = v.startOffset;
  } else if (event.rangeParent) {
   t = event.rangeParent;
   u = event.rangeOffset;
  } else return null;
  var w = l(t);
  if (w === null) {
   var x = "";
   if (t.dataset && t.dataset.reactid) x = " Node ID: " + t.dataset.reactid;
   throw new Error(k("Invalid range for drop event." + x + " Offset: " + u));
  }
  return n(s, w, u, w, u);
 }
 var p = {
  onDragEnd: function() {
   this.exitCurrentMode();
  },
  onDrop: function(s) {
   var t = new g(s.nativeEvent.dataTransfer), u = this.props.editorState, v = o(s.nativeEvent, u);
   s.preventDefault();
   this.exitCurrentMode();
   if (v === null) return;
   var w = t.getFiles();
   if (w.length > 0) {
    if (this.props.handleDroppedFiles && this.props.handleDroppedFiles(v, w)) return;
    m(w, function(x) {
     x && this.update(r(u, v, x));
    }.bind(this));
    return;
   }
   if (this._internalDrag) {
    this.update(q(u, v));
    return;
   }
   this.update(r(u, v, t.getText()));
  }
 };
 function q(s, t) {
  var u = h.moveText(s.getCurrentContent(), s.getSelection(), t);
  return i.push(s, u, j.INSERT_FRAGMENT);
 }
 function r(s, t, u) {
  var v = h.insertText(s.getCurrentContent(), t, u, s.getCurrentInlineStyle());
  return i.push(s, v, j.INSERT_FRAGMENT);
 }
 e.exports = p;
}, null);

__d("AbstractTextEditor.react", [ "AbstractTextEditorPlaceholder.react", "AbstractTextEditorProps", "DOMVector", "EditorState", "React", "TextEditorCompositionHandler", "TextEditorContents.react", "TextEditorEditHandler", "TextEditorDragHandler", "TextEditorModes", "UnicodeBidiService", "UserAgent", "cx", "extendArray", "requestAnimationFrame", "setImmediate" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var w = a.MutationObserver || a.WebKitMutationObserver, x = r.isBrowser("Safari") || r.isBrowser("Mobile Safari"), y = !!w;
 function z(ca) {
  return function(da) {
   if (!this.props.readOnly) {
    var ea = this._handler && this._handler[ca];
    ea && ea.call(this, da);
   }
  };
 }
 function aa(ca) {
  switch (ca) {
  case p.EDIT:
   return n;

  case p.COMPOSITE:
   return l;

  case p.DRAG:
   return o;

  case p.CUT:
  case p.RENDER:
   return null;
  }
 }
 var ba = k.createClass({
  displayName: "AbstractTextEditor",
  getDefaultProps: h.getDefaultProps,
  _onBlur: z("onBlur"),
  _onFocus: z("onFocus"),
  _onSelect: z("onSelect"),
  _onKeyDown: z("onKeyDown"),
  _onKeyUp: z("onKeyUp"),
  _onKeyPress: z("onKeyPress"),
  _onMouseDown: z("onMouseDown"),
  _onMouseUp: z("onMouseUp"),
  _onCharacterData: z("onCharacterData"),
  _onCompositionStart: z("onCompositionStart"),
  _onCompositionEnd: z("onCompositionEnd"),
  _onDragStart: z("onDragStart"),
  _onDragOver: z("onDragOver"),
  _onDragEnd: z("onDragEnd"),
  _onDrop: z("onDrop"),
  _onCut: z("onCut"),
  _onCopy: z("onCopy"),
  _onPaste: z("onPaste"),
  _onBeforeInput: z("onBeforeInput"),
  _attachMutationObserver: function() {
   if (!w) return;
   var ca = [], da = function() {
    if (ca.length > 1) {
     var ea = ca[0], fa = ea.target;
     v(function() {
      if (this.isMounted() && fa.parentNode) this._onCharacterData(fa);
     }.bind(this));
    }
    ca.length = 0;
   }.bind(this);
   this._mutationObserver = new w(function(ea) {
    if (this._guardAgainstRender) return;
    if (x) {
     if (ca.length === 0) u(da);
     t(ca, ea);
    } else {
     ca = ea;
     da();
    }
   }.bind(this));
   this._mutationObserver.observe(k.findDOMNode(this.refs.editorContainer), {
    characterDataOldValue: true,
    characterData: true,
    subtree: true
   });
  },
  _renderPlaceholder: function() {
   var ca = this.props.editorState.getCurrentContent(), da = this.props.placeholder && !this.props.editorState.isInCompositionMode() && !ca.hasText();
   if (da) return k.createElement(g, {
    text: this.props.placeholder,
    editorState: this.props.editorState,
    textAlignment: this.props.textAlignment
   });
  },
  render: function() {
   var ca = this.props.textAlignment, da = "_5yw9" + (ca === "left" ? " " + "_48yc" : "") + (ca === "right" ? " " + "_48yd" : "") + (ca === "center" ? " " + "_48ye" : ""), ea = this.props.editorState.getCurrentContent().hasText();
   return k.createElement("div", {
    className: da
   }, this._renderPlaceholder(), k.createElement("div", {
    className: "_5ywa",
    ref: "editorContainer"
   }, k.createElement("div", {
    ref: "editor",
    title: ea ? null : this.props.placeholder,
    role: this.props.role || "textbox",
    "aria-activedescendant": this.props.ariaActiveDescendantID,
    "aria-autocomplete": this.props.ariaAutoComplete,
    "aria-expanded": this.props.ariaExpanded,
    "aria-owns": this.props.ariaOwneeID,
    "aria-haspopup": this.props.ariaHasPopup,
    className: "_54-z",
    onBlur: this._onBlur,
    onFocus: this._onFocus,
    onSelect: this._onSelect,
    onMouseUp: this._onMouseUp,
    onKeyDown: this._onKeyDown,
    onKeyUp: this._onKeyUp,
    onKeyPress: this._onKeyPress,
    onCut: this._onCut,
    onCopy: this._onCopy,
    onPaste: this._onPaste,
    onDragStart: this._onDragStart,
    onDragOver: this._onDragOver,
    onDragEnd: this._onDragEnd,
    onDrop: this._onDrop,
    onCompositionStart: this._onCompositionStart,
    onCompositionEnd: this._onCompositionEnd,
    onBeforeInput: this._onBeforeInput,
    spellCheck: y && this.props.spellCheck,
    contentEditable: !this.props.readOnly
   }, k.createElement(m, {
    bidiService: this._bidiService,
    blockRendererFn: this.props.blockRendererFn,
    blockStyleFn: this.props.blockStyleFn,
    editorState: this.props.editorState,
    inlineStyleFn: this.props.inlineStyleFn
   }))));
  },
  focus: function() {
   var ca = this.props.editorState, da = ca.getSelection().getHasFocus(), ea = i.getScrollPosition();
   k.findDOMNode(this.refs.editor).focus();
   window.scrollTo(ea.x, ea.y);
   if (da) return;
   this.update(j.forceSelection(ca, ca.getSelection()));
  },
  blur: function() {
   k.findDOMNode(this.refs.editor).blur();
  },
  componentDidMount: function() {
   this._renderedVersion = null;
   this._clipboard = null;
   this._clonedEditor = null;
   this._guardAgainstRender = false;
   this._handler = n;
   this._attachMutationObserver();
  },
  componentWillUpdate: function(ca) {
   this._blockSelectEvents = true;
   this._bidiService.reset();
  },
  componentDidUpdate: function() {
   this._blockSelectEvents = false;
  },
  componentWillMount: function() {
   this._bidiService = new q();
  },
  componentWillUnmount: function() {
   if (this._mutationObserver) {
    this._mutationObserver.disconnect();
    this._mutationObserver = null;
   }
  },
  setMode: function(ca) {
   this._handler = aa(ca);
  },
  exitCurrentMode: function() {
   this.setMode(p.EDIT);
  },
  captureEditorDOM: function() {
   this._clonedEditor = k.findDOMNode(this.refs.editor).cloneNode(true);
  },
  restoreEditorDOM: function() {
   var ca = k.findDOMNode(this.refs.editorContainer);
   ca.innerHTML = "";
   ca.appendChild(this._clonedEditor);
   this.focus();
   this._clonedEditor = null;
  },
  setRenderGuard: function() {
   this._guardAgainstRender = true;
  },
  removeRenderGuard: function() {
   this._guardAgainstRender = false;
  },
  update: function(ca) {
   this.props.onChange(ca);
  }
 });
 e.exports = ba;
}, null);

__d("EmoticonSpan.react", [ "DocumentEntity", "React", "cx", "joinClasses" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 var k = {
  smile: "_5uj7",
  frown: "_5uj8",
  tongue: "_5uj9",
  grin: "_5uja",
  gasp: "_5ujb",
  wink: "_5ujc",
  glasses: "_5ujd",
  sunglasses: "_5ujh",
  grumpy: "_5uji",
  unsure: "_5ujj",
  cry: "_5ujw",
  devil: "_5ujx",
  angel: "_5ujy",
  kiss: "_5ujz",
  heart: "_5uk7",
  kiki: "_5ukd",
  squint: "_5ukg",
  confused: "_5ukj",
  confused_rev: "_5ukl",
  upset: "_5ukp",
  pacman: "_5ukq",
  robot: "_5ukr",
  colonthree: "_5uks",
  penguin: "_5ukt",
  putnam: "_5uku",
  shark: "_5ukv",
  like: "_5ukw",
  poop: "_5ukx"
 }, l = h.createClass({
  displayName: "EmoticonSpan",
  render: function() {
   var m = g.get(this.props.entityKey), n = m.getData().type, o = j("_1ty6", k[n]);
   return h.createElement("span", {
    className: o,
    title: n,
    "data-offset-key": this.props.offsetKey
   }, h.createElement("span", {
    className: "_5ukz"
   }, this.props.children));
  }
 });
 e.exports = l;
}, null);

__d("getVisibleValueForContentState", [ "ComposedEntityType", "DocumentCharacters", "DocumentEntity", "emptyFunction" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 var k = g.EMOTICON, l = h.SOFT_NEWLINE;
 function m(n) {
  var o = n.getBlockMap().map(function(p) {
   var q = p.getText(), r = "";
   p.findEntityRanges(j.thatReturnsTrue, function(s, t) {
    var u = p.getEntityAt(s);
    if (u === null) {
     r += q.slice(s, t);
    } else {
     var v = i.get(u);
     if (v.getType() === k) {
      r += v.getData().originalEmoticon;
     } else r += q.slice(s, t);
    }
   });
   return r;
  });
  return o.join(l);
 }
 e.exports = m;
}, null);

__d("handleBeforeInputForEmoticon", [ "DocumentModifier", "EditorChangeType", "EditorState", "applyEmoticonToContentState" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 var k = new RegExp(/[\s'".,!?]/);
 function l(m, n) {
  var o = m.getSelection();
  if (!o.isCollapsed() || !n || !k.test(n)) return m;
  var p = m.getCurrentContent(), q = j(p, o);
  if (q === p) return m;
  var r = g.insertText(q, q.getSelectionAfter(), n);
  return i.push(m, r, h.INSERT_CHARACTERS);
 }
 e.exports = l;
}, null);

__d("handleSoftNewlineForEmoticon", [ "DocumentModifier", "EditorChangeType", "EditorState", "applyEmoticonToContentState" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 function k(l) {
  var m = l.getCurrentContent(), n = l.getSelection(), o = j(m, n);
  if (o === m) return l;
  var p = g.splitBlock(o, o.getSelectionAfter());
  return i.push(l, p, h.SPLIT_BLOCK);
 }
 e.exports = k;
}, null);

__d("isSoftNewlineEvent", [ "Keys" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 function h(i) {
  return i.which === g.RETURN && (i.getModifierState("Shift") || i.getModifierState("Alt") || i.getModifierState("Control"));
 }
 e.exports = h;
}, null);

__d("AbstractTokenizer.react", [ "AbstractTypeahead.react", "React", "TokenizerToken.react", "cx", "ex", "emptyFunction", "joinClasses" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m) {
 b.__markCompiled && b.__markCompiled();
 var n = h, o = n.PropTypes, p = h.createClass({
  displayName: "AbstractTokenizer",
  propTypes: {
   alwaysShowPlaceholder: o.bool,
   className: o.string,
   excludeTokenEntries: o.bool,
   inputClassName: o.string,
   tokenClassName: o.string,
   placeholder: o.string,
   queryString: o.string,
   searchSource: o.object.isRequired,
   searchSourceOptions: o.object,
   presenter: o.object.isRequired,
   entries: o.array,
   onAddEntryAttempt: o.func.isRequired,
   onEntriesFound: o.func,
   onPaste: o.func,
   onRemoveEntryAttempt: o.func.isRequired,
   onReorderEntryAttempt: o.func,
   onQueryStringChange: o.func,
   onInputFocus: o.func,
   onInputBlur: o.func,
   onTypeaheadMouseDown: o.func,
   excludedEntries: o.object,
   inputID: o.string,
   entriesWidthMatchContext: o.bool,
   hideViewWithEntries: o.bool,
   limit: function(q, r, s) {
    var t = q[r], u = t == null || typeof t === "number" && t > 0;
    if (!u) return new Error(k("Invalid entries limit `%s` provided, must be a positive " + "number if set.", t));
   },
   selectOnBlur: o.bool,
   selectOnTab: o.bool,
   tokenizeQueryString: o.func,
   tokenizeQueryStringOnBlur: o.func
  },
  getDefaultProps: function() {
   return {
    autoHighlight: true,
    excludeTokenEntries: true,
    hideViewWithEntries: true,
    onInputBlur: l,
    selectOnBlur: false,
    selectOnTab: true,
    tokenizeQueryString: l.thatReturnsNull,
    tokenizeQueryStringOnBlur: l.thatReturnsNull,
    entriesWidthMatchContext: true
   };
  },
  getInitialState: function() {
   return {
    queryString: ""
   };
  },
  _getQueryString: function() {
   return this.props.queryString || this.state.queryString;
  },
  _hasReachedEntriesLimit: function() {
   if (this.props.limit && this.props.entries) return this.props.entries.length >= this.props.limit;
   return false;
  },
  componentWillReceiveProps: function(q) {
   if (q.queryString == null && this.props.queryString != null) this.setState({
    queryString: this.props.queryString
   });
  },
  render: function() {
   var q = !!this.props.onReorderEntryAttempt, r = m("_58-2" + (q ? " " + "_5ph3" : ""), "clearfix", this.props.className), s, t = this.props.entries, u = {}, v = t && t.length > 0, w;
   if (v) {
    s = [];
    for (var x = 0, y = t.length; x < y; x++) {
     var z = t[x];
     w = z.getUniqueID();
     s[x] = this._renderToken(z, x);
     if (this.props.excludeTokenEntries) u[w] = true;
    }
   }
   if (this.props.excludedEntries) for (w in this.props.excludedEntries) u[w] = this.props.excludedEntries[w];
   var aa = null;
   if (!v || this.props.alwaysShowPlaceholder) aa = this.props.placeholder;
   return h.createElement("div", h.__spread({}, this.props, {
    className: m(this.props.className, r),
    placeholder: null,
    onClick: this._focusTypeahead,
    onMouseDown: this._onTypeaheadMouseDown,
    onDragOver: this.onBackgroundDragOver,
    onDrop: this.onBackgroundDrop,
    "data-testid": this.props["data-testid"]
   }), s, h.createElement(g, {
    ref: "typeahead",
    selectedEntry: null,
    className: "_58-0",
    "data-testid": this.props["data-testid"],
    inputClassName: this.props.inputClassName,
    showEntriesOnFocus: this.props.showEntriesOnFocus,
    queryString: this._getQueryString(),
    placeholder: aa,
    presenter: this.props.presenter,
    searchSource: this.props.searchSource,
    searchSourceOptions: this.props.searchSourceOptions,
    excludedEntries: u,
    onSelectAttempt: this._onSelectAttempt,
    onEntriesFound: this.props.onEntriesFound,
    onEnterWithoutSelection: this.props.onEnterWithoutSelection,
    onChange: this._onInputChange,
    onFocus: this.props.onInputFocus,
    onBlur: this._onInputBlur,
    onBackspace: this._onBackspace,
    onPaste: this.props.onPaste,
    autoHighlight: this.props.autoHighlight,
    selectOnBlur: this.props.selectOnBlur,
    selectOnTab: this.props.selectOnTab,
    context: this.props.context,
    focusedOnInit: this.props.focusedOnInit,
    inputID: this.props.inputID,
    entriesWidthMatchContext: this.props.entriesWidthMatchContext,
    hideViewWithEntries: this.props.hideViewWithEntries
   }), h.createElement("span", {
    ref: "textSizeProxy",
    className: "_58-3",
    "aria-hidden": "true"
   }, this._getQueryString() || aa));
  },
  componentDidMount: function() {
   this._syncTimer = setTimeout(this._syncInputWidth, 0);
  },
  componentDidUpdate: function() {
   clearTimeout(this._syncTimer);
   this._syncTimer = setTimeout(this._syncInputWidth, 0);
  },
  componentWillUnmount: function() {
   clearTimeout(this._syncTimer);
  },
  clearActiveEntries: function() {
   this.refs.typeahead && this.refs.typeahead.clearActiveEntries();
  },
  focusInput: function() {
   if (this.refs && this.refs.typeahead) this.refs.typeahead.focusInput();
  },
  _focusTypeahead: function(q) {
   q.preventDefault();
   this.focusInput();
  },
  _onTypeaheadMouseDown: function() {
   this.props.onTypeaheadMouseDown && this.props.onTypeaheadMouseDown();
  },
  _onInputChange: function(event) {
   if (this._hasReachedEntriesLimit()) return;
   var q = event.target.value, r = this.props.tokenizeQueryString(q);
   if (r) {
    this._onSelectAttempt(r);
   } else if (this.props.queryString == null) this.setState({
    queryString: q
   });
   if (this.props.onQueryStringChange) this.props.onQueryStringChange(event);
  },
  _onInputBlur: function() {
   var q = this._getQueryString(), r = this.props.tokenizeQueryStringOnBlur(q);
   if (r) this._onBlurringSelectAttempt(r);
   this.props.onInputBlur();
  },
  _onSelectAttempt: function(q) {
   this._onAddEntryAttempt(q);
   setTimeout(this.focusInput, 0);
  },
  _onBlurringSelectAttempt: function(q) {
   this._onAddEntryAttempt(q);
  },
  _onAddEntryAttempt: function(q) {
   if (q) {
    this.props.onAddEntryAttempt(q);
    if (this.props.queryString == null) this.setState({
     queryString: ""
    });
   }
  },
  _onRemove: function(q) {
   this.props.onRemoveEntryAttempt(q);
  },
  _onBackspace: function(event) {
   var q = this.props.entries;
   if (q && !this._getQueryString() && q.length) {
    var r = q[q.length - 1];
    this.props.onRemoveEntryAttempt(r);
    event.preventDefault();
    setTimeout(this.focusInput, 0);
   }
  },
  _syncInputWidth: function() {
   var q = h.findDOMNode(this.refs.textSizeProxy).offsetWidth;
   if (q === 0) return;
   this.refs.typeahead.getTextFieldDOM().style.width = q + "px";
  },
  onBackgroundDragOver: function(event) {
   event.preventDefault();
   var q = event.nativeEvent.dataTransfer;
   if (q) q.dropEffect = "move";
   var r = this.props.entries;
   this.onTokenDragOver(r[r.length - 1], r.length - 1, false);
  },
  onBackgroundDrop: function(event) {
   this.onTokenDrop(null, this.props.entries.length);
  },
  onTokenDragStart: function(q, r) {
   this.setState({
    draggingIndex: r
   });
  },
  onTokenDragEnd: function(q, r) {
   this.setState({
    draggingIndex: null
   });
  },
  onTokenDragLeave: function(q, r) {
   if (this.leaveTimer) return;
   this.leaveTimer = setTimeout(function() {
    this.leaveTimer = null;
    if (this.state.dragTargetIndex === null) return;
    this.setState({
     dragTargetIndex: null
    });
   }.bind(this), 100);
  },
  onTokenDragOver: function(q, r, s) {
   if (this.leaveTimer) {
    clearTimeout(this.leaveTimer);
    this.leaveTimer = null;
   }
   if (this.state.draggingIndex !== null && this.state.draggingIndex !== r && this.props.onReorderEntryAttempt) {
    if (this.state.dragTargetIndex === r && this.state.draggedOverLeftSideOfElement === s) return;
    this.setState({
     dragTargetIndex: r,
     draggedOverLeftSideOfElement: s
    });
   }
  },
  onTokenDrop: function(q, r) {
   if (this.state.draggingIndex !== null && this.props.onReorderEntryAttempt) {
    if (!this.state.draggedOverLeftSideOfElement) r++;
    if (this.state.draggingIndex !== r) this.props.onReorderEntryAttempt(this.state.draggingIndex, r);
   }
   this.setState({
    draggingIndex: null,
    dragTargetIndex: null,
    draggedOverLeftSideOfElement: null
   });
  },
  _renderToken: function(q, r) {
   var s = this.props.presenter.TokenRenderer || i, t = this.state.draggingIndex === r, u = !!this.props.onReorderEntryAttempt, v = this.state.dragTargetIndex === r, w = m("_2ei6" + (t ? " " + "_5ph4" : "") + (v ? " " + "_5o8i" : "") + (v && this.state.draggedOverLeftSideOfElement ? " " + "_5o8j" : "") + (v && !this.state.draggedOverLeftSideOfElement ? " " + "_5o8k" : ""), this.props.tokenClassName);
   return h.createElement(s, {
    className: w,
    key: q.getUniqueID(),
    label: q.getTitle(),
    entry: q,
    index: r,
    onRemove: this._onRemove,
    isDragDropEnabled: u,
    onTokenDragStart: this.onTokenDragStart,
    onTokenDragEnd: this.onTokenDragEnd,
    onTokenDragOver: this.onTokenDragOver,
    onTokenDragLeave: this.onTokenDragLeave,
    onTokenDrop: this.onTokenDrop
   });
  }
 });
 e.exports = p;
}, null);

__d("TypeaheadViewItem", [ "React", "SearchableEntry" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 var i = g, j = i.PropTypes, k = {
  entry: j.instanceOf(h).isRequired,
  highlighted: j.bool,
  role: j.string,
  selected: j.bool,
  onSelect: j.func.isRequired,
  onHighlight: j.func,
  onRenderHighlight: j.func
 }, l = {
  _onSelect: function(m) {
   this.props.onSelect(this.props.entry, m);
  },
  _onHighlight: function(m) {
   if (this.props.onHighlight) this.props.onHighlight(this.props.entry, m);
  },
  getDefaultProps: function() {
   return {
    role: "option"
   };
  },
  shouldComponentUpdate: function(m) {
   return this.props.entry.getUniqueID() !== m.entry.getUniqueID() || this.props.highlighted !== m.highlighted || this.props.selected !== m.selected;
  },
  componentDidMount: function() {
   if (this.props.highlighted && this.props.onRenderHighlight) this.props.onRenderHighlight(g.findDOMNode(this));
  },
  componentDidUpdate: function() {
   if (this.props.highlighted && this.props.onRenderHighlight) this.props.onRenderHighlight(g.findDOMNode(this));
  }
 };
 e.exports = {
  propTypes: k,
  Mixin: l
 };
}, null);

__d("isRTL", [ "UnicodeBidi", "UnicodeBidiDirection" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 function i(j) {
  return g.getDirection(j) === h.RTL;
 }
 e.exports = i;
}, null);

__d("MercuryIDs", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 var g = {
  isValid: function(h) {
   if (!h || typeof h !== "string") return false;
   return /^\w{3,12}:/.test(h);
  },
  isValidThreadID: function(h) {
   if (!g.isValid(h)) return false;
   var i = g.tokenize(h);
   switch (i.type) {
   case "user":
   case "group":
   case "thread":
   case "root":
   case "pending":
    return true;

   default:
    return false;
   }
  },
  tokenize: function(h) {
   if (!this.isValid(h)) throw "bad_id_format " + h;
   var i = h.indexOf(":");
   return {
    type: h.substr(0, i),
    value: h.substr(i + 1)
   };
  },
  getUserIDFromParticipantID: function(h) {
   if (!this.isValid(h)) throw "bad_id_format " + h;
   var i = g.tokenize(h), j = i.type, k = i.value;
   if (j != "fbid") return null;
   return k;
  },
  getParticipantIDFromUserID: function(h) {
   if (isNaN(h)) throw "Not a user ID: " + h;
   return "fbid:" + h;
  },
  getUserIDFromThreadID: function(h) {
   if (!this.isCanonical(h)) return null;
   return this.tokenize(h).value;
  },
  getThreadIDFromUserID: function(h) {
   return "user:" + h;
  },
  getThreadIDFromParticipantID: function(h) {
   var i = this.getUserIDFromParticipantID(h);
   return i ? this.getThreadIDFromUserID(i) : null;
  },
  getParticipantIDFromFromThreadID: function(h) {
   return this.getParticipantIDFromUserID(this.getUserIDFromThreadID(h) || "");
  },
  isCanonical: function(h) {
   return this.isValid(h) && this.tokenize(h).type === "user";
  },
  isMultichat: function(h) {
   return this.isValid(h) && this.tokenize(h).type !== "user";
  }
 };
 e.exports = g;
}, null);

__d("MercuryLocalIDs", [ "PresenceUtil", "randomInt" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var i = {
  generateMessageID: function(j) {
   var k = j || Date.now(), l = h(0, 4294967295), m = g.getSessionID();
   return "<" + k + ":" + l + "-" + m + "@mail.projektitan.com>";
  },
  generateThreadID: function(j) {
   return "root:" + i.generateMessageID(j);
  }
 };
 e.exports = i;
}, null);

__d("MercuryMessageClientState", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 var g = {
  DO_NOT_SEND_TO_SERVER: "do_not_send_to_server",
  SEND_TO_SERVER: "send_to_server"
 };
 e.exports = g;
}, null);

__d("MercurySingletonMixin", [ "CurrentUser" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 var h = {
  _getInstances: function() {
   if (!this._instances) this._instances = {};
   return this._instances;
  },
  get: function() {
   return this.getForFBID(g.getID());
  },
  getForFBID: function(i) {
   var j = this._getInstances();
   if (!j[i]) j[i] = new this(i);
   return j[i];
  }
 };
 e.exports = h;
}, null);

__d("MercuryMessageObject", [ "MercuryActionStatus", "MercuryActionType", "MercuryIDs", "MercuryLocalIDs", "MercuryMessageClientState", "MercuryMessageSourceTags", "MercurySingletonMixin", "MercurySourceType", "MercuryTimePassed", "MercurySendMessageFields", "fbt", "formatDate" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r) {
 b.__markCompiled && b.__markCompiled();
 function s(v) {
  "use strict";
  this.$MercuryMessageObject0 = v;
 }
 s.prototype.constructUserGeneratedMessageObject = function(v, w, x, y, z) {
  "use strict";
  var aa = t(this.$MercuryMessageObject0, h.USER_GENERATED_MESSAGE, w, x);
  if (typeof v == "string") v = v.replace(/^\s+/, "").replace(/\s+$/, "");
  aa.body = v;
  aa.has_attachment = false;
  aa.html_body = false;
  aa.attachments = [];
  aa.specific_to_list = y || [];
  aa.creator_info = z;
  return aa;
 };
 s.prototype.constructStickerMessageObject = function(v, w, x) {
  "use strict";
  var y = t(this.$MercuryMessageObject0, h.USER_GENERATED_MESSAGE, w, x);
  y.has_attachment = true;
  y.html_body = false;
  y.attachments = [];
  y.sticker_id = v;
  y.specific_to_list = [];
  return y;
 };
 s.prototype.constructAttachmentMessageObject = function(v, w) {
  "use strict";
  var x = t(this.$MercuryMessageObject0, h.USER_GENERATED_MESSAGE, v, w);
  x.attachments = [];
  x.specific_to_list = [];
  return x;
 };
 s.prototype.constructLogMessageObject = function(v, w, x, y) {
  "use strict";
  var z = t(this.$MercuryMessageObject0, h.LOG_MESSAGE, v, w);
  z.log_message_type = x;
  z.log_message_data = y;
  return z;
 };
 s.prototype.normalizeNewMessage = function(v) {
  "use strict";
  if (v.status === undefined) v.status = g.UNSENT;
  v.timestamp_absolute = q._("Today");
  v.message_id = v.message_id || j.generateMessageID(v.timestamp);
  var w = i.getParticipantIDFromUserID(this.$MercuryMessageObject0);
  v.specific_to_list = v.specific_to_list || [];
  if (v.specific_to_list.length && v.specific_to_list.indexOf(w) === -1) v.specific_to_list.push(w);
  if (!v.thread_id) {
   if (v.specific_to_list.length == 1) {
    v.thread_id = "user:" + this.$MercuryMessageObject0;
   } else if (v.specific_to_list.length == 2) {
    var x = v.specific_to_list[0] == w ? v.specific_to_list[1] : v.specific_to_list[0];
    v.thread_id = i.getThreadIDFromParticipantID(x);
   }
   v.thread_id = v.thread_id || "root:" + v.message_id;
  }
  if (!v.specific_to_list.length) {
   var y = i.tokenize(v.thread_id), z = y.type, aa = y.value;
   if (z == "user") v.specific_to_list = [ "fbid:" + aa, w ];
  }
  if (!v[p.MANUAL_RETRY_CNT]) v[p.MANUAL_RETRY_CNT] = 0;
 };
 s.prototype.normalizeResendMessage = function(v) {
  "use strict";
  v.status = g.RESENDING;
  v.timestamp = Date.now();
  v[p.MANUAL_RETRY_CNT] += 1;
 };
 s.prototype.normalizeAddAttachmentPlaceholder = function(v, w, x) {
  "use strict";
  if (x.preview_attachments.length > 0) {
   v.has_attachment = true;
   v.preview_attachments = x.preview_attachments;
  }
  v.client_state = k.DO_NOT_SEND_TO_SERVER;
  v.status = g.RESENDING;
  v.upload_id = w;
 };
 function t(v, w, x, y) {
  var z = u(x) ? [ l.CHAT ] : [], aa = Date.now(), ba = r(new Date(aa), "g:ia"), ca = {
   action_type: w,
   thread_id: y,
   author: i.getParticipantIDFromUserID(v),
   author_email: null,
   coordinates: null,
   timestamp: aa,
   timestamp_absolute: new Date(aa).toLocaleDateString(),
   timestamp_relative: ba,
   timestamp_time_passed: o.TODAY,
   is_unread: false,
   is_forward: false,
   is_filtered_content: false,
   is_spoof_warning: false,
   source: x,
   source_tags: z
  };
  return ca;
 }
 function u(v) {
  switch (v) {
  case n.CHAT_WEB:
  case n.CHAT_JABBER:
  case n.CHAT_IPHONE:
  case n.CHAT_MEEBO:
  case n.CHAT_ORCA:
  case n.CHAT_TEST:
  case n.CHAT:
  case n.DESKTOP:
   return true;

  default:
   return false;
  }
 }
 Object.assign(s, m);
 e.exports = s;
}, null);

__d("MercuryAssert", [ "MercuryIDs" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 e.exports = {
  isParticipantID: function(h) {
   if (!g.isValid(h)) throw "bad_participant_id " + h;
  },
  allParticipantIDs: function(h) {
   h.forEach(this.isParticipantID);
  },
  isUserParticipantID: function(h) {
   var i = g.tokenize(h);
   if (i.type != "fbid") throw "bad_user_id " + h;
  },
  isEmailParticipantID: function(h) {
   var i = g.tokenize(h);
   if (i.type != "email") throw "bad_email_id " + h;
  },
  allThreadID: function(h) {
   h.forEach(this.isThreadID);
  },
  isThreadID: function(h) {
   if (!g.isValid(h)) throw "bad_thread_id " + h;
  }
 };
}, null);

__d("MercuryLoggingHelper", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 var g = {
  obfuscateThread: function(h) {
   var i = Object.assign({}, h);
   if (h && h.snippet && h.snippet.length > 5) i.snippet = h.snippet.substr(0, 5) + "...";
   return i;
  },
  obfuscateMessage: function(h) {
   var i = Object.assign({}, h);
   if (h && h.body && h.body.length > 5) i.body = h.body.substr(0, 5) + "...";
   return i;
  }
 };
 e.exports = g;
}, null);

__d("MercurySendAttemptLogger", [ "Banzai", "BanzaiLogger", "MercuryAttachmentType", "MercurySendMessageFields" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 var k = h.create({
  retry: true
 }), l = g.isEnabled("mercury_send_attempt_logging"), m = function(o) {
  if (!o.has_attachment) return null;
  if (o.sticker_id) return i.STICKER;
  if (o.image_ids && o.image_ids.length || o.photo_fbids && o.photo_fbids.length) return i.PHOTO;
  if (o.raw_attachments && o.raw_attachments.length) return i.FILE;
  if (o.content_attachment) return i.SHARE;
  return i.UNKNOWN;
 }, n = {
  log: function(o) {
   if (!l) return;
   var p = {
    message_id: o.message_id,
    timestamp_client: Date.now(),
    attempt_num: o[j.MANUAL_RETRY_CNT],
    first_attachment_type: m(o),
    source: o.source,
    auto_retry_cnt: o[j.AUTO_RETRY_CNT]
   };
   k.log("MercurySendAttemptLoggerConfig", p);
  }
 };
 e.exports = n;
}, null);

__d("MercurySendErrorLogger", [ "Banzai", "BanzaiLogger" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 var i = h.create({
  retry: true
 }), j = g.isEnabled("mercury_send_error_logging"), k = {
  log: function(l) {
   if (!j) return;
   var m = {
    message_id: l.message_id,
    timestamp_client: Date.now(),
    error_type: l.error_data.type,
    error_code: l.error_data.code,
    error_description: l.error_data.description,
    is_transient: l.error_data.is_transient
   };
   i.log("MercurySendErrorLoggerConfig", m);
  }
 };
 e.exports = k;
}, null);

__d("MercuryServerDispatcher", [ "AsyncRequest", "CurrentUser", "LogHistory", "MercuryLoggingHelper", "areJSONRepresentationsEqual", "copyProperties", "debounceAcrossTransitions" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m) {
 b.__markCompiled && b.__markCompiled();
 var n = {}, o = i.getInstance("mercury_dispatcher"), p = false, q = {
  IMMEDIATE: "immediate",
  IDEMPOTENT: "idempotent",
  BATCH_SUCCESSIVE: "batch-successive",
  BATCH_SUCCESSIVE_UNIQUE: "batch-successive-unique",
  BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR: "batch-successive-piggyback-retry",
  BATCH_DEFERRED_MULTI: "batch-deferred-multi",
  BATCH_CONDITIONAL: "batch-conditional",
  DEFAULT_ENDPOINT_ID: "mercuryServerDispatcherDefaultEndpointID",
  registerEndpoints: function(t) {
   for (var u in t) {
    var v = t[u], w = v.request_user_id || h.getID(), x = v.endpoint_id || q.DEFAULT_ENDPOINT_ID;
    if (!n[u]) n[u] = {};
    if (!n[u][w]) n[u][w] = {};
    n[u][w][x] = new r(u, v);
   }
  },
  trySend: function(t, u, v, w, x) {
   w = w || h.getID();
   x = x || q.DEFAULT_ENDPOINT_ID;
   n[t][w][x].trySend(u, v);
  }
 };
 function r(t, u) {
  var v = u.mode || q.IMMEDIATE;
  switch (v) {
  case q.IMMEDIATE:
  case q.IDEMPOTENT:
  case q.BATCH_SUCCESSIVE:
  case q.BATCH_SUCCESSIVE_UNIQUE:
  case q.BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR:
  case q.BATCH_DEFERRED_MULTI:
  case q.BATCH_CONDITIONAL:
   break;

  default:
   throw new Error("Invalid MercuryServerDispatcher mode " + v);
  }
  this._endpoint = t;
  this._mode = v;
  this._requestUserID = u.request_user_id;
  this._combineData = u.batch_function;
  this._combineDataIf = u.batch_if;
  this._batchSizeLimit = u.batch_size_limit;
  this._batches = [];
  this._handler = u.handler;
  this._errorHandler = u.error_handler;
  this._transportErrorHandler = u.transport_error_handler || u.error_handler;
  this._connectionRetries = u.connection_retries || 0;
  this._timeoutHandler = u.timeout_handler;
  this._timeout = u.timeout;
  this._serverDialogCancelHandler = u.server_dialog_cancel_handler || u.error_handler;
  this._sendAttemptLoggingHandler = u.send_attempt_logging_handler;
  this._auto_retries = u.auto_retries || 0;
  this._deferredSend = m(this._batchSend, 0, this);
 }
 l(r.prototype, {
  _inFlight: 0,
  _handler: null,
  _errorHandler: null,
  _transportErrorHandler: null,
  _timeoutHandler: null,
  _timeout: null,
  _serverDialogCancelHandler: null,
  _combineData: null,
  _sendAttemptLoggingHandler: null,
  trySend: function(t, u) {
   if (p) return;
   if (t === void 0) t = null;
   var v = u || this._mode;
   if (v == q.IMMEDIATE) {
    this._send(t);
   } else if (v == q.IDEMPOTENT) {
    if (!this._inFlight) this._send(t);
   } else if (v == q.BATCH_SUCCESSIVE || v == q.BATCH_SUCCESSIVE_UNIQUE) {
    if (!this._inFlight) {
     this._send(t);
    } else this._batchData(t);
   } else if (v == q.BATCH_CONDITIONAL) {
    var w = this._batches[0] && this._batches[0].getData();
    if (this._inFlight && (this._combineDataIf(this._pendingRequestData, t) || this._combineDataIf(w, t))) {
     this._batchData(t);
    } else this._send(t);
   } else if (v == q.BATCH_DEFERRED_MULTI) {
    this._batchData(t);
    this._deferredSend();
   } else if (v == q.BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR) {
    this._batchData(t);
    if (!this._inFlight) this._batchSend();
   }
  },
  _send: function(t) {
   this._inFlight++;
   this._pendingRequestData = l({}, t);
   if (this._requestUserID != h.getID()) t.request_user_id = this._requestUserID;
   var u = [];
   if (t && t.message_batch) for (var v = 0; v < t.message_batch.length; v++) {
    var w = j.obfuscateMessage(t.message_batch[v]);
    u.push(w);
   }
   var x = u.length ? l({}, t, {
    message_batch: u
   }) : t;
   o.log("send", {
    endpoint: this._endpoint,
    data: x,
    inflight_count: this._inFlight
   });
   var y = new g(this._endpoint).setData(t).setOption("retries", this._connectionRetries).setHandler(this._handleResponse.bind(this)).setErrorHandler(this._handleError.bind(this)).setTransportErrorHandler(this._handleTransportError.bind(this)).setServerDialogCancelHandler(this._handleServerDialogCancel.bind(this)).setAllowCrossPageTransition(true);
   if (this._timeout && this._timeoutHandler) y.setTimeoutHandler(this._timeout, this._handleTimeout.bind(this));
   y.send();
   if (this._sendAttemptLoggingHandler && t && t.message_batch) t.message_batch.map(function(z) {
    return this._sendAttemptLoggingHandler(z);
   }.bind(this));
  },
  _batchData: function(t, u) {
   if (this._mode == q.BATCH_SUCCESSIVE_UNIQUE && this._pendingRequestData !== void 0 && k(t, this._pendingRequestData)) {
    return;
   } else {
    var v = this._batches.length - 1;
    if (v >= 0 && !this._hasReachedBatchLimit(this._batches[v])) {
     u ? this._batches[v].combineWithOlder(t, this._combineData) : this._batches[v].combineWith(t, this._combineData);
    } else this._batches.push(new s(t));
    o.debug("batch", {
     endpoint: this._endpoint,
     batches: this._batches,
     batch_limit: this._batchSizeLimit
    });
   }
  },
  _hasReachedBatchLimit: function(t) {
   return this._batchSizeLimit && t.getSize() >= this._batchSizeLimit;
  },
  _batchSend: function() {
   if (this._batches[0]) {
    this._send(this._batches[0].getData());
    this._batches.shift();
   }
  },
  _handleResponse: function(t) {
   this._inFlight--;
   o.log("response", {
    endpoint: this._endpoint,
    inflight_count: this._inFlight
   });
   var u = t.getPayload();
   p = u && u.kill_chat;
   if (p) o.log("killswitch_enabled", {
    endpoint: this._endpoint,
    inflight_count: this._inFlight
   });
   if (u && u.error_payload) {
    if (this._errorHandler) this._errorHandler(t);
   } else this._handler && this._handler(u, t.getRequest());
   if (this._mode == q.BATCH_SUCCESSIVE || this._mode == q.BATCH_SUCCESSIVE_UNIQUE || this._mode == q.BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR || this._mode == q.BATCH_CONDITIONAL) this._batchSend();
   delete this._pendingRequestData;
  },
  _postErrorHandler: function() {
   o.error("error", {
    endpoint: this._endpoint,
    inflight_count: this._inFlight - 1
   });
   this._inFlight--;
   var t = this._mode;
   if (t == q.BATCH_SUCCESSIVE || t == q.BATCH_SUCCESSIVE_UNIQUE || t == q.BATCH_CONDITIONAL) {
    this._batchSend();
   } else if (t == q.BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR) if (this._batches[0]) {
    this._batchData(this._pendingRequestData, true);
    this._batchSend();
   } else this._batchData(this._pendingRequestData, true);
   delete this._pendingRequestData;
  },
  _shouldAutoRetrySend: function(t) {
   var u = t.auto_retry_cnt ? t.auto_retry_cnt : 0;
   return u < this._auto_retries;
  },
  _autoRetrySend: function(t) {
   var u = Object.assign({}, t);
   u.auto_retry_cnt = u.auto_retry_cnt ? u.auto_retry_cnt + 1 : 1;
   this._send(u);
  },
  _handleError: function(t) {
   this._errorHandler && this._errorHandler(t);
   this._postErrorHandler();
  },
  _handleTransportError: function(t) {
   var u = t.getRequest().getData();
   if (this._shouldAutoRetrySend(u)) {
    this._autoRetrySend(u);
   } else {
    this._transportErrorHandler && this._transportErrorHandler(t);
    this._postErrorHandler();
   }
  },
  _handleTimeout: function(t) {
   var u = t.getData();
   if (this._shouldAutoRetrySend(u)) {
    this._autoRetrySend(u);
   } else {
    this._timeoutHandler && this._timeoutHandler(t);
    this._postErrorHandler();
   }
  },
  _handleServerDialogCancel: function(t) {
   this._serverDialogCancelHandler && this._serverDialogCancelHandler(t);
   this._postErrorHandler();
  }
 });
 function s(t) {
  this._data = t;
  this._size = 1;
 }
 l(s.prototype, {
  getData: function() {
   return this._data;
  },
  getSize: function() {
   return this._size;
  },
  combineWith: function(t, u) {
   this._data = u(this._data, t);
   this._size++;
  },
  combineWithOlder: function(t, u) {
   this._data = u(t, this._data);
   this._size++;
  }
 });
 e.exports = q;
}, null);

__d("MercuryServerSendMessageQueueSimulatedError", [ "AsyncRequest", "AsyncResponse", "copyProperties" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 var j = 9999, k = {
  create: function(l) {
   var m = new g(this.endpoint_uri).setData({
    message_batch: [ l ],
    client: this.client
   }), n = new h(m, {});
   i(n, {
    error: j,
    silentError: false,
    transientError: true,
    request: m
   });
   return n;
  }
 };
 e.exports = k;
}, null);

__d("MercuryServerSendMessageQueue", [ "BanzaiODS", "LogHistory", "MercuryLoggingHelper", "MercuryServerDispatcher", "MercuryServerSendMessageQueueSimulatedError" ], function(a, b, c, d, e, f, g, h, i, j, k) {
 b.__markCompiled && b.__markCompiled();
 var l = "/ajax/mercury/send_messages.php", m = h.getInstance("mercury_server_send_message_queue");
 function n(o, p, q, r) {
  "use strict";
  this.sender_id = o;
  this.queue_id = p;
  this.$MercuryServerSendMessageQueue0 = q.success_handler;
  this.$MercuryServerSendMessageQueue1 = q.error_handler;
  this.$MercuryServerSendMessageQueue2 = q.transport_error_handler;
  this.$MercuryServerSendMessageQueue3 = q.timeout_handler;
  this.client = r;
  var s = {};
  s[l] = {
   request_user_id: this.sender_id,
   endpoint_id: this.queue_id,
   mode: j.IMMEDIATE,
   handler: this.handleSuccess.bind(this),
   error_handler: this.handleError.bind(this),
   transport_error_handler: this.handleTransportError.bind(this),
   timeout: q.timeout,
   timeout_handler: this.handleTimeout.bind(this),
   connection_retries: q.connection_retries,
   send_attempt_logging_handler: q.send_attempt_logging_handler,
   auto_retries: q.auto_retries
  };
  j.registerEndpoints(s);
  this.pending_message = null;
  this.queue = [];
 }
 n.prototype.enqueue = function(o) {
  "use strict";
  this.queue.push(o);
  this.$MercuryServerSendMessageQueue4();
 };
 n.prototype.$MercuryServerSendMessageQueue4 = function() {
  "use strict";
  if (this.pending_message || !this.queue.length) {
   if (this.pending_message) this.$MercuryServerSendMessageQueue5();
   return;
  }
  this.pending_message = this.queue.shift();
  j.trySend(l, {
   message_batch: [ this.pending_message ],
   client: this.client
  }, null, this.sender_id, this.queue_id);
 };
 n.prototype.$MercuryServerSendMessageQueue6 = function() {
  "use strict";
  while (this.queue.length) this.$MercuryServerSendMessageQueue7(this.queue.shift());
 };
 n.prototype.$MercuryServerSendMessageQueue7 = function(o) {
  "use strict";
  this.$MercuryServerSendMessageQueue1(k.create(o));
  m.error("mark_as_failed", {
   fbid: this.sender_id,
   queue_id: this.queue_id,
   message: i.obfuscateMessage(o)
  });
 };
 n.prototype.handleSuccess = function(o, p) {
  "use strict";
  this.$MercuryServerSendMessageQueue0(o, p);
  this.pending_message = null;
  this.$MercuryServerSendMessageQueue4();
 };
 n.prototype.handleError = function(o) {
  "use strict";
  this.$MercuryServerSendMessageQueue1(o);
  this.$MercuryServerSendMessageQueue6();
  this.pending_message = null;
 };
 n.prototype.handleTransportError = function(o) {
  "use strict";
  this.$MercuryServerSendMessageQueue2(o);
  this.$MercuryServerSendMessageQueue6();
  this.pending_message = null;
 };
 n.prototype.handleTimeout = function(o) {
  "use strict";
  this.$MercuryServerSendMessageQueue3(o);
  this.$MercuryServerSendMessageQueue6();
  this.pending_message = null;
 };
 n.prototype.$MercuryServerSendMessageQueue5 = function() {
  "use strict";
  m.debug("maybe_send_next_pending_message", {
   fbid: this.sender_id,
   queue_id: this.queue_id,
   pending_message: i.obfuscateMessage(this.pending_message),
   queue: this.queue.map(function(p) {
    return i.obfuscateMessage(p);
   })
  });
  var o = "send_queue.delayed.queue_length." + this.queue.length.toString();
  g.bumpEntityKey("chat.web", o);
 };
 e.exports = n;
}, null);

__d("MercuryServerSendMessageQueueRouter", [ "BanzaiODS", "LogHistory", "Map", "MercuryServerSendMessageQueue", "MercurySingletonMixin" ], function(a, b, c, d, e, f, g, h, i, j, k) {
 b.__markCompiled && b.__markCompiled();
 var l = h.getInstance("mercury_server_send_message_queue_router"), m = "chat.web.send_queue_router";
 g.setEntitySample(m, .1);
 function n(o) {
  "use strict";
  this.fbid = o;
  this.queues = new i();
 }
 n.prototype.enqueue = function(o, p, q, r) {
  "use strict";
  if (!this.queues.has(o)) {
   this.queues.set(o, new j(this.fbid, o, p, q));
   l.debug("added queue", {
    fbid: this.fbid,
    queue_id: o
   });
   g.bumpEntityKey(m, "new_queue");
  }
  this.queues.get(o).enqueue(r);
 };
 Object.assign(n, k);
 e.exports = n;
}, null);

__d("MercuryMessageIDs", [ "KeyedCallbackManager" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 var h = new g(), i = {
  getServerIDs: function(j, k) {
   var l = j.filter(function(n) {
    return n.indexOf("mail.projektitan.com") !== -1;
   }), m = function(n) {
    var o = j.map(function(p) {
     return n[p] ? n[p] : p;
    });
    k(o);
   };
   return h.executeOrEnqueue(l, m);
  },
  addServerID: function(j, k) {
   h.setResource(j, k);
  }
 };
 e.exports = i;
}, null);

__d("MessagingReliabilityLogger", [ "PresenceUtil", "MercuryServerDispatcher", "MessagingReliabilityLoggerInitialData", "isEmpty", "setTimeoutAcrossTransitions" ], function(a, b, c, d, e, f, g, h, i, j, k) {
 b.__markCompiled && b.__markCompiled();
 var l = "/ajax/mercury/client_reliability.php", m = 6e4;
 function n(t, u) {
  var v = {
   app: i.app,
   categories: JSON.stringify(t)
  };
  if (!j(u)) v.extra = JSON.stringify(u);
  return v;
 }
 function o(t, u, v, w) {
  if (t[u] === void 0) t[u] = {};
  if (t[u][v] === void 0) t[u][v] = 0;
  t[u][v] += w;
 }
 function p(t, u, v, w) {
  if (t[u] === void 0) t[u] = {};
  if (t[u][v] === void 0) t[u][v] = [];
  for (var x = 0; x < w.length; ++x) t[u][v].push(w[x]);
 }
 function q(t, u) {
  if (t && !t.categories || u && !u.categories) return;
  var v = t ? JSON.parse(t.categories) : {}, w = t && t.extra ? JSON.parse(t.extra) : {}, x = JSON.parse(u.categories), y = u.extra ? JSON.parse(u.extra) : {};
  for (var z in x) {
   var aa = x[z], ba = y[z];
   for (var ca in aa) {
    o(v, z, ca, aa[ca]);
    if (ba !== void 0) {
     var da = ba[ca];
     if (da !== void 0) p(w, z, ca, da);
    }
   }
  }
  return n(v, w);
 }
 var r = {};
 r[l] = {
  mode: h.BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR,
  batch_function: q
 };
 h.registerEndpoints(r);
 var s = {
  addEntry: function(t, u, v) {
   if (!i.enabled) return;
   var w = {};
   o(w, t, u, 1);
   var x = {};
   if (v !== void 0) p(x, t, u, [ v ]);
   h.trySend(l, n(w, x));
  }
 };
 (function t() {
  s.addEntry("page_event", "active", g.getSessionID());
  k(t, m);
 })();
 e.exports = s;
}, null);

__d("MercuryServerSendMessageQueueOptions", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 function g(h, i, j, k, l, m, n, o) {
  "use strict";
  this.success_handler = h;
  this.error_handler = i;
  this.transport_error_handler = j;
  this.timeout_handler = k;
  this.send_attempt_logging_handler = l;
  this.timeout = m;
  this.connection_retries = n;
  this.auto_retries = o;
 }
 e.exports = g;
}, null);

__d("MercuryThreadInformer", [ "ArbiterMixin", "LogHistory", "MercuryAssert", "MercuryLoggingHelper", "MercurySingletonMixin", "copyProperties", "mapObject", "mixin" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var o = h.getInstance("mercury_informer"), p = n(g);
 for (var q in p) if (p.hasOwnProperty(q)) s[q] = p[q];
 var r = p === null ? null : p.prototype;
 s.prototype = Object.create(r);
 s.prototype.constructor = s;
 s.__superConstructor__ = p;
 function s(u) {
  this.$MercuryThreadInformer0 = u;
  this.$MercuryThreadInformer1 = {};
  this.$MercuryThreadInformer2 = {};
  this.$MercuryThreadInformer3 = {};
  this.$MercuryThreadInformer4 = false;
  this.$MercuryThreadInformer5 = false;
  this.$MercuryThreadInformer6 = false;
  this.$MercuryThreadInformer7 = {};
  this.$MercuryThreadInformer8 = {};
  this.$MercuryThreadInformer9 = {};
  this.$MercuryThreadInformera = 0;
 }
 s.prototype.updatedThread = function(u) {
  this.$MercuryThreadInformer2[u] = true;
  this.$MercuryThreadInformerb();
 };
 s.prototype.deletedThread = function(u) {
  this.$MercuryThreadInformer1[u] = true;
  this.$MercuryThreadInformerb();
 };
 s.prototype.updatedThreadlist = function() {
  this.$MercuryThreadInformer4 = true;
  this.$MercuryThreadInformerb();
 };
 s.prototype.updatedUnseenState = function() {
  this.$MercuryThreadInformer5 = true;
  this.$MercuryThreadInformerb();
 };
 s.prototype.updatedUnreadState = function() {
  this.$MercuryThreadInformer6 = true;
  this.$MercuryThreadInformerb();
 };
 s.prototype.changedThreadReadState = function(u, v, w) {
  if (!this.$MercuryThreadInformer3[u] || this.$MercuryThreadInformer3[u].timestamp < w) this.$MercuryThreadInformer3[u] = {
   mark_as_read: v,
   timestamp: w
  };
  this.$MercuryThreadInformerb();
 };
 s.prototype.receivedMessage = function(u) {
  i.isThreadID(u.thread_id);
  var v = u.thread_id;
  if (!this.$MercuryThreadInformer7[v]) this.$MercuryThreadInformer7[v] = [];
  this.$MercuryThreadInformer7[v].push(u);
  this.updatedThread(v);
 };
 s.prototype.reorderedMessages = function(u, v) {
  this.$MercuryThreadInformer8[u] = {
   source: v
  };
  this.$MercuryThreadInformerb();
 };
 s.prototype.updatedMessage = function(u, v, w) {
  if (!this.$MercuryThreadInformer9[u]) this.$MercuryThreadInformer9[u] = {};
  this.$MercuryThreadInformer9[u][v] = {
   source: w
  };
  this.updatedThread(u);
 };
 s.prototype.synchronizeInforms = function(u) {
  this.$MercuryThreadInformera++;
  try {
   u();
  } catch (v) {
   throw v;
  } finally {
   this.$MercuryThreadInformera--;
   this.$MercuryThreadInformerb();
  }
 };
 s.prototype.listen = function(u, v) {
  return this.subscribe("threads-updated", function(w, x) {
   if (x[u]) v(u);
  });
 };
 s.prototype.$MercuryThreadInformerb = function() {
  if (!this.$MercuryThreadInformera) {
   var u = this.$MercuryThreadInformer1, v = this.$MercuryThreadInformer2, w = this.$MercuryThreadInformer3, x = this.$MercuryThreadInformer4, y = this.$MercuryThreadInformer5, z = this.$MercuryThreadInformer6, aa = this.$MercuryThreadInformer7, ba = this.$MercuryThreadInformer8, ca = this.$MercuryThreadInformer9;
   this.$MercuryThreadInformer1 = {};
   this.$MercuryThreadInformer2 = {};
   this.$MercuryThreadInformer3 = {};
   this.$MercuryThreadInformer4 = false;
   this.$MercuryThreadInformer5 = false;
   this.$MercuryThreadInformer6 = false;
   this.$MercuryThreadInformer7 = {};
   this.$MercuryThreadInformer8 = {};
   this.$MercuryThreadInformer9 = {};
   var da = Object.keys(v);
   if (da.length || x) this.$MercuryThreadInformerc("threadlist-updated", da);
   if (da.length) this.$MercuryThreadInformerc("threads-updated", v);
   for (var ea in w) {
    this.$MercuryThreadInformerc("thread-read-changed", w);
    break;
   }
   for (ea in u) {
    this.$MercuryThreadInformerc("threads-deleted", u);
    break;
   }
   if (y) this.$MercuryThreadInformerc("unseen-updated", null);
   if (z) this.$MercuryThreadInformerc("unread-updated", null);
   for (ea in aa) {
    this.$MercuryThreadInformerc("messages-received", aa);
    break;
   }
   for (ea in ba) {
    this.$MercuryThreadInformerc("messages-reordered", ba);
    break;
   }
   for (ea in ca) {
    this.$MercuryThreadInformerc("messages-updated", ca);
    break;
   }
  }
 };
 s.prototype.$MercuryThreadInformerc = function(u, v) {
  t(u, v);
  this.inform(u, v);
 };
 function t(u, v) {
  var w = v;
  if (u == "messages-received") w = m(w, function(x) {
   return x.map(function(y) {
    return j.obfuscateMessage(y);
   });
  });
  o.debug(u, w);
 }
 l(s, k);
 e.exports = s;
}, null);

__d("MercuryServerRequests", [ "Arbiter", "ArbiterMixin", "AsyncResponse", "BanzaiLogger", "BanzaiODS", "ChannelConstants", "CurrentUser", "KeyedCallbackManager", "LogHistory", "MercuryActionStatus", "MercuryActionType", "MercuryAPIArgsSource", "MercuryAssert", "MercuryErrorType", "MercuryGlobalActionType", "MercuryIDs", "MercuryLoggingHelper", "MercuryLogMessageType", "MercuryMessageClientState", "MercuryPayloadSource", "MercurySendAttemptLogger", "MercurySendErrorLogger", "MercuryServerRequestsConfig", "MercuryServerSendMessageQueueRouter", "MercurySingletonMixin", "MercurySourceType", "MercuryThreadlistConstants", "MercuryMessageIDs", "MessagingConfig", "MessagingReliabilityLogger", "MessagingTag", "MercuryServerDispatcher", "MercuryServerSendMessageQueueOptions", "MercuryThreadInformer", "copyProperties", "createObjectFrom", "setTimeoutAcrossTransitions" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, aa, ba, ca, da, ea, fa, ga, ha, ia, ja, ka, la, ma, na, oa, pa, qa) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var ra = o.getInstance("mercury_server"), sa = r.MERCURY;
 function ta(ec, fc) {
  if (fc) ec._lastActionTimestamp = Math.max(ec._lastActionTimestamp, fc);
 }
 function ua(ec, fc) {
  var gc = fc.thread_fbid;
  if (fc.canonical_fbid) gc = fc.canonical_fbid;
  var hc = ec._FBIDToClientIDs.getResource(gc);
  if (!hc) {
   if (fc.canonical_fbid) {
    hc = "user:" + fc.canonical_fbid;
   } else if (fc.root_message_threading_id) hc = "root:" + fc.root_message_threading_id;
   hc = hc || "thread:" + gc;
   if (gc) gc = gc.toString();
   wa(ec, gc, hc);
   if (fc.thread_id) va(ec, fc.thread_id, hc);
  }
  fc.thread_id = hc;
 }
 function va(ec, fc, gc) {
  ec._serverToClientIDs.setResource(fc, gc);
  ec._clientToServerIDs.setResource(gc, fc);
  ec._newlyAddedClientIDs[fc] = gc;
 }
 function wa(ec, fc, gc) {
  ec._clientIDToFBIDs.setResource(gc, fc);
  ec._FBIDToClientIDs.setResource(fc, gc);
  ec._newlyAddedClientIDs[fc] = gc;
 }
 function xa(ec, fc, gc) {
  var hc = ec._clientIDToFBIDs.executeOrEnqueue(fc, gc), ic = ec._clientIDToFBIDs.getUnavailableResources(hc), jc = v.tokenize(fc);
  if (ic.length && jc.type != "root") ec.fetchThreadData(ic);
 }
 function ya(ec, fc) {
  return ec._clientIDToFBIDs.getResource(fc);
 }
 function za(ec, fc) {
  return !!ec._FBIDToClientIDs.getResource(fc);
 }
 function ab(ec, fc) {
  var gc = ec._serverToClientIDs.getResource(fc);
  if (typeof gc == "undefined") ra.warn("no_client_thread_id", {
   server_id: fc
  });
  return gc;
 }
 function bb(ec, fc) {
  var gc = ec._FBIDToClientIDs.getResource(fc);
  if (typeof gc == "undefined") ra.warn("no_client_thread_id", {
   thread_fbid: fc
  });
  return gc;
 }
 function cb(ec, fc, gc) {
  ec._FBIDToClientIDs.executeOrEnqueue(fc, gc);
  ec.ensureThreadIsFetched(fc);
 }
 function db(ec) {
  return ec.thread_fbid || ec.thread_id || ec.client_thread_id;
 }
 function eb(ec, fc, gc) {
  if (fc.action_type != q.SEND_MESSAGE) return;
  var hc = fc.thread_fbid;
  if (fc.other_user_fbid) hc = fc.other_user_fbid;
  var ic = fc.client_thread_id;
  if (!ic) ic = bb(ec, hc);
  var jc = null;
  if (ic) jc = v.tokenize(ic).type;
  gb(ec, fc, gc === "success");
  if (fc.status === p.ERROR) {
   ba.log(fc);
  } else ja.addEntry("send_" + jc, gc, hc + "," + fc.message_id);
 }
 function fb(ec) {
  return ec.getError() ? "_" + ec.getError() : "";
 }
 function gb(ec, fc, gc) {
  if (Math.floor(Math.random() * 20) === 0) if (fc.client_message_id in ec._sentMessagesTimestamp) {
   var hc = ec._sentMessagesTimestamp[fc.client_message_id], ic = Date.now() - hc, jc = fc.client_thread_id;
   if (!jc) jc = bb(ec, fc.thread_fbid);
   j.log("WebMessagingLatencyLoggerConfig", {
    has_attachment: fc.attachments && fc.attachments.length > 0,
    latency: ic,
    is_canonical: !v.isMultichat(jc),
    send_successful: gc,
    source: "client"
   });
  }
 }
 function hb(ec, fc) {
  var gc = null;
  switch (fc.status) {
  case p.SUCCESS:
   gc = "success";
   break;

  case p.FAILED_UNKNOWN_REASON:
   gc = "confirmed_error";
   break;

  case p.UNABLE_TO_CONFIRM:
   gc = "confirm_error";
   break;

  default:
   return;
  }
  eb(ec, fc, gc);
 }
 function ib(ec, fc) {
  (fc.threads || []).forEach(function(pc) {
   ua(ec, pc);
   delete ec._fetchingThreads[pc.thread_id];
   var qc = ya(ec, pc.thread_id);
   delete ec._fetchingThreads[qc];
   ta(ec, pc.timestamp);
  });
  (fc.ordered_threadlists || []).forEach(function(pc) {
   var qc = pc.thread_fbids || [];
   qc = qc.concat(pc.other_user_fbids || []);
   pc.thread_ids = qc.map(bb.bind(null, ec));
  });
  if (fc.pinned_threads && fc.pinned_threads.thread_fbids) fc.pinned_threads.thread_fbids = fc.pinned_threads.thread_fbids.map(bb.bind(null, ec));
  fc.actions = fc.actions || [];
  fc.actions.forEach(function(pc) {
   hb(ec, pc);
   var qc = pc.thread_fbid;
   if (pc.other_user_fbid) qc = pc.other_user_fbid;
   if (pc.status && pc.status != p.SUCCESS && !qc) {
    pc.thread_id = pc.client_thread_id;
    return;
   }
   if (pc.action_type == q.SEND_MESSAGE && pc.client_thread_id && qc) wa(ec, qc.toString(), pc.client_thread_id);
   var rc = pc.thread_id;
   if (qc) {
    pc.thread_id = za(ec, qc) ? bb(ec, qc) : null;
   } else if (pc.client_thread_id) pc.thread_id = pc.client_thread_id;
   if (!pc.thread_id) pc.server_thread_id = rc;
   if (!fc.payload_source || !fc.payload_source.startsWith("server")) ta(ec, pc.timestamp);
  });
  if (fc.end_of_history) {
   var gc = [];
   for (var hc = 0; hc < fc.end_of_history.length; hc++) {
    var ic = fc.end_of_history[hc];
    if (ic.type == "user") {
     gc.push("user:" + ic.fbid);
    } else if (ic.type == "thread" && za(ec, ic.fbid)) gc.push(bb(ec, ic.fbid));
   }
   fc.end_of_history = gc;
  }
  if (fc.roger) {
   var jc = {};
   for (var kc in fc.roger) {
    var lc = ec._FBIDToClientIDs.getResource(kc);
    if (lc) {
     var mc = fc.roger[kc];
     jc[lc] = {};
     for (var nc in mc) if (mc.hasOwnProperty(nc)) {
      var oc = v.getParticipantIDFromUserID(nc);
      jc[lc][oc] = mc[nc];
     }
    }
   }
   fc.roger = jc;
  }
 }
 function jb(ec) {
  if (ec._pendingUpdates && ec._pendingUpdates.length) {
   var fc = ec._pendingUpdates[0];
   ec._pendingUpdates = ec._pendingUpdates.slice(1);
   ec.handleUpdate(fc);
  }
 }
 function kb(ec, fc) {
  var gc = oa({}, ec), hc;
  if (fc.threads) {
   if (!gc.threads) gc.threads = {};
   for (hc in fc.threads) gc.threads[hc] = Object.keys(pa((gc.threads[hc] || []).concat(fc.threads[hc])));
  }
  if (fc.messages) {
   if (!gc.messages) gc.messages = {};
   for (hc in fc.messages) {
    if (!gc.messages[hc]) gc.messages[hc] = {};
    for (var ic in fc.messages[hc]) if (gc.messages[hc][ic]) {
     gc.messages[hc][ic] = nb(gc.messages[hc][ic], fc.messages[hc][ic]);
    } else gc.messages[hc][ic] = fc.messages[hc][ic];
   }
  }
  gc.client = ec.client || fc.client;
  return gc;
 }
 function lb(ec, fc) {
  var gc = oa(pa(ec.folders, true), pa(fc.folders, true)), hc = ec.client || fc.client;
  return {
   folders: Object.keys(gc),
   client: hc
  };
 }
 function mb(ec, fc) {
  for (var gc in fc) if (ec[gc] && typeof ec[gc] === "object") {
   ec[gc] = nb(ec[gc], fc[gc]);
  } else if (fc[gc] && typeof fc[gc] === "object") {
   var hc = {};
   oa(hc, fc[gc]);
   ec[gc] = hc;
  }
  return ec;
 }
 function nb(ec, fc) {
  var gc = ec.offset < fc.offset ? ec.offset : fc.offset, hc = ec.offset + ec.limit, ic = fc.offset + fc.limit, jc = hc > ic ? hc : ic, kc = jc - gc;
  return {
   offset: gc,
   limit: kc
  };
 }
 function ob(ec, fc) {
  var gc = ec.client || fc.client, hc = {
   ids: {},
   client: gc
  };
  oa(hc.ids, ec.ids);
  oa(hc.ids, fc.ids);
  return hc;
 }
 function pb(ec, fc) {
  var gc = {}, hc, ic = ec.client || fc.client;
  delete ec.client;
  delete fc.client;
  for (hc in ec) oa(gc, pa(ec[hc], hc));
  for (hc in fc) oa(gc, pa(fc[hc], hc));
  var jc = {
   client: ic
  };
  for (var kc in gc) {
   hc = gc[kc];
   if (!jc[hc]) jc[hc] = [];
   jc[hc].push(kc);
  }
  return jc;
 }
 function qb(ec, fc) {
  var gc = ec.client || fc.client, hc = pa(ec.ids, true), ic = pa(fc.ids, true), jc = oa(hc, ic);
  return {
   ids: Object.keys(jc),
   client: gc
  };
 }
 function rb(ec) {
  this._fbid = ec;
  this._lastActionTimestamp = 0;
  this._serverToClientIDs = new n();
  this._clientToServerIDs = new n();
  this._FBIDToClientIDs = new n();
  this._clientIDToFBIDs = new n();
  this._pendingUpdates = [];
  this._fetchingThreads = {};
  this._newlyAddedClientIDs = {};
  this._sentMessagesTimestamp = {};
  this._sendMessageQueueOptions = new ma(ub, yb, zb, ac, aa.log, ca.sendMessageTimeout, ia.SEND_CONNECTION_RETRIES, ca.maxAutoRetries);
  cc(this);
 }
 oa(rb.prototype, h, {
  getServerThreadID: function(ec, fc) {
   s.isThreadID(ec);
   xa(this, ec, fc);
  },
  getThreadFBID: function(ec, fc) {
   s.isThreadID(ec);
   xa(this, ec, fc);
  },
  getClientThreadID: function(ec, fc) {
   cb(this, ec, fc);
  },
  getClientThreadIDNow: function(ec) {
   return bb(this, ec);
  },
  getServerThreadIDNow: function(ec) {
   return ya(this, ec);
  },
  getClientThreadIDForPermalinks: function(ec) {
   return ab(this, ec);
  },
  convertThreadIDIfAvailable: function(ec) {
   var fc = this._FBIDToClientIDs.getResource(ec);
   if (fc === void 0) {
    return ec;
   } else return fc;
  },
  isUser: function(ec) {
   return ec < 22e8 || ec >= 1e14 && ec <= 0x5b0a58f100ef || ec >= 89e12 && ec <= 89999999999999 || ec >= 6000001e7 && ec <= 60000019999999;
  },
  canLinkExternally: function(ec) {
   s.isThreadID(ec);
   var fc = v.tokenize(ec);
   return fc.type == "user" || !!ya(this, ec);
  },
  fetchThreadlistInfo: function(ec, fc, gc, hc, ic) {
   gc = gc || ka.INBOX;
   ic = ic || sa;
   var jc = hc ? la.IMMEDIATE : null, kc = {
    client: ic
   };
   kc[gc] = {
    offset: ec,
    limit: fc,
    filter: hc
   };
   dc(this, "/ajax/mercury/threadlist_info.php", kc, jc);
  },
  fetchPinnedThreads: function() {
   dc(this, "/mercury/pinned_threads/", {});
  },
  fetchUnseenThreadIDs: function(ec, fc) {
   fc = fc || sa;
   this.fetchThreadlistInfo(ga.RECENT_THREAD_OFFSET, ga.JEWEL_THREAD_COUNT, ec, null, fc);
  },
  fetchUnreadThreadIDs: function(ec, fc) {
   fc = fc || sa;
   dc(this, "/ajax/mercury/unread_threads.php", {
    folders: [ ec ],
    client: fc
   });
  },
  fetchMissedMessages: function(ec, fc) {
   fc = fc || sa;
   var gc = {
    last_action_timestamp: this._lastActionTimestamp,
    folders: ec,
    client: fc
   };
   gc.last_action_timestamp = this._lastActionTimestamp;
   dc(this, "/ajax/mercury/thread_sync.php", gc);
  },
  fetchThreadData: function(ec, fc) {
   fc = fc || sa;
   s.allThreadID(ec);
   var gc = {
    threads: {},
    client: fc
   }, hc = [], ic = [];
   ec.forEach(function(kc) {
    if (this._fetchingThreads[kc]) return;
    this._fetchingThreads[kc] = true;
    var lc = ya(this, kc), mc = v.tokenize(kc);
    if (mc.type == "user") {
     hc.push(mc.value);
     gc.threads.user_ids = hc;
    } else if (mc.type == "thread") {
     if (lc) {
      ic.push(lc);
     } else ic.push(mc.value);
     gc.threads.thread_fbids = ic;
    } else if (mc.type != "root" && mc.type != "pending") throw new Error("Unknown thread type", mc);
   }.bind(this));
   this.inform("fetch-thread-data", gc);
   for (var jc in gc.threads) {
    dc(this, "/ajax/mercury/thread_info.php", gc);
    break;
   }
  },
  ensureThreadIsFetched: function(ec, fc) {
   fc = fc || sa;
   if (!this._FBIDToClientIDs.getResource(ec) && !this._fetchingThreads[ec]) {
    this._fetchingThreads[ec] = true;
    dc(this, "/ajax/mercury/thread_info.php", {
     threads: {
      thread_fbids: [ ec ]
     },
     client: fc
    });
   }
  },
  fetchThreadMessages: function(ec, fc, gc, hc, ic) {
   s.isThreadID(ec);
   ic = ic || sa;
   var jc, kc, lc = v.tokenize(ec), mc = ya(this, ec), nc = false;
   if (mc) {
    jc = mc;
    kc = lc.type == "user" ? "user_ids" : "thread_fbids";
   } else {
    jc = lc.value;
    switch (lc.type) {
    case "user":
     kc = "user_ids";
     nc = true;
     break;

    case "thread":
     kc = "thread_fbids";
     break;
    }
   }
   var oc = {
    messages: {},
    threads: {},
    client: ic
   };
   if (kc) {
    oc.messages[kc] = {};
    oc.messages[kc][jc] = {
     offset: fc,
     limit: gc
    };
    if (nc) oc.threads[kc] = [ jc ];
    dc(this, "/ajax/mercury/thread_info.php", oc, hc);
   } else xa(this, ec, function(pc) {
    oc.messages.thread_fbids = {};
    oc.messages.thread_fbids[pc] = {
     offset: fc,
     limit: gc
    };
    dc(this, "/ajax/mercury/thread_info.php", oc, hc);
   }.bind(this));
  },
  handleThreadInfoError: function(ec) {
   var fc = ec.getRequest().getData(), gc = [];
   if (fc.messages) {
    for (var hc in fc.messages.thread_fbids) gc.push(sb(bb(this, hc)));
    for (var ic in fc.messages.user_ids) gc.push(sb("user:" + ic));
    for (var jc in fc.messages.group_ids) gc.push(sb("group:" + jc));
   }
   if (gc.length) this.handleUpdate({
    actions: gc,
    from_client: true,
    payload_source: z.CLIENT_CHANNEL_MESSAGE
   });
   if (fc.threads && (fc.threads.user_ids || fc.threads.group_ids || fc.threads.thread_ids)) {
    var kc = 5, lc = true;
    if (!fc.retry_count) {
     fc.retry_count = 0;
     if (fc.messages) delete fc.messages;
    } else if (fc.retry_count >= kc) {
     lc = false;
     (fc.threads.thread_ids || []).forEach(function(nc) {
      if (nc in this._fetchingThreads) delete this._fetchingThreads[nc];
     }.bind(this));
    }
    if (lc) {
     var mc = fc.retry_count * 1e3;
     qa(function() {
      ra.log("retry_thread", fc);
      dc(this, "/ajax/mercury/thread_info.php", fc);
     }.bind(this), mc);
     fc.retry_count++;
    }
   }
  },
  markFolderAsRead: function(ec) {
   dc(this, "/ajax/mercury/mark_folder_as_read.php", {
    folder: ec
   });
   var fc = [ {
    action_type: u.MARK_ALL_READ,
    action_id: null,
    folder: ec
   } ];
   this.handleUpdate({
    global_actions: fc,
    from_client: true,
    payload_source: z.CLIENT_CHANGE_READ_STATUS
   });
  },
  changeThreadReadStatus: function(ec, fc, gc) {
   s.isThreadID(ec);
   xa(this, ec, function(hc) {
    var ic = {
     ids: {},
     source: gc
    };
    ic.ids[hc] = fc;
    dc(this, "/ajax/mercury/change_read_status.php", ic);
   }.bind(this));
  },
  changeThreadArchivedStatus: function(ec, fc, gc) {
   s.isThreadID(ec);
   xa(this, ec, function(hc) {
    var ic = {
     ids: {},
     source: gc
    };
    ic.ids[hc] = fc;
    dc(this, "/ajax/mercury/change_archived_status.php", ic);
   }.bind(this));
  },
  changeThreadFolder: function(ec, fc) {
   s.isThreadID(ec);
   xa(this, ec, function(gc) {
    var hc = {};
    hc[fc] = [ gc ];
    dc(this, "/ajax/mercury/move_thread.php", hc);
   }.bind(this));
  },
  changeMutingOnThread: function(ec, fc) {
   s.isThreadID(ec);
   xa(this, ec, function(gc) {
    dc(this, "/ajax/mercury/change_mute_thread.php", {
     thread_fbid: gc,
     mute_settings: fc,
     payload_source: sa
    });
   }.bind(this));
  },
  markThreadSpam: function(ec, fc) {
   s.isThreadID(ec);
   xa(this, ec, function(gc) {
    dc(this, "/ajax/mercury/mark_spam.php", {
     id: gc,
     source: fc
    });
   }.bind(this));
  },
  markMessagesSpam: function(ec, fc) {
   ha.getServerIDs(fc || [], function(gc) {
    dc(this, "/ajax/mercury/mark_spam_messages.php", {
     message_ids: gc
    });
   }.bind(this));
  },
  unmarkThreadSpam: function(ec, fc) {
   s.isThreadID(ec);
   xa(this, ec, function(gc) {
    dc(this, "/ajax/mercury/unmark_spam.php", {
     id: gc,
     source: fc
    });
   }.bind(this));
  },
  deleteThread: function(ec, fc) {
   s.isThreadID(ec);
   xa(this, ec, function(gc) {
    var hc = {
     ids: [ gc ],
     source: fc
    };
    dc(this, "/ajax/mercury/delete_thread.php", hc);
   }.bind(this));
  },
  unpinThread: function(ec) {
   s.isThreadID(ec);
   xa(this, ec, function(fc) {
    dc(this, "/mercury/unpin_thread/", {
     id: fc
    });
   }.bind(this));
  },
  deleteMessages: function(ec, fc) {
   ha.getServerIDs(fc || [], function(gc) {
    dc(this, "/ajax/mercury/delete_messages.php", {
     message_ids: gc
    });
   }.bind(this));
  },
  sendDeliveryReceipts: function(ec) {
   ha.getServerIDs(ec || [], function(fc) {
    dc(this, "/ajax/mercury/delivery_receipts.php", {
     message_ids: fc
    });
   }.bind(this));
  },
  sendNewMessage: function(ec, fc) {
   fc = fc || sa;
   if (!ec.client_state || ec.client_state == y.SEND_TO_SERVER) ha.getServerIDs(ec.forward_message_ids || [], function(gc) {
    var hc = v.tokenize(ec.thread_id), ic = hc.type, jc = oa({}, ec);
    jc.forward_message_ids = gc;
    if (ic == "root" && hc.value == jc.message_id || ic == "user") {
     jc.client_thread_id = jc.thread_id;
     jc.thread_id = null;
     this._sendNewMessageToServer(jc, fc);
    } else xa(this, jc.thread_id, function(kc) {
     hc = v.tokenize(jc.thread_id);
     if (hc.type == "user") {
      jc.other_user_fbid = hc.values;
     } else jc.thread_fbid = kc;
     jc.thread_id = null;
     this._sendNewMessageToServer(jc);
    }.bind(this));
   }.bind(this));
  },
  _sendNewMessageToServer: function(ec, fc) {
   g.inform(l.ATTEMPT_RECONNECT);
   fc = fc || sa;
   this._sentMessagesTimestamp[ec.message_id] = Date.now();
   da.getForFBID(this._fbid).enqueue(db(ec), this._sendMessageQueueOptions, fc, ec);
  },
  requestMessageConfirmation: function(ec, fc) {
   fc = fc || sa;
   var gc = {}, hc = {};
   for (var ic in ec) {
    var jc = ya(this, ic);
    if (jc) {
     gc[jc] = ec[ic];
    } else {
     var kc = ec[ic];
     for (var lc = 0; lc < kc.length; lc++) hc[kc[lc]] = ic;
    }
   }
   var mc = Object.keys(gc), nc = Object.keys(hc);
   if (mc.length || nc.length) dc(this, "/ajax/mercury/confirm_messages.php", {
    thread_message_map: gc,
    local_messages: hc,
    client: fc
   });
  },
  handleMessageConfirmError: function(ec) {
   var fc = ec.getRequest().getData().thread_message_map, gc = ec.getRequest().getData().local_messages;
   if (!fc && !gc) return;
   var hc = [];
   for (var ic in fc) {
    var jc = fc[ic];
    jc.forEach(function(mc) {
     hc.push({
      action_type: q.SEND_MESSAGE,
      client_message_id: mc,
      message_id: mc,
      client_thread_id: null,
      thread_fbid: ic,
      status: p.UNABLE_TO_CONFIRM
     });
    });
   }
   for (var kc in gc) {
    var lc = gc[kc];
    hc.push({
     action_type: q.SEND_MESSAGE,
     client_message_id: kc,
     message_id: kc,
     client_thread_id: lc,
     thread_fbid: null,
     status: p.UNABLE_TO_CONFIRM
    });
   }
   if (hc.length) this.handleUpdate({
    actions: hc,
    payload_source: z.CLIENT_HANDLE_ERROR
   });
  },
  markSeen: function() {
   var ec = this._lastActionTimestamp;
   dc(this, "/ajax/mercury/mark_seen.php", {
    seen_timestamp: ec
   });
  },
  handleRoger: function(ec) {
   var fc = ec.thread_fbid ? this._FBIDToClientIDs.getResource(ec.thread_fbid) : v.getThreadIDFromUserID(ec.reader);
   if (fc) {
    var gc = v.getParticipantIDFromUserID(ec.reader), hc = {};
    hc[fc] = {};
    hc[fc][gc] = ec.time;
    this.inform("update-roger", hc);
   }
  },
  handleUpdateWaitForThread: function(ec, fc, gc) {
   gc = gc || sa;
   var hc = this._FBIDToClientIDs.getResource(fc);
   if (hc) {
    this.handleUpdate(ec);
    return;
   }
   this._FBIDToClientIDs.executeOrEnqueue(fc, function() {
    this._pendingUpdates.push(ec);
   }.bind(this));
   if (!this._fetchingThreads[fc]) {
    this._fetchingThreads[fc] = true;
    var ic = {
     threads: {
      thread_fbids: [ fc ]
     },
     client: gc
    };
    if (this.isUser(fc)) ic = {
     threads: {
      user_ids: [ fc ]
     },
     client: gc
    };
    dc(this, "/ajax/mercury/thread_info.php", ic);
   }
  },
  handleUpdate: function(ec) {
   var fc = [];
   if (ec && ec.threads) for (var gc = 0; gc < ec.threads.length; gc++) {
    if (!ec.threads[gc].snippet_attachments) continue;
    for (var hc = 0; hc < ec.threads[gc].snippet_attachments.length; hc++) if (ec.threads[gc].snippet_attachments[hc].share_xhp) {
     fc.push({
      i: gc,
      j: hc,
      xhp: ec.threads[gc].snippet_attachments[hc].share_xhp
     });
     ec.threads[gc].snippet_attachments[hc].share_xhp = "HTMLDivElement not shown: object contains circular " + "reference, which was breaking JSON.stringify. " + "Look at MercuryServerRequests.handleUpdate";
    }
   }
   var ic = {
    actions: [],
    threads: []
   };
   if (ec) {
    if (ec.actions) ic.actions = ec.actions.map(function(lc) {
     return w.obfuscateMessage(lc);
    });
    if (ec.threads) ic.threads = ec.threads.map(function(lc) {
     return w.obfuscateThread(lc);
    });
   }
   var jc = oa({}, ec, ic);
   ra.debug("update:" + ec.payload_source, {
    payload: jc,
    from_client: ec.from_client
   });
   for (var kc = 0; kc < fc.length; kc++) ec.threads[fc[kc].i].snippet_attachments[fc[kc].j].share_xhp = fc[kc].xhp;
   for (kc in ec) {
    na.getForFBID(this._fbid).synchronizeInforms(function() {
     if (!ec.from_client) {
      ib(this, ec);
      this.inform("payload-preprocessed", ec);
     }
     this.inform("update-thread-ids", this._newlyAddedClientIDs);
     this._newlyAddedClientIDs = {};
     this.inform("update-participants", ec);
     this.inform("update-threads", ec);
     this.inform("update-unread", ec);
     this.inform("update-threadlist", ec);
     this.inform("update-pinned-threads", ec);
     this.inform("update-messages", ec);
     this.inform("update-unseen", ec);
     this.inform("update-typing-state", ec);
     this.inform("update-roger", ec.roger);
     this.inform("model-update-completed", null);
     jb(this);
    }.bind(this));
    break;
   }
  },
  _handleSendMessageErrorCommon: function(ec, fc, gc, hc) {
   ra.debug("handle_send_message_error_common", {
    reliability_error_status: gc,
    request_error_status: fc
   });
   var ic = ec.getData(), jc = ic.message_batch, kc = jc.map(function(mc) {
    var nc = {
     action_type: q.SEND_MESSAGE,
     thread_fbid: mc.thread_fbid,
     client_message_id: mc.message_id,
     message_id: mc.message_id,
     client_thread_id: mc.client_thread_id,
     status: fc,
     error_data: hc
    };
    return nc;
   });
   kc.forEach(function(mc) {
    eb(this, mc, gc);
   }, this);
   var lc = {
    actions: kc,
    payload_source: z.CLIENT_HANDLE_ERROR
   };
   this.handleUpdate(lc);
  },
  handleSendMessageError: function(ec) {
   var fc = ec.getPayload(), gc = null, hc = null;
   if (fc && fc.error_payload) {
    gc = p.UNCONFIRMED;
    hc = "send_error";
   } else {
    gc = p.ERROR;
    hc = "request_error" + fb(ec);
   }
   var ic = ec.error;
   if (ic === 1404102) i.verboseErrorHandler(ec);
   var jc = /<.*>/.test(ec.getErrorDescription()) ? ec.getErrorSummary() : ec.getErrorDescription();
   this._handleSendMessageErrorCommon(ec.getRequest(), gc, hc, {
    type: t.SERVER,
    code: ec.getError(),
    description: jc,
    is_transient: ec.isTransient()
   });
  },
  handleSendMessageTransportError: function(ec) {
   this._handleSendMessageErrorCommon(ec.getRequest(), p.ERROR, "transport_error" + fb(ec), {
    type: t.TRANSPORT,
    code: ec.getError(),
    is_transient: true
   });
  },
  handleSendMessageTimeout: function(ec) {
   this._handleSendMessageErrorCommon(ec, p.ERROR, "transport_timeout", {
    type: t.TIMEOUT,
    is_transient: true
   });
  },
  getLastActionTimestamp: function() {
   return this._lastActionTimestamp;
  }
 });
 oa(rb, ea);
 function sb(ec) {
  return {
   action_type: q.LOG_MESSAGE,
   thread_id: ec,
   message_id: ec,
   timestamp: Date.now(),
   timestamp_absolute: "",
   timestamp_relative: "",
   is_unread: false,
   source: fa.UNKNOWN,
   log_message_type: x.SERVER_ERROR,
   log_message_data: {}
  };
 }
 function tb(ec) {
  var fc = ec.getData(), gc = fc.request_user_id ? fc.request_user_id : m.getID();
  return rb.getForFBID(gc);
 }
 function ub(ec, fc) {
  tb(fc).handleUpdate(ec);
 }
 function vb(ec, fc) {
  var gc = {};
  oa(gc, ec.ids);
  oa(gc, fc.ids);
  var hc = ec.client || fc.client;
  return {
   ids: gc,
   client: hc
  };
 }
 function wb(ec, fc) {
  return fc;
 }
 function xb(ec) {
  var fc = tb(ec.getRequest());
  fc.handleThreadInfoError(ec);
 }
 function yb(ec) {
  var fc = tb(ec.getRequest());
  fc.handleSendMessageError(ec);
 }
 function zb(ec) {
  var fc = tb(ec.getRequest());
  fc.handleSendMessageTransportError(ec);
 }
 function ac(ec) {
  var fc = tb(ec);
  fc.handleSendMessageTimeout(ec);
 }
 function bc(ec) {
  var fc = tb(ec.getRequest());
  fc.handleMessageConfirmError(ec);
 }
 function cc(ec) {
  var fc = {
   "/ajax/mercury/thread_sync.php": {
    request_user_id: ec._fbid,
    mode: la.IDEMPOTENT,
    handler: ub
   },
   "/ajax/mercury/thread_info.php": {
    request_user_id: ec._fbid,
    mode: la.BATCH_DEFERRED_MULTI,
    batch_function: kb,
    handler: ub,
    error_handler: xb
   },
   "/ajax/mercury/mark_folder_as_read.php": {
    request_user_id: ec._fbid,
    mode: la.IMMEDIATE,
    handler: ub
   },
   "/ajax/mercury/change_read_status.php": {
    request_user_id: ec._fbid,
    mode: la.BATCH_SUCCESSIVE,
    batch_function: vb,
    handler: ub
   },
   "/ajax/mercury/mark_seen.php": {
    request_user_id: ec._fbid,
    mode: la.BATCH_SUCCESSIVE,
    batch_function: wb,
    handler: ub
   },
   "/ajax/mercury/confirm_messages.php": {
    request_user_id: ec._fbid,
    mode: la.IMMEDIATE,
    handler: ub,
    error_handler: bc
   },
   "/ajax/mercury/threadlist_info.php": {
    request_user_id: ec._fbid,
    mode: la.BATCH_SUCCESSIVE_UNIQUE,
    batch_function: mb,
    handler: ub
   },
   "/ajax/mercury/mark_spam.php": {
    request_user_id: ec._fbid,
    mode: la.IMMEDIATE,
    handler: ub
   },
   "/ajax/mercury/mark_spam_messages.php": {
    request_user_id: ec._fbid,
    mode: la.IMMEDIATE,
    handler: ub
   },
   "/ajax/mercury/unmark_spam.php": {
    request_user_id: ec._fbid,
    mode: la.IMMEDIATE,
    handler: ub
   },
   "/ajax/mercury/unread_threads.php": {
    request_user_id: ec._fbid,
    mode: la.BATCH_SUCCESSIVE_UNIQUE,
    batch_function: lb,
    handler: ub
   },
   "/ajax/chat/settings.php": {
    request_user_id: ec._fbid,
    mode: la.IMMEDIATE
   },
   "/ajax/mercury/change_archived_status.php": {
    request_user_id: ec._fbid,
    mode: la.BATCH_SUCCESSIVE,
    batch_function: ob,
    handler: ub
   },
   "/ajax/mercury/delete_thread.php": {
    request_user_id: ec._fbid,
    mode: la.BATCH_SUCCESSIVE,
    batch_function: qb,
    handler: ub
   },
   "/ajax/mercury/delete_messages.php": {
    request_user_id: ec._fbid,
    mode: la.IMMEDIATE,
    handler: ub
   },
   "/ajax/mercury/delivery_receipts.php": {
    request_user_id: ec._fbid,
    mode: la.IMMEDIATE,
    handler: ub
   },
   "/ajax/mercury/move_thread.php": {
    request_user_id: ec._fbid,
    mode: la.BATCH_SUCCESSIVE,
    batch_function: pb,
    handler: ub
   },
   "/ajax/mercury/change_mute_thread.php": {
    request_user_id: ec._fbid,
    mode: la.IMMEDIATE,
    handler: ub
   },
   "/mercury/pinned_threads/": {
    request_user_id: ec._fbid,
    mode: la.BATCH_SUCCESSIVE_UNIQUE,
    handler: ub
   },
   "/mercury/unpin_thread/": {
    request_user_id: ec._fbid,
    mode: la.IMMEDIATE,
    handler: ub
   }
  };
  la.registerEndpoints(fc);
 }
 function dc(ec, fc, gc, hc) {
  la.trySend(fc, gc, hc, ec._fbid);
 }
 e.exports = rb;
}, null);

__d("MercuryMessageActions", [ "CurrentUser", "MercuryActionType", "MercuryMessageObject", "MercuryPayloadSource", "MercuryServerRequests", "MercurySingletonMixin" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function m(n) {
  this.$MercuryMessageActions0 = n;
  this.$MercuryMessageActions1 = i.getForFBID(this.$MercuryMessageActions0);
  this.$MercuryMessageActions2 = k.getForFBID(this.$MercuryMessageActions0);
 }
 m.prototype.send = function(n, o, p) {
  o = o || Function.prototype;
  this.$MercuryMessageActions1.normalizeNewMessage(n);
  this.$MercuryMessageActions2.handleUpdate(this.$MercuryMessageActions3(Object.assign({}, n), j.CLIENT_SEND_MESSAGE));
  this.$MercuryMessageActions2.sendNewMessage(n, p);
  o(n.thread_id);
 };
 m.prototype.resend = function(n, o) {
  var p = Object.assign({}, n);
  this.$MercuryMessageActions1.normalizeResendMessage(p);
  this.send(p, void 0, o);
 };
 m.prototype.addAttachmentPlaceholder = function(n, o, p) {
  this.$MercuryMessageActions1.normalizeAddAttachmentPlaceholder(n, o, p);
  this.$MercuryMessageActions1.normalizeNewMessage(n);
  this.$MercuryMessageActions2.handleUpdate(this.$MercuryMessageActions3(Object.assign({}, n), j.CLIENT_SEND_MESSAGE));
 };
 m.prototype.cancelAttachmentPlaceholder = function(n, o) {
  this.$MercuryMessageActions2.handleUpdate(this.$MercuryMessageActions3({
   upload_id: n,
   upload_data: o,
   action_type: h.CANCEL_ATTACHMENT_PLACEHOLDER
  }, j.CLIENT_SEND_MESSAGE));
 };
 m.prototype.confirmAttachmentPlaceholder = function(n, o) {
  this.$MercuryMessageActions2.handleUpdate(this.$MercuryMessageActions3({
   upload_id: n,
   upload_data: o,
   action_type: h.CONFIRM_ATTACHMENT_PLACEHOLDER
  }, j.CLIENT_SEND_MESSAGE));
 };
 m.addShareDataToExistingMessage = function(n, o, p, q) {
  q = q || g.getID();
  m.getForFBID(q).addShareDataToExistingMessage(n, o, p);
 };
 m.prototype.addShareDataToExistingMessage = function(n, o, p) {
  this.$MercuryMessageActions2.handleUpdate(this.$MercuryMessageActions4({
   server_id: n,
   attach_key: o,
   attach_data: p,
   action_type: h.ADD_SHARE_DATA_TO_EXISTING_MESSAGE
  }, j.SERVER_ADD_SHARE_DATA_TO_EXISTING_MESSAGE));
 };
 m.prototype.markSpam = function(n, o) {
  this.$MercuryMessageActions2.handleUpdate(this.$MercuryMessageActions5(n, o, h.MARK_MESSAGES_SPAM, j.CLIENT_MARK_MESSAGES_SPAM));
 };
 m.prototype["delete"] = function(n, o, p) {
  this.$MercuryMessageActions2.handleUpdate(this.$MercuryMessageActions5(n, o, h.DELETE_MESSAGES, p || j.CLIENT_DELETE_MESSAGES));
 };
 m.prototype.$MercuryMessageActions3 = function(n, o) {
  return {
   actions: [ n ],
   from_client: true,
   payload_source: o
  };
 };
 m.prototype.$MercuryMessageActions4 = function(n, o) {
  return {
   actions: [ n ],
   from_client: false,
   payload_source: o
  };
 };
 m.prototype.$MercuryMessageActions5 = function(n, o, p, q) {
  return {
   actions: [ {
    action_type: p,
    action_id: null,
    thread_id: n,
    message_ids: o
   } ],
   from_client: true,
   payload_source: q
  };
 };
 Object.assign(m, l);
 e.exports = m;
}, null);

__d("MercurySendMessageHandler", [ "MercuryMessageActions", "MercuryMessageObject", "MercurySingletonMixin" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function j(k) {
  this.$MercurySendMessageHandler0 = k;
  this.$MercurySendMessageHandler1 = g.getForFBID(this.$MercurySendMessageHandler0);
  this.$MercurySendMessageHandler2 = h.getForFBID(this.$MercurySendMessageHandler0);
 }
 j.prototype.sendPlainTextMessage = function(k, l, m) {
  var n = this.$MercurySendMessageHandler2.constructUserGeneratedMessageObject(l, m, k);
  this.$MercurySendMessageHandler1.send(n);
 };
 j.prototype.sendSticker = function(k, l, m) {
  var n = this.$MercurySendMessageHandler2.constructStickerMessageObject(l, m, k);
  this.$MercurySendMessageHandler1.send(n);
 };
 j.prototype.sendAttachment = function(k, l, m) {
  var n = this.$MercurySendMessageHandler2.constructAttachmentMessageObject(m, k);
  this.$MercurySendMessageHandler1.addAttachmentPlaceholder(n, l.upload_id, l);
 };
 Object.assign(j, i);
 e.exports = j;
}, null);

__d("MercuryThreadActions", [ "MercuryActionType", "MercuryPayloadSource", "MercuryServerRequests", "MercurySingletonMixin", "MessagingTag", "merge" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function m(n) {
  this.$MercuryThreadActions0 = n;
  this.$MercuryThreadActions1 = i.getForFBID(this.$MercuryThreadActions0);
 }
 m.prototype.markRead = function(n, o) {
  this.batchMarkRead([ n ], o);
 };
 m.prototype.batchMarkRead = function(n, o) {
  this.$MercuryThreadActions1.handleUpdate(this.$MercuryThreadActions2(n, true, o));
 };
 m.prototype.markUnread = function(n, o) {
  this.batchMarkUnread([ n ], o);
 };
 m.prototype.batchMarkUnread = function(n, o) {
  this.$MercuryThreadActions1.handleUpdate(this.$MercuryThreadActions2(n, false, o));
 };
 m.prototype.markSeen = function(n, o) {
  this.$MercuryThreadActions1.handleUpdate(this.$MercuryThreadActions3([ n ], g.MARK_THREAD_SEEN, h.CLIENT_MARK_THREAD_SEEN, {
   persistent: o
  }));
 };
 m.prototype.archive = function(n, o) {
  this.batchArchive([ n ], o);
 };
 m.prototype.batchArchive = function(n, o) {
  n.forEach(function(p) {
   this.$MercuryThreadActions1.changeThreadArchivedStatus(p, true, o);
  }.bind(this));
  this.$MercuryThreadActions1.handleUpdate(this.$MercuryThreadActions4(n, true));
 };
 m.prototype.unarchive = function(n, o) {
  this.batchUnarchive([ n ], o);
 };
 m.prototype.batchUnarchive = function(n, o) {
  n.forEach(function(p) {
   this.$MercuryThreadActions1.changeThreadArchivedStatus(p, false, o);
  }.bind(this));
  this.$MercuryThreadActions1.handleUpdate(this.$MercuryThreadActions4(n, false));
 };
 m.prototype.markSpam = function(n, o) {
  this.batchMarkSpam([ n ], o);
 };
 m.prototype.batchMarkSpam = function(n, o) {
  n.forEach(function(p) {
   this.$MercuryThreadActions1.markThreadSpam(p, o);
  }.bind(this));
  this.$MercuryThreadActions1.handleUpdate(this.$MercuryThreadActions5(n, k.SPAM));
 };
 m.prototype.unmarkSpam = function(n, o) {
  this.batchUnmarkSpam([ n ], o);
 };
 m.prototype.batchUnmarkSpam = function(n, o) {
  n.forEach(function(p) {
   this.$MercuryThreadActions1.unmarkThreadSpam(p, o);
  }.bind(this));
  this.$MercuryThreadActions1.handleUpdate(this.$MercuryThreadActions5(n, k.INBOX));
 };
 m.prototype.changeFolder = function(n, o) {
  this.batchChangeFolder([ n ], o);
 };
 m.prototype.batchChangeFolder = function(n, o) {
  n.forEach(function(p) {
   this.$MercuryThreadActions1.changeThreadFolder(p, o);
  }.bind(this));
  this.$MercuryThreadActions1.handleUpdate(this.$MercuryThreadActions5(n, o));
 };
 m.prototype["delete"] = function(n, o) {
  this.batchDelete([ n ], o);
 };
 m.prototype.batchDelete = function(n, o) {
  n.forEach(function(p) {
   this.$MercuryThreadActions1.deleteThread(p, o);
  }.bind(this));
  this.$MercuryThreadActions1.handleUpdate(this.$MercuryThreadActions3(n, g.DELETE_THREAD, h.CLIENT_DELETE_THREAD));
 };
 m.prototype.unmute = function(n) {
  this.updateMuteSetting(n, 0);
 };
 m.prototype.updateMuteSetting = function(n, o) {
  this.$MercuryThreadActions1.changeMutingOnThread(n, o);
  this.$MercuryThreadActions1.handleUpdate(this.$MercuryThreadActions3([ n ], g.CHANGE_MUTE_SETTINGS, h.CLIENT_CHANGE_MUTE_SETTINGS, {
   mute_settings: o
  }));
 };
 m.prototype.addParticipants = function(n, o) {
  this.$MercuryThreadActions1.handleUpdate(this.$MercuryThreadActions3([ n ], g.ADD_PARTICIPANTS, h.CLIENT_ADD_PARTICIPANTS, {
   participants: o
  }));
 };
 m.prototype.unpinThread = function(n) {
  this.$MercuryThreadActions1.unpinThread(n);
  this.$MercuryThreadActions1.handleUpdate(this.$MercuryThreadActions3([ n ], g.UNPIN_THREAD, h.CLIENT_UNPIN_THREAD));
 };
 m.prototype.$MercuryThreadActions2 = function(n, o, p) {
  return this.$MercuryThreadActions3(n, g.CHANGE_READ_STATUS, h.CLIENT_CHANGE_READ_STATUS, {
   mark_as_read: o,
   source: p
  });
 };
 m.prototype.$MercuryThreadActions4 = function(n, o) {
  return this.$MercuryThreadActions3(n, g.CHANGE_ARCHIVED_STATUS, h.CLIENT_CHANGE_ARCHIVED_STATUS, {
   archived: o
  });
 };
 m.prototype.$MercuryThreadActions5 = function(n, o) {
  return this.$MercuryThreadActions3(n, g.CHANGE_FOLDER, h.CLIENT_CHANGE_FOLDER, {
   new_folder: o
  });
 };
 m.prototype.$MercuryThreadActions3 = function(n, o, p, q) {
  return {
   actions: n.map(function(r) {
    return l({
     action_type: o,
     action_id: null,
     thread_id: r
    }, q);
   }),
   from_client: true,
   payload_source: p
  };
 };
 Object.assign(m, j);
 e.exports = m;
}, null);

__d("MercuryAttachmentSnippetType", [ "keyMirror" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 var h = g({
  PHOTO: null,
  GIF: null,
  VIDEO: null,
  AUDIO_CLIP: null,
  STICKER: null,
  ORION: null,
  SHOERACK: null,
  SHARE: null,
  ERROR: null,
  MIXED: null
 });
 e.exports = h;
}, null);

__d("FBRTCAvailability", [ "ChannelConstants", "PresenceStatus" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var i = {
  isCallable: function(j) {
   var k = h.getCapabilities(j), l = g.CAPABILITY_VOIP_INTEROP | g.CAPABILITY_VIDEO;
   return !!(k & l);
  }
 };
 e.exports = i;
}, null);

__d("FBRTCCallSummaryUploader", [ "Bootloader" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 var h = {
  init: function() {
   g.loadModules([ "Banzai", "FBRTCCallSummary", "FBRTCCallSummaryStore" ], function(i, j, k) {
    var l = k.getInstance();
    i.subscribe(i.SEND, function() {
     j.logSavedSummaries(l);
    });
   });
  }
 };
 e.exports = h;
}, null);

__d("FBRTCCallUI", [ "BanzaiLogger", "Cookie", "UserAgent", "FBRTCCallSummary", "FBRTCCallSummaryStore", "FBRTCConstants", "FBRTCLogger", "FBRTCUrlManager", "pageID" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
 b.__markCompiled && b.__markCompiled();
 var p = null, q = {
  openAsCaller: function(r, s, t, u) {
   if (!p && window.rtcCallChildWindow) {
    p = window.rtcCallChildWindow;
    window.rtcCallChildWindow = null;
   }
   if (this._shouldFocusCallWindow(r)) {
    p.focus();
    return;
   }
   if (this._shouldCloseCallWindow()) p.close();
   g.log("VideoCallLoggerConfig", {
    event: "open_as_caller"
   });
   m.getInstance().logCallAction(r, s, m.CallAction.START_CALL, null, t);
   var v = new j({
    peerID: r,
    callID: s,
    isCaller: true
   });
   v.onCallStarted(t);
   this._open(r, s, true, v, false, u);
  },
  openAsCallee: function(r, s, t, u, v) {
   g.log("VideoCallLoggerConfig", {
    event: "open_as_callee"
   });
   this._open(r, s, false, t, u, v);
  },
  _shouldFocusCallWindow: function(r) {
   return p && !p.closed && p.rtcCallInProgessWith === r;
  },
  _shouldCloseCallWindow: function() {
   return p && !p.closed && !p.rtcCallInProgessWith;
  },
  _open: function(r, s, t, u, v, w) {
   h.clear("vcpwn");
   h.clear("vctid");
   var x = this._windowPosition(), y = [ "menubar=no", "location=no", "scrollbars=no", "status=no", "personalbar=no", x.height, x.width, x.top, x.left ].join(",");
   if (this._isSparkBrowser()) y = "";
   u.addExtraInfo(m.Key.INITIATED_BY_PAGE_ID, o);
   u.onCallEnded(l.CallEndReason.CLIENT_ERROR, false, true, "PopupPending");
   u.save(k.getInstance());
   g.log("VideoCallLoggerConfig", {
    event: "open_popup"
   });
   if (!v) {
    p = window.open("", "Video Call", y);
    this._setUri(p, r, s, t, w);
   } else {
    m.getInstance().logCallAction(r, s, m.CallAction.OPEN_POPUP);
    p = window.open(v, "Video Call", y);
   }
   if (window.focus) p.focus();
  },
  _setUri: function(r, s, t, u, v) {
   n.getCallUri(s, t, u, v, function(w) {
    m.getInstance().logCallAction(s, t, m.CallAction.OPEN_POPUP);
    r.location = w;
   }, function() {
    m.getInstance().logCallAction(s, t, m.CallAction.FAILED_GETTING_URI);
   });
  },
  _windowPosition: function() {
   var r = 933, s = 700, t, u, v, w;
   if (window.innerWidth !== void 0) {
    u = window.innerWidth;
    t = window.innerHeight;
   } else {
    u = screen.width;
    t = screen.height;
   }
   if (window.screenLeft !== void 0) {
    v = window.screenLeft;
    w = window.screenTop;
   } else {
    v = window.screenX;
    w = window.screenY;
   }
   var x = Math.floor(u / 2 - r / 2 + v), y = Math.floor(t / 2 - s / 2 + w);
   return {
    height: "height=" + s.toString(),
    width: "width=" + r.toString(),
    top: "top=" + y.toString(),
    left: "left=" + x.toString()
   };
  },
  _isSparkBrowser: function() {
   return i.isBrowser("Chrome < 34") && i.isBrowser("Chrome > 33");
  }
 };
 e.exports = q;
}, null);

__d("XBrowserNotSupportedDialogController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/videocall/browser_not_supported/", {
  user_id: {
   type: "Int"
  },
  warning: {
   type: "Bool",
   defaultValue: false
  },
  __asyncDialog: {
   type: "Int"
  }
 });
}, null);

__d("FBRTCSoundController", [ "RTCConfig", "Sound" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 var i = [ g.ringtone_mp3_url, g.ringtone_ogg_url ], j = {
  playIncomingRingtone: function(k, l, m) {
   var n = [ "incoming_ringtone", k.toString(), l.toString() ].join("_");
   h.play(i, n, m);
  },
  stopIncomingRingtone: function() {
   h.stop(i);
  }
 };
 e.exports = j;
}, null);

__d("FBRTCUnsupportedBrowserMessage", [ "AsyncDialog", "AsyncRequest", "XBrowserNotSupportedDialogController", "FBRTCSoundController" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 var k = {
  _dialog: null,
  warnForOutgoingCall: function(l) {
   var m = i.getURIBuilder().setBool("warning", true).getURI();
   this._presentDialog(m, l);
  },
  showForOutgoingCall: function() {
   var l = i.getURIBuilder().getURI();
   this._presentDialog(l);
  },
  showForIncomingCall: function(l, m) {
   j.playIncomingRingtone(l, m, false);
   var n = i.getURIBuilder().setInt("user_id", m).getURI();
   this._presentDialog(n);
  },
  dismiss: function() {
   if (this._dialog) this._dialog.hide();
  },
  _presentDialog: function(l, m) {
   if (this._dialog) return;
   var n = new h(l);
   g.send(n, function(o) {
    this._dialog = o;
    o.subscribe("hide", function() {
     this._dialog = null;
     if (m) m();
    }.bind(this));
   }.bind(this));
  }
 };
 e.exports = k;
}, null);

__d("FBRTCCore", [ "Arbiter", "ChatVisibility", "FBRTCAvailability", "FBRTCCallUI", "FBRTCStruct", "FBRTCUnsupportedBrowserMessage", "mixInEventEmitter", "PresencePrivacy", "UserAgent", "VideoCallSupport", "fbt", "randomInt", "invariant" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s) {
 b.__markCompiled && b.__markCompiled();
 var t = false, u = {
  startOutgoingCall: function(v, w, x) {
   s(!isNaN(parseInt(v, 10)));
   if (t) return;
   t = true;
   setTimeout(function() {
    t = false;
   }, 1e3);
   if (p.isWebrtcSupported()) {
    var y = this._generateCallID();
    j.openAsCaller(v, y, w, x);
   } else l.showForOutgoingCall();
  },
  isAvailableForWebrtcCalling: function(v) {
   return i.isCallable(v);
  },
  shouldEnableVideoCalling: function() {
   return !o.isPlatform("Android") && !o.isPlatform("iOS");
  },
  callabilityForUser: function(v) {
   if (!h.isOnline()) {
    return u.CallabilityStatus.OFFLINE;
   } else if (u.isAvailableForWebrtcCalling(v)) {
    return u.CallabilityStatus.AVAILABLE;
   } else if (!n.allows(v)) {
    return u.CallabilityStatus.BLOCKED;
   } else return u.CallabilityStatus.UNAVAILABLE;
  },
  generateCallButtonTooltip: function(v, w) {
   switch (w) {
   case u.CallabilityStatus.AVAILABLE:
    return q._("Start a video call with {shortname}", [ q.param("shortname", v) ]);

   case u.CallabilityStatus.BLOCKED:
    return q._("You must turn on chat for {shortname} to make a call.", [ q.param("shortname", v) ]);

   case u.CallabilityStatus.UNAVAILABLE:
    return q._("{shortname} is currently unavailable for video calling", [ q.param("shortname", v) ]);

   case u.CallabilityStatus.OFFLINE:
    return q._("You must be online to make a call.");

   default:
    return q._("You must be online to make a call.");
   }
  },
  _generateCallID: function() {
   return r(0, 4294967295);
  },
  buddyCallabilityChanged: function() {
   this.emit("callabilityChanged");
  }
 };
 u.CallabilityStatus = new k([ "AVAILABLE", "BLOCKED", "OFFLINE", "UNAVAILABLE" ]);
 g.subscribe([ "buddylist/availability-changed" ], function(v, w) {
  u.buddyCallabilityChanged();
 });
 n.subscribe([ "privacy-changed", "privacy-availability-changed" ], function(v, w) {
  u.buddyCallabilityChanged();
 });
 m(u, {
  callabilityChanged: true
 });
 e.exports = u;
}, null);

__d("AsyncUploadBase", [ "ArbiterMixin", "AsyncRequest", "AsyncResponse", "BrowserSupport", "Form", "copyProperties", "mixin", "removeFromArray" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n) {
 b.__markCompiled && b.__markCompiled();
 var o = m(g);
 for (var p in o) if (o.hasOwnProperty(p)) r[p] = o[p];
 var q = o === null ? null : o.prototype;
 r.prototype = Object.create(q);
 r.prototype.constructor = r;
 r.__superConstructor__ = o;
 r.parseFiles = function(t) {
  "use strict";
  var u = {};
  for (var v in t) {
   var w = t[v];
   if (Array.isArray(w)) {
    u[v] = w;
   } else {
    u[v] = [];
    if (w instanceof window.FileList) {
     for (var x = 0; x < w.length; x++) u[v].push(w.item(x));
    } else if (w instanceof window.File || w instanceof window.Blob) u[v].push(w);
   }
  }
  return u;
 };
 function r(t) {
  "use strict";
  this.setURI(t);
  this.setNetworkErrorRetryLimit(0);
 }
 r.prototype.setAllowCrossOrigin = function(t) {
  "use strict";
  this._allowCrossOrigin = !!t;
  return this;
 };
 r.prototype.setAllowCrossPageTransition = function(t) {
  "use strict";
  this._allowCrossPageTransition = !!t;
  return this;
 };
 r.prototype.setData = function(t) {
  "use strict";
  this._data = t;
  return this;
 };
 r.prototype.setNetworkErrorRetryLimit = function(t) {
  "use strict";
  this._retryLimit = t;
  return this;
 };
 r.prototype.setLimit = function(t) {
  "use strict";
  this._limit = t;
  return this;
 };
 r.prototype.setPreprocessHandler = function(t) {
  "use strict";
  this._preprocessHandler = t;
  return this;
 };
 r.prototype.setRelativeTo = function(t) {
  "use strict";
  this._relativeTo = t;
  return this;
 };
 r.prototype.setStatusElement = function(t) {
  "use strict";
  this._statusElement = t;
  return this;
 };
 r.prototype.setURI = function(t) {
  "use strict";
  this._uri = t;
  return this;
 };
 r.prototype.suspend = function() {
  "use strict";
  this._suspended = true;
  return this;
 };
 r.prototype.resume = function() {
  "use strict";
  this._suspended = false;
  this._processQueue();
  return this;
 };
 r.prototype.isUploading = function() {
  "use strict";
  return this._inFlight;
 };
 r.prototype._createFileUpload = function(t, u, v) {
  "use strict";
  return new s(t, u, v);
 };
 r.prototype._processQueue = function() {
  "use strict";
  if (this._suspended) return;
  while (this._pending.length < this._limit) {
   if (!this._waiting.length) break;
   var t = this._waiting.shift();
   if (this._preprocessHandler) {
    this._preprocessHandler(t, this._processUpload.bind(this));
   } else this._processUpload(t);
   this._pending.push(t);
  }
 };
 r.prototype._processUpload = function(t) {
  "use strict";
  var u = k.createFormData(t.getData() || this._data);
  if (t.getFile()) {
   u.append(t.getName(), t.getFile());
   var v = t.getFile().uploadID;
   if (v) u.append("upload_id", v);
  }
  var w = new h().setAllowCrossOrigin(this._allowCrossOrigin).setAllowCrossPageTransition(this._allowCrossPageTransition).setURI(this._uri).setRawData(u).setStatusElement(this._statusElement).setHandler(this._success.bind(this, t)).setErrorHandler(this._failure.bind(this, t)).setUploadProgressHandler(this._progress.bind(this, t)).setInitialHandler(this._initial.bind(this, t));
  if (this._relativeTo) w.setRelativeTo(this._relativeTo);
  w.send();
  t.setAsyncRequest(w);
  this._inFlight = true;
  if (!t.getRetryCount()) this.inform("start", t);
 };
 r.prototype._abort = function(t) {
  "use strict";
  if (this._pending.indexOf(t) !== -1) {
   n(this._pending, t);
   this._processQueue();
  }
  n(this._waiting, t);
  t.abort();
 };
 r.prototype._initial = function(t) {
  "use strict";
  if (t.isAborted()) return;
  this.inform("initial", t);
 };
 r.prototype._success = function(t, u) {
  "use strict";
  if (t.isAborted()) {
   this.inform("success_after_abort", u);
   return;
  }
  this._complete(t);
  this.inform("success", t.handleSuccess(u));
  this._processQueue();
 };
 r.prototype._retryUpload = function(t) {
  "use strict";
  t.increaseRetryCount();
  this._processUpload(t);
 };
 r.prototype._failure = function(t, u) {
  "use strict";
  if (t.isAborted()) return;
  if (u.error === 1004 && t.getRetryCount() < this._retryLimit) return this._retryUpload(t);
  this._complete(t);
  if (this.inform("failure", t.handleFailure(u)) !== false) i.defaultErrorHandler(u);
  this._processQueue();
 };
 r.prototype._progress = function(t, event) {
  "use strict";
  if (t.isAborted()) return;
  this.inform("progress", t.handleProgress(event));
 };
 r.prototype._complete = function(t) {
  "use strict";
  n(this._pending, t);
  if (!this._pending.length) this._inFlight = false;
 };
 r.isSupported = function() {
  "use strict";
  return j.hasFileAPI();
 };
 l(r.prototype, {
  _limit: 10
 });
 function s(t, u, v) {
  "use strict";
  this._name = t;
  this._file = u;
  this._data = v;
  this._success = null;
  this._response = null;
  this._progressEvent = null;
  this._request = null;
  this._numRetries = 0;
  this._aborted = false;
 }
 s.prototype.getName = function() {
  "use strict";
  return this._name;
 };
 s.prototype.getFile = function() {
  "use strict";
  return this._file;
 };
 s.prototype.setFile = function(t) {
  "use strict";
  this._file = t;
 };
 s.prototype.getData = function() {
  "use strict";
  return this._data;
 };
 s.prototype.isComplete = function() {
  "use strict";
  return this._success !== null;
 };
 s.prototype.isSuccess = function() {
  "use strict";
  return this._success === true;
 };
 s.prototype.getResponse = function() {
  "use strict";
  return this._response;
 };
 s.prototype.getProgressEvent = function() {
  "use strict";
  return this._progressEvent;
 };
 s.prototype.setAsyncRequest = function(t) {
  "use strict";
  this._request = t;
  return this;
 };
 s.prototype.increaseRetryCount = function() {
  "use strict";
  this._numRetries++;
  return this;
 };
 s.prototype.getRetryCount = function() {
  "use strict";
  return this._numRetries;
 };
 s.prototype.isWaiting = function() {
  "use strict";
  return !this._request;
 };
 s.prototype.isAborted = function() {
  "use strict";
  return this._aborted;
 };
 s.prototype.abort = function() {
  "use strict";
  this._request = null;
  this._aborted = true;
 };
 s.prototype.handleSuccess = function(t) {
  "use strict";
  this._success = true;
  this._response = t;
  this._progressEvent = null;
  return this;
 };
 s.prototype.handleFailure = function(t) {
  "use strict";
  this._success = false;
  this._response = t;
  this._progressEvent = null;
  return this;
 };
 s.prototype.handleProgress = function(event) {
  "use strict";
  this._progressEvent = event;
  return this;
 };
 e.exports = r;
}, null);

__d("AsyncUploadRequest", [ "AsyncUploadBase" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 for (var h in g) if (g.hasOwnProperty(h)) j[h] = g[h];
 var i = g === null ? null : g.prototype;
 j.prototype = Object.create(i);
 j.prototype.constructor = j;
 j.__superConstructor__ = g;
 function j() {
  "use strict";
  if (g !== null) g.apply(this, arguments);
 }
 j.prototype.setFiles = function(k) {
  "use strict";
  this._files = g.parseFiles(k);
  return this;
 };
 j.prototype.abort = function() {
  "use strict";
  this._uploads.forEach(function(k) {
   return this._abort(k);
  }.bind(this), this);
 };
 j.prototype.send = function() {
  "use strict";
  if (this._inFlight) return;
  this._inFlight = true;
  this._uploads = [];
  for (var k in this._files) this._files[k].forEach(function(l) {
   this._uploads.push(this._createFileUpload(k, l));
  }.bind(this));
  this._waiting = this._uploads.slice(0);
  this._pending = [];
  if (this._uploads.length) {
   this._processQueue();
  } else this._processUpload(this._createFileUpload(null, null));
 };
 j.prototype._processQueue = function() {
  "use strict";
  i._processQueue.call(this);
  if (!this._pending.length && !this._waiting.length) this.inform("complete", this._uploads);
 };
 j.isSupported = function() {
  "use strict";
  return g.isSupported();
 };
 e.exports = j;
}, null);

__d("FileForm", [ "ArbiterMixin", "AsyncRequest", "AsyncResponse", "AsyncUploadRequest", "BehaviorsMixin", "CurrentUser", "DataStore", "DOMQuery", "Event", "Form", "JSONPTransport", "Parent", "URI", "copyProperties", "mixin", "shield" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v) {
 b.__markCompiled && b.__markCompiled();
 function w(ca) {
  var da = {}, ea = n.scry(ca, 'input[type="file"]');
  ea.forEach(function(fa) {
   da[fa.name] = fa.files;
  });
  return da;
 }
 function x(ca) {
  var da = n.scry(ca, 'input[type="file"]');
  da.forEach(function(ea) {
   ea.files = null;
  });
 }
 var y = u(g, k);
 for (var z in y) if (y.hasOwnProperty(z)) ba[z] = y[z];
 var aa = y === null ? null : y.prototype;
 ba.prototype = Object.create(aa);
 ba.prototype.constructor = ba;
 ba.__superConstructor__ = y;
 function ba(ca, da, ea) {
  "use strict";
  if (ca.getAttribute("rel") === "async") throw new Error("FileForm cannot be used with Primer forms.");
  if (ca.getAttribute("method").toUpperCase() !== "POST") throw new Error("FileForm must be used with POST forms.");
  this._form = ca;
  this._previousEncoding = this._form.enctype;
  this._form.enctype = this._form.encoding = "multipart/form-data";
  this._files = null;
  da && this.enableBehaviors(da);
  this._options = ea || {};
  this.setAllowCrossOrigin(this._options.allowCrossOrigin);
  this.setAllowCrossPageTransition(this._options.allowCrossPageTransition);
  this.setUploadInParallel(this._options.uploadInParallel);
  this.setConcurrentLimit(this._options.concurrentLimit);
  this.setPreprocessHandler(this._options.preprocessHandler);
  this.setNetworkErrorRetryLimit(this._options.networkErrorRetryLimit);
  this._listeners = [ o.listen(document.documentElement, "submit", this._submit.bind(this)), o.listen(this._form, "click", this._click.bind(this)) ];
  m.set(this._form, "FileForm", this);
 }
 ba.prototype.getRoot = function() {
  "use strict";
  return this._form;
 };
 ba.prototype.setAllowCrossOrigin = function(ca) {
  "use strict";
  this._allowCrossOrigin = !!ca;
  return this;
 };
 ba.prototype.setAllowCrossPageTransition = function(ca) {
  "use strict";
  this._allowCrossPageTransition = !!ca;
  return this;
 };
 ba.prototype.setUploadInParallel = function(ca) {
  "use strict";
  this._uploadInParallel = !!ca;
  return this;
 };
 ba.prototype.setConcurrentLimit = function(ca) {
  "use strict";
  this._concurrentLimit = ca;
  return this;
 };
 ba.prototype.setPreprocessHandler = function(ca) {
  "use strict";
  this._preprocessHandler = ca;
  return this;
 };
 ba.prototype.setNetworkErrorRetryLimit = function(ca) {
  "use strict";
  this._retryLimit = ca;
  return this;
 };
 ba.prototype.setFiles = function(ca) {
  "use strict";
  this._files = ca;
  return this;
 };
 ba.prototype.canUseXHR = function() {
  "use strict";
  var ca = "FormData" in window;
  if (ca) if (!s(this._form.action).isSameOrigin() && !this._allowCrossOrigin) ca = false;
  return ca;
 };
 ba.prototype._submit = function(event) {
  "use strict";
  if (event.isDefaultPrevented() || event.getTarget() !== this._form) return;
  if (this.inform("submit") === false) {
   event.prevent();
   return;
  }
  return this.canUseXHR() ? this._sendViaXHR(event) : this._sendViaFrame(event);
 };
 ba.prototype._click = function(event) {
  "use strict";
  var ca = event.getTarget();
  while (n.isElementNode(ca)) {
   if (ca.type === "submit") {
    this._clickTarget = ca;
    setTimeout(this._unclick.bind(this), 0);
    break;
   }
   ca = ca.parentNode;
  }
 };
 ba.prototype._unclick = function() {
  "use strict";
  this._clickTarget = null;
 };
 ba.prototype._sendViaFrame = function(event) {
  "use strict";
  var ca = this._request = new h();
  ca.setStatusElement(this._getStatusElement());
  ca.addStatusIndicator();
  ca.setOption("useIframeTransport", true);
  var da = ca.handleResponse.bind(ca), ea = new q("iframe", this._form.action, da), fa = ea.getTransportFrame(), ga = ea.getRequestURI().addQueryData({
   __iframe: true,
   __user: l.getID()
  });
  this._form.setAttribute("action", ga.toString());
  this._form.setAttribute("target", fa.name);
  ca.setJSONPTransport(ea);
  ca.setURI(ga);
  ca.setHandler(this.success.bind(this, null));
  ca.setErrorHandler(this.failure.bind(this, null));
  ca.setInitialHandler(v(this.initial, this, null));
 };
 ba.prototype._sendViaXHR = function(event) {
  "use strict";
  var ca;
  if (this._uploadInParallel && j.isSupported()) {
   ca = new j().setPreprocessHandler(this._preprocessHandler).setData(p.serialize(this._form, this._clickTarget)).setNetworkErrorRetryLimit(this._retryLimit);
   if (this._concurrentLimit) ca.setLimit(this._concurrentLimit);
   if (this._files) {
    ca.setFiles(this._files);
   } else ca.setFiles(w(this._form));
   var da = [ ca.subscribe("progress", function(ia, ja) {
    this.progress(ja, ja.getProgressEvent());
   }.bind(this)), ca.subscribe("initial", function(ia, ja) {
    this.initial(ja, ja.getResponse());
   }.bind(this)), ca.subscribe("success", function(ia, ja) {
    this.success(ja, ja.getResponse());
   }.bind(this)), ca.subscribe("start", function(ia, ja) {
    this.inform("start", {
     upload: ja
    });
   }.bind(this)), ca.subscribe("failure", function(ia, ja) {
    this.failure(ja, ja.getResponse());
    return false;
   }.bind(this)), ca.subscribe("complete", function() {
    while (da.length) da.pop().unsubscribe();
   }) ];
  } else {
   var ea;
   if (this._files) {
    ea = p.createFormData(p.serialize(this._form, this._clickTarget));
    var fa = j.parseFiles(this._files);
    for (var ga in fa) {
     var ha = fa[ga];
     if (ha.length === 1) {
      ea.append(ga, ha[0]);
     } else {
      ga = ga + "[]";
      ha.forEach(function(ia) {
       ea.append(ga, ia);
      });
     }
    }
   } else ea = p.createFormData(this._form, this._clickTarget);
   ca = new h().setRawData(ea).setHandler(this.success.bind(this, null)).setErrorHandler(this.failure.bind(this, null)).setUploadProgressHandler(this.progress.bind(this, null)).setInitialHandler(v(this.initial, this, null));
  }
  ca.setAllowCrossOrigin(this._allowCrossOrigin).setAllowCrossPageTransition(this._allowCrossPageTransition).setRelativeTo(this._form).setStatusElement(this._getStatusElement()).setURI(this._form.action).send();
  this._request = ca;
  event && event.prevent();
 };
 ba.prototype.forceSendViaXHR = function() {
  "use strict";
  return this._sendViaXHR(null);
 };
 ba.prototype.initial = function(ca) {
  "use strict";
  return this.inform("initial", {
   upload: ca
  });
 };
 ba.prototype.success = function(ca, da) {
  "use strict";
  var ea = {
   response: da,
   upload: ca
  };
  if (this.inform("success", ea) !== false) o.fire(this._form, "success", ea);
  this._cleanup();
 };
 ba.prototype.failure = function(ca, da) {
  "use strict";
  var ea = {
   response: da,
   upload: ca
  };
  if (this.inform("failure", ea) !== false) if (o.fire(this._form, "error", ea) !== false) i.defaultErrorHandler(da);
  this._cleanup();
 };
 ba.prototype.progress = function(ca, event) {
  "use strict";
  this.inform("progress", {
   event: event,
   upload: ca
  });
 };
 ba.prototype.abort = function() {
  "use strict";
  if (this._request) {
   this._request.abort();
   this._cleanup();
  }
 };
 ba.prototype.clear = function() {
  "use strict";
  x(this._form);
 };
 ba.prototype.destroy = function() {
  "use strict";
  this._cleanup();
  while (this._listeners.length) this._listeners.pop().remove();
  this._listeners = null;
  this._form.enctype = this._form.encoding = this._previousEncoding;
  m.remove(this._form, "FileForm");
 };
 ba.prototype._cleanup = function() {
  "use strict";
  this._request = null;
 };
 ba.prototype._getStatusElement = function() {
  "use strict";
  return r.byClass(this._form, "stat_elem") || this._form;
 };
 ba.getInstance = function(ca) {
  "use strict";
  return m.get(ca, "FileForm");
 };
 t(ba, {
  EVENTS: [ "start", "submit", "initial", "progress", "success", "failure" ]
 });
 e.exports = ba;
}, null);

__d("FileFormResetOnSubmit", [ "DOMQuery", "Event", "emptyFunction" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 function j(l, m) {
  var n = h.listen(l, "change", i.thatReturnsFalse, h.Priority.URGENT);
  try {
   m();
  } catch (o) {
   throw o;
  } finally {
   n.remove();
  }
 }
 function k(l) {
  "use strict";
  this._form = l;
 }
 k.prototype.enable = function() {
  "use strict";
  var l = this._reset.bind(this);
  this._subscription = this._form.subscribe("submit", function() {
   setTimeout(l, 0);
  });
 };
 k.prototype.disable = function() {
  "use strict";
  this._subscription.unsubscribe();
  this._subscription = null;
 };
 k.prototype._reset = function() {
  "use strict";
  var l = this._form.getRoot();
  j(l, function() {
   var m = g.scry(l, 'input[type="file"]');
   m.forEach(function(n) {
    n.value = "";
   });
  });
 };
 e.exports = k;
}, null);

__d("DOMClone", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 var g = {
  shallowClone: function(i) {
   return h(i, false);
  },
  deepClone: function(i) {
   return h(i, true);
  }
 };
 function h(i, j) {
  var k = i.cloneNode(j);
  if (typeof k.__FB_TOKEN !== "undefined") delete k.__FB_TOKEN;
  return k;
 }
 e.exports = g;
}, null);

__d("FileInput", [ "ArbiterMixin", "DOM", "DOMClone", "Event", "Focus", "Keys", "UserAgent_DEPRECATED", "cx", "mixin" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
 b.__markCompiled && b.__markCompiled();
 var p = m.ie(), q = o(g);
 for (var r in q) if (q.hasOwnProperty(r)) t[r] = q[r];
 var s = q === null ? null : q.prototype;
 t.prototype = Object.create(s);
 t.prototype.constructor = t;
 t.__superConstructor__ = q;
 function t(u, v, w) {
  "use strict";
  this.container = u;
  this.control = v;
  var x = h.scry(this.container, "a")[0];
  x && x.removeAttribute("href");
  var y = h.create("div", {
   className: "_3jk"
  }, w);
  h.appendContent(this.control, y);
  this._boundHandleChange = this._handleChange.bind(this);
  if (p) this._boundHandleIEKeyDown = this._handleIEKeyDown.bind(this);
  this._setInputElement(w);
 }
 t.prototype.getValue = function() {
  "use strict";
  return this.input.value;
 };
 t.prototype.getInput = function() {
  "use strict";
  return this.input;
 };
 t.prototype.getContainer = function() {
  "use strict";
  return this.container;
 };
 t.prototype.getControl = function() {
  "use strict";
  return this.control;
 };
 t.prototype.clear = function() {
  "use strict";
  if (p) {
   var u = i.deepClone(this.input);
   h.replace(this.input, u);
   this._setInputElement(u);
  } else this.input.value = "";
 };
 t.prototype.destroy = function() {
  "use strict";
  this._listener.remove();
  this._listener = null;
  if (p) {
   this._IEKeyDownListener.remove();
   this._IEKeyDownListener = null;
  }
  this.container = null;
  this.control = null;
  this.input = null;
 };
 t.prototype._setInputElement = function(u) {
  "use strict";
  this.input = u;
  k.relocate(u, this.control);
  this._listener && this._listener.remove();
  this._listener = j.listen(u, "change", this._boundHandleChange);
  if (p) {
   this._IEKeyDownListener && this._IEKeyDownListener.remove();
   this._IEKeyDownListener = j.listen(u, "keydown", this._boundHandleIEKeyDown);
  }
 };
 t.prototype._handleChange = function(event) {
  "use strict";
  this.inform("change", event);
  var u = this.input.form;
  if (u && p < 9) j.fire(u, "change", event);
 };
 t.prototype._handleIEKeyDown = function(event) {
  "use strict";
  if (event.keyCode === l.RETURN) {
   event.preventDefault();
   var u = document.createEvent("MouseEvents");
   u.initEvent("click", true, true);
   this.input.dispatchEvent(u);
  }
 };
 e.exports = t;
}, null);

__d("submitForm", [ "DOM" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 var h = function(i) {
  var j = g.scry(i, 'input[type="submit"]')[0];
  if (j) {
   j.click();
  } else {
   j = g.create("input", {
    type: "submit",
    className: "hidden_elem"
   });
   g.appendContent(i, j);
   j.click();
   g.remove(j);
  }
 };
 e.exports = h;
}, null);

__d("FormSubmitOnChange", [ "Event", "copyProperties", "submitForm" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 function j(k) {
  "use strict";
  this._form = k;
 }
 j.prototype.enable = function() {
  "use strict";
  this._listener = g.listen(this._form.getRoot(), "change", this._submit.bind(this));
 };
 j.prototype.disable = function() {
  "use strict";
  this._listener.remove();
  this._listener = null;
 };
 j.prototype._submit = function() {
  "use strict";
  i(this._form.getRoot());
 };
 h(j.prototype, {
  _listener: null
 });
 e.exports = j;
}, null);

__d("PhotosUploadID", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 var g = 1024, h = {
  getNewID: function() {
   return (g++).toString();
  }
 };
 e.exports = h;
}, null);

__d("getImageSize", [ "DataViewPolyfill" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 var h = a.DataView || g;
 function i(m) {
  return {
   width: m.getUint16(6, true),
   height: m.getUint16(8, true)
  };
 }
 function j(m) {
  return {
   width: m.getUint32(16, false),
   height: m.getUint32(20, false)
  };
 }
 function k(m) {
  var n = m.byteLength, o = 2;
  while (o < n) {
   var p = m.getUint16(o, false);
   o += 2;
   if (p == 65472 || p == 65474) {
    return {
     width: m.getUint16(o + 5, false),
     height: m.getUint16(o + 3, false)
    };
   } else o += m.getUint16(o, false);
  }
  return null;
 }
 function l(m) {
  var n = new h(m);
  if (n.getUint8(0) == 255 && n.getUint8(1) == 216) return k(n);
  if (n.getUint8(0) == 71 && n.getUint8(1) == 73 && n.getUint8(2) == 70) return i(n);
  if (n.getUint8(0) == 137 && n.getUint8(1) == 80 && n.getUint8(2) == 78 && n.getUint8(3) == 71) return j(n);
  return null;
 }
 e.exports = l;
 l.gif = i;
 l.png = j;
 l.jpeg = k;
}, null);

__d("ChatAutoSendPhotoUploader", [ "ArbiterMixin", "AsyncUploadRequest", "DOM", "Event", "FileForm", "FileFormResetOnSubmit", "FileInput", "FormSubmitOnChange", "JpegResizer", "MercuryAttachmentType", "PhotosMimeType", "PhotosUploadID", "SubscriptionsHandler", "arrayContains", "csx", "getImageSize", "getObjectValues", "invariant", "isEmpty", "mixin" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function aa() {
  return "upload_" + r.getNewID();
 }
 var ba = z(g);
 for (var ca in ba) if (ba.hasOwnProperty(ca)) ea[ca] = ba[ca];
 var da = ba === null ? null : ba.prototype;
 ea.prototype = Object.create(da);
 ea.prototype.constructor = ea;
 ea.__superConstructor__ = ba;
 function ea(fa, ga, ha) {
  this.$ChatAutoSendPhotoUploader0 = ha;
  this.$ChatAutoSendPhotoUploader1 = ga;
  this.$ChatAutoSendPhotoUploader2 = new s();
  this.$ChatAutoSendPhotoUploader3 = {};
  this.$ChatAutoSendPhotoUploader4 = {};
  this.$ChatAutoSendPhotoUploader5 = fa.getAttribute("action");
  this.$ChatAutoSendPhotoUploader6 = new k(fa, [ n, l ]);
  this.$ChatAutoSendPhotoUploader6.setAllowCrossOrigin(true);
  this.$ChatAutoSendPhotoUploader6.setUploadInParallel(true);
  var ia = i.find(fa, "._4q60"), ja = i.find(ia, "._4q61");
  this.$ChatAutoSendPhotoUploader7 = new m(ia, ja, ga);
  this.$ChatAutoSendPhotoUploader2.addSubscriptions(this.$ChatAutoSendPhotoUploader6.subscribe("submit", this.$ChatAutoSendPhotoUploader8.bind(this)), this.$ChatAutoSendPhotoUploader6.subscribe("success", this.$ChatAutoSendPhotoUploader9.bind(this)), this.$ChatAutoSendPhotoUploader6.subscribe("failure", this.$ChatAutoSendPhotoUploadera.bind(this)), this.$ChatAutoSendPhotoUploader6.subscribe("progress", this.$ChatAutoSendPhotoUploaderb.bind(this)), j.listen(ja, "click", function() {
   if (this.$ChatAutoSendPhotoUploaderc) if (o.prepareResource) o.prepareResource();
   this.inform("open");
  }.bind(this)));
  this.$ChatAutoSendPhotoUploaderc = o.isSupported();
  if (this.$ChatAutoSendPhotoUploaderc) this.$ChatAutoSendPhotoUploader6.setPreprocessHandler(this.$ChatAutoSendPhotoUploaderd.bind(this));
 }
 ea.prototype.isUploading = function() {
  return !y(this.$ChatAutoSendPhotoUploader3);
 };
 ea.prototype.destroy = function() {
  this.$ChatAutoSendPhotoUploader2.release();
  this.$ChatAutoSendPhotoUploader6.destroy();
  this.$ChatAutoSendPhotoUploader3 = {};
  this.$ChatAutoSendPhotoUploader4 = {};
 };
 ea.prototype.$ChatAutoSendPhotoUploadere = function(fa, ga) {
  var ha = this.$ChatAutoSendPhotoUploaderf(fa);
  if (ga) {
   ha.preview_width = ga.width;
   ha.preview_height = ga.height;
  }
  return ha;
 };
 ea.prototype.$ChatAutoSendPhotoUploaderf = function(fa) {
  var ga = {
   upload_id: fa,
   on_progress: function(ha) {
    this.$ChatAutoSendPhotoUploader2.addSubscriptions(this.subscribe("progress", ha));
   }.bind(this),
   on_resizing_progress: function(ha) {
    this.$ChatAutoSendPhotoUploader2.addSubscriptions(this.subscribe("resize_progress", ha));
   }.bind(this),
   on_success: function(ha) {
    this.$ChatAutoSendPhotoUploader2.addSubscriptions(this.subscribe("success", ha));
   }.bind(this),
   upload_canceled: this.$ChatAutoSendPhotoUploaderg.bind(this),
   attach_type: p.PHOTO,
   preview_uploading: true
  };
  return ga;
 };
 ea.prototype.$ChatAutoSendPhotoUploaderd = function(fa, ga) {
  var ha = fa.getFile();
  if (!q(ha.type).isJpeg()) return ga(fa);
  o.getSingleton().resizeBlob(ha, function(ia, ja, ka) {
   if (ja) fa.setFile(ja);
   ga(fa);
  }, this.$ChatAutoSendPhotoUploaderh.bind(this, fa));
 };
 ea.prototype.$ChatAutoSendPhotoUploader8 = function() {
  var fa = aa();
  this.$ChatAutoSendPhotoUploaderi(fa, this.$ChatAutoSendPhotoUploader1.files);
 };
 ea.prototype.$ChatAutoSendPhotoUploaderi = function(fa, ga) {
  var ha = {};
  if (typeof FileReader !== "undefined" && FileReader.prototype.readAsArrayBuffer && ga && ga.length === 1) {
   this.$ChatAutoSendPhotoUploader3[fa] = fa;
   ha[fa] = ga[0];
   var ia = new FileReader();
   ia.onload = function() {
    this.inform("submit", {
     upload_id: fa,
     preview_attachments: [ this.$ChatAutoSendPhotoUploadere(fa, v(ia.result)) ]
    });
   }.bind(this);
   ia.onerror = function() {
    this.inform("submit", {
     upload_id: fa,
     preview_attachments: [ this.$ChatAutoSendPhotoUploaderf(fa) ]
    });
   }.bind(this);
   ia.readAsArrayBuffer(ga[0]);
  } else {
   var ja = [];
   if (!ga) {
    this.$ChatAutoSendPhotoUploader3[fa] = fa;
    this.$ChatAutoSendPhotoUploader0.value = fa;
    ja.push(this.$ChatAutoSendPhotoUploaderf(fa));
   } else for (var ka = 0; ka < ga.length; ++ka) {
    var la = aa();
    ha[la] = ga[ka];
    this.$ChatAutoSendPhotoUploader3[la] = fa;
    ja.push(this.$ChatAutoSendPhotoUploaderf(la));
   }
   this.inform("submit", {
    upload_id: fa,
    preview_attachments: ja
   });
  }
  if (Object.keys(ha).length > 0) this.$ChatAutoSendPhotoUploader6.setFiles(ha);
 };
 ea.prototype.$ChatAutoSendPhotoUploader9 = function(event, fa) {
  var ga = this.$ChatAutoSendPhotoUploaderj(fa);
  if (this.$ChatAutoSendPhotoUploader3[ga]) {
   var ha = this.$ChatAutoSendPhotoUploader3[ga];
   delete this.$ChatAutoSendPhotoUploader3[ga];
   var ia = fa.response.getPayload();
   if (!this.$ChatAutoSendPhotoUploader4[ha]) this.$ChatAutoSendPhotoUploader4[ha] = [];
   this.$ChatAutoSendPhotoUploader4[ha].push({
    id: ga,
    image_id: ia.metadata[0].image_id,
    file_id: ia.metadata[0].file_id,
    gif_id: ia.metadata[0].gif_id
   });
   this.inform("success", {
    upload_id: ga
   });
   if (!this.$ChatAutoSendPhotoUploaderk(ha)) this.$ChatAutoSendPhotoUploaderl(ha);
   this.$ChatAutoSendPhotoUploader7.clear();
   this.$ChatAutoSendPhotoUploader1 = this.$ChatAutoSendPhotoUploader7.getInput();
  }
 };
 ea.prototype.$ChatAutoSendPhotoUploaderl = function(fa) {
  x(!this.$ChatAutoSendPhotoUploaderk(fa));
  this.$ChatAutoSendPhotoUploader4[fa].sort(function(ga, ha) {
   return ga.id < ha.id ? -1 : 1;
  });
  this.inform("all-uploads-completed", {
   upload_id: fa,
   image_ids: this.$ChatAutoSendPhotoUploader4[fa].map(function(ga) {
    return ga.image_id;
   }),
   file_ids: this.$ChatAutoSendPhotoUploader4[fa].map(function(ga) {
    return ga.file_id;
   }),
   gif_ids: this.$ChatAutoSendPhotoUploader4[fa].map(function(ga) {
    return ga.gif_id;
   })
  });
  delete this.$ChatAutoSendPhotoUploader4[fa];
 };
 ea.prototype.$ChatAutoSendPhotoUploaderb = function(event, fa) {
  this.inform("progress", {
   upload_id: fa.upload.getName(),
   event: fa.event
  });
 };
 ea.prototype.$ChatAutoSendPhotoUploaderh = function(fa, event) {
  this.inform("resize_progress", {
   upload_id: fa.getName(),
   event: event
  });
 };
 ea.prototype.$ChatAutoSendPhotoUploaderk = function(fa) {
  return t(w(this.$ChatAutoSendPhotoUploader3), fa);
 };
 ea.prototype.$ChatAutoSendPhotoUploadera = function(event, fa) {
  var ga = this.$ChatAutoSendPhotoUploaderj(fa);
  this.$ChatAutoSendPhotoUploaderm(ga, "last-upload-failed");
  this.$ChatAutoSendPhotoUploader7.clear();
  this.$ChatAutoSendPhotoUploader1 = this.$ChatAutoSendPhotoUploader7.getInput();
  return false;
 };
 ea.prototype.$ChatAutoSendPhotoUploaderg = function(fa) {
  this.$ChatAutoSendPhotoUploaderm(fa, "last-upload-canceled");
 };
 ea.prototype.$ChatAutoSendPhotoUploaderm = function(fa, ga) {
  if (!this.$ChatAutoSendPhotoUploader3[fa]) return;
  var ha = this.$ChatAutoSendPhotoUploader3[fa];
  delete this.$ChatAutoSendPhotoUploader3[fa];
  if (!this.$ChatAutoSendPhotoUploaderk(ha)) if (this.$ChatAutoSendPhotoUploader4[ha]) {
   this.$ChatAutoSendPhotoUploaderl(ha);
  } else this.inform(ga, {
   upload_id: ha
  });
 };
 ea.prototype.$ChatAutoSendPhotoUploaderj = function(fa) {
  if (fa.upload) {
   return fa.upload.getName();
  } else return fa.response.getPayload().uploadID;
 };
 ea.prototype.uploadFile = function(fa) {
  var ga = aa(), ha = {};
  ha[ga] = fa;
  var ia = new h(this.$ChatAutoSendPhotoUploader5).setAllowCrossOrigin(true).setRelativeTo(this.$ChatAutoSendPhotoUploader6.getRoot()).setFiles(ha);
  this.$ChatAutoSendPhotoUploader2.addSubscriptions(ia.subscribe("success", function(event, ja) {
   this.$ChatAutoSendPhotoUploader9(event, {
    upload: ja,
    response: ja.getResponse()
   });
  }.bind(this)), ia.subscribe("failure", this.$ChatAutoSendPhotoUploadera.bind(this)));
  ia.send();
  this.$ChatAutoSendPhotoUploaderi(ga, [ fa ]);
 };
 e.exports = ea;
}, null);

__d("ImageSourceType", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 var g = {
  PROFILE_PICTURE: "profile_picture",
  IMAGE: "image"
 };
 e.exports = g;
}, null);

__d("ImageSourceRequest", [ "CurrentUser", "ImageSourceType", "KeyedCallbackManager", "PhotoResizeModeConst", "MercuryServerDispatcher", "arrayContains", "extendArray" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m) {
 b.__markCompiled && b.__markCompiled();
 function n() {
  "use strict";
  this._request = {
   fbid: null,
   type: null,
   width: null,
   height: null,
   resize_mode: null
  };
  this._callback = null;
 }
 n.prototype.setFBID = function(r) {
  "use strict";
  this._request.fbid = r;
  return this;
 };
 n.prototype.setType = function(r) {
  "use strict";
  if (!l([ h.PROFILE_PICTURE, h.IMAGE ], r)) throw new TypeError("ImageSourceRequest.setType: invalid type " + r);
  this._request.type = r;
  return this;
 };
 n.prototype.setDimensions = function(r, s) {
  "use strict";
  this._request.width = r;
  this._request.height = s;
  return this;
 };
 n.prototype.setResizeMode = function(r) {
  "use strict";
  if (!l([ j.COVER, j.CONTAIN ], r)) throw new TypeError("ImageSourceRequest.setResizeMode: invalid resize mode " + r);
  this._request.resize_mode = r;
  return this;
 };
 n.prototype.setCallback = function(r) {
  "use strict";
  this._callback = r;
  return this;
 };
 n.prototype.send = function() {
  "use strict";
  if (!this._request.fbid || !this._request.width || !this._request.height || !this._request.type || !this._request.resize_mode || !this._callback) throw new Error("ImageSourceRequest: You must set all the fields");
  var r = p(), s = q(this._request);
  r.executeOrEnqueue(s, this._callback);
  if (r.getUnavailableResourcesFromRequest(s).length === 1) {
   k.trySend("/ajax/image_source.php", {
    requests: [ this._request ]
   });
   return true;
  }
  return false;
 };
 var o = null;
 function p() {
  if (o) return o;
  var r = new i();
  o = r;
  k.registerEndpoints({
   "/ajax/image_source.php": {
    request_user_id: g.getID(),
    mode: k.BATCH_DEFERRED_MULTI,
    batch_function: function(s, t) {
     m(s.requests, t.requests);
     return s;
    },
    handler: function(s, t) {
     var u = t.getData().requests;
     for (var v = 0; v < u.length; ++v) r.setResource(q(u[v]), s[v]);
    }
   }
  });
  return r;
 }
 function q(r) {
  return [ r.fbid, r.type, r.width, r.height, r.resize_mode ].join("|");
 }
 e.exports = n;
}, null);

__d("MercuryParticipantFetcher", [ "MercuryIDs", "MercuryPayloadSource", "MercuryServerRequests", "Set", "ShortProfiles", "setImmediate" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function m(o) {
  this.$MercuryParticipantFetcher0 = i.getForFBID(o);
  this.$MercuryParticipantFetcher1 = false;
  this.$MercuryParticipantFetcher2 = new j();
  this.$MercuryParticipantFetcher3 = new j();
 }
 m.prototype.fetch = function(o) {
  this.$MercuryParticipantFetcher4(o);
  this.$MercuryParticipantFetcher5();
 };
 m.prototype.fetchMulti = function(o) {
  o.forEach(function(p) {
   return this.$MercuryParticipantFetcher4(p);
  }.bind(this));
  this.$MercuryParticipantFetcher5();
 };
 m.prototype.$MercuryParticipantFetcher4 = function(o) {
  if (!this.$MercuryParticipantFetcher3.has(o)) this.$MercuryParticipantFetcher2.add(o);
 };
 m.prototype.$MercuryParticipantFetcher5 = function() {
  if (this.$MercuryParticipantFetcher1 || this.$MercuryParticipantFetcher2.size === 0) return;
  this.$MercuryParticipantFetcher1 = true;
  l(function() {
   this.$MercuryParticipantFetcher1 = false;
   this.$MercuryParticipantFetcher2.forEach(function(o) {
    return this.$MercuryParticipantFetcher3.add(o);
   }.bind(this));
   this.$MercuryParticipantFetcher6(this.$MercuryParticipantFetcher2, function(o) {
    o.forEach(function(p) {
     return this.$MercuryParticipantFetcher3["delete"](p.id);
    }.bind(this));
    this.$MercuryParticipantFetcher7(o);
   }.bind(this));
   this.$MercuryParticipantFetcher2.clear();
  }.bind(this));
 };
 m.prototype.$MercuryParticipantFetcher6 = function(o, p) {
  var q = [];
  o.forEach(function(r) {
   var s = g.tokenize(r), t = s.type, u = s.value;
   t === "fbid" && q.push(u);
  });
  if (q.length > 0) k.getMulti(q, function(r) {
   var s = [];
   for (var t in r) s.push(n(r[t], t));
   p(s);
  });
 };
 m.prototype.$MercuryParticipantFetcher7 = function(o) {
  this.$MercuryParticipantFetcher0.handleUpdate({
   participants: o,
   from_client: false,
   payload_source: h.SERVER_FETCH_PARTICIPANTS
  });
 };
 function n(o, p) {
  var q = Object.assign({
   gender: o.gender,
   href: o.uri,
   id: g.getParticipantIDFromUserID(o.id || p),
   image_src: o.thumbSrc,
   name: o.name,
   short_name: o.firstName,
   employee: o.employee,
   is_employee_away: o.is_employee_away,
   type: o.type,
   vanity: o.vanity,
   is_friend: o.is_friend,
   is_messenger_user: o.is_messenger_user,
   orion_eligible: o.orionEligible,
   social_snippets: o.social_snippets
  }, {});
  if (o.officeStatus) {
   q.officeStatus = o.officeStatus;
   q.officeStatusStartDate = o.officeStatusStartDate;
   q.officeStatusEndDate = o.officeStatusEndDate;
   q.officeStatusComment = o.officeStatusComment;
   q.officeStatusLocation = o.officeStatusLocation;
  }
  return q;
 }
 e.exports = m;
}, null);

__d("MercuryParticipants", [ "CurrentUser", "EventEmitter", "ImageSourceRequest", "ImageSourceType", "ImmutableObject", "KeyedCallbackManager", "Map", "MercuryAssert", "MercuryIDs", "MercuryParticipantFetcher", "MercuryParticipantTypes", "MercuryParticipantsConstants", "MercuryServerRequests", "PhotoResizeModeConst", "Set", "fbt", "mapObject" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var x = "change";
 function y(aa) {
  this.$MercuryParticipants0 = aa;
  this.$MercuryParticipants1 = new h();
  this.$MercuryParticipants2 = new l();
  this.$MercuryParticipants3 = new p(this.$MercuryParticipants0);
  this.$MercuryParticipants4 = new m();
  this.$MercuryParticipants5 = s.getForFBID(this.$MercuryParticipants0);
  this.$MercuryParticipants5.subscribe("update-participants", function(ba, ca) {
   if (ca.participants && ca.participants.length > 0) {
    var da = {};
    ca.participants.forEach(function(ea) {
     da[ea.id] = ea;
    });
    this.$MercuryParticipants6(da);
   }
  }.bind(this));
 }
 y.prototype.addListener = function(aa, ba) {
  return this.$MercuryParticipants1.addListener(aa, ba);
 };
 y.prototype.getIDFromVanityOrFBID = function(aa) {
  if (!aa) return;
  if (this.$MercuryParticipants4.has(aa)) return this.$MercuryParticipants4.get(aa);
  if (/^\d+$/.test(aa)) return o.getParticipantIDFromUserID(aa);
 };
 y.prototype.getNow = function(aa) {
  return this.$MercuryParticipants7(aa);
 };
 y.prototype.getOrFetch = function(aa) {
  var ba = this.$MercuryParticipants7(aa);
  if (!ba) this.$MercuryParticipants3.fetch(aa);
  return ba;
 };
 y.prototype.get = function(aa, ba) {
  n.isParticipantID(aa);
  return this.$MercuryParticipants8([ aa ], function(ca) {
   ba(ca[aa]);
  });
 };
 y.prototype.getMulti = function(aa, ba) {
  return this.$MercuryParticipants8(aa, ba);
 };
 y.prototype.getBigImageMulti = function(aa, ba) {
  n.allParticipantIDs(aa);
  var ca = r.BIG_IMAGE_SIZE;
  return this.$MercuryParticipants8(aa, function(da) {
   var ea = {}, fa = 0, ga = new u(), ha = function(la, ma) {
    fa++;
    ea[la] = ma;
    if (fa === aa.length) {
     ba(ea);
     if (ga.size > 0) this.$MercuryParticipants9(ga);
    }
   }.bind(this), ia = function(la, ma) {
    this.$MercuryParticipants2.setResource(la, k.set(this.$MercuryParticipants2.getResource(la), {
     big_image_src: ma.uri
    }));
    ga.add(la);
    ha(la, ma.uri);
   }.bind(this);
   for (var ja in da) {
    var ka = da[ja];
    if (!ka.big_image_src) {
     new i().setFBID(o.getUserIDFromParticipantID(ja)).setType(j.PROFILE_PICTURE).setDimensions(ca, ca).setResizeMode(t.COVER).setCallback(ia.bind(null, ja)).send();
    } else ha(ka.id, ka.big_image_src);
   }
  }.bind(this));
 };
 y.prototype.getOrderedBigImageMulti = function(aa, ba) {
  return this.getBigImageMulti(aa, function(ca) {
   ba(aa.map(function(da) {
    return ca[da];
   }));
  });
 };
 y.prototype.$MercuryParticipants8 = function(aa, ba) {
  n.allParticipantIDs(aa);
  var ca = this.$MercuryParticipants2.executeOrEnqueue(aa, ba), da = this.$MercuryParticipants2.getUnavailableResources(ca).filter(function(ea) {
   var fa = o.tokenize(ea), ga = fa.type, ha = fa.value;
   if (ga === "email") {
    this.$MercuryParticipantsa(ea, ha);
    return false;
   }
   return true;
  }.bind(this));
  this.$MercuryParticipants3.fetchMulti(da);
  return this.$MercuryParticipantsb(ca);
 };
 y.prototype.$MercuryParticipants7 = function(aa) {
  var ba = this.$MercuryParticipants2.getResource(aa);
  if (!ba) {
   var ca = o.tokenize(aa), da = ca.type, ea = ca.value;
   if (da === "email") ba = this.$MercuryParticipantsa(aa, ea);
  }
  return ba;
 };
 y.prototype.$MercuryParticipantsa = function(aa, ba) {
  var ca = new k(z(aa, ba));
  this.$MercuryParticipants2.setResource(aa, ca);
  return ca;
 };
 y.prototype.$MercuryParticipants9 = function(aa) {
  this.$MercuryParticipants1.emit(x, aa);
 };
 y.prototype.$MercuryParticipants6 = function(aa) {
  aa = w(aa, function(ba, ca) {
   if (ba.vanity) this.$MercuryParticipants4.set(ba.vanity, ca);
   return new k(this.$MercuryParticipantsc(ba));
  }.bind(this));
  this.$MercuryParticipants2.addResourcesAndExecute(aa);
  this.$MercuryParticipants9(new u(Object.keys(aa)));
 };
 y.prototype.$MercuryParticipantsc = function(aa) {
  var ba = aa.type === q.USER || aa.type === q.FRIEND;
  if (!ba) return aa;
  if (!aa.name && !aa.href && !aa.vanity) {
   var ca = v._("Facebook User");
   aa.name = ca;
   aa.short_name = ca;
  }
  return aa;
 };
 y.prototype.$MercuryParticipantsb = function(aa) {
  return {
   remove: function() {
    this.$MercuryParticipants2.unsubscribe(aa);
   }.bind(this)
  };
 };
 function z(aa, ba) {
  return {
   gender: r.UNKNOWN_GENDER,
   href: null,
   id: aa,
   image_src: r.EMAIL_IMAGE,
   big_image_src: r.EMAIL_IMAGE,
   name: ba,
   short_name: ba,
   employee: false
  };
 }
 e.exports = new y(g.getID());
}, null);

__d("ChatAuthorPhotoBlock.react", [ "MercuryParticipants", "React", "cx", "fbt", "formatDate", "joinClasses" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 var m = h, n = m.PropTypes, o = 864e5, p = h.createClass({
  displayName: "ChatAuthorPhotoBlock",
  propTypes: {
   authorID: n.string.isRequired,
   hideName: n.bool,
   hidePhoto: n.bool,
   timestamp: n.number
  },
  getInitialState: function() {
   return {
    author: {
     id: null,
     name: "",
     href: "#",
     image_src: ""
    }
   };
  },
  componentDidMount: function() {
   this.updateAuthor(this.props.authorID);
  },
  componentWillReceiveProps: function(q) {
   if (q.authorID != this.state.author.id) this.updateAuthor(q.authorID);
  },
  render: function() {
   return h.createElement("div", h.__spread({}, this.props, {
    className: l(this.props.className, "_5yt9")
   }), this.renderAuthorName(), this.renderAuthorPhoto(), this.props.children);
  },
  renderAuthorName: function() {
   if (!this.props.hideName) return h.createElement("div", {
    className: "_5ys-",
    ref: "name"
   }, this.state.author.name);
  },
  renderAuthorPhoto: function() {
   if (!this.props.hidePhoto) {
    var q = null;
    if (this.props.timestamp) {
     var r = Date.now() - this.props.timestamp > o ? "M jS, g:ia" : "g:ia";
     q = k(new Date(this.props.timestamp), r);
    }
    var s = j._("{name} {time}", [ j.param("name", this.state.author.name), j.param("time", q) ]);
    return h.createElement("a", {
     "aria-label": s,
     className: "_5ys_",
     "data-hover": "tooltip",
     "data-tooltip-position": "left",
     href: this.state.author.href,
     ref: "link"
    }, h.createElement("img", {
     src: this.state.author.image_src,
     ref: "image"
    }));
   }
  },
  updateAuthor: function(q) {
   g.get(q, function(r) {
    this.isMounted() && this.setState({
     author: r
    });
   }.bind(this));
  }
 });
 e.exports = p;
}, null);

__d("ChatImageWithArrow.react", [ "BackgroundImage.react", "Link.react", "MercuryAttachmentConstants", "React", "XUISpinner.react", "cx", "getVendorPrefixedName", "joinClasses", "keyMirror" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var p = j, q = p.PropTypes, r = o({
  LEFT: null,
  RIGHT: null,
  BOTH: null
 }), s = 30, t = 15, u = j.createClass({
  displayName: "ChatImageWithArrow",
  propTypes: {
   arrowDirection: q.oneOf(Object.keys(r)),
   arrowClassName: q.string,
   onClick: q.func,
   height: q.number.isRequired,
   isLoading: q.bool,
   rootClassName: q.string,
   sideLength: q.number,
   source: q.string,
   width: q.number.isRequired
  },
  getDefaultProps: function() {
   return {
    sideLength: i.SIDE_LENGTH,
    isLoading: false
   };
  },
  render: function() {
   this._arrowWidth = this.props.sideLength / Math.sqrt(2);
   this._extendedPhotoWidth = Math.ceil(this._getWidth() + this._arrowWidth);
   if (this.props.isLoading) return this._renderUploadingBubble();
   var v = n("_4yp6" + (this.props.arrowDirection !== r.BOTH ? " " + "_2nlo" : ""), this.props.rootClassName), w, x;
   switch (this.props.arrowDirection) {
   case r.BOTH:
    w = [ this._renderArrowWithBorder(r.LEFT), this._renderArrowWithBorder(r.RIGHT) ];
    x = [ this._renderArrowWithNoBorder(r.LEFT), this._renderArrowWithNoBorder(r.RIGHT) ];
    break;

   case r.LEFT:
   case r.RIGHT:
    w = this._renderArrowWithBorder(this.props.arrowDirection);
    x = this._renderArrowWithNoBorder(this.props.arrowDirection);
    break;
   }
   return this._renderLink(j.createElement("div", {
    className: v
   }, w, j.createElement("div", {
    className: "_4yp8",
    style: {
     width: this._getWidth(),
     height: this._getHeight()
    }
   }, j.createElement("div", {
    className: "_4yp9",
    style: {
     backgroundImage: "url(" + this.props.source + ")",
     width: this._extendedPhotoWidth,
     height: this._getHeight()
    }
   })), x));
  },
  _getWidth: function() {
   return Math.max(this.props.width, t);
  },
  _getHeight: function() {
   return Math.max(this.props.height, s);
  },
  _renderLink: function(v) {
   if (this.props.onClick) return j.createElement(h, {
    onClick: this.props.onClick
   }, v);
   return v;
  },
  _calculateArrowTransform: function(v, w, x, y) {
   if (w === r.LEFT) {
    return "translate(" + x + "px, " + y + "px)" + "rotate(45deg)";
   } else return "translate(" + (v - x) + "px, " + y + "px)" + "rotate(45deg)";
  },
  _calculateArrowImageTransform: function(v, w, x, y) {
   if (w === r.LEFT) {
    return "rotate(-45deg)" + "translate(-" + (this._arrowWidth + x) + "px," + "-" + y + "px)";
   } else return "rotate(-45deg)" + "translate(-" + (v - x) + "px, -" + y + "px)";
  },
  _renderUploadingBubble: function() {
   var v = {
    width: this.props.sideLength,
    height: this.props.sideLength
   }, w = {
    width: this.props.sideLength,
    height: this.props.sideLength
   }, x = m("transform");
   if (x) {
    v[x] = this._calculateArrowTransform(this._getWidth(), this.props.arrowDirection, 0, this.props.sideLength);
    w[x] = this._calculateArrowTransform(this._getWidth(), this.props.arrowDirection, 0, Math.floor(this.props.sideLength - this._getHeight()));
   }
   return j.createElement("div", {
    className: "_4yp6"
   }, j.createElement("div", {
    className: "_4ypa",
    style: v
   }), j.createElement("div", {
    className: "_4ypb",
    style: {
     width: this._getWidth(),
     height: this._getHeight()
    }
   }, j.createElement(k, {
    size: "small"
   })), j.createElement("div", {
    className: "_4ype",
    style: w
   }));
  },
  _renderArrowWithBorder: function(v) {
   var w = {
    width: this.props.sideLength,
    height: this.props.sideLength
   }, x = {}, y = m("transform");
   if (y) {
    w[y] = this._calculateArrowTransform(this._getWidth(), v, 0, this.props.sideLength);
    x[y] = this._calculateArrowImageTransform(this._getWidth(), v, 0, this.props.sideLength);
    return j.createElement("div", {
     className: n("_4ypf" + (v === r.LEFT ? " " + "_2nlp" : "") + (v === r.RIGHT ? " " + "_2nlq" : ""), this.props.arrowClassName),
     style: w
    }, j.createElement(g, {
     backgroundSize: "cover",
     className: "_4ypg",
     height: this._getHeight(),
     src: this.props.source,
     style: x,
     width: this._extendedPhotoWidth
    }));
   }
  },
  _renderArrowWithNoBorder: function(v) {
   var w = {
    width: this.props.sideLength,
    height: this.props.sideLength
   }, x = {}, y = 1, z = m("transform");
   if (z) {
    w[z] = this._calculateArrowTransform(this._getWidth(), v, y, this.props.sideLength - this._getHeight());
    x[z] = this._calculateArrowImageTransform(this._getWidth(), v, y, this.props.sideLength);
   }
   return j.createElement("div", {
    className: n("_4yph" + (v === r.LEFT ? " " + "_2nlp" : "") + (v === r.RIGHT ? " " + "_2nlq" : ""), this.props.arrowClassName),
    style: w
   }, j.createElement(g, {
    backgroundSize: "cover",
    className: "_4ypg",
    height: this._getHeight(),
    src: this.props.source,
    style: x,
    width: this._extendedPhotoWidth
   }));
  }
 });
 e.exports = u;
}, null);

__d("ChatPhotoUploader.react", [ "ChatAutoSendPhotoUploader", "Image.react", "InlineBlock.react", "Link.react", "MercuryConfig", "React", "SubscriptionsHandler", "cx", "emptyFunction", "fbt", "ix", "joinClasses" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var s = l, t = s.PropTypes, u = l.createClass({
  displayName: "ChatPhotoUploader",
  propTypes: {
   actionURI: t.string,
   disabled: t.bool,
   imageClassName: t.string,
   imagesOnly: t.bool,
   linkClassName: t.string,
   onSubmit: t.func,
   onAllUploadsComplete: t.func,
   onLastUploadFail: t.func,
   onLastUploadCancel: t.func
  },
  getDefaultProps: function() {
   return {
    actionURI: k.upload_url,
    disabled: false,
    imageClassName: "_509w",
    imagesOnly: true,
    linkClassName: "",
    onSubmit: o,
    onAllUploadsComplete: o,
    onLastUploadFail: o,
    onLastUploadCancel: o
   };
  },
  componentDidMount: function() {
   this._uploader = new g(l.findDOMNode(this.refs.form), l.findDOMNode(this.refs.input), l.findDOMNode(this.refs.attachID));
   this._subscriptions = new m();
   this._subscriptions.addSubscriptions(this._uploader.subscribe("submit", this._handleSubmit), this._uploader.subscribe("all-uploads-completed", this._handleAllUploadsCompleted), this._uploader.subscribe("last-upload-failed", this._handleLastUploadFailed), this._uploader.subscribe("last-upload-canceled", this._handleLastUploadCanceled));
  },
  shouldComponentUpdate: function(v, w) {
   return v.actionURI != this.props.actionURI || v.disabled !== this.props.disabled;
  },
  componentWillUnmount: function() {
   this._subscriptions && this._subscriptions.release();
   this._uploader && this._uploader.destroy();
  },
  render: function() {
   return l.createElement("form", {
    action: this.props.actionURI,
    method: "post",
    onClick: function(v) {
     if (this.props.disabled) {
      v.preventDefault();
      v.stopPropagation();
     }
    }.bind(this),
    ref: "form"
   }, l.createElement("input", {
    type: "hidden",
    name: "attach_id",
    ref: "attachID"
   }), l.createElement("input", {
    type: "hidden",
    name: "images_only",
    value: this.props.imagesOnly
   }), l.createElement(i, {
    className: "_m _4q60 _3rzn"
   }, l.createElement(j, {
    className: r("_4q61 _5f0v _509v", this.props.linkClassName)
   }, l.createElement(h, {
    className: this.props.imageClassName,
    src: q("/images/chat/chat_camera_icon.png"),
    alt: p._("Camera")
   })), l.createElement("input", {
    disabled: this.props.disabled,
    type: "file",
    className: "_n",
    name: "attachment[]",
    multiple: "true",
    accept: this.props.imagesOnly ? "image/*" : "*",
    ref: "input"
   })));
  },
  _handleSubmit: function(v, w) {
   this.props.onSubmit(v, w);
  },
  _handleAllUploadsCompleted: function(v, w) {
   this.props.onAllUploadsComplete(v, w);
  },
  _handleLastUploadFailed: function(v, w) {
   this.props.onLastUploadFail(v, w);
  },
  _handleLastUploadCanceled: function(v, w) {
   this.props.onLastUploadCancel(v, w);
  },
  isUploading: function() {
   return this._uploader && this._uploader.isUploading();
  },
  uploadFile: function(v) {
   this._uploader.uploadFile(v);
  }
 });
 e.exports = u;
}, null);

__d("ChatTypingIndicator.react", [ "ChatAuthorPhotoBlock.react", "ReactComponentWithPureRenderMixin", "React", "cx" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 var k = i, l = k.PropTypes, m = i.createClass({
  displayName: "ChatTypingIndicator",
  mixins: [ h ],
  propTypes: {
   userID: l.string,
   showName: l.bool
  },
  render: function() {
   var n = this.props, o = n.userID, p = n.showName;
   return i.createElement(g, {
    authorID: o,
    className: "_gfq" + (p ? " " + "_52fu" : ""),
    hideName: !p
   }, i.createElement("div", {
    className: "_52ft"
   }, i.createElement("div", {
    className: "_gfp",
    ref: "bubble"
   })));
  },
  getBubble: function() {
   return this.refs.bubble;
  }
 });
 e.exports = m;
}, null);

__d("MercuryTypingReceiver", [ "Arbiter", "ChannelConstants", "MercuryActionType", "MercuryIDs", "MercuryPayloadSource", "MercuryViewer", "TypingStates", "mixInEventEmitter", "setTimeoutAcrossTransitions", "MercuryServerRequests" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
 b.__markCompiled && b.__markCompiled();
 var p = b("MercuryServerRequests").get(), q, r = {}, s = 3e4, t = {};
 n(t, {
  "state-changed": true
 });
 function u(aa) {
  var ba = r[aa] || {}, ca = Object.keys(ba);
  ca.sort(function(da, ea) {
   return ba[da] - ba[ea];
  });
  return ca;
 }
 function v() {
  q = null;
  var aa = Date.now(), ba = {}, ca = false;
  for (var da in r) {
   var ea = false;
   for (var fa in r[da] || {}) if (r[da][fa] < aa - s) {
    delete r[da][fa];
    ea = true;
   } else ca = true;
   if (ea) ba[da] = u(da);
  }
  for (var ga in ba) {
   x(ba);
   break;
  }
  if (ca) q = o(v, 3e3);
 }
 function w(aa, ba) {
  if (aa in r) if (ba in r[aa]) {
   delete r[aa][ba];
   y(aa);
  }
 }
 function x(aa) {
  t.releaseHeldEventType("state-changed");
  t.emitAndHold("state-changed", aa);
 }
 function y(aa) {
  var ba = {};
  ba[aa] = u(aa);
  x(ba);
 }
 function z(aa) {
  if (aa.thread_fbid) return p.getClientThreadIDNow(aa.thread_fbid);
  if (aa.type === "typ") return j.getThreadIDFromUserID(aa.from);
  return null;
 }
 g.subscribe([ h.getArbiterType("typ"), h.getArbiterType("ttyp") ], function(aa, ba) {
  var ca = ba.obj, da = z(ca);
  if (da) {
   var ea = j.getParticipantIDFromUserID(ca.from);
   if (ca.st == m.TYPING) {
    r[da] = r[da] || {};
    var fa = r[da][ea];
    r[da][ea] = Date.now();
    if (!q) q = o(v, 3e3);
    !fa && y(da);
   } else if (ca.st == m.INACTIVE) w(da, ea);
  }
 });
 p.subscribe("update-typing-state", function(aa, ba) {
  var ca = ba.payload_source;
  if (ca != k.CLIENT_CHANNEL_MESSAGE) return;
  var da = ba.actions;
  if (!da || !da.length) return;
  var ea = i.USER_GENERATED_MESSAGE;
  da.forEach(function(fa) {
   if (fa.action_type == ea && fa.author != l.getID()) w(fa.thread_id, fa.author);
  });
 });
 e.exports = t;
}, null);

__d("ChatTypingIndicators.react", [ "ChatTypingIndicator.react", "DOM", "MercuryIDs", "MercuryParticipants", "React", "SubscriptionsHandler", "Tooltip", "MercuryTypingReceiver", "arraySort", "createObjectFrom", "cx", "emptyFunction", "fbt", "joinClasses", "MercuryThreadInformer" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t) {
 b.__markCompiled && b.__markCompiled();
 var u = b("MercuryThreadInformer").get(), v = k, w = v.PropTypes, x = k.createClass({
  displayName: "ChatTypingIndicators",
  propTypes: {
   indicatorClass: w.func,
   indicatorsWillShow: w.func,
   indicatorsDidShow: w.func,
   rootClassName: w.string,
   threadID: w.string.isRequired
  },
  getDefaultProps: function() {
   return {
    indicatorClass: g,
    indicatorsWillShow: r,
    indicatorsDidShow: r
   };
  },
  getInitialState: function() {
   return {
    typingUserIDs: []
   };
  },
  componentDidMount: function() {
   this._subscriptions = new l();
   this._subscriptions.addSubscriptions(n.addRetroactiveListener("state-changed", this.typingStateChanged), u.subscribe("messages-received", this.messagesReceived));
  },
  componentWillReceiveProps: function(y) {
   if (y.threadID != this.props.threadID) this.setState({
    typingUserIDs: []
   });
  },
  componentWillUpdate: function(y, z) {
   if (z.typingUserIDs.length > 0) this.props.indicatorsWillShow();
  },
  componentDidUpdate: function() {
   if (this.state.typingUserIDs.length > 0) this.props.indicatorsDidShow();
   j.getMulti(this.state.typingUserIDs, function(y) {
    if (this.isMounted()) this.state.typingUserIDs.forEach(function(z) {
     var aa = y[z], ba = this.refs[z].getBubble();
     if (ba) m.set(k.findDOMNode(ba), this.renderTooltip(aa.short_name), "above", "left");
    }.bind(this));
   }.bind(this));
  },
  componentWillUnmount: function() {
   this._subscriptions.release();
  },
  render: function() {
   var y = i.isMultichat(this.props.threadID);
   return k.createElement("div", {
    className: t(this.props.rootClassName, "_2fsr")
   }, this.state.typingUserIDs.map(function(z) {
    return this._renderTypingIndicator(z, !!y);
   }.bind(this)));
  },
  _renderTypingIndicator: function(y, z) {
   var aa = this.props.indicatorClass;
   return k.createElement(aa, {
    key: y,
    ref: y,
    showName: z,
    userID: y
   });
  },
  renderTooltip: function(y) {
   var z = h.create("span");
   k.render(k.createElement("span", null, s._("{name} is typing...", [ s.param("name", y) ])), z);
   return z;
  },
  typingStateChanged: function(y) {
   if (this.props.threadID in y) this.setState({
    typingUserIDs: o(y[this.props.threadID])
   });
  },
  messagesReceived: function(y, z) {
   if (this.props.threadID in z) {
    var aa = z[this.props.threadID], ba = p(aa.map(function(ca) {
     return ca.author;
    }));
    this.setState({
     typingUserIDs: o(this.state.typingUserIDs.filter(function(ca) {
      return !ba[ca];
     }))
    });
   }
  }
 });
 e.exports = x;
}, null);

__d("MercuryThreadInfo", [ "CurrentUser", "MercuryThreadMode" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var i = {
  canReply: function(k) {
   return !!(k.is_subscribed && k.mode != h.OBJECT_ORIGINATED && !k.has_email_participant && !k.read_only && (k.recipients_loadable || k.recipients_loadable === void 0));
  },
  getMuteSetting: function(k) {
   return k.mute_settings && k.mute_settings[j(g.getID())];
  },
  isMuted: function(k) {
   return i.getMuteSetting(k) !== void 0;
  }
 };
 function j(k) {
  return k + "@facebook.com";
 }
 e.exports = i;
}, null);

__d("MercuryThreadMuter", [ "AsyncDialog", "AsyncRequest", "DOM", "MercuryThreadInfo" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 var k = {
  showMuteChangeDialog: function(l, m) {
   g.send(new h("/ajax/mercury/mute_thread_dialog.php").setRelativeTo(m), function(n) {
    n.subscribe("confirm", function() {
     this.hide();
     var o;
     i.scry(this.getRoot(), 'input[type="radio"]').forEach(function(p) {
      if (p.checked) o = p.value;
     });
     o = k.convertRawMuteSetting(o);
     d([ "MercuryThreadActions" ], function(p) {
      p.get().updateMuteSetting(l, o);
     });
    }.bind(n));
   });
  },
  convertRawMuteSetting: function(l) {
   switch (l) {
   case "always":
    return -1;

   case "30minutes":
    return 1800;

   case "1hour":
    return 3600;

   case "8hours":
    return 8 * 3600;

   case "24hours":
    return 24 * 3600;

   case "8am":
    var m, n = new Date(), o = new Date();
    o.setHours(8);
    o.setMinutes(0);
    o.setSeconds(0);
    if (o > n) {
     m = o - n;
    } else m = o - n + 24 * 3600 * 1e3;
    return m / 1e3;

   default:
    return 0;
   }
  }
 };
 e.exports = k;
}, null);

__d("MercuryAttachment", [ "MercuryAttachmentContentType", "MercuryAttachmentType", "MercuryAudioType", "MercuryConfig" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 var k = {
  getAttachIconClass: function(l) {
   switch (l) {
   case g.PHOTO:
    return "MercuryPhotoIcon";

   case g.VIDEO:
    return "MercuryVideoIcon";

   case g.MUSIC:
    return "MercuryMusicIcon";

   case g.VOICE:
    return "MercuryVoiceIcon";

   case g.TEXT:
    return "MercuryTextIcon";

   case g.MSWORD:
    return "MercuryMSWordIcon";

   case g.MSXLS:
    return "MercuryMSXLSIcon";

   case g.MSPPT:
    return "MercuryMSPPTIcon";
   }
   return "MercuryDefaultIcon";
  },
  getAttachIconClassByMime: function(l) {
   if (l.startsWith("image")) {
    return "MercuryPhotoIcon";
   } else if (l.startsWith("video")) {
    return "MercuryVideoIcon";
   } else if (l.startsWith("audio")) {
    return "MercuryMusicIcon";
   } else if (l.startsWith("text/plain")) {
    return "MercuryTextIcon";
   } else return "MercuryDefaultIcon";
  },
  getAttachTypeByMime: function(l) {
   if (l.startsWith("image")) {
    return g.PHOTO;
   } else if (l.startsWith("video")) {
    return g.VIDEO;
   } else if (l.startsWith("audio")) {
    return g.MUSIC;
   } else if (l.startsWith("text/plain")) {
    return g.TEXT;
   } else return g.UNKNOWN;
  },
  convertRaw: function(l) {
   var m = [];
   for (var n = 0; n < l.length; n++) {
    var o = l[n];
    if (o.attach_type === h.PHOTO) {
     m.push(o);
    } else if (o.filename) {
     var p = k.getAttachTypeByMime(o.filetype), q = {};
     q.attach_type = h.FILE;
     q.name = o.filename;
     q.icon_type = p;
     q.url = "";
     m.push(q);
    }
   }
   return m;
  },
  get: function(l) {
   var m = [];
   if (l.attachments) {
    m = l.attachments;
   } else if (l.raw_attachments) m = this.convertRaw(l.raw_attachments);
   if (!(l.attachments && l.attachments.length > 0)) {
    if (l.sticker_id) return m.concat([ {
     attach_type: h.STICKER
    } ]);
    if (l.preview_attachments && l.preview_attachments.length > 0) return m.concat(l.preview_attachments);
   }
   return m;
  },
  hasBubbleTail: function(l, m) {
   var n = this.get(l);
   if ((j.MercuryStoryAttachmentsGK || j.WWWMessengerComerceGK) && !l.body) return !n.some(function(o) {
    return o.attach_type === h.SHARE && o.share && o.share.media.image && m;
   });
   return true;
  },
  isVoiceMessage: function(l) {
   return l === i.AudioClip || l === i.VoiceMessageWithTranscript;
  }
 };
 e.exports = k;
}, null);

__d("MercuryAttachmentSnippetRenderer", [ "MercuryAttachment", "MercuryAttachmentSnippetType", "MercuryAttachmentType", "MercuryConstants", "fbt" ], function(a, b, c, d, e, f, g, h, i, j, k) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var l = {
  getAttachmentSnippetType: function(m) {
   if (this._hasOnlyPhotos(m)) return h.PHOTO;
   if (this._hasOnlyAnimatedImages(m)) return h.GIF;
   if (this._hasOnlyVideo(m)) return h.VIDEO;
   if (this._hasAudioClip(m)) return h.AUDIO_CLIP;
   if (this._hasSticker(m)) return h.STICKER;
   if (this._hasOrion(m)) return h.ORION;
   if (this._hasShoerackInvitation(m)) return h.SHOERACK;
   if (this._hasShare(m)) return h.SHARE;
   if (this._hasError(m)) return h.ERROR;
   return h.MIXED;
  },
  renderAttachmentSnippetText: function(m, n, o, p) {
   switch (m) {
   case h.PHOTO:
    return this._renderPhotoAttachmentSnippetText(n, o, this._getPhotoAttachments(p));

   case h.GIF:
    return this._renderAnimatedImagesAttachmentSnippetText(n, o, this._getAnimatedImageAttachments(p));

   case h.VIDEO:
    return n ? k._("You sent a video.") : k._("{sender name} sent a video.", [ k.param("sender name", o) ]);

   case h.AUDIO_CLIP:
    return n ? k._("You sent a voice message.") : k._("{name} sent a voice message.", [ k.param("name", o) ]);

   case h.STICKER:
    return n ? k._("You sent a sticker.") : k._("{name} sent a sticker.", [ k.param("name", o) ]);

   case h.SHOERACK:
    return n ? k._("You sent a Moments invitation.") : k._("{sender name} invited you to share photos using Moments.", [ k.param("sender name", o) ]);

   case h.SHARE:
    return n ? k._("You shared a link.") : k._("{sender name} shared a link.", [ k.param("sender name", o) ]);

   case h.ERROR:
    return n ? k._("You sent an attachment.") : k._("{sender name} sent an attachment.", [ k.param("sender name", o) ]);

   default:
    return "";
   }
  },
  _hasOnlyPhotos: function(m) {
   return this._getPhotoAttachments(m).length === m.length;
  },
  _hasOnlyAnimatedImages: function(m) {
   return this._getAnimatedImageAttachments(m).length === m.length;
  },
  _hasOnlyVideo: function(m) {
   return m.length === 1 && m[0].attach_type === i.VIDEO;
  },
  _hasAudioClip: function(m) {
   return !!(m.length === 1 && m[0].metadata && g.isVoiceMessage(m[0].metadata.type));
  },
  _hasSticker: function(m) {
   return m.length === 1 && m[0].attach_type === i.STICKER;
  },
  _hasOrion: function(m) {
   return this._hasSingleAttachmentOfShareDataType(m, j.MercurySupportedShareType.FB_ORION);
  },
  _hasShoerackInvitation: function(m) {
   return this._hasSingleAttachmentOfShareDataType(m, j.MercurySupportedShareType.FB_SHOERACK_INVITATION);
  },
  _hasSingleAttachmentOfShareDataType: function(m, n) {
   return m.length === 1 && m[0].share_data_type === n;
  },
  _hasShare: function(m) {
   return m.length === 1 && m[0].attach_type === i.SHARE;
  },
  _hasError: function(m) {
   return m.length === 1 && m[0].attach_type === i.ERROR;
  },
  _getPhotoAttachments: function(m) {
   if (!m) return [];
   return m.filter(function(n) {
    return n.attach_type === i.PHOTO;
   });
  },
  _getAnimatedImageAttachments: function(m) {
   if (!m) return [];
   return m.filter(function(n) {
    return n.attach_type === i.ANIMATED_IMAGE;
   });
  },
  _renderPhotoAttachmentSnippetText: function(m, n, o) {
   if (o.length === 1) {
    if (m) {
     return k._("You sent a photo.");
    } else return k._("{name} sent a photo.", [ k.param("name", n) ]);
   } else if (m) {
    return k._({
     "*": "You sent {num_photos} photos."
    }, [ k.param("num_photos", o.length, [ 0 ]) ]);
   } else return k._({
    "*": "{name} sent {num_photos} photos."
   }, [ k.param("name", n), k.param("num_photos", o.length, [ 0 ]) ]);
  },
  _renderAnimatedImagesAttachmentSnippetText: function(m, n, o) {
   if (o.length === 1) {
    if (m) {
     return k._("You sent a GIF.");
    } else return k._("{name} sent a GIF.", [ k.param("name", n) ]);
   } else if (m) {
    return k._("You sent {num_animated_images} GIFs.", [ k.param("num_animated_images", o.length) ]);
   } else return k._("{name} sent {num_animated_images} GIFs.", [ k.param("name", n), k.param("num_animated_images", o.length) ]);
  }
 };
 e.exports = l;
}, null);

__d("P2PMercuryAttachmentSnippet.react", [ "CurrentUser", "Image.react", "React", "cx", "fbt", "ix" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var m = i, n = m.PropTypes, o = i.createClass({
  displayName: "P2PMercuryAttachment",
  propTypes: {
   sender: n.object,
   receiver: n.object,
   amount: n.string,
   currency: n.string
  },
  getDefaultProps: function() {
   return {
    sender: {},
    receiver: {}
   };
  },
  render: function() {
   var p;
   if (g.getID() === this.props.sender.id) {
    p = k._("You sent {currency}{amount}.", [ k.param("currency", this.props.currency), k.param("amount", this.props.amount) ]);
   } else p = k._("{name} sent you {currency}{amount}.", [ k.param("name", this.props.sender.name), k.param("currency", this.props.currency), k.param("amount", this.props.amount) ]);
   return i.createElement("span", {
    className: "uiIconText _3l6h _3_io"
   }, i.createElement(h, {
    height: 12,
    src: l("/images/p2p/attachment-snippet-icon.png"),
    width: 12
   }), p);
  }
 });
 e.exports = o;
}, null);

__d("MercuryShareAttachmentReactShape", [ "React" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var h = g, i = h.PropTypes, j = i.shape({
  description: i.string,
  media: i.shape({
   image: i.string,
   duration: i.number,
   playable: i.bool,
   source: i.string
  }),
  source: i.string,
  style_list: i.arrayOf(i.string),
  subattachments: i.array,
  title: i.string,
  properties: i.object,
  uri: i.string
 }).isRequired;
 e.exports = j;
}, null);

__d("MercuryFallbackShareAttachmentSnippet.react", [ "Image.react", "React", "cx", "fbt", "ix" ], function(a, b, c, d, e, f, g, h, i, j, k) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var l = h, m = l.PropTypes, n = h.createClass({
  displayName: "MercuryFallbackShareAttachmentSnippet",
  propTypes: {
   isSenderViewer: m.bool,
   senderName: m.string
  },
  render: function() {
   var o;
   if (this.props.isViewerSender) {
    o = j._("You shared a link.");
   } else o = j._("{sender name} shared a link.", [ j.param("sender name", this.props.senderName) ]);
   return h.createElement("span", {
    className: "uiIconText _3l6h"
   }, h.createElement(g, {
    src: k("/images/messaging/docs/generic.png")
   }), o);
  }
 });
 e.exports = n;
}, null);

__d("P2PMercuryShareAttachmentSnippet.react", [ "MercuryShareAttachmentReactShape", "P2PMercuryAttachmentSnippet.react", "React" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var j = i.createClass({
  displayName: "P2PMercuryShareAttachmentSnippet",
  propTypes: {
   attachment: g
  },
  render: function() {
   var k = this.props.attachment ? this.props.attachment.target : {};
   return i.createElement(h, i.__spread({}, k));
  }
 });
 e.exports = j;
}, null);

__d("MercuryShareAttachmentSnippet.react", [ "Map", "MercuryShareAttachmentReactShape", "React", "StoryAttachmentStyle", "MercuryFallbackShareAttachmentSnippet.react", "P2PMercuryShareAttachmentSnippet.react" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var k = i, l = k.PropTypes, m = new g();
 m.set(j.FALLBACK, b("MercuryFallbackShareAttachmentSnippet.react"));
 m.set(j.ORION, b("P2PMercuryShareAttachmentSnippet.react"));
 var n = i.createClass({
  displayName: "MercuryShareAttachmentSnippet",
  propTypes: {
   attachment: h,
   isSenderViewer: l.bool,
   senderName: l.string
  },
  render: function() {
   var o = this.props.attachment;
   if (!o.style_list) return null;
   var p = null;
   for (var q = 0; q < o.style_list.length; q++) {
    p = m.get(o.style_list[q]);
    if (p) break;
   }
   if (!p) return null;
   return i.createElement(p, i.__spread({}, this.props));
  }
 });
 e.exports = n;
}, null);

__d("MercuryAttachmentSnippet.react", [ "EmoticonsList", "Image.react", "MercuryAttachment", "MercuryAttachmentSnippetRenderer", "MercuryAttachmentSnippetType", "MercuryAttachmentType", "MercuryIDs", "P2PMercuryAttachmentSnippet.react", "MercuryShareAttachmentSnippet.react", "MercuryParticipants", "React", "StickerConstants", "TextWithEmoticons.react", "cx", "ix", "joinClasses" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var w = q, x = w.PropTypes, y = q.createClass({
  displayName: "MercuryAttachmentSnippet",
  propTypes: {
   thread: x.object.isRequired,
   viewer: x.string.isRequired
  },
  componentWillMount: function() {
   this._ensureParticipant(this.props.thread.snippet_sender);
   this._setVariables(this.props);
  },
  componentWillReceiveProps: function(ba) {
   this._ensureParticipant(ba.thread.snippet_sender);
   this._setVariables(ba);
  },
  componentWillUnmount: function() {
   this._cancelParticipantFetch();
  },
  render: function() {
   var ba = this._getSenderName(), ca = j.getAttachmentSnippetType(this._attachments);
   switch (ca) {
   case k.PHOTO:
    return this._renderPhotoSnippet(ba);

   case k.GIF:
    return this._renderAnimatedImageSnippet(ba);

   case k.VIDEO:
    return this._renderVideoSnippet(ba);

   case k.AUDIO_CLIP:
    return this._renderAudioClipSnippet(ba);

   case k.STICKER:
    return this._renderStickerSnippet(ba);

   case k.ORION:
    return this._renderOrionSnippet(ba);

   case k.SHOERACK:
    return this._renderShoerackInvitationSnippet(ba);

   case k.SHARE:
    return this._renderShareSnippet(ba);

   case k.ERROR:
    return this._renderError(ba);

   default:
    return this._renderMixedSnippet(ba);
   }
  },
  _renderPhotoSnippet: function(ba) {
   return this._renderSnippet(j.renderAttachmentSnippetText(k.PHOTO, this._isViewerSender, ba, this._attachments));
  },
  _renderAnimatedImageSnippet: function(ba) {
   return this._renderSnippet(j.renderAttachmentSnippetText(k.GIF, this._isViewerSender, ba, this._attachments));
  },
  _renderVideoSnippet: function(ba) {
   return this._renderSnippet(j.renderAttachmentSnippetText(k.VIDEO, this._isViewerSender, ba));
  },
  _renderAudioClipSnippet: function(ba) {
   return this._renderSnippet(j.renderAttachmentSnippetText(k.AUDIO_CLIP, this._isViewerSender, ba));
  },
  _renderStickerSnippet: function(ba) {
   if (z(this._attachments[0].metadata.stickerID)) {
    return q.createElement(s, {
     renderEmoticons: true,
     text: g.symbols.like
    });
   } else return q.createElement("span", null, j.renderAttachmentSnippetText(k.STICKER, this._isViewerSender, ba));
  },
  _renderOrionSnippet: function(ba) {
   return q.createElement("span", null, q.createElement(n, q.__spread({}, this._attachments[0].metadata)));
  },
  _renderShoerackInvitationSnippet: function(ba) {
   return this._renderSnippet(j.renderAttachmentSnippetText(k.SHOERACK, this._isViewerSender, ba));
  },
  _renderShareSnippet: function(ba) {
   if (!!this._attachments[0].share) return q.createElement(o, {
    attachment: this._attachments[0].share,
    senderName: ba,
    isViewerSender: this._isViewerSender
   });
   return this._renderSnippet(j.renderAttachmentSnippetText(k.SHARE, this._isViewerSender, ba));
  },
  _renderMixedSnippet: function(ba) {
   return q.createElement("span", null, this._attachments.filter(function(ca) {
    return ca.attach_type === l.FILE || ca.attach_type === l.PHOTO || ca.attach_type === l.VIDEO;
   }).map(function(ca, da) {
    return this._renderSnippet(ca.name, ca.icon_type, da);
   }.bind(this)));
  },
  _renderSnippet: function(ba, ca, da) {
   var ea = i.getAttachIconClass(ca || this._attachments[0].icon_type), fa = v(ea, "uiIconText _3l6h");
   return q.createElement("span", {
    className: fa,
    key: da
   }, q.createElement(h, {
    src: u("/images/messaging/docs/generic.png")
   }), ba);
  },
  _renderError: function(ba) {
   var ca = j.renderAttachmentSnippetText(k.ERROR, this._isViewerSender, ba);
   return this._renderSnippet(ca);
  },
  _setVariables: function(ba) {
   this._viewer = ba.viewer;
   this._sender = ba.thread.snippet_sender;
   this._attachments = ba.thread.snippet_attachments;
   this._isViewerSender = aa(this._sender, this._viewer);
  },
  _getSenderName: function() {
   if (!this._sender || this._isViewerSender) return null;
   var ba = p.getNow(this._sender);
   if (!ba) return null;
   return ba.short_name;
  },
  _ensureParticipant: function(ba) {
   if (!ba) return;
   this._cancelParticipantFetch();
   if (!p.getNow(ba)) this._sub = p.get(ba, function(ca) {
    return this.forceUpdate();
   }.bind(this));
  },
  _cancelParticipantFetch: function() {
   this._sub && this._sub.remove();
  }
 });
 function z(ba) {
  return ba == r.LIKE_STICKER_ID || ba == r.HOT_LIKE_SMALL_STICKER_ID || ba == r.HOT_LIKE_MEDIUM_STICKER_ID || ba == r.HOT_LIKE_LARGE_STICKER_ID;
 }
 function aa(ba, ca) {
  return !!(ba && m.getParticipantIDFromUserID(ca) == ba);
 }
 e.exports = y;
}, null);

__d("MercuryParticipantsImage.react", [ "MercuryParticipants", "React", "SplitImage.react", "areEqual" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var k = h, l = k.PropTypes, m = h.createClass({
  displayName: "MercuryParticipantsImage",
  _bigImageToken: null,
  propTypes: {
   participants: l.array.isRequired,
   size: l.number
  },
  getInitialState: function() {
   return {
    participantImages: []
   };
  },
  componentDidMount: function() {
   this._getParticipantImages(this.props);
  },
  componentWillReceiveProps: function(n) {
   this._getParticipantImages(n);
  },
  componentWillUnmount: function() {
   this._bigImageToken && this._bigImageToken.remove();
  },
  shouldComponentUpdate: function(n, o) {
   return n.size !== this.props.size || !o || !j(o.participantImages, this.state.participantImages);
  },
  render: function() {
   if (this.state.participantImages.length > 0) return h.createElement(i, {
    border: true,
    className: this.props.className,
    srcs: this.state.participantImages,
    size: this.props.size
   });
   return null;
  },
  _getParticipantImages: function(n) {
   this._bigImageToken && this._bigImageToken.remove();
   this._bigImageToken = g.getOrderedBigImageMulti(n.participants, function(o) {
    this.isMounted() && this.setState({
     participantImages: o
    });
   }.bind(this));
  }
 });
 e.exports = m;
}, null);

__d("MercuryThreadImage.react", [ "ImmutableObject", "MercuryIDs", "MercuryParticipantsImage.react", "MercuryParticipantsConstants", "Pixelz.react", "React", "areEqual" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var n = l, o = n.PropTypes, p = l.createClass({
  displayName: "MercuryThreadImage",
  propTypes: {
   thread: o.instanceOf(g).isRequired,
   viewer: o.string.isRequired,
   size: o.number,
   useBackground: o.bool
  },
  shouldComponentUpdate: function(q, r) {
   return q.thread.image_src !== this.props.thread.image_src || !m(q.thread.participants, this.props.thread.participants) || q.size !== this.props.size || q.viewer !== this.props.viewer || q.useBackground !== this.props.useBackground;
  },
  render: function() {
   var q = this.props.size || j.BIG_IMAGE_SIZE, r = this.props.thread.image_src;
   if (r) {
    if (this.props.useBackground) return l.createElement("div", {
     style: {
      height: q,
      backgroundImage: "url(" + r + ")",
      backgroundPosition: "50% 50%",
      backgroundRepeat: "no-repeat",
      backgroundSize: "cover",
      width: q
     }
    });
    return l.createElement(k, {
     height: q,
     resizeMode: "cover",
     src: r,
     width: q
    });
   }
   var s = h.getParticipantIDFromUserID(this.props.viewer), t = this.props.thread.participants.filter(function(v) {
    return v !== s;
   }), u = [];
   if (!t.length) {
    u = [ s ];
   } else if (t.length == 1) {
    u = t;
   } else u = t.slice(0, 3);
   return l.createElement(i, {
    participants: u,
    size: q
   });
  }
 });
 e.exports = p;
}, null);

__d("MercuryThreadSnippet.react", [ "immutable", "MercuryAttachmentSnippet.react", "MercuryIDs", "React", "TextWithEmoticons.react", "fbt", "shallowEqual" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var n = j, o = n.PropTypes, p = j.createClass({
  displayName: "MercuryThreadSnippet",
  propTypes: {
   participants: o.instanceOf(g.Map).isRequired,
   shouldRenderYou: o.bool,
   thread: o.object.isRequired,
   viewer: o.string.isRequired
  },
  shouldComponentUpdate: function(s, t) {
   return !m(s, this.props) || !g.is(s.participants, this.props.participants);
  },
  render: function() {
   return j.createElement("span", {
    className: this.props.className
   }, this._renderAttachmentIndicator(), this._renderSnippet());
  },
  _renderAttachmentIndicator: function() {
   if (!this.props.thread.snippet || !q(this.props.thread)) return null;
   return j.createElement("span", {
    className: "MercuryAttachmentIndicator"
   });
  },
  _renderSnippet: function() {
   var s = this.props.thread, t = i.getParticipantIDFromUserID(this.props.viewer), u = this._renderInnerSnippet(), v = s.participants.length;
   if (s.is_subscribed) v--;
   if (r(s) || !s.snippet_sender) return u;
   if (s.snippet_sender === t) {
    if (!this.props.shouldRenderYou) return u;
    return l._("You: {conversation_snippet}", [ l.param("conversation_snippet", u) ]);
   }
   if (v <= 1) return u;
   var w = this.props.participants.get(s.snippet_sender);
   if (!w || !w.short_name) return u;
   return l._("{name}: {conversation_snippet}", [ l.param("name", w.short_name), l.param("conversation_snippet", u) ]);
  },
  _renderInnerSnippet: function() {
   var s = this.props.thread, t = s.snippet;
   if (t && t.startsWith("?OTR")) return l._("[encrypted message]");
   if (t) return j.createElement(k, {
    renderEmoticons: true,
    renderEmoji: true,
    text: t.replace(/\r\n|[\r\n]/g, " ")
   });
   if (q(s)) return j.createElement(h, {
    thread: s,
    viewer: this.props.viewer
   });
   return null;
  }
 });
 function q(s) {
  return s.snippet_has_attachment && s.snippet_attachments && s.snippet_attachments.length > 0;
 }
 function r(s) {
  return !s.snippet && q(s);
 }
 e.exports = p;
}, null);

__d("MercuryThreadTimestamp.react", [ "ReactComponentWithPureRenderMixin", "React", "formatDate", "joinClasses" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var k = h, l = k.PropTypes, m = h.createClass({
  displayName: "MercuryThreadTimestamp",
  mixins: [ g ],
  propTypes: {
   time: l.number,
   title: l.string,
   text: l.string
  },
  render: function() {
   var n = this.props.time;
   if (!n) return h.createElement("abbr", null);
   return h.createElement("abbr", {
    className: j(this.props.className, "timestamp"),
    title: this.props.title || new Date(n).toLocaleDateString(),
    "data-utime": n / 1e3
   }, this.props.text || i(new Date(n), "g:ia"));
  }
 });
 e.exports = m;
}, null);

__d("MercuryParticipantListRenderer", [ "fbt" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 function h() {
  this.$MercuryParticipantListRenderer0 = false;
  this.$MercuryParticipantListRenderer1 = false;
  this.$MercuryParticipantListRenderer2 = false;
  this.$MercuryParticipantListRenderer3 = function(r) {
   return this.$MercuryParticipantListRenderer1 ? r.short_name : r.name;
  }.bind(this);
 }
 h.prototype.renderParticipantList = function(r) {
  var s = r.map(this.$MercuryParticipantListRenderer3);
  switch (s.length) {
  case 0:
   return i(this.$MercuryParticipantListRenderer0);

  case 1:
   return j(s);

  case 2:
   return this.$MercuryParticipantListRenderer2 ? l(s) : k(s);

  case 3:
   return this.$MercuryParticipantListRenderer2 ? n(s) : m(s);

  default:
   return this.$MercuryParticipantListRenderer2 ? p(s) : o(s);
  }
 };
 h.prototype.setIsNewThread = function(r) {
  this.$MercuryParticipantListRenderer0 = r;
  return this;
 };
 h.prototype.setNameRenderer = function(r) {
  this.$MercuryParticipantListRenderer3 = r;
  return this;
 };
 h.prototype.setUseShortName = function(r) {
  this.$MercuryParticipantListRenderer1 = r;
  return this;
 };
 h.prototype.setUseAndSeparator = function(r) {
  this.$MercuryParticipantListRenderer2 = r;
  return this;
 };
 function i(r) {
  if (r) {
   return g._("New Message");
  } else return g._("No Participants");
 }
 function j(r) {
  return r[0];
 }
 function k(r) {
  return g._("{participant1}, {participant2}", [ g.param("participant1", r[0]), g.param("participant2", r[1]) ]);
 }
 function l(r) {
  return g._("{participant1} and {participant2}", [ g.param("participant1", r[0]), g.param("participant2", r[1]) ]);
 }
 function m(r) {
  return g._("{participant1}, {participant2}, {participant3}", [ g.param("participant1", r[0]), g.param("participant2", r[1]), g.param("participant3", r[2]) ]);
 }
 function n(r) {
  return g._("{participant1}, {participant2} and {participant3}", [ g.param("participant1", r[0]), g.param("participant2", r[1]), g.param("participant3", r[2]) ]);
 }
 function o(r) {
  return g._("{participant1}, {participant2}, {participant3}, {others_link}", [ g.param("participant1", r[0]), g.param("participant2", r[1]), g.param("participant3", r[2]), g.param("others_link", q(r.length - 3)) ]);
 }
 function p(r) {
  return g._("{participant1}, {participant2} and {others_link}", [ g.param("participant1", r[0]), g.param("participant2", r[1]), g.param("others_link", q(r.length - 2)) ]);
 }
 function q(r) {
  if (r > 1) {
   return g._({
    "*": "{others_count} others"
   }, [ g.param("others_count", r, [ 0 ]) ]);
  } else return g._("1 other");
 }
 e.exports = h;
}, null);

__d("MercuryThreadTitle.react", [ "MercuryIDs", "MercuryParticipantListRenderer", "MercuryParticipants", "React", "TextWithEmoticons.react", "fbt" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var m = j, n = m.PropTypes, o = j.createClass({
  displayName: "MercuryThreadTitle",
  propTypes: {
   isNewThread: n.bool,
   thread: n.object.isRequired,
   viewer: n.string.isRequired,
   showUnreadCount: n.bool,
   useShortName: n.bool,
   useAndSeparator: n.bool
  },
  getDefaultProps: function() {
   return {
    isNewThread: false,
    showUnreadCount: false,
    useShortName: false,
    useAndSeparator: false
   };
  },
  getInitialState: function() {
   return {
    participantNames: ""
   };
  },
  componentDidMount: function() {
   this._renderParticipantsList(this.props);
  },
  componentWillReceiveProps: function(p) {
   this._renderParticipantsList(p);
  },
  render: function() {
   return j.createElement("span", {
    className: this.props.className
   }, this.props.thread.name ? this._renderThreadTitle() : this.state.participantNames);
  },
  getTitle: function() {
   return this.state.participantNames;
  },
  _renderThreadTitle: function() {
   var p = this.props.thread, q = j.createElement(k, {
    renderEmoticons: true,
    renderEmoji: true,
    text: p.name
   });
   if (!p.unread_count || !this.props.showUnreadCount) return q;
   return this._renderTitleWithUnreadCount(q, p.unread_count);
  },
  _renderParticipantsList: function(p) {
   if (p.thread.name) return;
   var q = g.getParticipantIDFromUserID(p.viewer), r = p.thread.participants;
   if (r.length > 1) r = r.filter(function(s) {
    return s != q;
   });
   i.getMulti(r, function(s) {
    if (!this.isMounted()) return;
    var t = r.map(function(w) {
     return s[w];
    }), u = new h().setUseShortName(this.props.useShortName).setUseAndSeparator(this.props.useAndSeparator).setIsNewThread(this.props.isNewThread).renderParticipantList(t), v = p.showUnreadCount && p.thread.unread_count ? this._renderTitleWithUnreadCount(u, p.thread.unread_count) : u;
    this.setState({
     participantNames: v
    });
   }.bind(this));
  },
  _renderTitleWithUnreadCount: function(p, q) {
   return l._("{conversation-title} ({unread-count})", [ l.param("conversation-title", p), l.param("unread-count", q) ]);
  }
 });
 e.exports = o;
}, null);

__d("KappaWrapper", [ "AsyncSignal", "setTimeoutAcrossTransitions" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 var i = false;
 e.exports = {
  forceStart: function(j, k, l) {
   var m = 0, n = function() {
    new g("/si/kappa/", {
     Ko: "a"
    }).send();
    if (++m < j) h(n, k * 1e3);
   };
   h(n, (k + l) * 1e3);
  },
  start: function(j, k, l) {
   if (!i) {
    i = true;
    this.forceStart(j, k, l);
   }
  }
 };
}, null);

__d("P2PCreditCardFormFieldMixin.react", [ "React", "ReactInputSelection", "XUITextInput.react", "cx", "emptyFunction" ], function(a, b, c, d, e, f, g, h, i, j, k) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var l = 49, m = g, n = m.PropTypes, o = {
  propTypes: {
   onChange: n.func,
   reference: n.string,
   saveError: n.string,
   focused: n.bool,
   value: n.string,
   isMasked: n.bool,
   showFocusOutline: n.bool,
   showIcon: n.bool,
   showPlaceholder: n.bool
  },
  getDefaultProps: function() {
   return {
    onChange: k,
    saveError: "",
    focused: false,
    value: "",
    isMasked: false,
    showFocusOutline: true,
    showIcon: true,
    showPlaceholder: true
   };
  },
  getInitialState: function() {
   return {
    isValid: null,
    value: "",
    oldValue: "",
    focused: false,
    lastKeyCode: l,
    modified: false,
    cursorPosition: 0,
    errorMessage: null
   };
  },
  getInputElement: function() {
   return this.refs.ccFormFieldInput.refs.textInput.getTextFieldDOM();
  },
  restoreCursorPosition: function() {
   if (!this.getUpdatedCursorPosition) return;
   if (this.state.oldValue === this.state.value) return;
   var p = this.getUpdatedCursorPosition(this.state.value, this.state.oldValue, this.state.cursorPosition);
   h.setSelection(this.getInputElement(), {
    start: p
   });
  },
  setAndValidate: function(p, q) {
   var r, s = this.state.value, t = h.getSelection(this.getInputElement()), u = this.formatValue ? this.formatValue(p, s, q) : p;
   r = this.validate(u);
   this.setState({
    modified: true,
    value: u,
    oldValue: p,
    isValid: r,
    cursorPosition: t.start
   }, this.restoreCursorPosition);
   this.triggerChange(u, r);
  },
  triggerChange: function(p, q) {
   this.props.onChange(this.props.reference, p, q);
  },
  componentDidMount: function() {
   if (this.props.focused) setTimeout(function() {
    if (this.isMounted()) this.focus();
   }.bind(this), 100);
   this.initializeFormValue();
  },
  initializeFormValue: function() {
   var p;
   if (this.props.value) {
    p = this.props.isMasked ? true : this.validate(this.props.value);
    this.setState({
     isValid: p,
     modified: true,
     value: this.props.value
    });
    this.triggerChange(this.props.value, p);
   }
  },
  handleBlur: function(p) {
   var q = this.getInputElement().value;
   if (q && q !== this.state.value) this.setAndValidate(q, l);
   this.setState({
    focused: false
   });
  },
  handlePaste: function(p) {
   this.setState({
    lastKeyCode: l
   });
  },
  handleChange: function(p) {
   this.setAndValidate(p.target.value, this.state.lastKeyCode);
  },
  handleOnKeyDown: function(p) {
   var q = p.keyCode;
   if (q >= 96 && q <= 105) q = q - 48;
   this.setState({
    lastKeyCode: q
   });
  },
  handleFocus: function(p) {
   this.setState({
    focused: true
   });
  },
  focus: function() {
   g.findDOMNode(this.refs.ccFormFieldInput).focus();
  },
  shouldShowIsValidError: function() {
   if (!this.state.isValid && this.state.modified) return !this.state.focused || this.isValAtLimit();
   return false;
  },
  isDisabled: function() {
   return this.props.isMasked;
  },
  render: function() {
   var p = this.shouldShowIsValidError() || this.props.saveError || this.state.errorMessage;
   return g.createElement("div", {
    className: "_2wac" + (p ? " " + "_5bqn" : "") + (this.props.showFocusOutline && !p && this.state.focused ? " " + "_5bqo" : ""),
    onClick: this.focus
   }, this.props.showIcon ? this.getIcon() : null, g.createElement(i, {
    autoComplete: this.getAutocompleteName(),
    ref: "ccFormFieldInput",
    defaultValue: this.props.defaultValue,
    value: this.state.value,
    onChange: this.handleChange,
    onPaste: this.handlePaste,
    onKeyDown: this.handleOnKeyDown,
    onFocus: this.handleFocus,
    onBlur: this.handleBlur,
    placeholder: this.props.showPlaceholder ? this.getPlaceholder() : "",
    disabled: this.isDisabled(),
    className: "_5bqq" + (!this.props.showIcon ? " " + "_46tf" : ""),
    xuiError: this.state.errorMessage
   }), g.createElement("div", {
    className: "_5br4"
   }));
  }
 };
 e.exports = o;
}, null);

__d("P2PCreditCardNumberFormFieldHelper", [ "Keys" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var h = {
  formatCardNumber: function(i, j, k, l, m) {
   if (k === g.BACKSPACE || k === g.DELETE) {
    var n = j.split(m).length - 1, o = i.split(m).length - 1;
    if (o !== n) return i;
   }
   i = i.replace(/\D/g, "");
   i = i.substr(0, l[l.length - 1]);
   var p = "";
   for (var q = 1; q < l.length; q++) {
    if (l[q] > i.length || q === l.length - 1) {
     p += i.slice(l[q - 1]);
     break;
    }
    p += i.slice(l[q - 1], l[q]) + m;
   }
   return p;
  },
  getUpdatedCursorPosition: function(i, j, k, l) {
   var m = 0, n = 0;
   while (m < k && m < j.length && n < i.length) if (j[m] === i[n]) {
    m++;
    n++;
   } else if (!/^\d+$/.test(j[m])) {
    m++;
   } else n++;
   if (i.substr(n, 1) === l) n++;
   return n;
  }
 };
 e.exports = h;
}, null);

__d("P2PCreditCardNumberFormField.react", [ "React", "PaymentMethodUtils", "P2PCreditCardFormFieldMixin.react", "P2PCreditCardNumberFormFieldHelper", "cx", "fbt" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var m = g.createClass({
  displayName: "P2PCreditCardFormField",
  mixins: [ i ],
  getIcon: function() {
   return g.createElement("div", {
    className: "_31_w _3_2h"
   });
  },
  getAutocompleteName: function() {
   return "cc-number";
  },
  isAmex: function(n) {
   var o = h.getCardType(n || this.state.value);
   return o.name === "amex";
  },
  getLimit: function() {
   return this.isAmex() ? 15 : 16;
  },
  isValAtLimit: function() {
   var n = this.getLimit(), o = this.state.value.replace(/ /g, "");
   return o.length === n;
  },
  formatValue: function(n, o, p) {
   var q = this.isAmex(n) ? [ 0, 4, 10, 15 ] : [ 0, 4, 8, 12, 16 ];
   return j.formatCardNumber(n, o, p, q, " ");
  },
  getUpdatedCursorPosition: function(n, o, p) {
   return j.getUpdatedCursorPosition(n, o, p, " ");
  },
  getPlaceholder: function() {
   return l._("Card Number");
  },
  validate: function(n) {
   var o = this.isValidCardType(n);
   this.setState({
    errorMessage: !o ? l._("Please enter a Visa or MasterCard debit card to send or receive money") : null
   });
   return !!(h.isValidCCNumber(n) && o);
  },
  isValidCardType: function(n) {
   var o = [ "mc", "visa", "unknown" ], p = h.getCardType(n), q = p ? p.name : "", r = o.indexOf(q) >= 0;
   return r;
  }
 });
 e.exports = m;
}, null);

__d("P2PCreditCardExpDateFormField.react", [ "React", "P2PCreditCardFormFieldMixin.react", "cx", "fbt" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var k = g.createClass({
  displayName: "P2PCreditCardExpDateFormField",
  mixins: [ h ],
  getIcon: function() {
   return g.createElement("div", {
    className: "_31_w _31_x"
   });
  },
  getAutocompleteName: function() {
   return "cc-exp";
  },
  isValAtLimit: function() {
   var l = this.state.value;
   return l.length === this.getLimit();
  },
  getLimit: function() {
   return 5;
  },
  getPlaceholder: function() {
   return j._("MM/YY");
  },
  formatValue: function(l, m, n) {
   var o = this.getLimit(), p = String.fromCharCode(n);
   l = l.replace(/[^0-9\/]+/g, "");
   var q = l.split("/"), r = q[0], s = q[1];
   if (s && s.length === 4) {
    l = r + "/" + s.substr(-2);
   } else l = l.slice(0, o);
   if (!/^\d+$/.test(p) && n !== 191 && n !== 111) return l;
   l = l.replace(/\D/g, "");
   if (/^\d$/.test(l) && (l !== "0" && l !== "1")) {
    l = "0" + l + "/";
   } else if (l.length >= 2 && l.indexOf("/") === -1) l = l.substr(0, 2) + "/" + l.substr(2, 4);
   return l;
  },
  validate: function(l) {
   var m = l.split("/"), n = new Date(), o = parseInt(n.getFullYear().toString().substring(2), 10), p = parseInt(n.getMonth() + 1, 10), q = parseInt(m[0], 10), r = parseInt(m[1], 10);
   if (l.length !== 5 || !q || !r || isNaN(q) || isNaN(r) || q < 1 || q > 12) return false;
   if (r < o || r === o && q < p || q > 12 || q < 1) return false;
   return true;
  }
 });
 e.exports = k;
}, null);

__d("P2PCreditCardCVCFormField.react", [ "CreditCardFormParam", "React", "P2PCreditCardFormFieldMixin.react", "PaymentMethodUtils", "cx", "fbt" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var m = h.createClass({
  displayName: "P2PCreditCardCVCFormField",
  mixins: [ i ],
  getIcon: function() {
   return h.createElement("div", {
    className: "_31_w _5wcr"
   });
  },
  getAutocompleteName: function() {
   return "cc-csc";
  },
  isValAtLimit: function() {
   var n = this.state.value;
   return n.length === this.getLimit();
  },
  getLimit: function() {
   var n, o = this.props.cscMaxLength;
   if (!o) {
    n = j.getCardType(this.props[g.CARD_NUMBER]);
    o = n.name === "amex" ? 4 : 3;
   }
   return o;
  },
  formatValue: function(n, o, p) {
   var q = this.getLimit();
   n = n.replace(/\D/g, "");
   n = n.slice(0, q);
   return n;
  },
  getPlaceholder: function() {
   return l._("CSC");
  },
  validate: function(n) {
   return n.length === this.getLimit();
  }
 });
 e.exports = m;
}, null);

__d("P2PCreditCardZipCodeFormField.react", [ "React", "P2PCreditCardFormFieldMixin.react", "cx", "fbt" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var k = g.createClass({
  displayName: "P2PCreditCardZipCodeFormField",
  mixins: [ h ],
  getIcon: function() {
   return g.createElement("div", {
    className: "_31_w _3oce"
   });
  },
  getAutocompleteName: function() {
   return "postal-code";
  },
  isValAtLimit: function() {
   var l = this.state.value;
   return l.length === this.getLimit();
  },
  getLimit: function() {
   return 5;
  },
  getPlaceholder: function() {
   return j._("Billing ZIP Code");
  },
  formatValue: function(l, m, n) {
   var o = this.getLimit();
   l = l.replace(/\D/g, "");
   l = l.slice(0, o);
   return l;
  },
  validate: function(l) {
   return l.length === this.getLimit();
  }
 });
 e.exports = k;
}, null);

__d("P2PButton.react", [ "P2PEnvironment", "MessengerDialogButton.react", "React", "XUIButton.react" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var k = i.createClass({
  displayName: "P2PButton",
  render: function() {
   var l = g.messengerdotcom, m = l ? h : j, n = this.props.type;
   if (!n) n = this.props.type === "confirm" ? "primary" : "secondary";
   var o = l ? "default" : this.props.use, p = Object.assign({}, this.props, {
    type: n,
    use: o
   });
   return i.createElement(m, i.__spread({}, p), this.props.children);
  }
 });
 e.exports = k;
}, null);

__d("P2PDialog.react", [ "LayerFadeOnHide", "P2PEnvironment", "MessengerDialog.react", "React", "XUIDialog.react", "emptyFunction" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var m = j, n = m.PropTypes, o = j.createClass({
  displayName: "P2PDialog",
  propTypes: {
   onToggle: n.func,
   shown: n.bool,
   width: n.number
  },
  getDefaultProps: function() {
   return {
    onToggle: l,
    repositionOnUpdate: false,
    shown: true,
    width: 400
   };
  },
  componentDidUpdate: function() {
   if (this.props.repositionOnUpdate) setTimeout(function() {
    if (this.isMounted() && this.refs.dialog && this.refs.dialog.layer) this.refs.dialog.layer.updatePosition();
   }.bind(this));
  },
  render: function() {
   var p = h.messengerdotcom, q = p ? i : k;
   return j.createElement(q, j.__spread({
    behaviors: {
     LayerFadeOnHide: g
    }
   }, this.props, {
    ref: "dialog"
   }), this.props.children);
  }
 });
 e.exports = o;
}, null);

__d("P2PDialogBody.react", [ "P2PEnvironment", "MessengerDialogBody.react", "React", "XUIDialogBody.react" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var k = i.createClass({
  displayName: "P2PDialogBody",
  render: function() {
   var l = g.messengerdotcom, m = l ? h : j;
   return i.createElement(m, i.__spread({}, this.props), this.props.children);
  }
 });
 e.exports = k;
}, null);

__d("P2PDialogFooter.react", [ "P2PEnvironment", "MessengerDialogFooter.react", "React", "XUIDialogFooter.react", "cloneWithProps", "cx" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var m = i.createClass({
  displayName: "P2PDialogFooter",
  render: function() {
   var n = g.messengerdotcom, o = n ? h : j, p, q = this.props.children;
   if (n) {
    p = i.Children.count(this.props.children);
    q = i.Children.map(this.props.children, function(r, s) {
     if (!r) return null;
     return k(r, {
      className: "_4ec0",
      type: s === 0 && p === 2 ? "secondary" : "primary"
     });
    });
   }
   return i.createElement(o, i.__spread({}, this.props), q);
  }
 });
 e.exports = m;
}, null);

__d("P2PDialogTitle.react", [ "P2PEnvironment", "MessengerDialogHeader.react", "React", "XUIDialogTitle.react" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var k = i.createClass({
  displayName: "P2PDialogTitle",
  render: function() {
   var l = g.messengerdotcom, m = l ? h : j;
   return i.createElement(m, i.__spread({}, this.props), this.props.children);
  }
 });
 e.exports = k;
}, null);

__d("P2PText.react", [ "MessengerText.react", "P2PEnvironment", "React", "XUIGrayText.react" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var k = i, l = k.PropTypes, m = i.createClass({
  displayName: "P2PText",
  propTypes: {
   type: l.oneOf([ "primary", "secondary" ]).isRequired
  },
  render: function() {
   var n = h.messengerdotcom, o = n ? g : j, p = this.props, q = p.type, r = this.props;
   if (!n) r = Object.assign({}, this.props, {
    display: this.props.display || "block",
    shade: q === "primary" ? "dark" : "light",
    size: "small"
   });
   return i.createElement(o, i.__spread({}, r), this.props.children);
  }
 });
 e.exports = m;
}, null);

__d("P2PErrorDialog.react", [ "React", "P2PButton.react", "P2PDialog.react", "P2PDialogBody.react", "P2PDialogFooter.react", "P2PDialogTitle.react", "P2PText.react", "emptyFunction", "fbt" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
 b.__markCompiled && b.__markCompiled();
 var p = g, q = p.PropTypes, r = g.createClass({
  displayName: "P2PErrorDialog",
  propTypes: {
   allowBack: q.bool,
   onBackClick: q.func,
   onOKClick: q.func,
   error: q.object,
   title: q.string
  },
  getDefaultProps: function() {
   return {
    allowBack: false,
    onBackClick: n,
    onOKClick: n,
    error: null,
    title: o._("Problem")
   };
  },
  handleBackButtonClick: function() {
   this.props.onBackClick();
  },
  handleOKButtonClick: function() {
   this.props.onOKClick();
  },
  renderBackButton: function() {
   var s = null;
   if (this.props.allowBack) s = g.createElement(h, {
    label: o._("Back"),
    onClick: this.handleBackButtonClick,
    use: "default"
   });
   return s;
  },
  renderErrorContent: function() {
   var s = this.props.error;
   if (s.message.__html) {
    return g.createElement(m, {
     dangerouslySetInnerHTML: s.message,
     type: "primary"
    });
   } else return g.createElement(m, {
    type: "primary"
   }, s.message);
  },
  render: function() {
   return g.createElement(i, {
    layerHideOnBlur: false,
    shown: true,
    width: 300
   }, g.createElement(l, {
    showCloseButton: false
   }, this.props.title), g.createElement(j, null, this.renderErrorContent()), g.createElement(k, null, this.renderBackButton(), g.createElement(h, {
    label: o._("OK"),
    onClick: this.handleOKButtonClick,
    use: "default"
   })));
  }
 });
 e.exports = r;
}, null);

__d("P2PErrorNotice.react", [ "React", "XUINotice.react", "cx" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 var j = g, k = j.PropTypes, l = g.createClass({
  displayName: "P2PErrorNotice",
  propTypes: {
   error: k.object
  },
  getDefaultProps: function() {
   return {
    error: null
   };
  },
  renderErrorContent: function() {
   var m = this.props.error;
   if (m.message.__html) {
    return g.createElement("span", {
     dangerouslySetInnerHTML: m.message
    });
   } else return g.createElement("span", null, m.message);
  },
  render: function() {
   return g.createElement(h, {
    className: "_3-8n",
    use: "warn"
   }, this.renderErrorContent());
  }
 });
 e.exports = l;
}, null);

__d("P2PCreditCardForm.react", [ "CreditCardFormParam", "KappaWrapper", "React", "P2PCreditCardNumberFormField.react", "P2PCreditCardExpDateFormField.react", "P2PCreditCardCVCFormField.react", "P2PCreditCardZipCodeFormField.react", "P2PErrorDialog.react", "P2PErrorNotice.react", "ReactLayeredComponentMixin", "cx", "emptyFunction", "fbt", "getObjectValues" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var u = i, v = u.PropTypes, w = i.createClass({
  displayName: "P2PCreditCardForm",
  mixins: [ p ],
  propTypes: {
   cscMaxLength: v.number,
   editMode: v.bool,
   onErrorDialogOKClick: v.func,
   onValidation: v.func,
   prefilledFormData: v.object,
   rendersErrorDialog: v.bool,
   saveErrors: v.object
  },
  getDefaultProps: function() {
   return {
    cscMaxLength: null,
    editMode: false,
    onErrorDialogOKClick: r,
    onValidation: r,
    prefilledFormData: {},
    rendersErrorDialog: false,
    saveErrors: null
   };
  },
  getInitialState: function() {
   var x = {};
   x[g.CARD_NUMBER] = {};
   x[g.CARD_NUMBER].valid = false;
   x[g.CARD_NUMBER].value = this.props.prefilledFormData[g.CARD_NUMBER] || "";
   x[g.CARD_EXPIRATION] = {};
   x[g.CARD_EXPIRATION].valid = false;
   x[g.CARD_EXPIRATION].value = this.props.prefilledFormData[g.CARD_EXPIRATION] || "";
   x[g.CSC] = {};
   x[g.CSC].valid = false;
   x[g.CSC].value = this.props.prefilledFormData[g.CSC] || "";
   x[g.ZIP] = {};
   x[g.ZIP].valid = false;
   x[g.ZIP].value = this.props.prefilledFormData[g.ZIP] || "";
   return {
    isValid: false,
    fields: x
   };
  },
  componentWillMount: function() {
   h.start(6, 3, 0);
  },
  handleFormValueChange: function(x, y, z) {
   var aa = this.state.fields;
   aa[x] = {
    valid: z,
    value: y
   };
   this.validateForm();
  },
  validateForm: function() {
   var x = true, y = this.state.fields;
   x = !t(y).some(function(z) {
    return !z.valid;
   });
   this.setState({
    isValid: x
   });
   this.props.onValidation(x, this.serializeFormFields());
  },
  serializeFormFields: function() {
   var x = this.state.fields, y = {};
   for (var z in x) if (x.hasOwnProperty(z)) y[z] = x[z].value;
   return y;
  },
  getSaveError: function(x) {
   var y = "", z = this.props.saveErrors;
   if (z && z.fields && z.fields[x]) y = z.fields[x].message;
   return y;
  },
  isCreditCardNumberMasked: function() {
   return this.props.editMode;
  },
  isCreditCardNumberFocused: function() {
   return !this.props.editMode;
  },
  isExpFocused: function() {
   return this.props.editMode;
  },
  renderGeneralError: function() {
   var x = this.getGeneralError();
   if (!x) return;
   return i.createElement(o, {
    error: x
   });
  },
  getGeneralError: function() {
   if (this.props.saveErrors && this.props.saveErrors.general) return this.props.saveErrors.general;
   return null;
  },
  handleErrorOKClick: function() {
   this.props.onErrorDialogOKClick();
  },
  renderLayers: function() {
   var x = this.getGeneralError();
   if (!this.props.rendersErrorDialog || !x) return {};
   return {
    errorMessageDialog: i.createElement(n, {
     error: x,
     onOKClick: this.handleErrorOKClick,
     title: s._("Problem Saving Card")
    })
   };
  },
  render: function() {
   return i.createElement("form", {
    className: "_3bez"
   }, !this.props.rendersErrorDialog ? this.renderGeneralError() : null, i.createElement("div", {
    className: "_2xxs _2xxt"
   }, i.createElement(j, {
    reference: g.CARD_NUMBER,
    onChange: this.handleFormValueChange,
    saveError: this.getSaveError(g.CARD_NUMBER),
    value: this.state.fields[g.CARD_NUMBER].value,
    isMasked: this.isCreditCardNumberMasked(),
    focused: this.isCreditCardNumberFocused()
   })), i.createElement("div", {
    className: "_2xxs _2xxu"
   }, i.createElement(k, {
    reference: g.CARD_EXPIRATION,
    focused: this.isExpFocused(),
    onChange: this.handleFormValueChange,
    saveError: this.getSaveError(g.CARD_EXPIRATION),
    value: this.state.fields[g.CARD_EXPIRATION].value
   }), i.createElement(l, {
    reference: g.CSC,
    onChange: this.handleFormValueChange,
    saveError: this.getSaveError(g.CSC),
    cscMaxLength: this.props.cscMaxLength,
    creditCardNumber: this.state.fields[g.CARD_NUMBER].value,
    value: this.state.fields[g.CSC].value
   })), i.createElement("div", {
    className: "_2xxs _2xxv"
   }, i.createElement(m, {
    reference: g.ZIP,
    onChange: this.handleFormValueChange,
    saveError: this.getSaveError(g.ZIP),
    value: this.state.fields[g.ZIP].value
   })));
  }
 });
 e.exports = w;
}, null);

__d("P2PActionConstants", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var g = {
  CREDIT_CARDS_UPDATED: "credit_cards_updated",
  CREDIT_CARD_ADDED: "credit_card_added",
  CREDIT_CARD_ADDED_ERROR: "credit_card_added_error",
  CREDIT_CARD_DELETED: "credit_card_deleted",
  CREDIT_CARD_DELETED_ERROR: "credit_card_deleted_error",
  CREDIT_CARD_UPDATED: "credit_card_updated",
  CREDIT_CARD_UPDATED_ERROR: "credit_card_updated_error",
  PRESET_CREDIT_CARD_UPDATED: "preset_credit_card_updated",
  PRESET_CREDIT_CARD_UPDATED_ERROR: "preset_credit_card_updated_error",
  CREDIT_CARD_VERIFIED: "credit_card_verified",
  CREDIT_CARD_VERIFIED_ERROR: "credit_card_verified_error",
  TRANSFERS_UPDATED: "transfers_updated",
  TRANSFERS_UPDATED_ERROR: "transfers_updated_error",
  NUX_TRANSFERS_UPDATED: "nux_transfers_updated",
  TRANSFER_ADDED: "transfer_added",
  TRANSFER_ADDED_ERROR: "transfer_added_error",
  TRANSFER_UPDATED: "transfer_updated",
  TRANSFER_UPDATED_ERROR: "transfer_updated_error",
  TRANSFER_ACCEPTED: "transfer_accepted",
  TRANSFER_DECLINED: "transfer_declined"
 };
 e.exports = g;
}, null);

__d("P2PDispatcher", [ "Dispatcher" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 e.exports = new g();
}, null);

__d("P2PActions", [ "P2PActionConstants", "P2PDispatcher" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var i = {
  updateCreditCards: function(j) {
   h.dispatch({
    type: g.CREDIT_CARDS_UPDATED,
    data: j
   });
  },
  addCreditCard: function(j) {
   h.dispatch({
    type: g.CREDIT_CARD_ADDED,
    data: j
   });
  },
  addCreditCardError: function(j) {
   h.dispatch({
    type: g.CREDIT_CARD_ADDED_ERROR,
    data: j
   });
  },
  updatePresetCreditCard: function(j) {
   h.dispatch({
    type: g.PRESET_CREDIT_CARD_UPDATED,
    data: j
   });
  },
  updatePresetCreditCardError: function(j) {
   h.dispatch({
    type: g.PRESET_CREDIT_CARD_UPDATED_ERROR,
    data: j
   });
  },
  updateCreditCard: function(j) {
   h.dispatch({
    type: g.CREDIT_CARD_UPDATED,
    data: j
   });
  },
  updateCreditCardError: function(j) {
   h.dispatch({
    type: g.CREDIT_CARD_UPDATED_ERROR,
    data: j
   });
  },
  deleteCreditCard: function(j) {
   h.dispatch({
    type: g.CREDIT_CARD_DELETED,
    data: j
   });
  },
  deleteCreditCardError: function(j) {
   h.dispatch({
    type: g.CREDIT_CARD_DELETED_ERROR,
    data: j
   });
  },
  verifyCreditCard: function(j) {
   h.dispatch({
    type: g.CREDIT_CARD_VERIFIED,
    data: j
   });
  },
  verifyCreditCardError: function(j) {
   h.dispatch({
    type: g.CREDIT_CARD_VERIFIED_ERROR,
    data: j
   });
  },
  updateTransfers: function(j) {
   h.dispatch({
    type: g.TRANSFERS_UPDATED,
    data: j
   });
  },
  updateTransfersError: function(j) {
   h.dispatch({
    type: g.TRANSFERS_UPDATED_ERROR,
    data: j
   });
  },
  updateNUXTransfers: function(j) {
   h.dispatch({
    type: g.NUX_TRANSFERS_UPDATED,
    data: j
   });
  },
  transferAdded: function(j) {
   h.dispatch({
    type: g.TRANSFER_ADDED,
    data: j
   });
  },
  transferAddedError: function(j) {
   h.dispatch({
    type: g.TRANSFER_ADDED_ERROR,
    data: j
   });
  },
  transferUpdated: function(j) {
   h.dispatch({
    type: g.TRANSFER_UPDATED,
    data: j
   });
  },
  transferUpdatedError: function(j) {
   h.dispatch({
    type: g.TRANSFER_UPDATED_ERROR,
    data: j
   });
  },
  transferAccepted: function() {
   h.dispatch({
    type: g.TRANSFER_ACCEPTED
   });
  },
  transferDeclined: function(j) {
   h.dispatch({
    type: g.TRANSFER_DECLINED,
    data: j
   });
  }
 };
 e.exports = i;
}, null);

__d("P2PAPIUtils", [ "CreditCardFormParam", "fbt", "guid", "merge" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 var k = {
  genRequestID: function() {
   return "id:" + i() + ":" + Date.now();
  },
  getUncaughtErrorMessage: function() {
   return h._("Sorry, something went wrong. Please try again later.");
  },
  prepareCardMutationData: function(l) {
   var m = {}, n = l[g.CARD_NUMBER].replace(/ /g, ""), o = l[g.CARD_EXPIRATION].split("/");
   m[g.CARD_NUMBER] = n;
   m[g.MONTH] = o[0];
   m[g.YEAR] = o[1];
   m[g.CARD_EXPIRATION] = {};
   m[g.CARD_EXPIRATION][g.MONTH] = m[g.MONTH];
   m[g.CARD_EXPIRATION][g.YEAR] = m[g.YEAR];
   return j(l, m);
  }
 };
 e.exports = k;
}, null);

__d("XP2PCreditCardDeleteController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/p2p/credit_cards/_delete/", {});
}, null);

__d("XP2PCreditCardUpdateController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/p2p/credit_cards/_update/", {});
}, null);

__d("XP2PCreditCardCreateController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/p2p/credit_cards/_create/", {});
}, null);

__d("XP2PCreditCardsController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/p2p/credit_cards/", {
  type: {
   type: "Int",
   defaultValue: 1
  }
 });
}, null);

__d("XP2PPasswordProtectionStatusController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/p2p/password_protection_status/", {});
}, null);

__d("XP2PPasswordProtectionStatusUpdateController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/p2p/password_protection_status/_update/", {});
}, null);

__d("XP2PPresetCreditCardSetController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/p2p/preset_credit_card/_set/", {});
}, null);

__d("XP2PTransactionsCreateController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/p2p/transactions/_create/", {});
}, null);

__d("XP2PTransactionsController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/p2p/transactions/", {
  since: {
   type: "Int"
  }
 });
}, null);

__d("XP2PTransactionsDeclineController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/p2p/transactions/_decline/", {});
}, null);

__d("XP2PTransactionsCancelController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/p2p/transactions/_cancel/", {});
}, null);

__d("XP2PCreditCardVerifyController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/p2p/credit_cards/_verify/", {});
}, null);

__d("P2PAPI", [ "AsyncRequest", "CreditCardFormParam", "P2PActions", "P2PAPIUtils", "P2PPasswordProtectionParam", "P2PPaymentCreditCardsTypes", "P2PTransferParam", "ImmutableObject", "URI", "XP2PCreditCardDeleteController", "XP2PCreditCardUpdateController", "XP2PCreditCardCreateController", "XP2PCreditCardsController", "XP2PPasswordProtectionStatusController", "XP2PPasswordProtectionStatusUpdateController", "XP2PPresetCreditCardSetController", "XP2PTransactionsCreateController", "XP2PTransactionsController", "XP2PTransactionsDeclineController", "XP2PTransactionsCancelController", "XP2PCreditCardVerifyController", "emptyFunction" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, aa, ba) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var ca = {
  getAllCreditCards: function() {
   var da = s.getURIBuilder().getURI();
   new g().setData({
    type: l.SENDING
   }).setURI(da).setMethod("GET").setReadOnly(true).setHandler(function(ea) {
    var fa = ea.getPayload();
    if (!fa.error) i.updateCreditCards(fa);
   }.bind(this)).send();
  },
  createTransaction: function(da) {
   var ea = w.getURIBuilder().getURI(), fa = {}, ga = da.formData, ha = da.success || ba, ia = da.error || ba;
   fa[h.CREDENTIAL_ID] = ga[h.CREDENTIAL_ID];
   fa.amount = ga.amount;
   fa.receiver_id = ga.receiverId;
   fa.offline_threading_id = j.genRequestID();
   new g().setData(fa).setMethod("POST").setURI(ea).setHandler(function(ja) {
    var ka = ja ? ja.getPayload() : {};
    if (ka.error) {
     ia(ka.error);
    } else {
     ha(ka);
     this.getAllCreditCards();
    }
   }.bind(this)).setErrorHandler(function() {
    ia({
     message: j.getUncaughtErrorMessage()
    });
   }.bind(this)).send();
  },
  addCreditCard: function(da) {
   var ea = r.getURIBuilder().getURI().getPath(), fa = o("/ajax/payment/token_proxy.php").addQueryData("tpe", ea);
   da = j.prepareCardMutationData(da);
   var ga = new n(da);
   new g().setData(da).setMethod("POST").setURI(fa).setHandler(function(ha) {
    var ia = ha.getPayload(), ja = {};
    if (!ia.errors) {
     ja[h.CREDENTIAL_ID] = ia[h.CARD_FBID];
     ja.isPreset = ia.isPreset;
     ja.isVerified = ia.isVerified;
     ja.passwordProtection = ia.passwordProtection;
     ga = n.set(ga, ja);
     i.addCreditCard(ga);
    } else i.addCreditCardError(Object.assign({
     requestID: ga.requestID
    }, ia));
   }.bind(this)).setErrorHandler(function() {
    i.addCreditCardError({
     requestID: ga.requestID,
     errors: {
      general: {
       message: j.getUncaughtErrorMessage()
      }
     }
    });
   }.bind(this)).send();
  },
  getTransactions: function(da) {
   da = da || {};
   var ea = {}, fa = da, ga = x.getURIBuilder().getURI(), ha = new n(fa);
   if (fa.since) ea.since = fa.since;
   return new g().setData(ea).setURI(ga).setMethod("GET").setReadOnly(true).setHandler(function(ia) {
    var ja = ia.getPayload();
    if (!ja.error) {
     i.updateTransfers(ja);
    } else i.updateTransfersError(Object.assign({
     requestID: ha.requestID
    }, ja));
   }.bind(this)).setErrorHandler(function() {
    i.updateTransfersError({
     error: {
      message: j.getUncaughtErrorMessage()
     },
     requestID: ha.requestID
    });
   }.bind(this)).send();
  },
  getNUXTransactions: function() {
   var da = new Date(), ea = Math.round(da.setDate(da.getDate() - 15) / 1e3), fa = x.getURIBuilder().getURI();
   return new g().setData({
    since: ea
   }).setURI(fa).setMethod("GET").setReadOnly(true).setHandler(function(ga) {
    var ha = ga.getPayload();
    if (!ha.error) i.updateNUXTransfers(ha);
   }.bind(this)).send();
  },
  updatePresetCreditCard: function(da) {
   var ea = v.getURIBuilder().getURI();
   new g().setData(da).setURI(ea).setMethod("POST").setHandler(function(fa) {
    var ga = fa.getPayload();
    if (!ga.error) {
     i.updatePresetCreditCard(Object.assign({}, ga, {
      requestID: da.requestID
     }));
     i.transferAccepted();
    } else i.updatePresetCreditCardError(Object.assign({}, ga, {
     requestID: da.requestID
    }));
   }.bind(this)).setErrorHandler(function() {
    i.updatePresetCreditCardError({
     error: {
      message: j.getUncaughtErrorMessage()
     },
     requestID: da.requestID
    });
   }.bind(this)).send();
  },
  updateCreditCard: function(da) {
   var ea = q.getURIBuilder().getURI().getPath(), fa = o("/ajax/payment/token_proxy.php").addQueryData("tpe", ea);
   da = j.prepareCardMutationData(da);
   var ga = new n(da);
   new g().setData(da).setMethod("POST").setURI(fa).setHandler(function(ha) {
    var ia = ha.getPayload();
    if (!ia.errors) {
     i.updateCreditCard(ga);
    } else i.updateCreditCardError(Object.assign({}, ia, {
     requestID: ga.requestID
    }));
   }.bind(this)).setErrorHandler(function() {
    i.updateCreditCardError({
     errors: {
      general: {
       message: j.getUncaughtErrorMessage()
      }
     },
     requestID: ga.requestID
    });
   }.bind(this)).send();
  },
  deleteCreditCard: function(da) {
   var ea = p.getURIBuilder().getURI();
   new g().setData(da).setMethod("POST").setURI(ea).setHandler(function(fa) {
    var ga = fa.getPayload();
    if (!ga.error) {
     i.deleteCreditCard(Object.assign({}, ga, {
      requestID: da.requestID
     }));
    } else i.deleteCreditCardError(Object.assign({}, ga, {
     requestID: da.requestID
    }));
   }.bind(this)).setErrorHandler(function() {
    i.deleteCreditCardError({
     error: {
      message: j.getUncaughtErrorMessage()
     },
     requestID: da.requestID
    });
   }.bind(this)).send();
  },
  getPasswordProtectionSetting: function(da) {
   var ea = t.getURIBuilder().getURI(), fa = da.success || ba, ga = da.error || ba;
   new g().setURI(ea).setMethod("GET").setReadOnly(true).setHandler(function(ha) {
    var ia = ha ? ha.getPayload() : [];
    if (ia.error) {
     ga();
    } else fa(ia);
   }.bind(this)).setErrorHandler(function() {
    ga();
   }.bind(this)).send();
  },
  setPasswordProtectionSetting: function(da) {
   var ea = u.getURIBuilder().getURI(), fa = da.formData, ga = da.success || ba, ha = da.error || ba, ia = {};
   ia[k.STATUS] = fa[k.STATUS];
   new g().setData(ia).setURI(ea).setMethod("POST").setHandler(function(ja) {
    var ka = ja ? ja.getPayload() : {};
    if (ka.error) {
     ha(ka.error);
    } else ga();
   }.bind(this)).setErrorHandler(function() {
    ha();
   }.bind(this)).send();
  },
  declineTransaction: function(da) {
   var ea = y.getURIBuilder().getURI(), fa = da.formData, ga = da.success || ba, ha = da.error || ba, ia = {};
   ia[m.TRANSFER_ID] = fa[m.TRANSFER_ID];
   new g().setData(ia).setURI(ea).setMethod("POST").setHandler(function(ja) {
    var ka = ja ? ja.getPayload() : {}, la = {};
    if (ka.error) {
     ha(ka.error);
    } else {
     ga();
     la[m.TRANSFER_ID] = ia[m.TRANSFER_ID];
     i.transferDeclined(la);
    }
   }.bind(this)).setErrorHandler(function() {
    ha();
   }.bind(this)).send();
  },
  cancelTransaction: function(da) {
   var ea = z.getURIBuilder().getURI(), fa = da.formData, ga = da.success || ba, ha = da.error || ba, ia = {};
   ia[m.TRANSFER_ID] = fa[m.TRANSFER_ID];
   new g().setData(ia).setURI(ea).setMethod("POST").setHandler(function(ja) {
    var ka = ja ? ja.getPayload() : {};
    if (ka.error) {
     ha(ka.error);
    } else ga();
   }.bind(this)).setErrorHandler(function() {
    ha();
   }.bind(this)).send();
  },
  verifyCreditCard: function(da) {
   var ea = aa.getURIBuilder().getURI().getPath(), fa = o("/ajax/payment/token_proxy.php").addQueryData("tpe", ea);
   new g().setData(da).setMethod("POST").setURI(fa).setHandler(function(ga) {
    var ha = ga.getPayload();
    if (!ha.error) {
     i.verifyCreditCard(Object.assign({}, ha, {
      requestID: da.requestID
     }));
    } else i.verifyCreditCardError(Object.assign({}, ha, {
     requestID: da.requestID
    }));
   }.bind(this)).setErrorHandler(function() {
    i.verifyCreditCardError({
     error: {
      message: j.getUncaughtErrorMessage()
     },
     requestID: da.requestID
    });
   }.bind(this)).send();
  }
 };
 e.exports = ca;
}, null);

__d("P2PChooseCreditCardForm.react", [ "Image.react", "P2PCreditCard", "P2PEnvironment", "React", "XUIRadioList.react", "XUIGrayText.react", "cx", "emptyFunction", "fbt", "joinClasses" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var q = k.Item, r = j, s = r.PropTypes, t = "add_debit_card", u = i.messengerdotcom, v = j.createClass({
  displayName: "P2PChooseCreditCardForm",
  propTypes: {
   creditCards: s.arrayOf(s.instanceOf(h)),
   selectedCard: s.instanceOf(h).isRequired
  },
  getDefaultProps: function() {
   return {
    creditCards: [],
    selectedCard: null,
    onChange: n,
    onAddDebitCardOptionSelected: n,
    showAddDebitCardOption: false
   };
  },
  getInitialState: function() {
   return {
    selectedCard: this.props.selectedCard
   };
  },
  getSelectedCard: function() {
   return this.state.selectedCard;
  },
  onChange: function(w) {
   var x;
   if (w === t) {
    this.props.onAddDebitCardOptionSelected();
   } else {
    x = this.props.creditCards.filter(function(y) {
     return y.getCredentialId() === w;
    })[0];
    this.setState({
     selectedCard: x
    });
    this.props.onChange(x);
   }
  },
  renderCardItem: function(w, x) {
   return j.createElement(q, {
    className: "_2x6n",
    key: "item-" + x,
    value: w.getCredentialId()
   }, j.createElement(l, {
    className: "_3-8r _2jp9",
    shade: "dark",
    weight: "bold"
   }, w.getName()), j.createElement(l, {
    shade: "dark",
    weight: "normal"
   }, w.getCreditCardNumberFormatted()), j.createElement(g, {
    className: "_2x6p",
    height: 24,
    src: w.getImage(),
    width: 36
   }));
  },
  renderAddDebitCardRadioItem: function() {
   return j.createElement(q, {
    className: "_2x6n _1gri",
    key: "item-" + this.props.creditCards.length,
    value: t
   }, j.createElement(l, {
    className: "_3-8r _2jpa",
    shade: "dark"
   }, o._("Add a Debit Card")));
  },
  getRadioListItems: function() {
   var w = this.props.creditCards, x = w.map(this.renderCardItem);
   if (this.props.showAddDebitCardOption) x.push(this.renderAddDebitCardRadioItem());
   return x;
  },
  render: function() {
   return j.createElement(k, {
    selectedValue: this.state.selectedCard.getCredentialId(),
    className: p(this.props.className, "_2x6r" + (u ? " " + "_2jpb" : "")),
    onValueChange: this.onChange
   }, this.getRadioListItems());
  }
 });
 e.exports = v;
}, null);

__d("P2PLoadingMask.react", [ "React", "XUISpinner.react", "cx" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var j = g, k = j.PropTypes, l = g.createClass({
  displayName: "P2PLoadingMask",
  propTypes: {
   visible: k.bool
  },
  getDefaultProps: function() {
   return {
    visible: false
   };
  },
  render: function() {
   if (!this.props.visible) return null;
   return g.createElement("div", {
    className: "_3de"
   }, g.createElement(h, {
    background: "dark",
    size: "large",
    className: "_3df"
   }), g.createElement("div", {
    className: "_3dg"
   }));
  }
 });
 e.exports = l;
}, null);

__d("P2PLogger", [ "BanzaiLogger" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var h = "P2PPaymentLoggerConfig", i = {
  log: function(j, k) {
   k = Object.assign({
    event: j
   }, k);
   g.log(h, k);
  }
 };
 e.exports = i;
}, null);

__d("P2PPasswordProtectionNUXDialog.react", [ "Link.react", "P2PAPI", "P2PEnvironment", "P2PErrorDialog.react", "P2PLinkConstants", "P2PLoadingMask.react", "P2PLogger", "P2PPaymentLoggerEvent", "P2PPaymentLoggerEventFlow", "P2PPasswordProtectionParam", "P2PPasswordProtectionStatusTypes", "React", "P2PButton.react", "P2PDialog.react", "P2PDialogTitle.react", "P2PDialogBody.react", "P2PDialogFooter.react", "P2PText.react", "cx", "emptyFunction", "fbt" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, aa) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var ba = r, ca = ba.PropTypes, da = i.messengerdotcom, ea = r.createClass({
  displayName: "P2PPasswordProtectionNUXDialog",
  propTypes: {
   onComplete: ca.func
  },
  getDefaultProps: function() {
   return {
    onComplete: z
   };
  },
  getInitialState: function() {
   return {
    saveErrorObject: null,
    loading: false
   };
  },
  componentWillMount: function() {
   this.log(n.UI_ACTN_INITIATE_PASSWORD_PROTECTION_NUX);
  },
  log: function(fa, ga) {
   m.log(fa, Object.assign({
    www_event_flow: o.UI_FLOW_P2P_SETTINGS
   }, ga));
  },
  onSaveClick: function() {
   this.setState({
    loading: true,
    saveErrorObject: null
   });
   this.setPasswordProtection(q.ENABLED);
   this.log(n.UI_ACTN_OPT_IN_PASSWORD_PROTECTION_NUX);
  },
  setPasswordProtection: function(fa) {
   var ga = {};
   ga[p.STATUS] = fa;
   h.setPasswordProtectionSetting({
    formData: ga,
    success: this.handleOnSaveSuccess,
    error: this.handleOnSaveError
   });
  },
  handleOnSaveSuccess: function() {
   this.setState({
    loading: false
   });
   this.props.onComplete();
  },
  handleOnSaveError: function(fa) {
   this.setState({
    loading: false,
    saveErrorObject: fa
   });
  },
  isSaveButtonDisabled: function() {
   return this.state.loading;
  },
  isCancelButtonDisabled: function() {
   return this.state.loading;
  },
  onCancelClick: function() {
   this.setState({
    loading: true,
    saveErrorObject: null
   });
   this.setPasswordProtection(q.DISABLED);
   this.log(n.UI_ACTN_OPT_OUT_PASSWORD_PROTECTION_NUX);
  },
  handleErrorBackClick: function() {
   this.setState({
    saveErrorObject: null
   });
  },
  handleErrorOKClick: function() {
   this.setState({
    saveErrorObject: null
   });
   this.props.onComplete();
  },
  render: function() {
   var fa = da ? 320 : 300;
   if (this.state.saveErrorObject) return r.createElement(j, {
    allowBack: true,
    title: aa._("Problem Saving"),
    onBackClick: this.handleErrorBackClick,
    onOKClick: this.handleErrorOKClick,
    error: this.state.saveErrorObject
   });
   return r.createElement(t, {
    className: da ? "_-el" : "",
    behaviors: {
     LayerFadeOnShow: false
    },
    layerHideOnBlur: false,
    shown: true,
    width: fa
   }, r.createElement(u, {
    showCloseButton: false
   }, aa._("Use Password?")), r.createElement(v, null, r.createElement(x, {
    className: "_5sor",
    type: "primary"
   }, aa._("For additional security, you can enter your Facebook password to send money. You can always update this in {link}.", [ aa.param("link", r.createElement(g, {
    href: k.settingsWWWURI,
    target: "_blank"
   }, aa._("Settings"))) ]))), r.createElement(w, null, r.createElement(s, {
    className: "_5sov",
    disabled: this.isCancelButtonDisabled(),
    label: aa._("Not Now"),
    onClick: this.onCancelClick,
    size: "medium",
    use: "default"
   }), r.createElement(s, {
    className: "_5sox",
    disabled: this.isSaveButtonDisabled(),
    label: aa._("Use Password"),
    onClick: this.onSaveClick,
    size: "medium",
    use: "confirm"
   })), r.createElement(l, {
    visible: this.state.loading
   }));
  }
 });
 e.exports = ea;
}, null);

__d("LayerSlowlyFadeOnShow", [ "LayerFadeOnShow" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 var h = 500, i = g.forDuration(h);
 e.exports = i;
}, null);

__d("P2PSuccessDialog.react", [ "Image.react", "LayerFadeOnHide", "LayerSlowlyFadeOnShow", "LeftRight.react", "P2PEnvironment", "React", "P2PButton.react", "P2PDialog.react", "P2PDialogTitle.react", "P2PDialogBody.react", "P2PDialogFooter.react", "P2PText.react", "ix", "cx", "fbt", "emptyFunction" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var w = l, x = w.PropTypes, y = l.createClass({
  displayName: "P2PSuccessDialog",
  propTypes: {
   onOKClick: x.func,
   title: x.string.isRequired
  },
  getDefaultProps: function() {
   return {
    onOKClick: v
   };
  },
  render: function() {
   var z = k.messengerdotcom, aa = z ? 350 : 300, ba = z ? s("/images/p2p/checkmark-messenger.png") : s("/images/p2p/check_mark-sm.png"), ca = [ l.createElement("div", {
    className: "_1tcj",
    key: "checkmark"
   }, l.createElement(g, {
    height: 50,
    width: 50,
    src: ba
   })), l.createElement(r, {
    className: "_3exn",
    key: "confirmation_text",
    type: "primary"
   }, this.props.children) ];
   if (z) ca = l.createElement(j, {
    direction: "left"
   }, ca);
   return l.createElement(n, {
    behaviors: {
     LayerFadeOnShow: false,
     LayerSlowlyFadeOnShow: i,
     LayerFadeOnHide: h
    },
    className: "_1tck" + (z ? " " + "_1tcl" : ""),
    layerHideOnBlur: false,
    ref: "dialog",
    repositionOnUpdate: true,
    shown: true,
    width: aa
   }, l.createElement("div", {
    className: "_1tcm"
   }, l.createElement(o, {
    className: "_1tcn",
    showCloseButton: false
   }, this.props.title), l.createElement(p, null, ca), l.createElement(q, null, l.createElement(m, {
    use: "default",
    label: u._("OK"),
    onClick: this.props.onOKClick
   }))));
  }
 });
 e.exports = y;
}, null);

__d("P2PVerifyCreditCardDialog.react", [ "CreditCardFormParam", "P2PAPI", "P2PAPIUtils", "P2PCreditCard", "P2PEnvironment", "P2PErrorNotice.react", "P2PLoadingMask.react", "React", "P2PButton.react", "P2PDialog.react", "P2PDialogBody.react", "P2PDialogFooter.react", "P2PCreditCardCVCFormField.react", "P2PCreditCardZipCodeFormField.react", "XUICloseButton.react", "P2PDialogTitle.react", "P2PText.react", "cx", "emptyFunction", "fbt", "getObjectValues" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, aa) {
 b.__markCompiled && b.__markCompiled();
 var ba = n, ca = ba.PropTypes, da = k.messengerdotcom, ea = n.createClass({
  displayName: "P2PVerifyCreditCardDialog",
  propTypes: {
   asyncRequestState: ca.object,
   creditCard: ca.instanceOf(j),
   onCancel: ca.func,
   onConfirm: ca.func,
   isSending: ca.bool
  },
  getDefaultProps: function() {
   return {
    asyncRequestState: {},
    creditCard: null,
    isSending: true,
    onCancel: y,
    onError: y,
    onSuccess: y
   };
  },
  getInitialState: function() {
   var fa = {};
   fa[g.CSC] = {};
   fa[g.CSC].valid = false;
   if (this.shouldShowZIPInput()) {
    fa[g.ZIP] = {};
    fa[g.ZIP].valid = false;
   }
   return {
    isValid: false,
    loading: false,
    requestID: "",
    saveError: null,
    fields: fa
   };
  },
  componentWillReceiveProps: function(fa) {
   var ga = fa.asyncRequestState ? fa.asyncRequestState[this.state.requestID] : null;
   if (ga) {
    this.setState({
     requestID: ""
    });
    if (ga.error) {
     this.handleOnSaveError(ga.error);
    } else this.handleOnSaveSuccess(ga);
   }
  },
  handleOnSaveSuccess: function(fa) {
   this.props.onSuccess(fa);
  },
  handleOnSaveError: function(fa) {
   this.setState({
    loading: false,
    saveError: fa
   });
  },
  clearSaveError: function() {
   this.setState({
    saveError: null
   });
  },
  handleCancelClick: function() {
   this.props.onCancel();
  },
  handleConfirmClick: function() {
   var fa = {}, ga = i.genRequestID();
   fa[g.CREDENTIAL_ID] = this.props.creditCard.getCredentialId();
   fa[g.CSC] = this.state.fields[g.CSC].value;
   if (this.state.fields[g.ZIP]) fa[g.ZIP] = this.state.fields[g.ZIP].value;
   this.clearSaveError();
   this.setState({
    loading: true,
    requestID: ga
   });
   h.verifyCreditCard(Object.assign({
    requestID: ga
   }, fa));
  },
  handleFormValueChange: function(fa, ga, ha) {
   var ia = this.state.fields;
   ia[fa].value = ga;
   ia[fa].valid = ha;
   this.setState({
    fields: ia
   });
   this.validateForm();
  },
  validateForm: function() {
   var fa = true, ga = this.state.fields;
   fa = !aa(ga).some(function(ha) {
    return !ha.valid;
   });
   this.setState({
    isValid: fa
   });
  },
  handleCloseButtonClick: function() {
   this.props.onCancel();
  },
  shouldShowZIPInput: function() {
   var fa = !!this.props.creditCard.getZipCode();
   return !fa;
  },
  renderError: function() {
   var fa;
   if (this.state.saveError) fa = n.createElement(l, {
    error: this.state.saveError
   });
   return fa;
  },
  renderCVCFormField: function() {
   return n.createElement(s, {
    cscMaxLength: this.props.creditCard.getMaxCSCLength(),
    focused: true,
    onChange: this.handleFormValueChange,
    reference: "csc",
    showIcon: false,
    showPlaceholder: false,
    showFocusOutline: false
   });
  },
  renderZIPFormField: function() {
   return n.createElement(t, {
    onChange: this.handleFormValueChange,
    reference: "zip",
    showIcon: false,
    showPlaceholder: false,
    showFocusOutline: false
   });
  },
  getMessage: function() {
   var fa = this.props.creditCard.getName(), ga = this.props.creditCard.getCreditCardNumber();
   if (this.props.isSending) {
    if (this.shouldShowZIPInput()) {
     return n.createElement(w, {
      type: "primary"
     }, z._("Enter the security code on the back of your {credit card issuer} ending in {credit card number last 4 digits} and Billing ZIP Code to send this payment.", [ z.param("credit card issuer", fa), z.param("credit card number last 4 digits", ga) ]));
    } else return n.createElement(w, {
     type: "primary"
    }, z._("Enter the security code on the back of your {credit card issuer} ending in {credit card number last 4 digits} to send this payment.", [ z.param("credit card issuer", fa), z.param("credit card number last 4 digits", ga) ]));
   } else if (this.shouldShowZIPInput()) {
    return n.createElement(w, {
     type: "primary"
    }, z._("Enter the security code on the back of your {credit card issuer} ending in {credit card number last 4 digits} and Billing ZIP Code to accept this payment.", [ z.param("credit card issuer", fa), z.param("credit card number last 4 digits", ga) ]));
   } else return n.createElement(w, {
    type: "primary"
   }, z._("Enter the security code on the back of your {credit card issuer} ending in {credit card number last 4 digits} to accept this payment.", [ z.param("credit card issuer", fa), z.param("credit card number last 4 digits", ga) ]));
  },
  getInputs: function() {
   var fa, ga = n.createElement("div", {
    className: "_3yfa"
   }, n.createElement(w, {
    className: "_197h",
    type: "primary"
   }, z._("Security Code")), n.createElement("div", {
    className: "_197i"
   }, this.renderCVCFormField()));
   if (this.shouldShowZIPInput()) fa = n.createElement("div", {
    className: "_3yfb"
   }, n.createElement(w, {
    className: "_197h",
    type: "primary"
   }, z._("Billing ZIP Code")), n.createElement("div", {
    className: "_197i"
   }, this.renderZIPFormField()));
   return n.createElement("div", null, ga, fa);
  },
  render: function() {
   var fa, ga, ha;
   if (da) {
    ha = 320;
    fa = n.createElement(o, {
     use: "default",
     size: "medium",
     label: z._("Cancel"),
     disabled: this.state.loading,
     onClick: this.props.onCancel
    });
   } else {
    ha = 300;
    ga = n.createElement(u, {
     onClick: this.handleCloseButtonClick
    });
   }
   return n.createElement(p, {
    className: da ? "_4ypw" : "",
    layerHideOnBlur: false,
    ref: "dialog",
    repositionOnUpdate: true,
    shown: true,
    width: ha
   }, n.createElement(v, {
    showCloseButton: false
   }, z._("Enter Security Code"), ga), n.createElement(q, null, n.createElement("div", {
    className: "_197f"
   }, this.getMessage()), this.renderError(), n.createElement("div", {
    className: "_197g"
   }, this.getInputs())), n.createElement(r, null, fa, n.createElement(o, {
    label: z._("Confirm"),
    onClick: this.handleConfirmClick,
    disabled: !this.state.isValid || this.state.loading,
    use: "confirm"
   })), n.createElement(m, {
    visible: this.state.loading
   }));
  }
 });
 e.exports = ea;
}, null);

__d("P2PEditCreditCardDialog.react", [ "CreditCardFormParam", "React", "P2PAPI", "P2PAPIUtils", "P2PCreditCard", "P2PCreditCardForm.react", "P2PLoadingMask.react", "P2PDialog.react", "P2PDialogTitle.react", "P2PDialogBody.react", "P2PDialogFooter.react", "P2PEnvironment", "P2PButton.react", "P2PText.react", "cx", "fbt" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var w = h, x = w.PropTypes, y = h.createClass({
  displayName: "P2PEditCreditCardDialog",
  propTypes: {
   asyncRequestState: x.object.isRequired,
   creditCard: x.instanceOf(k).isRequired,
   onCancel: x.func.isRequired,
   onSuccess: x.func.isRequired
  },
  getInitialState: function() {
   return {
    isValid: false,
    formData: {},
    loading: false,
    requestID: "",
    saveErrors: null
   };
  },
  componentWillReceiveProps: function(z) {
   var aa = z.asyncRequestState ? z.asyncRequestState[this.state.requestID] : null;
   if (aa) {
    this.setState({
     requestID: ""
    });
    if (aa.error) {
     this.handleOnSaveError(aa.error);
    } else this.handleOnSaveSuccess(aa);
   }
  },
  clearSaveErrors: function() {
   this.setState({
    saveErrors: null
   });
  },
  onSaveClick: function(z) {
   var aa = {}, ba = j.genRequestID();
   aa[g.CREDENTIAL_ID] = this.props.creditCard.getCredentialId();
   this.clearSaveErrors();
   this.setState({
    loading: true,
    requestID: ba
   });
   i.updateCreditCard(Object.assign({
    requestID: ba
   }, aa, this.state.formData));
  },
  handleOnSaveSuccess: function(z) {
   this.props.onSuccess(z);
  },
  onCancelClick: function(z) {
   this.props.onCancel();
  },
  handleOnSaveError: function(z) {
   this.setState({
    loading: false,
    saveErrors: z
   });
  },
  isSaveDisabled: function() {
   return !this.state.isValid || this.state.loading;
  },
  isCancelDisabled: function() {
   return this.state.loading;
  },
  handleValidation: function(z, aa) {
   this.setState({
    isValid: z,
    formData: aa
   });
  },
  getPrefilledFormData: function() {
   var z = {};
   z[g.CARD_NUMBER] = this.props.creditCard.getCreditCardNumberMask();
   z[g.CARD_EXPIRATION] = this.props.creditCard.getExpFormattedShort();
   z[g.ZIP] = this.props.creditCard.getZipCode();
   return z;
  },
  handleErrorDialogOKClick: function() {
   this.clearSaveErrors();
  },
  onToggle: function(z) {
   if (!z) this.props.onCancel();
  },
  render: function() {
   var z = r.messengerdotcom, aa = z ? 350 : 300;
   return h.createElement(n, {
    layerHideOnBlur: false,
    onToggle: this.onToggle,
    repositionOnUpdate: true,
    shown: true,
    width: aa
   }, h.createElement(o, null, v._("Update Debit Card")), h.createElement(p, null, h.createElement(t, {
    className: "_3-96",
    type: "primary"
   }, v._("Please update the expiration date for your card ending in {card numbers}.", [ v.param("card numbers", this.props.creditCard.getCreditCardNumber()) ])), h.createElement(l, {
    onValidation: this.handleValidation,
    saveErrors: this.state.saveErrors,
    editMode: true,
    prefilledFormData: this.getPrefilledFormData(),
    cscMaxLength: this.props.creditCard.getMaxCSCLength()
   })), h.createElement(q, null, h.createElement(s, {
    use: "default",
    size: "medium",
    label: v._("Cancel"),
    disabled: this.isCancelDisabled(),
    onClick: this.onCancelClick
   }), h.createElement(s, {
    use: "confirm",
    size: "medium",
    label: v._("Save"),
    disabled: this.isSaveDisabled(),
    onClick: this.onSaveClick
   })), h.createElement(m, {
    visible: this.state.loading
   }));
  }
 });
 e.exports = y;
}, null);

__d("P2PAcceptMoneyDialog.react", [ "CreditCardFormParam", "Link.react", "P2PCreditCardForm.react", "P2PAPI", "P2PAPIUtils", "P2PChooseCreditCardForm.react", "P2PCreditCard", "P2PErrorDialog.react", "P2PErrorNotice.react", "P2PLinkConstants", "P2PLoadingMask.react", "P2PLogger", "P2PPasswordProtectionNUXDialog.react", "P2PPasswordProtectionStatusTypes", "P2PPaymentLoggerEvent", "P2PPaymentLoggerEventFlow", "P2PSuccessDialog.react", "P2PTransferParam", "P2PVerifyCreditCardDialog.react", "React", "P2PButton.react", "P2PDialog.react", "P2PEditCreditCardDialog.react", "XUICloseButton.react", "P2PDialogTitle.react", "P2PDialogBody.react", "P2PDialogFooter.react", "P2PEnvironment", "P2PText.react", "cx", "emptyFunction", "fbt" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, aa, ba, ca, da, ea, fa, ga, ha, ia, ja, ka, la) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var ma = z, na = ma.PropTypes, oa = "fbP2PAcceptMoneyDialog_learnMoreSentenceID", pa = ha.messengerdotcom, qa = z.createClass({
  displayName: "P2PAcceptMoneyDialog",
  propTypes: {
   asyncRequestState: na.object,
   creditCards: na.arrayOf(na.instanceOf(m)).isRequired,
   onClose: na.func,
   transfer: na.object
  },
  getDefaultProps: function() {
   return {
    asyncRequestState: {},
    onClose: ka,
    creditCards: []
   };
  },
  getInitialState: function() {
   return {
    addCreditCardRequestID: "",
    isValid: false,
    declineErrorObject: null,
    editCreditCardDialogShown: false,
    formData: {},
    loading: false,
    passwordNUXPending: false,
    passwordProtectionNUXDialogShown: false,
    presetRequestID: "",
    presetSaveErrorObject: null,
    saveErrors: null,
    selectedCard: this.props.creditCards[0],
    showConfirmation: false,
    showDeclineConfirmation: false,
    showChooseCreditCardForm: this.props.creditCards.length > 0,
    verifyCreditCardDialogShown: false
   };
  },
  log: function(ra, sa) {
   r.log(ra, Object.assign({
    www_event_flow: v.UI_FLOW_P2P_RECEIVE,
    object_id: this.props.transfer[x.TRANSFER_ID]
   }, sa));
  },
  componentWillMount: function() {
   this.log(u.UI_ACTN_INITIATE_ADD_CARD);
  },
  componentWillReceiveProps: function(ra) {
   var sa = ra.asyncRequestState, ta = sa ? sa[this.state.addCreditCardRequestID] : null, ua = sa ? sa[this.state.presetRequestID] : null;
   if (ta) {
    this.setState({
     addCreditCardRequestID: ""
    });
    if (ta.error) {
     this.handleAcceptAddCardError(ta.error);
    } else this.handleAcceptAddCardSuccess(ta);
   } else if (ua) {
    this.setState({
     presetRequestID: ""
    });
    if (ua.error) {
     this.handleUpdatePresetCreditCardError(ua.error);
    } else this.handleUpdatePresetCreditCardSuccess(ua);
   }
  },
  onBlur: function() {
   this.props.onClose();
  },
  handleAddCardBackButtonClick: function() {
   this.setState({
    isValid: false,
    formData: {},
    presetSaveErrorObject: null,
    saveErrors: null,
    showChooseCreditCardForm: true
   });
  },
  handleAcceptWithCardButtonClick: function() {
   this.initiateAcceptWithSelectedCard();
  },
  initiateAcceptWithSelectedCard: function() {
   if (this.state.selectedCard.isExpired()) {
    this.setState({
     editCreditCardDialogShown: true,
     verifyCreditCardDialogShown: false
    });
    this.log(u.UI_ACTN_EDIT_CARD);
    return;
   } else if (!this.state.selectedCard.getIsVerified()) {
    this.setState({
     verifyCreditCardDialogShown: true,
     editCreditCardDialogShown: false
    });
    this.log(u.UI_ACTN_VERIFY_CSC);
    return;
   }
   this.acceptWithSelectedCard();
  },
  acceptWithSelectedCard: function() {
   this.setState({
    presetSaveErrorObject: null,
    loading: true
   });
   this.log(u.UI_ACTN_ACCEPT_WITH_CARD);
   this.updatePresetCreditCard(this.state.selectedCard.getCredentialId());
  },
  onVerifyCreditCardSuccess: function() {
   this.initiateAcceptWithSelectedCard();
  },
  onVerifyCreditCardCancel: function() {
   this.setState({
    verifyCreditCardDialogShown: false
   });
  },
  onEditCreditCardSuccess: function() {
   this.initiateAcceptWithSelectedCard();
  },
  onEditCreditCardCancel: function() {
   this.setState({
    editCreditCardDialogShown: false
   });
  },
  handleAddDebitCardOptionClicked: function() {
   this.setState({
    presetSaveErrorObject: null,
    showChooseCreditCardForm: false
   });
  },
  handleDeclineCardBackButtonClick: function() {
   this.setState({
    isValid: false,
    formData: {},
    presetSaveErrorObject: null,
    saveErrors: null,
    showDeclineConfirmation: false
   });
  },
  handleDeclineCardSubmitButtonClick: function() {
   var ra = {};
   this.setState({
    loading: true,
    declineErrorObject: null
   });
   ra[x.TRANSFER_ID] = this.props.transfer[x.TRANSFER_ID];
   j.declineTransaction({
    formData: ra,
    success: this.handleDeclineSuccess,
    error: this.handleDeclineError
   });
  },
  handleDeclineSuccess: function() {
   this.props.onClose();
  },
  handleDeclineError: function(ra) {
   this.setState({
    loading: false,
    declineErrorObject: ra
   });
  },
  handleNoDebitCardClick: function() {
   if (!this.state.loading) this.setState({
    showDeclineConfirmation: true
   });
  },
  handleAcceptAddCardClick: function() {
   var ra = k.genRequestID();
   this.setState({
    addCreditCardRequestID: ra,
    loading: true,
    presetSaveErrorObject: null,
    saveErrors: null
   });
   this.log(u.UI_ACTN_CONFIRM_CARD_DETAILS);
   j.addCreditCard(Object.assign({
    requestID: ra
   }, this.state.formData));
  },
  handleAcceptAddCardSuccess: function(ra) {
   this.updatePresetCreditCard(ra[g.CREDENTIAL_ID]);
   this.log(u.UI_ACTN_ADD_CARD_SUCCESS);
  },
  handleAcceptAddCardError: function(ra) {
   this.setState({
    loading: false,
    saveErrors: ra
   });
   this.log(u.UI_ACTN_ADD_CARD_FAIL, {
    message: ra && ra.general ? ra.general.message : ""
   });
  },
  updatePresetCreditCard: function(ra) {
   var sa = {}, ta = k.genRequestID();
   sa[g.CREDENTIAL_ID] = ra;
   this.setState({
    presetRequestID: ta
   });
   j.updatePresetCreditCard(Object.assign({}, sa, {
    requestID: ta
   }));
  },
  handleUpdatePresetCreditCardSuccess: function(ra) {
   this.setState({
    loading: false,
    editCreditCardDialogShown: false,
    verifyCreditCardDialogShown: false,
    showConfirmation: true,
    passwordNUXPending: ra.passwordProtection === t.NOT_SET
   });
  },
  handleUpdatePresetCreditCardError: function(ra) {
   this.setState({
    loading: false,
    presetSaveErrorObject: ra
   });
  },
  handleValidation: function(ra, sa) {
   this.setState({
    isValid: ra,
    formData: sa
   });
  },
  handleConfirmationOKClick: function() {
   if (this.state.passwordNUXPending) {
    this.setState({
     passwordNUXPending: false,
     passwordProtectionNUXDialogShown: true
    });
   } else this.props.onClose();
  },
  handleCloseButtonClick: function() {
   this.props.onClose();
   this.log(u.UI_ACTN_CANCEL_ADD_CARD);
  },
  handleErrorBackClick: function() {
   this.setState({
    declineErrorObject: null
   });
  },
  handleErrorOKClick: function() {
   this.setState({
    declineErrorObject: null
   });
   this.props.onClose();
  },
  handlePasswordProtectionNUXComplete: function() {
   this.setState({
    passwordProtectionNUXDialogShown: false
   });
   this.props.onClose();
  },
  handleCreditCardSelected: function(ra) {
   this.setState({
    selectedCard: ra
   });
  },
  renderChooseCreditCardForm: function() {
   var ra, sa;
   if (!pa) {
    ra = z.createElement(da, {
     onClick: this.handleCloseButtonClick
    });
   } else sa = z.createElement(aa, {
    use: "default",
    size: "medium",
    label: la._("Cancel"),
    disabled: this.state.loading,
    onClick: this.onBlur
   });
   return z.createElement("div", {
    className: "_2_t"
   }, z.createElement(ea, {
    showCloseButton: false
   }, la._("Add a Debit Card"), ra), z.createElement(fa, {
    className: "_2_u"
   }, z.createElement(ia, {
    type: "primary",
    className: "_2_w"
   }, la._("Link a debit card to send and receive money.")), this.renderPresetError(), z.createElement(l, {
    className: !pa ? "_2pij" : "",
    creditCards: this.props.creditCards,
    onAddDebitCardOptionSelected: this.handleAddDebitCardOptionClicked,
    onChange: this.handleCreditCardSelected,
    ref: "choose_credit_card_form",
    selectedCard: this.state.selectedCard,
    showAddDebitCardOption: true
   })), z.createElement(ga, null, sa, z.createElement(aa, {
    disabled: this.state.loading,
    label: la._("Accept"),
    onClick: this.handleAcceptWithCardButtonClick,
    size: "medium",
    use: "confirm"
   })));
  },
  renderPresetError: function() {
   var ra;
   if (this.state.presetSaveErrorObject) ra = z.createElement(o, {
    error: this.state.presetSaveErrorObject
   });
   return ra;
  },
  renderAcceptMoney: function() {
   var ra = this.props.transfer, sa, ta = z.createElement(aa, {
    disabled: this.state.loading || !this.state.isValid,
    label: la._("Accept"),
    onClick: this.handleAcceptAddCardClick,
    size: "medium",
    use: "confirm"
   }), ua, va;
   if (!pa) {
    va = z.createElement(da, {
     onClick: this.handleCloseButtonClick
    });
   } else ua = z.createElement(aa, {
    use: "default",
    size: "medium",
    label: la._("Cancel"),
    disabled: this.state.loading,
    onClick: this.onBlur
   });
   if (this.props.creditCards.length === 0) {
    sa = z.createElement(ga, {
     leftContent: z.createElement(ia, {
      type: "secondary"
     }, z.createElement(h, {
      href: "#",
      onClick: this.handleNoDebitCardClick
     }, la._("Decline Payment")))
    }, ua, ta);
   } else sa = z.createElement(ga, null, z.createElement(aa, {
    disabled: this.state.loading,
    label: la._("Back"),
    onClick: this.handleAddCardBackButtonClick,
    size: "medium",
    use: "default"
   }), ta);
   return z.createElement("div", {
    className: "_1p_r"
   }, z.createElement(ea, {
    showCloseButton: false
   }, la._("Add a Debit Card"), va), z.createElement(fa, null, z.createElement(ia, {
    type: "primary",
    className: "_3-96"
   }, la._("{sender_name} sent you {currency}{amount}. Add a debit card to accept it.", [ la.param("sender_name", ra.sender.name), la.param("currency", ra.currency), la.param("amount", ra.amount) ])), z.createElement("div", {
    className: "_1p_w"
   }, this.renderPresetError(), z.createElement(i, {
    onValidation: this.handleValidation,
    saveErrors: this.state.saveErrors
   })), z.createElement(ia, {
    id: oa,
    type: "secondary"
   }, la._("Your payment info is stored securely. {Link to P2P learn more page.}", [ la.param("Link to P2P learn more page.", z.createElement(h, {
    "aria-describedby": oa,
    href: p.addDebitCardHelpURI,
    target: "_blank"
   }, la._("Learn more."))) ]))), sa);
  },
  renderDeclineConfirmation: function() {
   var ra = this.props.transfer, sa;
   if (!pa) sa = z.createElement(da, {
    onClick: this.handleCloseButtonClick
   });
   return z.createElement("div", {
    className: "_301"
   }, z.createElement(ea, {
    showCloseButton: false
   }, la._("Decline Payment?"), sa), z.createElement(fa, null, z.createElement(ia, {
    type: "primary"
   }, la._("Declining this payment will send the money back to {friendName}.", [ la.param("friendName", ra.sender.name) ]))), z.createElement(ga, null, z.createElement(aa, {
    disabled: this.state.loading,
    label: la._("Back"),
    onClick: this.handleDeclineCardBackButtonClick,
    size: "medium",
    use: "default"
   }), z.createElement(aa, {
    disabled: this.state.loading,
    label: la._("Decline"),
    onClick: this.handleDeclineCardSubmitButtonClick,
    size: "medium",
    use: "default"
   })));
  },
  render: function() {
   var ra, sa = pa ? 350 : 300;
   if (this.state.verifyCreditCardDialogShown) {
    return z.createElement(y, {
     creditCard: this.state.selectedCard,
     asyncRequestState: this.props.asyncRequestState,
     isSending: false,
     onCancel: this.onVerifyCreditCardCancel,
     onSuccess: this.onVerifyCreditCardSuccess
    });
   } else if (this.state.editCreditCardDialogShown) {
    return z.createElement(ca, {
     asyncRequestState: this.props.asyncRequestState,
     creditCard: this.state.selectedCard,
     onCancel: this.onEditCreditCardCancel,
     onSuccess: this.onEditCreditCardSuccess
    });
   } else if (this.state.declineErrorObject) {
    return z.createElement(n, {
     ref: "decline_error",
     allowBack: true,
     onBackClick: this.handleErrorBackClick,
     onOKClick: this.handleErrorOKClick,
     error: this.state.declineErrorObject,
     title: la._("Problem Declining")
    });
   } else if (this.state.passwordProtectionNUXDialogShown) {
    return z.createElement(s, {
     onComplete: this.handlePasswordProtectionNUXComplete
    });
   } else if (this.state.showConfirmation) return z.createElement(w, {
    onOKClick: this.handleConfirmationOKClick,
    title: la._("Payment Received")
   }, z.createElement(ia, {
    type: "primary"
   }, la._("Money you receive from now on will automatically go on this card. You can update your card in {Link with text that goes to settings page}.", [ la.param("Link with text that goes to settings page", z.createElement(h, {
    target: "_blank",
    href: p.settingsWWWURI
   }, la._("Payments Settings"))) ])));
   if (this.state.showDeclineConfirmation) {
    ra = this.renderDeclineConfirmation();
   } else if (this.state.showChooseCreditCardForm) {
    ra = this.renderChooseCreditCardForm();
   } else ra = this.renderAcceptMoney();
   return z.createElement(ba, {
    className: "_309" + (pa ? " " + "_5ktw" : ""),
    layerHideOnBlur: false,
    ref: "dialog",
    repositionOnUpdate: true,
    shown: true,
    width: sa
   }, ra, z.createElement(q, {
    ref: "send_money_dialog_loader",
    visible: this.state.loading
   }));
  }
 });
 e.exports = qa;
}, null);

__d("P2PCreditCardStore", [ "P2PActionConstants", "CreditCardFormParam", "EventEmitter", "ImmutableObject", "P2PAPI", "P2PCreditCard", "P2PDispatcher" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var n, o, p, q, r;
 function s(x, y) {
  if (x) r[x] = new j(y);
 }
 function t(x, y) {
  if (x) r[x] = {
   error: y
  };
 }
 for (var u in i) if (i.hasOwnProperty(u)) w[u] = i[u];
 var v = i === null ? null : i.prototype;
 w.prototype = Object.create(v);
 w.prototype.constructor = w;
 w.__superConstructor__ = i;
 function w() {
  i.call(this);
  p = false;
  q = false;
  n = [];
  r = {};
  o = m.register(this.onEventDispatched.bind(this));
 }
 w.prototype.onEventDispatched = function(x) {
  var y = x.data, z = x.type;
  switch (z) {
  case g.CREDIT_CARDS_UPDATED:
   this.handleCreditCardsUpdated(y);
   this.emit("change");
   break;

  case g.CREDIT_CARD_ADDED:
   this.handleCreditCardAdded(y);
   this.emit("change");
   break;

  case g.CREDIT_CARD_ADDED_ERROR:
   this.handleCreditCardAddedError(y);
   this.emit("change");
   break;

  case g.CREDIT_CARD_DELETED:
   this.handleCreditCardDeleted(y);
   this.emit("change");
   break;

  case g.CREDIT_CARD_DELETED_ERROR:
   this.handleCreditCardDeletedError(y);
   this.emit("change");
   break;

  case g.CREDIT_CARD_UPDATED:
   this.handleCreditCardUpdated(y);
   this.emit("change");
   break;

  case g.CREDIT_CARD_UPDATED_ERROR:
   this.handleCreditCardUpdatedError(y);
   this.emit("change");
   break;

  case g.PRESET_CREDIT_CARD_UPDATED:
   this.handlePresetCreditCardUpdated(y);
   this.emit("change");
   break;

  case g.PRESET_CREDIT_CARD_UPDATED_ERROR:
   this.handlePresetCreditCardUpdatedError(y);
   this.emit("change");
   break;

  case g.CREDIT_CARD_VERIFIED:
   this.handleCreditCardVerified(y);
   this.emit("change");
   break;

  case g.CREDIT_CARD_VERIFIED_ERROR:
   this.handleCreditCardVerifiedError(y);
   this.emit("change");
   break;
  }
 };
 w.prototype.getAsyncRequestState = function() {
  return r;
 };
 w.prototype.isCreditCardsFetchComplete = function() {
  return p;
 };
 w.prototype.handleCreditCardsUpdated = function(x) {
  p = true;
  n = x.map(function(y) {
   return new l(y);
  });
 };
 w.prototype.handleCreditCardAdded = function(x) {
  var y = false;
  s(x.requestID, x);
  n.forEach(function(z) {
   if (z.getCredentialId() === x[h.CREDENTIAL_ID]) y = true;
  });
  if (y) return;
  n.push(new l(x));
 };
 w.prototype.handleCreditCardAddedError = function(x) {
  t(x.requestID, x.errors);
 };
 w.prototype.handleCreditCardDeleted = function(x) {
  var y = x[h.CARD_FBID];
  s(x.requestID, x);
  n = n.filter(function(z) {
   return z.getCredentialId() !== y;
  });
 };
 w.prototype.handleCreditCardDeletedError = function(x) {
  t(x.requestID, x.error);
 };
 w.prototype.handleCreditCardUpdated = function(x) {
  s(x.requestID, x);
  n.forEach(function(y, z) {
   if (y.getCredentialId() === x[h.CREDENTIAL_ID]) {
    y.setExp(x[h.CARD_EXPIRATION]);
    y.setZipCode(x[h.ZIP]);
   }
  });
 };
 w.prototype.handleCreditCardUpdatedError = function(x) {
  t(x.requestID, x.errors);
 };
 w.prototype.handlePresetCreditCardUpdated = function(x) {
  var y = x[h.CARD_FBID];
  s(x.requestID, x);
  var z = n.filter(function(ba) {
   return ba.getIsPreset();
  })[0];
  if (z) z.setIsPreset(false);
  var aa = n.filter(function(ba) {
   return ba.getCredentialId() === y;
  })[0];
  if (aa) aa.setIsPreset(true);
 };
 w.prototype.handlePresetCreditCardUpdatedError = function(x) {
  t(x.requestID, x.error);
 };
 w.prototype.handleCreditCardVerified = function(x) {
  s(x.requestID, x);
  n.forEach(function(y, z) {
   if (y.getCredentialId() === x[h.CREDENTIAL_ID]) y.setIsVerified(true);
  });
 };
 w.prototype.handleCreditCardVerifiedError = function(x) {
  t(x.requestID, x.error);
 };
 w.prototype.getAll = function() {
  if (!q) {
   q = true;
   k.getAllCreditCards();
  }
  return n;
 };
 w.prototype.getAllSettingsEligible = function() {
  var x = this.getAll();
  return x.filter(function(y) {
   return y.getIsVerified() || y.getIsMobileVerified();
  });
 };
 w.prototype.getPresetCard = function() {
  var x = this.getAll();
  return x.filter(function(y) {
   return y.getIsPreset();
  })[0];
 };
 e.exports = new w();
}, null);

__d("P2PNUXRendererUtils", [ "MercuryConstants", "CurrentUser", "ImmutableObject", "MercuryAttachmentType", "P2PTransferParam", "P2PTransferStatus", "StoryAttachmentStyle" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var n = g.MercurySupportedShareType, o = {
  getTransferFromMessage: function(p) {
   var q, r;
   if (!p || !p.attachments || !p.attachments.length) return;
   r = p.attachments[0];
   if (this.isShareAttachment(r)) {
    q = r.share.target;
   } else if (r.share_data_type === n.FB_ORION) q = r.metadata;
   if (q) q = new i(q);
   return q;
  },
  isShareAttachment: function(p) {
   return !!(typeof p !== "string" && p.attach_type == j.SHARE && p.share && p.share.style_list && p.share.style_list.indexOf(m.ORION) >= 0);
  },
  doesNUXNeedCreditCards: function(p) {
   var q = h.getID() === p.sender.id;
   return !q && p[k.STATUS] === l.PENDING_RECIPIENT_NUX;
  },
  isRecipientActionableStatus: function(p) {
   var q = p[k.STATUS], r = h.getID() === p.sender.id;
   return !r && (q === l.PENDING_RECIPIENT_NUX || q === l.PENDING_RECIPIENT_VERIFICATION || q === l.PENDING_PUSH_FAIL);
  }
 };
 e.exports = o;
}, null);

__d("P2PTransferStore", [ "Arbiter", "P2PActionConstants", "ChannelConstants", "CreditCardFormParam", "EventEmitter", "ImmutableObject", "P2PActions", "P2PAPI", "P2PChannelType", "P2PCreditCard", "P2PDispatcher", "P2PNUXRendererUtils", "P2PTransferParam", "P2PTransferStatus", "MercuryThreadInformer" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var u = b("MercuryThreadInformer").get(), v, w, x, y, z, aa, ba, ca, da, ea = null, fa = false;
 function ga(la, ma) {
  if (la) da[la] = new l(ma);
 }
 function ha(la, ma) {
  if (la) da[la] = {
   error: ma
  };
 }
 for (var ia in k) if (k.hasOwnProperty(ia)) ka[ia] = k[ia];
 var ja = k === null ? null : k.prototype;
 ka.prototype = Object.create(ja);
 ka.prototype.constructor = ka;
 ka.__superConstructor__ = k;
 function ka() {
  k.call(this);
  v = false;
  x = [];
  da = {};
  z = g.subscribe(i.getArbiterType(o.TRANSFER_STATUS_CHANGED), this.handleChannelTransferStatusChanged.bind(this));
  aa = u.subscribe("messages-received", this.handleMessageReceived.bind(this));
  ba = u.subscribe("messages-updated", this.handleMessageUpdated.bind(this));
  y = q.register(this.onEventDispatched.bind(this));
 }
 ka.prototype.onEventDispatched = function(la) {
  var ma = la.data, na = la.type;
  switch (na) {
  case h.TRANSFERS_UPDATED:
   this.handleTransfersUpdated(ma);
   this.emit("change");
   break;

  case h.TRANSFERS_UPDATED_ERROR:
   this.handleTransfersUpdatedError(ma);
   this.emit("change");
   break;

  case h.NUX_TRANSFERS_UPDATED:
   this.handleNUXTransfersUpdated(ma);
   this.emit("change");
   break;

  case h.TRANSFER_ADDED:
   this.handleTransferAdded(ma);
   this.emit("change");
   break;

  case h.TRANSFER_UPDATED:
   this.handleTransferUpdated(ma);
   this.emit("change");
   break;

  case h.TRANSFER_ACCEPTED:
   this.handleTransferAccepted();
   this.emit("change");
   break;

  case h.TRANSFER_DECLINED:
   this.handleTransferDeclined(ma);
   this.emit("change");
   break;
  }
 };
 ka.prototype.getAsyncRequestState = function() {
  return da;
 };
 ka.prototype.handleTransfersUpdated = function(la) {
  ca = null;
  fa = true;
  x = la.map(function(ma) {
   var na = {};
   if (ma.creditCard) {
    na[j.CREDENTIAL_ID] = ma.creditCard[j.CREDENTIAL_ID];
    na[j.CARD_NUMBER] = ma.creditCard[j.CARD_NUMBER];
    na[j.CARD_TYPE] = ma.creditCard[j.CARD_TYPE];
    ma.creditCard = new p(na);
   }
   return new l(ma);
  });
 };
 ka.prototype.handleTransfersUpdatedError = function(la) {
  ca = la.error;
  ha(la.requestID, la.error);
 };
 ka.prototype.handleNUXTransfersUpdated = function(la) {
  if (!fa) this.handleTransfersUpdated(la);
 };
 ka.prototype.handleTransferAdded = function(la) {
  var ma = null;
  ga(la.requestID, la);
  ma = x.filter(function(na) {
   return na[s.TRANSFER_ID] === la[s.TRANSFER_ID];
  })[0];
  if (ma) return;
  x.push(new l(la));
  x = x.sort(function(na, oa) {
   return oa.creationTime - na.creationTime;
  });
 };
 ka.prototype.handleTransferAddedError = function(la) {
  ha(la.requestID, la.errors);
 };
 ka.prototype.handleChannelTransferStatusChanged = function(la, ma) {
  ma = ma.obj;
  m.transferUpdated(ma);
 };
 ka.prototype.getPendingMessageAttachment = function() {
  return ea;
 };
 ka.prototype.handleMessageReceived = function(la, ma) {
  for (var na in ma) if (ma.hasOwnProperty(na)) {
   var oa = ma[na];
   for (var pa = 0; pa < oa.length; pa++) if (oa[pa].attachments && oa[pa].attachments.length) {
    ea = oa[pa];
    return;
   }
  }
 };
 ka.prototype.handleMessageUpdated = function(la, ma) {
  if (!ea) return;
  for (var na in ma) if (ma.hasOwnProperty(na)) {
   var oa = ma[na];
   for (var pa in oa) if (oa.hasOwnProperty(pa) && ea.message_id === pa) {
    var qa = r.getTransferFromMessage(ea);
    if (qa) {
     m.transferAdded(qa);
     ea = null;
     return;
    }
   }
  }
 };
 ka.prototype.handleTransferUpdated = function(la) {
  for (var ma = 0, na = x.length; ma < na; ma++) if (x[ma][s.TRANSFER_ID] === la[s.TRANSFER_ID]) x[ma] = l.set(x[ma], la);
 };
 ka.prototype.handleTransferAccepted = function() {
  var la;
  for (var ma = 0, na = x.length; ma < na; ma++) if (x[ma][s.STATUS] === t.PENDING_RECIPIENT_NUX) {
   la = {};
   la[s.STATUS] = t.COMPLETED;
   x[ma] = l.set(x[ma], la);
  }
 };
 ka.prototype.handleTransferDeclined = function(la) {
  var ma;
  for (var na = 0, oa = x.length; na < oa; na++) if (x[na][s.TRANSFER_ID] === la[s.TRANSFER_ID] && x[na][s.STATUS] === t.PENDING_RECIPIENT_NUX) {
   ma = {};
   ma[s.STATUS] = t.CANCELED_DECLINED;
   x[na] = l.set(x[na], ma);
   break;
  }
 };
 ka.prototype.handleTransferUpdatedError = function(la) {
  ha(la.requestID, la.errors);
 };
 ka.prototype.getTransferByID = function(la) {
  return x.filter(function(ma) {
   return la === ma[s.TRANSFER_ID];
  })[0];
 };
 ka.prototype.getAll = function(la) {
  if (!v) {
   v = true;
   n.getTransactions(la);
  }
  return x;
 };
 ka.prototype.getNUXTransfer = function() {
  var la = x.filter(function(ma) {
   return r.isRecipientActionableStatus(ma);
  })[0];
  if (!la && !w && !v) {
   w = true;
   n.getNUXTransactions();
  }
  return la;
 };
 ka.prototype.hasTransfers = function() {
  return x.length > 0;
 };
 ka.prototype.hasReceivedFromSender = function(la) {
  for (var ma = 0, na = x.length; ma < na; ma++) if (x[ma].sender.id === la) return true;
  return false;
 };
 ka.prototype.getTransferFetchError = function() {
  return ca;
 };
 e.exports = new ka();
}, null);

__d("P2PVerificationFlowHelper", [ "AsyncDialog", "AsyncRequest", "P2PAPI", "P2PTransferParam", "emptyFunction" ], function(a, b, c, d, e, f, g, h, i, j, k) {
 b.__markCompiled && b.__markCompiled();
 var l = null, m = null, n = null, o = {
  startVerificationFlow: function(p, q, r) {
   l = p;
   m = q;
   n = r || k;
   g.send(new h("/p2p/verify/dialog/?id=" + p));
  },
  setupFlowExitHandler: function(p, q, r, s) {
   var t = function(w) {
    n(w);
    l = null;
    m = null;
    n = null;
    p.destroy();
    q.destroy();
   };
   if (r) {
    p.subscribe("hide", function() {
     t(s);
    });
   } else {
    var u = false, v = false;
    p.subscribe("confirm", function() {
     u = true;
    });
    p.subscribe("hide", function() {
     if (u) {
      p.destroy();
      q.destroy();
     } else if (m) {
      q.show();
     } else t(false);
    });
    q.subscribe("confirm", function() {
     v = true;
     var w = {};
     w[j.TRANSFER_ID] = l;
     i.cancelTransaction({
      formData: w
     });
     t(false);
    });
    q.subscribe("hide", function() {
     if (!v) p.show();
    });
   }
  }
 };
 e.exports = o;
}, null);

__d("P2PNUXRenderer.react", [ "Image.react", "Layout.react", "Link.react", "P2PAcceptMoneyDialog.react", "P2PCreditCardStore", "P2PLinkConstants", "P2PNUXRendererUtils", "P2PTransferStatus", "P2PTransferParam", "P2PTransferStore", "P2PVerificationFlowHelper", "React", "ReactLayeredComponentMixin", "XUIButton.react", "XUIGrayText.react", "XUINotice.react", "cx", "emptyFunction", "fbt", "ix" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var aa = h.FillColumn, ba = h.Column, ca = r, da = ca.PropTypes, ea = r.createClass({
  displayName: "P2PNUXRenderer",
  mixins: [ s ],
  propTypes: {
   onImageLoad: da.func,
   type: da.oneOf([ "jewel", "settingsNUX", "settingsReceiverRisk", "settingsPushFail" ]).isRequired
  },
  getDefaultProps: function() {
   return {
    onImageLoad: x
   };
  },
  getInitialState: function() {
   var fa = {
    creditCardAsyncRequestState: {},
    creditCards: [],
    acceptMoneyDialogShown: false,
    transfer: p.getNUXTransfer()
   };
   if (fa.transfer && m.doesNUXNeedCreditCards(fa.transfer)) fa.creditCardAsyncRequestState = k.getAsyncRequestState(), 
   fa.creditCards = k.getAll();
   return fa;
  },
  onCreditCardStoreChange: function() {
   this.setState({
    creditCardAsyncRequestState: k.getAsyncRequestState(),
    creditCards: k.getAll()
   });
  },
  onTransferStoreChange: function() {
   var fa = {
    transfer: p.getNUXTransfer()
   };
   if (fa.transfer && m.doesNUXNeedCreditCards(fa.transfer)) fa.creditCardAsyncRequestState = k.getAsyncRequestState(), 
   fa.creditCards = k.getAll();
   this.setState(fa, function() {
    this.props.onImageLoad(r.findDOMNode(this));
   }.bind(this));
  },
  componentDidMount: function() {
   this.creditCardStoreSub = k.addListener("change", this.onCreditCardStoreChange);
   this.transferStoreSub = p.addListener("change", this.onTransferStoreChange);
  },
  componentWillUnmount: function() {
   this.unsubscribeAll();
  },
  unsubscribeAll: function() {
   this.unsubscribeCreditCardStoreEvent();
   this.unsubscribeTransferStoreEvent();
  },
  unsubscribeCreditCardStoreEvent: function() {
   if (this.creditCardStoreSub) {
    this.creditCardStoreSub.remove();
    this.creditCardStoreSub = null;
   }
  },
  unsubscribeTransferStoreEvent: function() {
   if (this.transferStoreSub) {
    this.transferStoreSub.remove();
    this.transferStoreSub = null;
   }
  },
  handleAcceptMoneyDialogClose: function() {
   this.setState({
    acceptMoneyDialogShown: false
   });
  },
  handleGetStartedClick: function() {
   this.setState({
    acceptMoneyDialogShown: true
   });
  },
  handleGoToConfirmClicked: function() {
   q.startVerificationFlow(this.state.transfer[o.TRANSFER_ID], false);
  },
  render: function() {
   var fa, ga = this.state.transfer, ha;
   if (ga && m.doesNUXNeedCreditCards(ga) && !k.isCreditCardsFetchComplete()) {
    ha = false;
   } else if (ga) {
    ha = true;
    fa = ga[o.STATUS];
   }
   if (this.props.type === "jewel") {
    return r.createElement("div", {
     className: "_3kw_"
    }, ha ? this.renderJewel() : null);
   } else if (this.props.type === "settingsReceiverRisk") {
    return r.createElement("div", {
     className: "_cu5"
    }, ha && fa === n.PENDING_RECIPIENT_VERIFICATION ? this.renderSettingsReceiverRisk() : null);
   } else if (this.props.type === "settingsNUX") {
    return r.createElement("div", {
     className: "_4z2f"
    }, ha && fa === n.PENDING_RECIPIENT_NUX ? this.renderSettingsNUX() : null);
   } else if (this.props.type === "settingsPushFail") return r.createElement("div", {
    className: "_4b82"
   }, ha && fa === n.PENDING_PUSH_FAIL ? this.renderSettingsPushFail() : null);
  },
  renderJewel: function() {
   var fa;
   fa = this.state.transfer[o.STATUS];
   if (fa === n.PENDING_RECIPIENT_VERIFICATION) {
    return this.renderJewelRisk();
   } else if (fa === n.PENDING_RECIPIENT_NUX) {
    return this.renderJewelNUX();
   } else if (fa === n.PENDING_PUSH_FAIL) return this.renderJewelPushFail();
  },
  renderJewelRisk: function() {
   return r.createElement("div", {
    className: "_3kxg",
    onClick: this.handleGoToConfirmClicked
   }, r.createElement(h, null, r.createElement(ba, {
    className: "_3kxh"
   }, r.createElement(g, {
    className: "_547r",
    height: 28,
    src: z("/images/p2p/receiver-risk-notification.png"),
    width: 28
   })), r.createElement(aa, {
    className: "_2pic"
   }, r.createElement(u, {
    display: "block",
    shade: "medium",
    weight: "bold"
   }, y._("Please Confirm Your Info")), r.createElement(u, {
    display: "block",
    shade: "medium"
   }, y._("To accept the money {sender_name} sent you, please confirm your information.", [ y.param("sender_name", this.state.transfer.sender.name) ])), r.createElement(u, {
    className: "_3kxj",
    display: "block"
   }, y._("Confirm Info")))));
  },
  renderJewelPushFail: function() {
   return r.createElement("div", {
    className: "_3kxg"
   }, r.createElement(h, null, r.createElement(ba, {
    className: "_3kxh"
   }, r.createElement(g, {
    className: "_547r",
    height: 28,
    src: z("/images/p2p/receiver-risk-notification.png"),
    width: 28
   })), r.createElement(aa, {
    className: "_2pic"
   }, r.createElement(u, {
    display: "block",
    shade: "medium",
    weight: "bold"
   }, y._("Update Your Card")), r.createElement(u, {
    display: "block",
    shade: "medium"
   }, y._("It looks like your card is expired or invalid. Please update it to get {currency}{amount} from {sender_name}.", [ y.param("currency", this.state.transfer.currency), y.param("amount", this.state.transfer.amount), y.param("sender_name", this.state.transfer.sender.name) ])), r.createElement(i, {
    href: l.settingsWWWURI,
    target: "_blank"
   }, r.createElement(u, {
    className: "_3kxj",
    display: "block"
   }, y._("Update Card"))))));
  },
  renderJewelNUX: function() {
   return r.createElement("div", {
    className: "_3kxg",
    onClick: this.handleGetStartedClick
   }, r.createElement(h, null, r.createElement(ba, {
    className: "_3kxh"
   }, r.createElement(g, {
    className: "_547r",
    height: 28,
    src: z("/images/p2p/receiver-nux-notification.png"),
    width: 28
   })), r.createElement(aa, {
    className: "_2pic"
   }, r.createElement(u, {
    display: "block",
    shade: "medium",
    weight: "bold"
   }, y._("Accept {currency}{amount} from {sender_name}", [ y.param("currency", this.state.transfer.currency), y.param("amount", this.state.transfer.amount), y.param("sender_name", this.state.transfer.sender.name) ])), r.createElement(u, {
    display: "block",
    shade: "medium"
   }, this.getTimeBasedNUXMessageBody()), r.createElement(u, {
    className: "_3kxj",
    display: "block"
   }, y._("Add Card")))));
  },
  renderSettingsReceiverRisk: function() {
   return r.createElement("div", {
    className: "_cu8"
   }, r.createElement(v, {
    use: "warn"
   }, r.createElement(u, {
    className: "_3-95",
    display: "block",
    shade: "medium"
   }, y._("To accept the money {sender_name} sent you, please confirm your information.", [ y.param("sender_name", this.state.transfer.sender.name) ])), r.createElement(t, {
    label: y._("Confirm Info"),
    onClick: this.handleGoToConfirmClicked
   })));
  },
  renderSettingsPushFail: function() {
   return r.createElement("div", {
    className: "_cu8"
   }, r.createElement(v, {
    use: "warn"
   }, r.createElement(u, {
    className: "_3-95",
    display: "block",
    shade: "medium"
   }, y._("It looks like your card is expired or invalid. Please update it to get {currency}{amount} from {sender_name}.", [ y.param("currency", this.state.transfer.currency), y.param("amount", this.state.transfer.amount), y.param("sender_name", this.state.transfer.sender.name) ]))));
  },
  renderSettingsNUX: function() {
   return r.createElement("div", {
    className: "_4z2g"
   }, r.createElement("div", {
    className: "_4z2h"
   }, r.createElement(u, {
    className: "_3-95 _2pi7",
    display: "block",
    shade: "light"
   }, r.createElement("div", {
    className: "_3-94"
   }, y._("{sender_name} sent you {currency}{amount}", [ y.param("sender_name", this.state.transfer.sender.name), y.param("currency", this.state.transfer.currency), y.param("amount", this.state.transfer.amount) ])), r.createElement("div", {
    className: "_3-95"
   }, this.getTimeBasedNUXMessageBody())), r.createElement(t, {
    label: y._("Add Card"),
    onClick: this.handleGetStartedClick,
    use: "confirm"
   })));
  },
  getTimeBasedNUXMessageBody: function() {
   var fa = this.state.transfer.creationTime * 1e3, ga = 1e3 * 60 * 60 * 24, ha = Date.now(), ia = (ha - fa) / ga, ja = Math.max(14 - Math.floor(ia), 1);
   if (ia <= 5) {
    if (this.props.type === "settingsNUX") {
     return y._("Add a debit card to accept it.");
    } else return y._("Add a debit card and it'll go straight to your bank.");
   } else if (ia <= 11) {
    return y._("This money will be sent back in {days left} days. Add a debit card to accept it.", [ y.param("days left", ja) ]);
   } else return y._({
    day: "You have {days left} day to add a debit card before the money is sent back to {sender_name}.",
    days: "You have {days left} days to add a debit card before the money is sent back to {sender_name}."
   }, [ y.param("days left", ja), y["enum"](ja === 1 ? "day" : "days", {
    day: "day",
    days: "days"
   }), y.param("sender_name", this.state.transfer.sender.name) ]);
  },
  renderLayers: function() {
   var fa = {};
   if (this.state.acceptMoneyDialogShown) fa.acceptDialog = r.createElement(j, {
    asyncRequestState: this.state.creditCardAsyncRequestState,
    creditCards: this.state.creditCards,
    onClose: this.handleAcceptMoneyDialogClose,
    transfer: this.state.transfer
   });
   return fa;
  }
 });
 e.exports = ea;
}, null);

__d("MercuryThreadlistContainer.react", [ "Bootloader", "immutable", "MercuryAPIArgsSource", "MercuryThreadlistConstants", "P2PNUXRenderer.react", "React", "SubscriptionsHandler" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var n = l, o = n.PropTypes, p = "search", q = l.createClass({
  displayName: "MercuryThreadlistContainer",
  propTypes: {
   ChildClass: o.func.isRequired,
   viewer: o.string.isRequired,
   folder: o.string.isRequired
  },
  getInitialState: function() {
   return {
    isLoading: true,
    isSearching: false,
    threads: h.Map()
   };
  },
  componentDidMount: function() {
   g.loadModules([ "MercuryOrderedThreadlist", "MercuryThreadInformer", "MercuryThreads" ], function(r, s, t) {
    this._threadlist = r.getForFBID(this.props.viewer);
    this._threads = t.getForFBID(this.props.viewer);
    this._informer = s.getForFBID(this.props.viewer);
    this._subscriptions = new m();
    this._subscriptions.addSubscriptions(this._informer.subscribe("threadlist-updated", function(u, v) {
     this._updateThreads(this.props.folder);
    }.bind(this)));
    this._handleFolderChange(this.props.folder);
   }.bind(this));
  },
  componentWillReceiveProps: function(r) {
   if (r.folder !== this.props.folder) this._handleFolderChange(r.folder);
  },
  componentWillUnmount: function() {
   this._cancelThreadsCallback();
   this._cancelThreadlistCallback();
   this._subscriptions && this._subscriptions.release();
  },
  render: function() {
   var r = this.props, s = r.ChildClass, t = r.folder, u = function(w, x) {
    var y = {}, z = Object.prototype.hasOwnProperty;
    if (w == null) throw new TypeError();
    for (var aa in w) if (z.call(w, aa) && !z.call(x, aa)) y[aa] = w[aa];
    return y;
   }(r, {
    ChildClass: 1,
    folder: 1
   }), v = this.state.isSearching ? this.state.threads.get(p) || [] : this.state.threads.get(t) || [];
   return l.createElement(s, l.__spread({}, u, {
    isLoaded: !!this._threadlist && this._threadlist.hasLoadedThreadlist(t),
    isLoading: this.state.isLoading,
    isSearching: this.state.isSearching,
    onLoadMoreRequest: this._loadMoreThreads,
    onQuery: this._handleQuery,
    onSearchResults: this._handleSearchResults,
    p2pNUX: this._renderP2PNUX(),
    threads: v
   }));
  },
  _renderP2PNUX: function() {
   return l.createElement(k, {
    type: "jewel"
   });
  },
  _handleFolderChange: function(r) {
   if (!this._hasInitialThreads(r)) {
    this._loadThreads(r, j.JEWEL_THREAD_COUNT + 1);
   } else if (this.state.isLoading) {
    this.setState({
     isLoading: false
    }, function() {
     this._updateThreads(r);
    }.bind(this));
   } else this._updateThreads(r);
  },
  _loadMoreThreads: function() {
   if (!this.state.isSearching && !this.state.isLoading && !this._threadlist.hasLoadedThreadlist(this.props.folder)) this._loadThreads(this.props.folder, this._getThreadCount(this.props.folder) + j.JEWEL_MORE_COUNT + 1);
  },
  _loadThreads: function(r, s) {
   if (!this._threadlist) return;
   this._cancelThreadlistCallback();
   this.setState({
    isLoading: true
   }, function() {
    var t = this._threadlist.getThreadlist(j.RECENT_THREAD_OFFSET, s, r, function(u) {
     return this.setState({
      isLoading: false
     });
    }.bind(this), true, i.JEWEL);
    this._threadlistSub = {
     subscriberID: t,
     folder: r
    };
   }.bind(this));
  },
  _updateThreads: function(r, s) {
   if (!this._threadlist || !this._threads) return;
   this._cancelThreadsCallback();
   var t = s || this._threadlist.getAvailableThreadlistNow(r);
   this._threadsSub = this._threads.getMultiThreadMeta(t, function(u) {
    this.setState({
     threads: this.state.threads.set(r, t.map(function(v) {
      return u[v];
     }))
    });
   }.bind(this));
  },
  _hasInitialThreads: function(r) {
   return !!(this._threadlist && (this._threadlist.getThreadCount(r) >= j.JEWEL_THREAD_COUNT + 1 || this._threadlist.hasLoadedThreadlist(r)));
  },
  _getThreadCount: function(r) {
   var s = this.state.threads.get(r);
   return s ? s.length : 0;
  },
  _cancelThreadsCallback: function() {
   this._threads && this._threadsSub && this._threads.unsubscribe(this._threadsSub);
  },
  _cancelThreadlistCallback: function() {
   this._threadlist && this._threadlistSub && this._threadlist.unsubscribe(this._threadlistSub.subscriberID, this._threadlistSub.folder);
  },
  _handleSearchResults: function(r, s) {
   this.setState({
    isLoading: s,
    searchThreads: []
   }, function() {
    return this._updateThreads(p, r);
   }.bind(this));
  },
  _handleQuery: function(r) {
   this.setState({
    isSearching: !!r
   });
  }
 });
 e.exports = q;
}, null);

__d("MercuryThreadlistRowContainer.react", [ "immutable", "ImmutableObject", "MercuryParticipants", "React", "StoreAndPropBasedStateMixin", "shallowEqual" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var m = j, n = m.PropTypes, o = j.createClass({
  displayName: "MercuryThreadlistRowContainer",
  mixins: [ k(i) ],
  propTypes: {
   ChildClass: n.func.isRequired,
   thread: n.instanceOf(h).isRequired,
   viewer: n.string.isRequired
  },
  statics: {
   calculateState: function(p) {
    return {
     participants: g.Map(g.Seq(p.thread.participants).map(function(q) {
      return [ q, i.getOrFetch(q) ];
     }))
    };
   }
  },
  shouldComponentUpdate: function(p, q) {
   return !l(p, this.props) || !g.is(q.participants, this.state.participants);
  },
  render: function() {
   var p = this.props, q = p.ChildClass, r = function(s, t) {
    var u = {}, v = Object.prototype.hasOwnProperty;
    if (s == null) throw new TypeError();
    for (var w in s) if (v.call(s, w) && !v.call(t, w)) u[w] = s[w];
    return u;
   }(p, {
    ChildClass: 1
   });
   return j.createElement(q, j.__spread({}, r, {
    participants: this.state.participants
   }));
  }
 });
 e.exports = o;
}, null);

__d("MercuryShareImage.react", [ "ChatImageWithArrow.react", "React", "cx" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var j = h.createClass({
  displayName: "MercuryShareImage",
  render: function() {
   return h.createElement(g, {
    arrowDirection: "BOTH",
    arrowClassName: "_2lg_",
    height: this.props.height,
    source: this.props.source,
    width: this.props.width
   });
  }
 });
 e.exports = j;
}, null);

__d("MercuryFallbackShareAttachment.react", [ "Image.react", "ImageBlock.react", "Link.react", "MercuryShareAttachmentRenderLocations", "MercuryShareAttachmentReactShape", "MercuryShareImage.react", "MessengerAttachmentImageBlock.react", "React", "cx", "joinClasses" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var q = n, r = q.PropTypes, s = 72, t = n.createClass({
  displayName: "MercuryFallbackShareAttachment",
  propTypes: {
   attachment: k,
   location: r.oneOf(j.getValues()),
   rootClassName: r.string
  },
  renderLink: function(u) {
   if (j.isPreview(location)) return u;
   return n.createElement(i, {
    className: "_5rw4",
    href: this.props.attachment.uri,
    target: "_blank"
   }, u);
  },
  render: function() {
   var u = this.props.attachment, v = this.props.location, w = p((j.CHAT === v ? "_49or" : "") + (j.WEB_INBOX === v ? " " + "__nm" : "") + (j.CHAT_PREVIEW === v ? " " + "_324d" : "") + (j.CHAT !== v ? " " + "_tih" : "") + (!(u && u.media.image) ? " " + "_49ou" : ""), this.props.rootClassName), x = n.createElement("div", {
    className: "__6j"
   }, n.createElement("div", {
    className: "__6k"
   }, u.title), n.createElement("div", {
    className: "__6l"
   }, u.description), n.createElement("div", {
    className: "__6m"
   }, u.source));
   if (u.media && u.media.image) {
    if (j.CHAT === v || j.CHAT_PREVIEW === v) {
     return this.renderLink(n.createElement(h, {
      className: w,
      spacing: "medium"
     }, n.createElement(l, {
      height: s,
      source: u.media.image,
      width: s
     }), n.createElement("div", {
      style: {
       display: "flex",
       justifyContent: "center",
       flexDirection: "column",
       height: s
      }
     }, x)));
    } else if (j.MESSENGER === v) return this.renderLink(n.createElement(m, {
     className: w,
     attachment: u
    }, x, this.props.children));
    return this.renderLink(n.createElement(h, {
     className: p(this.props.className, w)
    }, n.createElement(g, {
     className: "__6n",
     src: u.media.image,
     width: s
    }), x, this.props.children));
   }
   return this.renderLink(n.createElement("div", {
    className: p(this.props.className, w)
   }, x, this.props.children));
  }
 });
 e.exports = t;
}, null);

__d("P2PMercuryAttachment.react", [ "CurrentUser", "Image.react", "Link.react", "P2PAcceptMoneyDialog.react", "P2PActions", "P2PButton.react", "P2PCreditCardStore", "P2PLinkConstants", "P2PQEValues", "P2PNUXRendererUtils", "P2PTransferParam", "P2PTransferStatus", "P2PTransferStore", "P2PVerificationFlowHelper", "React", "ReactLayeredComponentMixin", "cx", "formatDate", "fbt", "ix" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var aa = u, ba = aa.PropTypes, ca = u.createClass({
  displayName: "P2PMercuryAttachment",
  mixins: [ v ],
  propTypes: {
   metadata: ba.object.isRequired,
   theme: ba.string
  },
  getInitialState: function() {
   var da = {
    acceptMoneyDialogShown: false
   }, ea = this.props.metadata, fa = s.getTransferByID(ea[q.TRANSFER_ID]);
   if (fa) {
    ea = fa;
   } else k.transferAdded(ea);
   da.transfer = ea;
   da.viewerIsSender = g.getID() === da.transfer.sender.id;
   if (p.doesNUXNeedCreditCards(da.transfer)) da.creditCardAsyncRequestState = m.getAsyncRequestState(), 
   da.creditCards = m.getAll();
   return da;
  },
  componentDidMount: function() {
   this.creditCardStoreSub = m.addListener("change", this.onCreditCardStoreChange);
   this.transferStoreSub = s.addListener("change", this.onTransferStoreChange);
  },
  componentWillUnmount: function() {
   if (this.creditCardStoreSub) {
    this.creditCardStoreSub.remove();
    this.creditCardStoreSub = null;
   }
   if (this.transferStoreSub) {
    this.transferStoreSub.remove();
    this.transferStoreSub = null;
   }
  },
  onCreditCardStoreChange: function() {
   this.setState({
    creditCardAsyncRequestState: m.getAsyncRequestState(),
    creditCards: m.getAll()
   });
  },
  onTransferStoreChange: function() {
   var da = {}, ea = s.getTransferByID(this.state.transfer[q.TRANSFER_ID]);
   if (ea && ea[q.STATUS] !== this.state.transfer[q.STATUS]) {
    da.transfer = ea;
    if (p.doesNUXNeedCreditCards(da.transfer)) da.creditCardAsyncRequestState = m.getAsyncRequestState(), 
    da.creditCards = m.getAll();
    this.setState(da);
   }
  },
  getStatus: function() {
   var da = y._("Pending"), ea = y._("Completed"), fa = y._("Canceled"), ga = y._("Sent"), ha = this.state.viewerIsSender;
   switch (this.state.transfer[q.STATUS]) {
   case r.PENDING_RECIPIENT_PROCESSING:
   case r.INTERMEDIATE_PROCESSING:
    return ha ? ga : ea;

   case r.PENDING_RECIPIENT_NUX:
   case r.PENDING_RECIPIENT_VERIFICATION:
   case r.PENDING_RECIPIENT_MANUAL_REVIEW:
   case r.PENDING_RECIPIENT_VERIFICATION_PROCESSING:
   case r.PENDING_PUSH_FAIL:
   case r.PENDING_SENDER_INITED:
    return ha ? ga : da;

   case r.PENDING_SENDER_MANUAL_REVIEW:
   case r.PENDING_SENDER_VERIFICATION:
   case r.PENDING_SENDER_VERIFICATION_PROCESSING:
    return da;

   case r.CANCELED_SENDER_RISK:
   case r.CANCELED_DECLINED:
   case r.CANCELED_RECIPIENT_RISK:
   case r.CANCELED_SYSTEM_FAIL:
   case r.CANCELED_EXPIRED:
   case r.CANCELED_SAME_CARD:
    return fa;

   case r.COMPLETED:
    return ea;
   }
  },
  isGrayStatus: function() {
   switch (this.state.transfer[q.STATUS]) {
   case r.PENDING_RECIPIENT_VERIFICATION:
   case r.PENDING_RECIPIENT_VERIFICATION_PROCESSING:
   case r.PENDING_RECIPIENT_MANUAL_REVIEW:
   case r.PENDING_RECIPIENT_NUX:
   case r.PENDING_PUSH_FAIL:
    if (this.state.viewerIsSender) return false;
    return true;

   case r.PENDING_SENDER_MANUAL_REVIEW:
   case r.PENDING_SENDER_VERIFICATION:
   case r.PENDING_SENDER_VERIFICATION_PROCESSING:
   case r.CANCELED_SENDER_RISK:
   case r.CANCELED_DECLINED:
   case r.CANCELED_RECIPIENT_RISK:
   case r.CANCELED_SYSTEM_FAIL:
   case r.CANCELED_EXPIRED:
   case r.CANCELED_SAME_CARD:
    return true;

   case r.COMPLETED:
   case r.INTERMEDIATE_PROCESSING:
   case r.PENDING_SENDER_INITED:
   case r.PENDING_RECIPIENT_PROCESSING:
    return false;
   }
  },
  shouldRenderBannerFooter: function() {
   if (p.doesNUXNeedCreditCards(this.state.transfer) && !m.isCreditCardsFetchComplete()) return false;
   return p.isRecipientActionableStatus(this.state.transfer);
  },
  handleConfirmInfoButtonClicked: function() {
   t.startVerificationFlow(this.state.transfer[q.TRANSFER_ID], false);
  },
  handleAddCardButtonClicked: function() {
   this.setState({
    acceptMoneyDialogShown: true
   });
  },
  handleAcceptMoneyDialogClose: function() {
   this.setState({
    acceptMoneyDialogShown: false
   });
  },
  renderInlineBanner: function() {
   var da = this.state.transfer[q.STATUS];
   if (da === r.PENDING_RECIPIENT_NUX) {
    return this.renderPendingRecipientNUX();
   } else if (da === r.PENDING_RECIPIENT_VERIFICATION) {
    return this.renderPendingRecipientVerification();
   } else if (da === r.PENDING_PUSH_FAIL) return this.renderPendingPushFail();
   return null;
  },
  renderPendingRecipientNUX: function() {
   var da = this.state.transfer, ea = o.ReceiverInThreadNUXBodyText || y._("Just add a debit card to accept it.");
   return u.createElement("div", {
    className: "_3asb"
   }, u.createElement("div", {
    className: "_3asc"
   }, y._("{sender_name} Sent You Money!", [ y.param("sender_name", da.sender.name) ])), u.createElement("div", {
    className: "_3asd"
   }, ea), u.createElement("div", {
    className: "_5abs"
   }, u.createElement(l, {
    use: "confirm",
    className: "_5abt",
    size: "medium",
    label: y._("Add Card"),
    type: "primary",
    onClick: this.handleAddCardButtonClicked
   })));
  },
  renderPendingRecipientVerification: function() {
   return u.createElement("div", {
    className: "_3asb"
   }, u.createElement("div", {
    className: "_3asc"
   }, y._("Please Confirm Your Info")), u.createElement("div", {
    className: "_3asd"
   }, y._("To accept the money {sender_name} sent you, please confirm your information.", [ y.param("sender_name", this.state.transfer.sender.name) ])), u.createElement("div", {
    className: "_5abs"
   }, u.createElement(l, {
    use: "confirm",
    className: "_5abt",
    size: "medium",
    label: y._("Confirm Info"),
    type: "primary",
    onClick: this.handleConfirmInfoButtonClicked
   })));
  },
  renderPendingPushFail: function() {
   return u.createElement("div", {
    className: "_3asb"
   }, u.createElement("div", {
    className: "_3asc"
   }, y._("Update Your Card")), u.createElement("div", {
    className: "_3asd"
   }, y._("It looks like your card is expired or invalid. Please update it to get {currency}{amount} from {sender_name}.", [ y.param("currency", this.state.transfer.currency), y.param("amount", this.state.transfer.amount), y.param("sender_name", this.state.transfer.sender.name) ])), u.createElement("div", {
    className: "_5abs"
   }, u.createElement(l, {
    use: "confirm",
    size: "medium",
    className: "_5abt",
    label: y._("Update Card"),
    type: "primary",
    href: n.settingsWWWURI,
    target: "_blank"
   })));
  },
  getStatusHeaderText: function() {
   if (this.isMessengerDotComView()) {
    return y._("Status");
   } else return y._("STATUS");
  },
  getActionHeaderText: function() {
   var da = this.state.transfer[q.STATUS], ea = this.isMessengerDotComView(), fa = this.state.viewerIsSender, ga = ea ? y._("Sent on") : y._("SENT ON"), ha = ea ? y._("Received on") : y._("RECEIVED ON"), ia = ea ? y._("Canceled on") : y._("CANCELED ON");
   switch (da) {
   case r.PENDING_SENDER_MANUAL_REVIEW:
   case r.PENDING_RECIPIENT_MANUAL_REVIEW:
   case r.PENDING_RECIPIENT_PROCESSING:
   case r.INTERMEDIATE_PROCESSING:
   case r.COMPLETED:
    return fa ? ga : ha;

   case r.PENDING_RECIPIENT_NUX:
   case r.PENDING_RECIPIENT_VERIFICATION:
   case r.PENDING_RECIPIENT_VERIFICATION_PROCESSING:
   case r.PENDING_PUSH_FAIL:
   case r.PENDING_SENDER_INITED:
    return fa ? ga : null;

   case r.PENDING_SENDER_VERIFICATION:
   case r.PENDING_SENDER_VERIFICATION_PROCESSING:
    return null;

   case r.CANCELED_SENDER_RISK:
   case r.CANCELED_DECLINED:
   case r.CANCELED_RECIPIENT_RISK:
   case r.CANCELED_SYSTEM_FAIL:
   case r.CANCELED_EXPIRED:
   case r.CANCELED_SAME_CARD:
    return ia;
   }
  },
  isMessengerDotComView: function() {
   return this.props.theme === "messenger";
  },
  isMessagesView: function() {
   return this.props.theme === "messages";
  },
  getImage: function() {
   if (this.isMessengerDotComView()) {
    if (this.isGrayStatus()) {
     return z("/images/p2p/message-icon-dark-gray.png");
    } else return z("/images/p2p/message-icon-blue.png");
   } else if (this.isGrayStatus()) {
    return z("/images/p2p/message-icon-gray.png");
   } else return z("/images/p2p/message-icon-black.png");
  },
  getTransferStatusDate: function() {
   var da, ea = this.state.transfer[q.STATUS];
   switch (ea) {
   case r.PENDING_RECIPIENT_PROCESSING:
   case r.INTERMEDIATE_PROCESSING:
   case r.COMPLETED:
    da = this.state.transfer.completedTime;
    break;

   case r.CANCELED_SENDER_RISK:
   case r.CANCELED_DECLINED:
   case r.CANCELED_RECIPIENT_RISK:
   case r.CANCELED_SYSTEM_FAIL:
   case r.CANCELED_EXPIRED:
   case r.CANCELED_SAME_CARD:
    da = this.state.transfer.updatedTime;
    break;
   }
   if (!da) da = this.state.transfer.creationTime;
   return x(da, "M jS, g:ia");
  },
  renderStatusFooter: function() {
   var da = this.getActionHeaderText(), ea;
   if (da) ea = u.createElement("div", {
    className: "_4ybr"
   }, u.createElement("div", {
    className: "_1nkr"
   }, u.createElement("div", {
    className: "_4ybp"
   }, da), u.createElement("div", {
    className: "_4ybq"
   }, this.getTransferStatusDate())));
   return u.createElement("div", {
    className: "_4ybn"
   }, u.createElement("div", {
    className: "_4ybo"
   }, u.createElement("div", {
    className: "_1nkq"
   }, u.createElement("div", {
    className: "_4ybp"
   }, this.getStatusHeaderText()), u.createElement("div", {
    className: "_4ybq"
   }, this.getStatus()))), ea);
  },
  renderLayers: function() {
   var da = {};
   if (this.state.acceptMoneyDialogShown) da.acceptDialog = u.createElement(j, {
    asyncRequestState: this.state.creditCardAsyncRequestState,
    creditCards: this.state.creditCards,
    onClose: this.handleAcceptMoneyDialogClose,
    transfer: this.state.transfer
   });
   return da;
  },
  render: function() {
   var da, ea, fa = "_4ybm";
   if (this.shouldRenderBannerFooter()) {
    da = u.createElement("div", {
     className: fa
    }, this.renderInlineBanner());
   } else ea = u.createElement("div", {
    className: fa
   }, this.renderStatusFooter());
   return u.createElement("div", {
    className: "_30of" + (this.state.viewerIsSender ? " " + "_4ybf" : "") + (this.isMessagesView() ? " " + "_4ybg" : "") + (this.isMessengerDotComView() ? " " + "_4ybh" : "")
   }, u.createElement("div", {
    className: "_3ase"
   }, u.createElement(i, {
    className: "_3asf",
    href: n.settingsWWWURI,
    target: "_blank"
   }, u.createElement("div", {
    className: "_4ybi"
   }, u.createElement("div", {
    className: "_4ybj"
   }, u.createElement("div", {
    className: "_4ybk"
   }, u.createElement(h, {
    height: 16,
    src: this.getImage(),
    width: 16
   })), u.createElement("div", {
    className: "_4ybl" + (this.isGrayStatus() ? " " + "_3asg" : "")
   }, this.state.transfer.amount))), ea), da));
  }
 });
 e.exports = ca;
}, null);

__d("P2PMercuryShareAttachment.react", [ "MercuryShareAttachmentReactShape", "MercuryShareAttachmentRenderLocations", "P2PMercuryAttachment.react", "React", "cx" ], function(a, b, c, d, e, f, g, h, i, j, k) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var l = j, m = l.PropTypes, n = j.createClass({
  displayName: "P2PMercuryShareAttachment",
  propTypes: {
   attachment: g,
   location: m.oneOf(h.getValues())
  },
  render: function() {
   var o = {
    metadata: this.props.attachment.target
   };
   if (this.props.location === h.MESSENGER) {
    o.theme = "messenger";
   } else if (this.props.location === h.WEB_INBOX) o.theme = "messages";
   return j.createElement("div", {
    className: "_3fyk"
   }, j.createElement(i, j.__spread({}, o)));
  }
 });
 e.exports = n;
}, null);

__d("XMNCommerceOrderDetailsController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/messages/commerce/order_details/", {
  receipt_id: {
   type: "String",
   required: true
  }
 });
}, null);

__d("MercuryShareAttachment.react", [ "Map", "MercuryConfig", "MercuryShareAttachmentReactShape", "MercuryShareAttachmentRenderLocations", "React", "StoryAttachmentStyle", "MercuryFallbackShareAttachment.react", "P2PMercuryShareAttachment.react", "MNCommerceReceiptMercuryShareAttachment.react", "MNCommerceCancelReturnMercuryShareAttachment.react", "MNCommerceShippingMercuryShareAttachment.react" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var m = k, n = m.PropTypes, o = new g();
 o.set(l.FALLBACK, b("MercuryFallbackShareAttachment.react"));
 o.set(l.ORION, b("P2PMercuryShareAttachment.react"));
 if (h.WWWMessengerComerceGK) {
  o.set(l.RETAIL_RECEIPT, b("MNCommerceReceiptMercuryShareAttachment.react"));
  o.set(l.RETAIL_CANCELLATION, b("MNCommerceCancelReturnMercuryShareAttachment.react"));
  o.set(l.RETAIL_SHIPMENT, b("MNCommerceShippingMercuryShareAttachment.react"));
  o.set(l.RETAIL_SHIPMENT_TRACKING_EVENT, b("MNCommerceShippingMercuryShareAttachment.react"));
 }
 var p = k.createClass({
  displayName: "MercuryShareAttachment",
  propTypes: {
   attachment: i,
   location: n.oneOf(j.getValues()),
   rootClassName: n.string
  },
  render: function() {
   var q = this.props.attachment;
   if (!q.style_list) return null;
   var r = null;
   for (var s = 0; s < q.style_list.length; s++) {
    r = o.get(q.style_list[s]);
    if (r) break;
   }
   if (!r) return null;
   return k.createElement(r, k.__spread({}, this.props));
  }
 });
 e.exports = p;
}, null);

__d("MessagesEmoticons.react", [ "Grid.react", "React", "cx", "emptyFunction", "fbt" ], function(a, b, c, d, e, f, g, h, i, j, k) {
 b.__markCompiled && b.__markCompiled();
 var l = g.GridItem, m = h, n = m.PropTypes, o = 8, p = {
  smile: k._("smile"),
  frown: k._("frown"),
  tongue: k._("tongue"),
  grin: k._("grin"),
  gasp: k._("gasp"),
  wink: k._("wink"),
  pacman: k._("pacman"),
  grumpy: k._("grumpy"),
  unsure: k._("unsure"),
  cry: k._("cry"),
  kiki: k._("kiki"),
  glasses: k._("glasses"),
  sunglasses: k._("sunglasses"),
  heart: k._("heart"),
  devil: k._("devil"),
  angel: k._("angel"),
  squint: k._("squint"),
  confused: k._("confused"),
  upset: k._("upset"),
  colonthree: k._("colonthree"),
  like: k._("like")
 }, q = h.createClass({
  displayName: "MessagesEmoticons",
  propTypes: {
   onEmoticonSelect: n.func
  },
  getDefaultProps: function() {
   return {
    onEmoticonSelect: j
   };
  },
  getEmoticons: function() {
   return Object.keys(p).map(function(r) {
    return h.createElement(l, {
     key: r
    }, h.createElement("div", {
     className: "panelCell"
    }, h.createElement("a", {
     "aria-label": p[r],
     className: "emoticon emoticon_" + r,
     onClick: function() {
      return this.props.onEmoticonSelect(r);
     }.bind(this)
    })));
   }.bind(this));
  },
  render: function() {
   return h.createElement("div", {
    className: "emoticonsTable"
   }, h.createElement(g, {
    cols: o,
    alignv: "middle",
    alignh: "center",
    spacing: "pam"
   }, this.getEmoticons()));
  }
 });
 e.exports = q;
}, null);

__d("MercuryMessageInfo", [ "MercuryActionStatus", "MercuryViewer" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var i = {
  isOutbound: function(j) {
   return j.author === h.getID();
  },
  isInbound: function(j) {
   return !i.isOutbound(j);
  },
  isSending: function(j) {
   return j.status === g.UNSENT || j.status === g.UNCONFIRMED || j.status === g.UNABLE_TO_CONFIRM || j.status === g.RESENDING;
  },
  hasError: function(j) {
   return j.status === g.FAILED_UNKNOWN_REASON || j.status === g.UNABLE_TO_CONFIRM || j.status === g.ERROR;
  }
 };
 e.exports = i;
}, null);

__d("MercuryErrorInfo", [ "MercuryErrorType", "MercuryMessageInfo", "fbt" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 var j = {
  getMessage: function(k) {
   var l = "";
   if (j.isConnectionError(k)) {
    l = i._("This message didn't send.");
    if (j.isTransient(k)) l = i._("{message} Check your internet connection and click to try again.", [ i.param("message", l) ]);
   } else {
    if (k && k.description) {
     l = k.description;
    } else l = i._("This message failed to send.");
    if (j.isTransient(k)) l = i._("{message} Click to send again.", [ i.param("message", l) ]);
   }
   return l;
  },
  isConnectionError: function(k) {
   if (k && k.type == g.TRANSPORT) return k.code === 1001 || k.code === 1004 || k.code === 1006;
   return false;
  },
  isTransient: function(k) {
   return k && k.is_transient;
  },
  isPermanent: function(k) {
   return k ? !this.isTransient(k) : false;
  },
  hasErrorStatus: function(k) {
   return h.hasError(k);
  }
 };
 e.exports = j;
}, null);

__d("MercuryThreads", [ "EventEmitter", "ImmutableObject", "KeyedCallbackManager", "LogHistory", "Map", "MercuryActionType", "MercuryAssert", "MercuryAttachment", "MercuryGlobalActionType", "MercuryIDs", "MercuryLogMessageType", "MercuryLoggingHelper", "MercuryPayloadSource", "MercurySingletonMixin", "MercuryThreadMode", "MessagingTag", "MercuryServerRequests", "Set", "MercuryThreadInformer", "setImmediate" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var aa = new g(), ba = j.getInstance("mercury_threads");
 function ca(da) {
  this.$MercuryThreads0 = da;
  this.$MercuryThreads1 = w.getForFBID(this.$MercuryThreads0);
  this.$MercuryThreads2 = y.getForFBID(this.$MercuryThreads0);
  this.$MercuryThreads3 = p.getParticipantIDFromUserID(this.$MercuryThreads0);
  this.$MercuryThreads4 = false;
  this.$MercuryThreads5 = new i();
  this.$MercuryThreads6 = new x();
  this.$MercuryThreads7 = false;
  this.$MercuryThreads8 = new x();
  this.$MercuryThreads9 = new x();
  this.$MercuryThreadsa();
 }
 ca.prototype.getThreadMetaNow = function(da) {
  m.isThreadID(da);
  return this.$MercuryThreads5.getResource(da);
 };
 ca.prototype.getOrFetch = function(da) {
  var ea = this.getThreadMetaNow(da);
  if (!ea && !this.$MercuryThreads9.has(da)) this.$MercuryThreads8.add(da);
  if (this.$MercuryThreads8.size > 0 && !this.$MercuryThreads7) this.$MercuryThreadsb();
  return ea;
 };
 ca.prototype.$MercuryThreadsb = function() {
  if (this.$MercuryThreads7) return;
  this.$MercuryThreads7 = true;
  z(function() {
   this.$MercuryThreads7 = false;
   this.$MercuryThreads8.forEach(function(da) {
    return this.$MercuryThreads9.add(da);
   }.bind(this));
   this.getMultiThreadMeta(Array.from(this.$MercuryThreads8), function(da) {
    for (var ea in da) da.hasOwnProperty(ea) && this.$MercuryThreads9["delete"](ea);
   }.bind(this));
   this.$MercuryThreads8.clear();
  }.bind(this));
 };
 ca.prototype.getThreadMeta = function(da, ea, fa) {
  return this.getMultiThreadMeta([ da ], function(ga) {
   return ea(ga[da]);
  }, fa);
 };
 ca.prototype.getMultiThreadMeta = function(da, ea, fa) {
  m.allThreadID(da);
  var ga = this.$MercuryThreads5.executeOrEnqueue(da, ea), ha = this.$MercuryThreads5.getUnavailableResources(ga);
  if (ha.length) {
   var ia = [];
   for (var ja = 0; ja < ha.length; ja++) {
    var ka = ha[ja], la = p.tokenize(ka), ma = la.type, na = la.value;
    if (ma == "user") {
     var oa = p.getParticipantIDFromUserID(na);
     this.createNewLocalThread(ka, oa === this.$MercuryThreads3 ? [ this.$MercuryThreads3 ] : [ this.$MercuryThreads3, oa ]);
    } else ia.push(ka);
   }
   if (ia.length) this.$MercuryThreads1.fetchThreadData(ia, fa);
  }
  return ga;
 };
 ca.addListener = function(da, ea) {
  return aa.addListener(da, ea);
 };
 ca.prototype.unsubscribe = function(da) {
  this.$MercuryThreads5.unsubscribe(da);
 };
 ca.prototype.getCanonicalThreadToParticipant = function(da, ea, fa, ga) {
  var ha = p.getThreadIDFromParticipantID(da), ia = this.$MercuryThreads5.getResource(ha);
  if (typeof ia == "undefined") {
   ia = this.createNewLocalThread(ha, this.$MercuryThreads3 === da ? [ this.$MercuryThreads3 ] : [ this.$MercuryThreads3, da ], ea);
   !ga && this.$MercuryThreads1.fetchThreadData([ ha ], fa);
  }
  return ia;
 };
 ca.prototype.createNewLocalThread = function(da, ea, fa) {
  var ga = this.$MercuryThreads5.getResource(da);
  if (!ga) {
   var ha = p.tokenize(da), ia = ha.type, ja = ha.value;
   ga = new h({
    thread_id: da,
    last_action_id: null,
    participants: Array.from(ea),
    name: null,
    snippet: "",
    snippet_has_attachment: false,
    snippet_sender: null,
    unread_count: fa ? fa : 0,
    message_count: 0,
    image_src: null,
    timestamp_absolute: null,
    timestamp_relative: null,
    timestamp: null,
    canonical_fbid: ia === "user" ? ja : null,
    is_canonical_user: ia == "user",
    is_canonical: this.$MercuryThreadsc(ea),
    is_subscribed: true,
    root_message_threading_id: null,
    folder: v.INBOX,
    is_archived: false,
    mode: u.TITAN_ORIGINATED
   });
   this.$MercuryThreads5.setResource(da, ga);
  }
  return ga;
 };
 ca.prototype.isEmptyLocalThread = function(da) {
  var ea = this.$MercuryThreads5.getResource(da);
  if (!ea) return false;
  var fa = p.tokenize(da), ga = fa.type;
  return ga == "root" && !ea.timestamp;
 };
 ca.prototype.isNewEmptyLocalThread = function(da) {
  if (!this.isEmptyLocalThread(da)) return false;
  var ea = this.$MercuryThreads5.getResource(da);
  return !!ea.participants && ea.participants.length === 0;
 };
 ca.prototype.$MercuryThreadsd = function(da, ea) {
  if (!da || !da.length) return;
  var fa = new k(), ga = new k(), ha = new k(), ia = [];
  for (var ja = 0; ja < da.length; ja++) {
   var ka = da[ja];
   if (ka.is_forward) continue;
   var la = ka.action_type;
   if (la == l.LOG_MESSAGE && ka.log_message_type == q.SERVER_ERROR) continue;
   var ma = !!(ka.sync_id || ka.action_id), na = ka.thread_id;
   m.isThreadID(na);
   var oa = this.$MercuryThreads5.getResource(na);
   if (!oa && !ma && la == l.USER_GENERATED_MESSAGE) {
    oa = this.$MercuryThreadse(ka);
    this.$MercuryThreads5.setResource(na, oa);
   }
   if (!oa) continue;
   if (la == l.LOG_MESSAGE || la == l.USER_GENERATED_MESSAGE) ma = !ea;
   if (oa.server_timestamp && ka.timestamp <= oa.server_timestamp && ma) continue;
   if (!ha.has(na)) ha.set(na, Object.assign({}, oa));
   this.$MercuryThreadsf(ha.get(na), ka, ea);
   if (la == l.USER_GENERATED_MESSAGE) fa.set(na, ka);
   if (la == l.USER_GENERATED_MESSAGE || la == l.LOG_MESSAGE || la == l.SEND_MESSAGE) if (ka && ka.timestamp && (!ga.has(na) || ka.timestamp > ga.get(na).timestamp)) ga.set(na, ka);
  }
  ha.forEach(function(pa, qa) {
   var ra = fa.get(qa);
   if (ra) this.$MercuryThreadsg(pa, ra);
   var sa = ga.get(qa), ta = pa.timestamp;
   if (sa) {
    if (sa.timestamp > ta) Object.assign(pa, {
     timestamp_absolute: sa.timestamp_absolute,
     timestamp_relative: sa.timestamp_relative,
     timestamp: sa.timestamp
    });
    var ua = pa.server_timestamp;
    if (!ea && sa.timestamp > ua) pa.server_timestamp = sa.timestamp;
   }
   var va = new h(pa);
   this.$MercuryThreads5.setResource(qa, va);
   ia.push(r.obfuscateThread(va));
  }.bind(this), this);
  ia.length && ba.debug("threads_updated", {
   threads: ia
  });
 };
 ca.prototype.$MercuryThreadsf = function(da, ea, fa) {
  var ga = ea.action_type;
  if (ga == l.USER_GENERATED_MESSAGE || ga == l.LOG_MESSAGE) {
   ea.is_unread && da.unread_count++;
   da.message_count++;
   da.is_archived = false;
  }
  switch (ga) {
  case l.DELETE_THREAD:
   da.message_count = 0;
   this.$MercuryThreadsh(ea.thread_id);
   break;

  case l.USER_GENERATED_MESSAGE:
   if (da.last_read_timestamp >= ea.timestamp) this.$MercuryThreadsi(da, ea, true);
   this.$MercuryThreadsj(da, ea.author);
   break;

  case l.SEND_MESSAGE:
   var ha = ea.log_message_type;
   if (ha == q.THREAD_IMAGE) {
    da.image_src = ea.log_message_data.image ? ea.log_message_data.image.preview_url : null;
    this.$MercuryThreadsk(ea.thread_id);
   }
   da.snippet_attachments = ea.attachments;
   break;

  case l.LOG_MESSAGE:
   var ha = ea.log_message_type;
   if (ha == q.SUBSCRIBE) {
    this.$MercuryThreadsl(da, ea.log_message_data.added_participants);
    this.$MercuryThreadsk(ea.thread_id);
   } else if (ha == q.UNSUBSCRIBE) {
    this.$MercuryThreadsm(da, ea.log_message_data.removed_participants);
    this.$MercuryThreadsk();
   } else if (ha == q.THREAD_IMAGE) {
    if (!fa) da.image_src = ea.log_message_data.image ? ea.log_message_data.image.preview_url : null;
   } else if (ha == q.THREAD_NAME) {
    if (da.name !== ea.log_message_data.name) this.$MercuryThreadsk(ea.thread_id);
    da.name = ea.log_message_data.name;
   }
   break;

  case l.CHANGE_READ_STATUS:
   var ia = this.$MercuryThreadsi(da, ea, ea.mark_as_read);
   if (ia && ea.timestamp) da.last_read_timestamp = ea.timestamp;
   if (ia && fa) this.$MercuryThreads1.changeThreadReadStatus(da.thread_id, ea.mark_as_read, ea.source);
   break;

  case l.CHANGE_ARCHIVED_STATUS:
   if (da.is_archived != ea.archived) {
    da.is_archived = ea.archived;
    this.$MercuryThreadsk(ea.thread_id);
   }
   break;

  case l.CHANGE_FOLDER:
   if (da.folder != ea.new_folder) {
    da.folder = ea.new_folder;
    this.$MercuryThreadsk(ea.thread_id);
   }
   break;

  case l.DELETE_MESSAGES:
   if (fa) {
    da.snippet = "...";
    da.snippet_has_attachment = false;
    da.snippet_attachments = null;
    da.snippet_sender = null;
    da.is_forwarded_snippet = false;
    this.$MercuryThreadsk(ea.thread_id);
   } else if (ea.message_ids) da.message_count = da.message_count - ea.message_ids.length;
   break;

  case l.CHANGE_MUTE_SETTINGS:
   if (ea.mute_settings !== void 0) {
    var ja = this.$MercuryThreads0 + "@facebook.com";
    if (da.mute_settings) {
     if (ea.mute_settings) {
      var ka = {};
      ka[ja] = ea.mute_settings;
      da.mute_settings = Object.assign({}, da.mute_settings, ka);
     } else {
      da.mute_settings = Object.assign({}, da.mute_settings);
      delete da.mute_settings[ja];
     }
     this.$MercuryThreadsk(da.thread_id);
    }
   }
   break;

  case l.ADD_PARTICIPANTS:
   this.$MercuryThreadsl(da, ea.participants);
   this.$MercuryThreadsk(da.thread_id);
   break;
  }
 };
 ca.prototype.$MercuryThreadse = function(da) {
  var ea = p.tokenize(da.thread_id), fa = ea.type, ga = ea.value, ha = this.$MercuryThreadsc(da.specific_to_list);
  return new h({
   thread_id: da.thread_id,
   last_action_id: null,
   participants: da.specific_to_list,
   name: null,
   snippet: da.body,
   snippet_has_attachment: false,
   snippet_attachments: [],
   snippet_sender: da.author,
   unread_count: 0,
   message_count: 0,
   image_src: null,
   timestamp_absolute: da.timestamp_absolute,
   timestamp_relative: da.timestamp_relative,
   timestamp: da.timestamp,
   canonical_fbid: fa === "user" ? ga : null,
   is_canonical_user: fa === "user",
   is_canonical: ha,
   is_subscribed: true,
   root_message_threading_id: da.message_id,
   folder: v.INBOX,
   is_archived: false,
   mode: u.TITAN_ORIGINATED
  });
 };
 ca.prototype.$MercuryThreadsi = function(da, ea, fa) {
  if (ea.timestamp) this.$MercuryThreadsn(da.thread_id, fa, ea.timestamp);
  if (!da || !da.thread_id) return false;
  if (!da.timestamp) {
   this.$MercuryThreads6.add(da.thread_id);
   return false;
  }
  var ga = !da.unread_count;
  if (fa == ga) return false;
  da.unread_count = fa ? 0 : 1;
  this.$MercuryThreadsk(da.thread_id);
  return true;
 };
 ca.prototype.$MercuryThreadso = function(da) {
  var ea = this.$MercuryThreads5.getAllResources();
  for (var fa in ea) if (ea.hasOwnProperty(fa)) {
   var ga = ea[fa];
   if (ga.folder == da) {
    this.$MercuryThreads5.setResource(fa, h.setProperty(ga, "unread_count", 0));
    this.$MercuryThreadsk(fa);
   }
  }
 };
 ca.prototype.$MercuryThreadsl = function(da, ea) {
  var fa = new x(da.participants);
  da.participants = Array.from(da.participants);
  ea.forEach(function(ga) {
   if (!fa.has(ga)) {
    da.participants.push(ga);
    if (ga === this.$MercuryThreads3) da.is_subscribed = true;
   }
  }.bind(this));
 };
 ca.prototype.$MercuryThreadsm = function(da, ea) {
  var fa = new x(ea);
  da.participants = da.participants.filter(function(ga) {
   return !fa.has(ga);
  });
  if (fa.has(this.$MercuryThreads3)) da.is_subscribed = false;
 };
 ca.prototype.$MercuryThreadsj = function(da, ea) {
  if (da.participants[0] != ea) {
   da.participants = da.participants.filter(function(fa) {
    return fa != ea;
   });
   da.participants.unshift(ea);
  }
 };
 ca.prototype.$MercuryThreadsg = function(da, ea) {
  var fa = ea.body, ga = ea.subject, ha = "";
  if (ga) {
   ga = ga.toLowerCase();
   if (fa.slice(0, ga.length).toLowerCase() == ga) {
    ha = fa;
   } else if (fa) {
    ha = ga + " · " + fa;
   } else ha = ga;
  } else ha = fa;
  da.snippet = ha;
  da.snippet_has_attachment = ea.has_attachment;
  if (ea.raw_attachments && ea.raw_attachments.length > 0) {
   var ia = n.convertRaw(ea.raw_attachments);
   da.snippet_attachments = ia;
  } else da.snippet_attachments = ea.attachments;
  da.is_forwarded_snippet = !!ea.forward_count;
  da.snippet_sender = ea.author;
 };
 ca.prototype.$MercuryThreadsc = function(da) {
  return da.filter(function(ea) {
   return ea != this.$MercuryThreads3;
  }.bind(this)).length <= 1;
 };
 ca.prototype.$MercuryThreadsa = function() {
  this.$MercuryThreads1.subscribe("update-threads", function(da, ea) {
   var fa = (ea.actions || []).filter(function(ga) {
    return ga.thread_id;
   });
   if (ea.threads && ea.payload_source == s.SERVER_FETCH_THREAD_INFO) ea.threads.forEach(function(ga) {
    var ha = ga.thread_id;
    if (this.$MercuryThreads6.has(ha)) {
     this.$MercuryThreads6["delete"](ha);
     if (ga.unread_count) this.$MercuryThreads1.changeThreadReadStatus(ga.thread_id, true);
    }
   }.bind(this));
   this.$MercuryThreadsp(ea.threads);
   this.$MercuryThreadsd(fa, ea.from_client);
   ea.threads && ea.threads.forEach(function(ga) {
    this.$MercuryThreadsk(ga.thread_id);
   }.bind(this));
   if (ea.global_actions) ea.global_actions.forEach(function(ga) {
    if (ga.action_type == o.MARK_ALL_READ) this.$MercuryThreadso(ga.folder);
   }.bind(this));
   if (this.$MercuryThreads4) {
    this.$MercuryThreads4 = false;
    aa.emit("change");
   }
  }.bind(this));
 };
 ca.prototype.$MercuryThreadsp = function(da) {
  if (!da || !da.length) return;
  var ea = {}, fa = [];
  da.forEach(function(ga) {
   var ha = new h(ga);
   ea[ga.thread_id] = ha;
   fa.push(r.obfuscateThread(ha));
  });
  fa.length && ba.debug("threads_added", {
   threads: fa
  });
  this.$MercuryThreads5.addResourcesAndExecute(ea);
 };
 ca.prototype.$MercuryThreadsk = function(da) {
  this.$MercuryThreads4 = true;
  this.$MercuryThreads2.updatedThread(da);
 };
 ca.prototype.$MercuryThreadsh = function(da) {
  this.$MercuryThreads4 = true;
  this.$MercuryThreads2.deletedThread(da);
 };
 ca.prototype.$MercuryThreadsn = function(da, ea, fa) {
  this.$MercuryThreads4 = true;
  this.$MercuryThreads2.changedThreadReadState(da, ea, fa);
 };
 Object.assign(ca, t);
 e.exports = ca;
}, null);

__d("MercuryChannelHandler", [ "Arbiter", "ChannelConstants", "MercuryActionType", "MercuryGlobalActionType", "MercuryMessages", "MercuryPayloadSource", "MercuryServerRequests", "MercurySingletonMixin", "MercuryThreadInformer", "MercuryViewer", "MessagingEvent", "MessagingReliabilityLogger", "MessagingTag", "PresenceUtil", "copyProperties", "mixin" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v) {
 b.__markCompiled && b.__markCompiled();
 var w = v(n);
 for (var x in w) if (w.hasOwnProperty(x)) z[x] = w[x];
 var y = w === null ? null : w.prototype;
 z.prototype = Object.create(y);
 z.prototype.constructor = z;
 z.__superConstructor__ = w;
 function z(aa) {
  "use strict";
  this.$MercuryChannelHandler0 = aa;
  this.$MercuryChannelHandler1 = m.getForFBID(this.$MercuryChannelHandler0);
  this.$MercuryChannelHandler2 = o.getForFBID(this.$MercuryChannelHandler0);
  this.$MercuryChannelHandler3 = k.getForFBID(this.$MercuryChannelHandler0);
  this.$MercuryChannelHandler4 = [];
 }
 z.prototype.getInstanceFBID = function() {
  "use strict";
  return this.$MercuryChannelHandler0;
 };
 z.prototype.$MercuryChannelHandler5 = function(aa, ba) {
  "use strict";
  if (!this.$MercuryChannelHandler6(aa) || !ba.obj || !ba.obj.message) {
   r.addEntry("channel_receive", "invalid_data");
   return;
  }
  var ca = ba.obj.message, da = ca.other_user_fbid ? ca.other_user_fbid : ca.thread_fbid, ea = {
   author: ca.mercury_author_id,
   author_email: ca.mercury_author_email,
   body: ca.body,
   subject: ca.subject,
   has_attachment: ca.has_attachment,
   attachments: ca.attachments,
   html_body: ca.html_body,
   thread_id: ca.tid,
   thread_fbid: ca.thread_fbid,
   other_user_fbid: ca.other_user_fbid,
   message_id: ca.mid,
   coordinates: ca.mercury_coordinates,
   is_spoof_warning: ca.is_spoof_warning,
   ranges: ca.ranges,
   source: ca.mercury_source,
   source_tags: ca.mercury_source_tags,
   threading_id: ca.threading_id,
   timestamp: ca.timestamp,
   timestamp_absolute: ca.timestamp_absolute,
   timestamp_relative: ca.timestamp_relative,
   timestamp_time_passed: ca.timestamp_time_passed,
   action_type: i.USER_GENERATED_MESSAGE,
   is_unread: ca.is_unread,
   is_forward: false,
   forward_count: ca.forward_count || ca.forward,
   forward_message_ids: ca.forward_msg_ids,
   location_text: ca.location_text,
   folder: ba.obj.folder
  };
  if ("sync_id" in ca) {
   ea.sync_id = ca.sync_id;
  } else ea.action_id = ca.action_id;
  var fa = [ u({}, ea) ];
  fa = fa.concat(ca.forward_actions || []);
  var ga = l.CLIENT_CHANNEL_MESSAGE;
  this.$MercuryChannelHandler1.handleUpdateWaitForThread({
   actions: fa,
   payload_source: ga
  }, da);
  if (!ca.is_unread && p.isViewer(ca.mercury_author_id)) {
   var ha = {};
   ha[da] = ba.obj.folder;
   this.$MercuryChannelHandler7(this.__getMessagingPayloadType(), {
    obj: {
     event: q.READ,
     thread_fbids: ca.thread_fbid ? [ ca.thread_fbid ] : [],
     other_user_fbids: ca.other_user_fbid ? [ ca.other_user_fbid ] : [],
     folder_info: ha,
     timestamp: ca.timestamp
    }
   });
  }
  r.addEntry("channel_receive", "success", [ da, ea.message_id, t.getSessionID() ]);
 };
 z.prototype.$MercuryChannelHandler7 = function(aa, ba) {
  "use strict";
  if (!this.$MercuryChannelHandler6(aa) || !ba.obj || !ba.obj.thread_fbids && !ba.obj.other_user_fbids) return;
  var ca = [], da = ba.obj.event == q.READ;
  (ba.obj.thread_fbids || []).forEach(function(ea) {
   ca.push({
    action_type: i.CHANGE_READ_STATUS,
    action_id: null,
    thread_fbid: ea,
    mark_as_read: da,
    timestamp: ba.obj.timestamp || 0,
    folder: ba.obj.folder_info[ea]
   });
  });
  (ba.obj.other_user_fbids || []).forEach(function(ea) {
   ca.push({
    action_type: i.CHANGE_READ_STATUS,
    action_id: null,
    other_user_fbid: ea,
    mark_as_read: da,
    timestamp: ba.obj.timestamp || 0,
    folder: ba.obj.folder_info[ea]
   });
  });
  this.$MercuryChannelHandler1.handleUpdate({
   actions: ca,
   payload_source: l.CLIENT_CHANNEL_MESSAGE
  });
 };
 z.prototype.$MercuryChannelHandler8 = function(aa, ba) {
  "use strict";
  if (!this.$MercuryChannelHandler6(aa) || !ba.obj || !(ba.obj.thread_fbids || ba.obj.other_user_fbids)) return;
  var ca = [];
  (ba.obj.thread_fbids || []).forEach(function(da) {
   ca.push({
    action_type: i.DELETE_THREAD,
    action_id: null,
    thread_fbid: da
   });
  });
  (ba.obj.other_user_fbids || []).forEach(function(da) {
   ca.push({
    action_type: i.DELETE_THREAD,
    action_id: null,
    other_user_fbid: da
   });
  });
  this.$MercuryChannelHandler1.handleUpdate({
   actions: ca,
   payload_source: l.CLIENT_CHANNEL_MESSAGE
  });
 };
 z.prototype.$MercuryChannelHandler9 = function(aa, ba) {
  "use strict";
  if (!this.$MercuryChannelHandler6(aa) || !ba.obj || !ba.obj.thread_fbids && !ba.obj.other_user_fbids || !ba.obj.mids) return;
  var ca = ba.obj.thread_fbids.length ? ba.obj.thread_fbids[0] : null, da = ba.obj.other_user_fbids.length ? ba.obj.other_user_fbids[0] : null, ea = {
   action_type: i.DELETE_MESSAGES,
   action_id: null,
   thread_fbid: ca,
   other_user_fbid: da,
   message_ids: ba.obj.mids
  };
  this.$MercuryChannelHandler1.handleUpdate({
   actions: [ ea ],
   threads: [ ba.obj.updated_thread ],
   payload_source: l.CLIENT_CHANNEL_MESSAGE
  });
 };
 z.prototype.$MercuryChannelHandlera = function(aa, ba) {
  "use strict";
  if (!this.$MercuryChannelHandler6(aa) || !ba.obj || !ba.obj.folder) return;
  var ca = {
   action_type: j.MARK_ALL_READ,
   action_id: ba.obj.action_id,
   folder: ba.obj.folder
  };
  this.$MercuryChannelHandler1.handleUpdate({
   global_actions: [ ca ]
  });
 };
 z.prototype.$MercuryChannelHandlerb = function(aa, ba) {
  "use strict";
  if (!this.$MercuryChannelHandler6(aa) || !ba.obj.thread_fbids && !ba.obj.other_user_fbids) return;
  var ca = l.CLIENT_CHANNEL_MESSAGE;
  (ba.obj.thread_fbids || []).forEach(function(da) {
   var ea = {
    action_type: i.CHANGE_ARCHIVED_STATUS,
    action_id: null,
    thread_fbid: da,
    other_user_fbid: null,
    archived: ba.obj.state
   };
   this.$MercuryChannelHandler1.handleUpdateWaitForThread({
    actions: [ u({}, ea) ],
    payload_source: ca
   }, da);
  }, this);
  (ba.obj.other_user_fbids || []).forEach(function(da) {
   var ea = {
    action_type: i.CHANGE_ARCHIVED_STATUS,
    action_id: null,
    thread_fbid: null,
    other_user_fbid: da,
    archived: ba.obj.state
   };
   this.$MercuryChannelHandler1.handleUpdateWaitForThread({
    actions: [ u({}, ea) ],
    payload_source: ca
   }, da);
  }, this);
 };
 z.prototype.$MercuryChannelHandlerc = function(aa, ba) {
  "use strict";
  if (!this.$MercuryChannelHandler6(aa) || !ba.obj.thread_fbids && !ba.obj.other_user_fbids) return;
  var ca = l.CLIENT_CHANNEL_MESSAGE, da;
  (ba.obj.thread_fbids || []).forEach(function(ea) {
   if (ba.obj.event == q.TAG) {
    da = ba.obj.tag;
   } else da = ba.obj.marked_as_spam ? s.SPAM : s.INBOX;
   var fa = {
    action_type: i.CHANGE_FOLDER,
    action_id: null,
    thread_fbid: ea,
    other_user_fbid: null,
    new_folder: da
   };
   this.$MercuryChannelHandler1.handleUpdateWaitForThread({
    actions: [ u({}, fa) ],
    payload_source: ca
   }, ea);
  }, this);
  (ba.obj.other_user_fbids || []).forEach(function(ea) {
   if (ba.obj.event == q.TAG) {
    da = ba.obj.tag;
   } else da = ba.obj.marked_as_spam ? s.SPAM : s.INBOX;
   var fa = {
    action_type: i.CHANGE_FOLDER,
    action_id: null,
    other_user_fbid: ea,
    thread_fbid: null,
    new_folder: da
   };
   this.$MercuryChannelHandler1.handleUpdateWaitForThread({
    actions: [ u({}, fa) ],
    payload_source: ca
   }, ea);
  }, this);
 };
 z.prototype.$MercuryChannelHandlerd = function(aa, ba) {
  "use strict";
  if (!this.$MercuryChannelHandler6(aa) || !ba.obj.tag) return;
  switch (ba.obj.tag) {
  case s.ACTION_ARCHIVED:
   this.$MercuryChannelHandlerb(aa, ba);
   break;

  case s.INBOX:
  case s.OTHER:
   this.$MercuryChannelHandlerc(aa, ba);
   break;
  }
 };
 z.prototype.__markAsSeen = function(aa, ba) {
  "use strict";
  if (!this.$MercuryChannelHandlere(aa) || !ba.obj || !ba.obj.seen_timestamp) return;
  this.$MercuryChannelHandler1.handleUpdate({
   message_counts: [ {
    seen_timestamp: ba.obj.seen_timestamp,
    folder: s.INBOX
   } ],
   unseen_thread_fbids: [ {
    thread_fbids: [],
    other_user_fbids: [],
    folder: s.INBOX
   } ],
   payload_source: l.CLIENT_CHANNEL_MESSAGE
  });
 };
 z.prototype.__updateModelsFromMercuryPayload = function(aa, ba) {
  "use strict";
  if (!this.$MercuryChannelHandlerf(aa) || !ba.obj) return;
  this.$MercuryChannelHandler2.synchronizeInforms(function() {
   var ca = ba.obj, da = [];
   (ca.actions || []).forEach(function(ea) {
    var fa = i.USER_GENERATED_MESSAGE;
    if (ea.action_type == i.LOG_MESSAGE) {
     var ga = l.CLIENT_CHANNEL_MESSAGE, ha;
     ha = ea.other_user_fbid || ea.thread_fbid;
     this.$MercuryChannelHandler1.handleUpdateWaitForThread({
      actions: [ u({}, ea) ],
      payload_source: ga
     }, ha);
    } else if (ea.action_type != fa) da.push(ea);
   }, this);
   ca.actions = da;
   ca.payload_source = l.CLIENT_CHANNEL_MESSAGE;
   this.$MercuryChannelHandler1.handleUpdate(ca);
  }.bind(this));
 };
 z.prototype.$MercuryChannelHandlerg = function(aa, ba) {
  "use strict";
  this.$MercuryChannelHandler1.handleRoger(ba.obj);
 };
 z.prototype.$MercuryChannelHandlerh = function(aa, ba) {
  "use strict";
  if (!this.$MercuryChannelHandler6(aa) || !ba.obj || ba.obj.mute_settings === void 0 || !ba.obj.thread_fbid && !ba.obj.other_user_fbid) return;
  var ca = i.CHANGE_MUTE_SETTINGS, da = [ {
   action_type: ca,
   action_id: null,
   thread_fbid: ba.obj.thread_fbid,
   other_user_fbid: ba.obj.other_user_fbid,
   mute_settings: ba.obj.mute_settings
  } ];
  this.$MercuryChannelHandler1.handleUpdate({
   actions: da,
   payload_source: l.CLIENT_CHANNEL_MESSAGE
  });
 };
 z.prototype.__handleMessagingPayload = function(aa, ba) {
  "use strict";
  switch (ba.obj.event) {
  case q.DELIVER:
   this.$MercuryChannelHandler5(aa, ba);
   break;

  case q.READ:
  case q.UNREAD:
   this.$MercuryChannelHandler7(aa, ba);
   break;

  case q.READ_ALL:
   this.$MercuryChannelHandlera(aa, ba);
   break;

  case q.DELETE:
   this.$MercuryChannelHandler8(aa, ba);
   break;

  case q.DELETE_MESSAGES:
   this.$MercuryChannelHandler9(aa, ba);
   break;

  case q.TAG:
   this.$MercuryChannelHandlerd(aa, ba);
   break;

  case q.REPORT_SPAM:
   this.$MercuryChannelHandlerc(aa, ba);
   break;

  case q.READ_RECEIPT:
   this.$MercuryChannelHandlerg(aa, ba);
   break;

  case q.CHANGE_MUTE_SETTINGS:
   this.$MercuryChannelHandlerh(aa, ba);
   break;
  }
 };
 z.prototype.getRouting = function() {
  "use strict";
  return {
   mercury: this.__updateModelsFromMercuryPayload,
   messaging: this.__handleMessagingPayload,
   inbox: this.__markAsSeen
  };
 };
 z.prototype.__getMessagingPayloadType = function() {
  "use strict";
  return h.getArbiterType("messaging");
 };
 z.prototype.__getMercuryPayloadType = function() {
  "use strict";
  return h.getArbiterType("mercury");
 };
 z.prototype.__getInboxPayloadType = function() {
  "use strict";
  return h.getArbiterType("inbox");
 };
 z.prototype.$MercuryChannelHandler6 = function(aa) {
  "use strict";
  return aa == this.__getMessagingPayloadType();
 };
 z.prototype.$MercuryChannelHandlerf = function(aa) {
  "use strict";
  return aa == this.__getMercuryPayloadType();
 };
 z.prototype.$MercuryChannelHandlere = function(aa) {
  "use strict";
  return aa == this.__getInboxPayloadType();
 };
 z.prototype.turnOn = function() {
  "use strict";
  if (!this.$MercuryChannelHandler4.length) {
   var aa = this.getRouting();
   for (var ba in aa) this.$MercuryChannelHandler4.push(g.subscribe(h.getArbiterType(ba), aa[ba].bind(this)));
  }
  return this;
 };
 z.prototype.turnOff = function() {
  "use strict";
  if (this.$MercuryChannelHandler4.length) {
   this.$MercuryChannelHandler4.forEach(g.unsubscribe);
   this.$MercuryChannelHandler4 = [];
  }
  return this;
 };
 u(z, n);
 e.exports = z;
}, null);

__d("LiveTimer", [ "CSS", "DOM", "ServerTime", "fbt" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 var k = 1e3, l = 60, m = 3600, n = 43200, o = 86400, p = 60, q = 2e4, r = {
  restart: function(s) {
   i.update(s * 1e3);
   this.updateTimeStamps();
  },
  getApproximateServerTime: function() {
   return i.get();
  },
  getServerTimeOffset: function() {
   return -1 * i.getSkew();
  },
  updateTimeStamps: function() {
   this.timestamps = h.scry(document.body, "abbr.livetimestamp");
   this.startLoop(q);
  },
  addTimeStamps: function(s) {
   if (!s) return;
   this.timestamps = this.timestamps || [];
   if (h.isNodeOfType(s, "abbr") && g.hasClass(s, "livetimestamp")) {
    this.timestamps.push(s);
   } else {
    var t = h.scry(s, "abbr.livetimestamp");
    for (var u = 0; u < t.length; ++u) this.timestamps.push(t[u]);
   }
   this.startLoop(0);
  },
  startLoop: function(s) {
   this.stop();
   this.timeout = setTimeout(function() {
    this.loop();
   }.bind(this), s);
  },
  stop: function() {
   clearTimeout(this.timeout);
  },
  loop: function(s) {
   if (s) this.updateTimeStamps();
   var t = Math.floor(i.get() / k), u = -1;
   this.timestamps && this.timestamps.forEach(function(w) {
    var x = w.getAttribute("data-utime"), y = w.getAttribute("data-shorten"), z = this.renderRelativeTime(t, x, y);
    if (z.text) h.setContent(w, z.text);
    if (z.next != -1 && (z.next < u || u == -1)) u = z.next;
   }.bind(this));
   if (u != -1) {
    var v = Math.max(q, u * k);
    this.timeout = setTimeout(function() {
     this.loop();
    }.bind(this), v);
   }
  },
  renderRelativeTime: function(s, t, u) {
   var v = {
    text: "",
    next: -1
   };
   if (s - t > o) return v;
   var w = s - t, x = Math.floor(w / l), y = Math.floor(x / p);
   if (x < 1) {
    if (u) {
     v.text = j._("Just now");
     v.next = 20 - w % 20;
    } else {
     v.text = j._("a few seconds ago");
     v.next = l - w % l;
    }
    return v;
   }
   if (y < 1) {
    if (u && x == 1) {
     v.text = j._("1 min");
    } else if (u) {
     v.text = j._({
      "*": "{number} mins"
     }, [ j.param("number", x, [ 0 ]) ]);
    } else v.text = x == 1 ? j._("about a minute ago") : j._({
     "*": "{number} minutes ago"
    }, [ j.param("number", x, [ 0 ]) ]);
    v.next = l - w % l;
    return v;
   }
   if (y < 11) v.next = m - w % m;
   if (u && y == 1) {
    v.text = j._("1 hr");
   } else if (u) {
    v.text = j._({
     "*": "{number} hrs"
    }, [ j.param("number", y, [ 0 ]) ]);
   } else v.text = y == 1 ? j._("about an hour ago") : j._({
    "*": "{number} hours ago"
   }, [ j.param("number", y, [ 0 ]) ]);
   return v;
  },
  renderRelativeTimeToServer: function(s, t) {
   return this.renderRelativeTime(Math.floor(i.get() / k), s, t);
  }
 };
 e.exports = r;
 e.exports.CONSTS = {
  MS_IN_SEC: k,
  SEC_IN_MIN: l,
  SEC_IN_HOUR: m,
  SEC_IN_12_HOUR: n,
  SEC_IN_24_HOUR: o,
  MIN_IN_HOUR: p,
  HEARTBEAT: q
 };
}, null);

__d("MercuryRoger", [ "Arbiter", "ArbiterMixin", "immutable", "JSLogger", "MercuryActionStatus", "mapObject", "MercuryServerRequests", "MercuryThreads" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 var m = b("MercuryServerRequests").get(), n = b("MercuryThreads").get(), o = {}, p = [], q = k.SUCCESS, r = {
  getSeenBy: function(u, v) {
   if (!u) return [];
   var w = [], x = o[u.thread_id];
   if (!x) return w;
   x.forEach(function(y, z) {
    if (s(u, y, z, v)) w.push(z);
   });
   return w;
  },
  wasSeenByAll: function(u) {
   if (!u) return false;
   var v = o[u.thread_id];
   if (!v) return false;
   return v.every(function(w, x) {
    return s(u, w, x);
   });
  },
  getSeenTimestamps: function(u) {
   var v = o[u];
   if (!v) {
    v = i.OrderedMap();
    o[u] = v;
   }
   return v;
  },
  getSeenTimestamp: function(u, v) {
   var w = o[u];
   return w ? w.get(v) : null;
  }
 };
 Object.assign(r, h);
 function s(u, v, w, x) {
  return !!(v > u.timestamp && (u.status === void 0 || u.status === q) && (!x || w != u.author));
 }
 m.subscribe("update-roger", function(u, v) {
  for (var w in v) {
   var x = o[w] || i.OrderedMap();
   x = x.withMutations(function(y) {
    for (var z in v[w]) {
     var aa = n.getThreadMetaNow(w);
     if (aa && aa.participants) if (aa.participants.indexOf(z) == -1) {
      p.push(t(o));
      continue;
     }
     var ba = y.get(z), ca = v[w][z];
     if (!ba || ca > ba) y.set(z, ca);
    }
   });
   o[w] = x.sort();
  }
  v && r.inform("change", v);
 });
 g.subscribe(j.DUMP_EVENT, function(u, v) {
  v.bad_read_receipts = {
   receipts: p
  };
 });
 function t(u) {
  return l(u, function(v) {
   return v.toJS();
  });
 }
 e.exports = r;
}, null);

__d("MercuryDelayedRoger", [ "ArbiterMixin", "LiveTimer", "MercuryActionStatus", "MercuryConfig", "MercuryRoger", "setTimeoutAcrossTransitions", "MercuryMessages", "MercuryThreadInformer", "MercuryThreads" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 var m = b("MercuryMessages").get(), n = b("MercuryThreadInformer").get(), o = b("MercuryThreads").get(), p = {}, q = {}, r = j["roger.seen_delay"], s = {
  getSeenBy: function(y, z) {
   if (q[y]) return [];
   return k.getSeenBy(t(y), z);
  },
  wasSeenByAll: function(y) {
   if (q[y]) return false;
   return k.wasSeenByAll(t(y));
  }
 };
 Object.assign(s, g);
 function t(y) {
  if (!p[y]) {
   var z = o.getThreadMetaNow(y);
   if (z) p[y] = {
    thread_id: y,
    author: z.participants[0],
    timestamp: z.timestamp
   };
  }
  return p[y];
 }
 function u(y) {
  var z = false;
  m.getThreadMessagesRange(y, 0, 1, function(aa) {
   var ba = aa[0];
   if (!ba) return;
   var ca = ba.timestamp;
   if (ba.action_id || ba.status == i.SUCCESS) ca -= h.getServerTimeOffset();
   var da = s.getSeenBy(y);
   if (q[y]) {
    clearTimeout(q[y]);
    delete q[y];
   }
   var ea = ca + r, fa = ea - Date.now();
   if (fa > 0) q[y] = l(function() {
    delete q[y];
    v(y);
   }, fa);
   p[y] = ba;
   var ga = s.getSeenBy(y);
   if (da.length || ga.length) z = true;
  });
  return z;
 }
 function v(y) {
  var z = {};
  z[y] = true;
  w(z);
 }
 function w(y) {
  s.inform("state-changed", y);
  s.inform("change");
 }
 function x(event, y) {
  var z = {};
  for (var aa in y) if (u(aa)) z[aa] = true;
  for (var ba in z) {
   w(z);
   break;
  }
 }
 k.subscribe("change", function(y, z) {
  for (var aa in z) !q[aa] && v(aa);
 });
 n.subscribe("messages-received", x);
 n.subscribe("messages-reordered", x);
 n.subscribe("messages-updated", x);
 e.exports = s;
}, null);

__d("MercuryDeliveryState", [ "MercuryConfig", "MercuryIDs", "MercuryServerRequests", "MercurySingletonMixin", "MercuryThreadInformer", "PresencePrivacy", "UserActivity", "debounceAcrossTransitions" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var o = g.delivery_timeout || 12e4;
 function p(q) {
  this.$MercuryDeliveryState0 = q;
  this.$MercuryDeliveryState1 = i.getForFBID(this.$MercuryDeliveryState0);
  this.$MercuryDeliveryState2 = k.getForFBID(this.$MercuryDeliveryState0);
  this.$MercuryDeliveryState3 = [];
  if (!g.ChatWebDRGK) return;
  this.$MercuryDeliveryState2.subscribe("messages-received", this.$MercuryDeliveryState4.bind(this));
  m.subscribe(n(this.$MercuryDeliveryState5, 300, this));
 }
 p.prototype.$MercuryDeliveryState4 = function(q, r) {
  for (var s in r) {
   var t = r[s];
   t.forEach(function(u) {
    if (this.$MercuryDeliveryState7(u)) this.$MercuryDeliveryState3.push(u);
   }.bind(this));
  }
  if (m.isActive(o)) this.$MercuryDeliveryState5();
 };
 p.prototype.$MercuryDeliveryState5 = function() {
  if (this.$MercuryDeliveryState3.length === 0) return;
  var q = this.$MercuryDeliveryState3.filter(this.$MercuryDeliveryState7, this).map(function(r) {
   return r.message_id;
  });
  if (q) this.$MercuryDeliveryState1.sendDeliveryReceipts(q);
  this.$MercuryDeliveryState3 = [];
 };
 p.prototype.$MercuryDeliveryState7 = function(q) {
  var r = q.author ? h.getUserIDFromParticipantID(q.author) : null;
  if (r === this.$MercuryDeliveryState0) return false;
  if (!q.is_unread) return false;
  if (!l.allows(r)) return false;
  return true;
 };
 Object.assign(p, j);
 e.exports = p;
}, null);

__d("MercuryMessageList", [ "immutable", "LogHistory", "Map", "setTimeoutAcrossTransitions" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var k = h.getInstance("mercury_message_list");
 function l(n) {
  this.$MercuryMessageList0 = g.List(n || []);
  this.$MercuryMessageList1();
 }
 l.prototype.append = function(n) {
  var o;
  this.$MercuryMessageList0 = (o = this.$MercuryMessageList0).push.apply(o, n);
  this.$MercuryMessageList1();
  m("append", n);
 };
 l.prototype.prepend = function(n) {
  var o;
  this.$MercuryMessageList0 = (o = this.$MercuryMessageList0).unshift.apply(o, n);
  this.$MercuryMessageList1();
  m("prepend", n);
 };
 l.prototype.update = function(n) {
  var o = n.filter(function(p) {
   return this.contains(p);
  }.bind(this));
  if (o.length === 0) return;
  this.$MercuryMessageList0 = this.$MercuryMessageList0.withMutations(function(p) {
   o.forEach(function(q) {
    var r = this.$MercuryMessageList2.get(q.message_id);
    if (r !== void 0) p.set(r, q);
   }.bind(this));
  }.bind(this));
  m("update", o);
 };
 l.prototype.reorder = function(n) {
  this.$MercuryMessageList0 = g.List(n);
  this.$MercuryMessageList1();
  m("reorder", n);
 };
 l.prototype.at = function(n) {
  return this.$MercuryMessageList0.get(n);
 };
 l.prototype.contains = function(n) {
  return this.$MercuryMessageList2.has(n.message_id);
 };
 l.prototype.toArray = function() {
  return this.$MercuryMessageList0.toArray();
 };
 l.prototype.toMap = function() {
  return new i(g.Seq(this.$MercuryMessageList0).map(function(n) {
   return [ n.message_id, n ];
  }));
 };
 l.prototype.$MercuryMessageList1 = function() {
  this.$MercuryMessageList2 = new i(g.Seq(this.$MercuryMessageList0).map(function(n, o) {
   return [ n.message_id, o ];
  }));
 };
 function m(event, n) {
  j(function() {
   k.debug(event, {
    messageIDs: n.map(function(o) {
     return o.message_id;
    })
   });
  }, 0);
 }
 e.exports = l;
}, null);

__d("MercuryMessageStore", [ "MercuryAPIArgsSource", "LogHistory", "MercuryViewer", "MercuryMessageList", "SubscriptionsHandler", "MercuryThreadlistConstants", "copyProperties", "merge", "mixInEventEmitter", "setImmediate", "setTimeoutAcrossTransitions", "MercuryMessages", "MercuryThreadInformer", "MercuryThreads" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var r = b("MercuryMessages").get(), s = b("MercuryThreadInformer").get(), t = b("MercuryThreads").get(), u = h.getInstance("mercury_message_store");
 function v(x, y) {
  this.$MercuryMessageStore0 = x;
  this.$MercuryMessageStore1 = new j();
  this.$MercuryMessageStore2 = 1;
  this.$MercuryMessageStore3 = null;
  this.$MercuryMessageStore4 = 0;
  this.$MercuryMessageStore5 = y || l.RECENT_MESSAGES_LIMIT;
  this.$MercuryMessageStore6 = new k();
  this.$MercuryMessageStore6.addSubscriptions(s.subscribe("messages-received", function(z, aa) {
   return this.$MercuryMessageStore8(aa);
  }.bind(this)), s.subscribe("messages-updated", function(z, aa) {
   return aa[this.$MercuryMessageStore0] && this.$MercuryMessageStore9(aa[this.$MercuryMessageStore0]);
  }.bind(this)), s.subscribe("messages-reordered", function(z, aa) {
   return aa[this.$MercuryMessageStore0] && this.$MercuryMessageStorea();
  }.bind(this)));
  u.debug("constructed", {
   threadID: this.$MercuryMessageStore0
  });
  this.$MercuryMessageStoreb();
 }
 v.prototype.setNewThreadID = function(x) {
  this.$MercuryMessageStorec = x;
 };
 v.prototype.destroy = function() {
  this.$MercuryMessageStore6 && this.$MercuryMessageStore6.release();
  u.debug("destroyed", {
   threadID: this.$MercuryMessageStore0
  });
 };
 v.prototype.subscribe = function(x) {
  return this.addRetroactiveListener("updated", x);
 };
 v.prototype.fetchMoreMessages = function() {
  if (r.hasLoadedExactlyNMessages(this.$MercuryMessageStore0, this.$MercuryMessageStore4) && r.hasLoadedAllMessages(this.$MercuryMessageStore0)) return false;
  if (t.isNewEmptyLocalThread(this.$MercuryMessageStore0)) return false;
  this.$MercuryMessageStoreb();
  return true;
 };
 v.prototype.$MercuryMessageStoreb = function() {
  var x = this.$MercuryMessageStore4 + this.$MercuryMessageStore5 * this.$MercuryMessageStore2;
  u.debug("fetching", {
   threadID: this.$MercuryMessageStore0,
   limit: x
  });
  r.getThreadMessagesRange(this.$MercuryMessageStore0, 0, x, this.$MercuryMessageStored.bind(this), null, g.MERCURY);
  if (this.$MercuryMessageStore2 < 10) this.$MercuryMessageStore2 += 1;
  if (r.hasLoadedNMessages(this.$MercuryMessageStore0, x)) p(function() {
   this.$MercuryMessageStorea();
  }.bind(this));
 };
 v.prototype.$MercuryMessageStored = function(x) {
  if (x && x.length) {
   this.$MercuryMessageStore3 = x[0].timestamp;
   this.$MercuryMessageStore4 = x.length;
   u.debug("fetched", {
    threadID: this.$MercuryMessageStore0,
    earliestMessageTimestamp: this.$MercuryMessageStore3,
    count: this.$MercuryMessageStore4
   });
  } else if (x && !x.length && !this.$MercuryMessageStore4) this.$MercuryMessageStoree(v.THREAD_IS_EMPTY);
 };
 v.prototype.$MercuryMessageStore8 = function(x) {
  var y = [], z = x[this.$MercuryMessageStore0];
  if (z && z.length) y = y.concat(z);
  if (this.$MercuryMessageStorec) {
   var aa = x[this.$MercuryMessageStorec];
   if (aa && aa.length) {
    y = y.concat(aa);
    this.$MercuryMessageStorec = null;
   }
  }
  if (y.length) {
   this.$MercuryMessageStore1.append(y);
   this.$MercuryMessageStore4 += y.length;
   var ba = y.every(function(ca) {
    return ca.author != i.getID();
   });
   this.$MercuryMessageStoree(v.MESSAGES_RECEIVED, {
    allFromOthers: ba
   });
  }
 };
 v.prototype.$MercuryMessageStore9 = function(x) {
  this.$MercuryMessageStore1.update(r.getMessagesFromIDs(Object.keys(x)));
  this.$MercuryMessageStoref();
  this.$MercuryMessageStoree(v.MESSAGES_CHANGED);
 };
 v.prototype.$MercuryMessageStorea = function() {
  if (!this.$MercuryMessageStore3) return;
  this.$MercuryMessageStore1.reorder(r.getThreadMessagesSinceTimestamp(this.$MercuryMessageStore0, this.$MercuryMessageStore3));
  this.$MercuryMessageStoref();
  this.$MercuryMessageStoree(v.MESSAGES_REORDERED);
 };
 v.prototype.$MercuryMessageStoree = function(x, y) {
  var z = this.$MercuryMessageStore1.toArray();
  this.releaseHeldEventType("updated");
  this.emitAndHold("updated", n({
   messages: z,
   eventType: x
  }, y));
  w(this.$MercuryMessageStore0, x, z);
 };
 v.prototype.$MercuryMessageStoref = function() {
  var x = this.$MercuryMessageStore1.at(0);
  if (x) this.$MercuryMessageStore3 = x.timestamp;
 };
 function w(x, y, z) {
  q(function() {
   u.debug("update:" + y, {
    threadID: x,
    messageIDs: z.map(function(aa) {
     return aa.message_id;
    })
   });
  }, 0);
 }
 m(v, {
  MESSAGES_FETCHED: "fetched",
  MESSAGES_CHANGED: "changed",
  MESSAGES_RECEIVED: "received",
  MESSAGES_REORDERED: "reordered",
  THREAD_IS_EMPTY: "thread-is-empty"
 });
 o(v, {
  updated: true
 });
 e.exports = v;
}, null);

__d("MercuryFilters", [ "MessagingTag", "arrayContains" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 var i = [ g.UNREAD ], j = {
  ALL: "all",
  getSupportedFilters: function() {
   return i.concat();
  },
  isSupportedFilter: function(k) {
   return h(i, k);
  }
 };
 e.exports = j;
}, null);

__d("MercuryFolders", [ "MessagingTag", "arrayContains" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 var i = [ g.INBOX, g.OTHER, g.ACTION_ARCHIVED, g.SPAM ], j = {
  getSupportedFolders: function() {
   return i.concat();
  },
  isSupportedFolder: function(k) {
   return h(i, k);
  },
  getFromMeta: function(k) {
   var l = k.folder;
   if (k.is_archived) l = g.ACTION_ARCHIVED;
   return l;
  }
 };
 e.exports = j;
}, null);

__d("MercuryOrderedThreadlist", [ "LogHistory", "MercuryActionType", "MercuryFilters", "MercuryFolders", "MercuryPayloadSource", "MercurySingletonMixin", "MessagingTag", "RangedCallbackManager", "MercuryServerRequests", "MercuryThreadInformer", "MercuryThreads", "arrayContains", "copyProperties" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var t = g.getInstance("ordered_threadlist_model"), u = i.getSupportedFilters().concat([ i.ALL, m.GROUPS ]), v = j.getSupportedFolders();
 function w(ga, ha, ia, ja) {
  var ka = [], la = false, ma = false, na = (ha || []).filter(function(ua) {
   var va = ua.filter || i.ALL;
   return (ua.folder == ia || !ua.folder && ia == m.INBOX) && va == ja;
  }), oa = ga._threadlistOrderMap[ia][ja].getAllResources(), pa;
  na.forEach(function(ua) {
   ka = ka.concat(ua.thread_ids);
   if (ua.error) {
    if (ua.end > oa.length) ma = ua.error;
   } else {
    var va = ua.end - ua.start;
    if (ua.thread_ids.length < va) la = true;
   }
   if (!pa || ua.end > pa) pa = ua.end;
  });
  aa(ga, ka, ia, ja);
  if (la) {
   ga._threadlistOrderMap[ia][ja].setReachedEndOfArray();
  } else if (ma) {
   ga._threadlistOrderMap[ia][ja].setError(ma);
  } else {
   var qa = ga._threadlistOrderMap[ia][ja].getCurrentArraySize();
   if (pa && qa < pa) {
    var ra = {}, sa = oa.concat(ka), ta = sa.filter(function(ua) {
     var va = ra[ua];
     ra[ua] = true;
     return va;
    });
    if (ta.length) {
     t.warn("duplicate_threads", {
      folder: ia,
      expected_final_size: pa,
      actual_final_size: qa,
      duplicate_thread_ids: ta
     });
     ga._serverRequests.fetchThreadlistInfo(pa, ta.length, ia, ja == i.ALL ? null : ja);
    }
   }
  }
 }
 function x(ga, ha) {
  v.forEach(function(ia) {
   u.forEach(function(ja) {
    w(ga, ha, ia, ja);
   });
  });
 }
 function y(ga, ha) {
  var ia = {};
  v.forEach(function(ja) {
   ia[ja] = {};
   u.forEach(function(ka) {
    ia[ja][ka] = {
     to_add: [],
     to_remove: [],
     to_remove_if_last_after_add: {}
    };
   });
  });
  ha.forEach(function(ja) {
   if (ja.is_forward) return;
   var ka = ja.thread_id, la = ba(ga, ka), ma = ca(ga, ka);
   function na() {
    ma.forEach(function(pa) {
     ia[la][pa].to_add.push(ka);
     if (!ga._threadlistOrderMap[la][pa].hasReachedEndOfArray() && !ga._threadlistOrderMap[la][pa].hasResource(ka)) ia[la][pa].to_remove_if_last_after_add[ka] = true;
    });
   }
   function oa(pa) {
    if (r(u, pa)) if (r(ma, pa)) {
     ia[la][pa].to_add.push(ka);
    } else ia[la][pa].to_remove.push(ka);
   }
   if (!la) {
    if (ja.action_type === h.CHANGE_FOLDER || ja.action_type === h.CHANGE_ARCHIVED_STATUS) v.forEach(function(pa) {
     if (pa !== la) u.forEach(function(qa) {
      ga._threadlistOrderMap[pa][qa].removeResources([ ka ]);
     });
    });
    return;
   }
   switch (ja.action_type) {
   case h.DELETE_THREAD:
    ma.forEach(function(pa) {
     ia[la][pa].to_remove.push(ka);
    });
    break;

   case h.CHANGE_ARCHIVED_STATUS:
   case h.CHANGE_FOLDER:
    na();
    break;

   case h.CHANGE_READ_STATUS:
    oa(m.UNREAD);
    break;

   case h.USER_GENERATED_MESSAGE:
   case h.LOG_MESSAGE:
    ma.forEach(function(pa) {
     if (da(ga, ka, la, pa)) ia[la][pa].to_add.push(ka);
    });
    break;
   }
  });
  v.forEach(function(ja) {
   u.forEach(function(ka) {
    var la = ga._threadlistOrderMap[ja][ka];
    aa(ga, ia[ja][ka].to_add, ja, ka);
    for (var ma = la.getCurrentArraySize() - 1; ma >= 0; ma--) {
     var na = la.getResourceAtIndex(ma);
     if (!ia[ja][ka].to_remove_if_last_after_add[na]) break;
     ia[ja][ka].to_remove.push(na);
    }
    la.removeResources(ia[ja][ka].to_remove);
   });
  });
 }
 function z(ga, ha) {
  var ia = {};
  v.forEach(function(ja) {
   ia[ja] = {};
   u.forEach(function(ka) {
    ia[ja][ka] = [];
   });
  });
  ha.forEach(function(ja) {
   var ka = ba(ga, ja.thread_id), la = ca(ga, ja.thread_id);
   if (ka) la.forEach(function(ma) {
    if (da(ga, ja.thread_id, ka, ma)) ia[ka][ma].push(ja.thread_id);
   });
  });
  v.forEach(function(ja) {
   u.forEach(function(ka) {
    if (ia[ja][ka].length > 0) aa(ga, ia[ja][ka], ja, ka);
   });
  });
 }
 function aa(ga, ha, ia, ja) {
  ja = ja || i.ALL;
  ga._threadlistOrderMap[ia][ja].addResources(ha);
  v.forEach(function(ka) {
   if (ka != ia) ga._threadlistOrderMap[ka][ja].removeResources(ha);
  });
 }
 function ba(ga, ha) {
  var ia = ga._threads.getThreadMetaNow(ha), ja = null;
  if (!ia) {
   ja = "No thread metadata";
  } else if (!ia.folder) ja = "No thread folder";
  if (ja) {
   var ka = {
    error: ja,
    tid: ha
   };
   t.warn("no_thread_folder", ka);
   return null;
  }
  var la = ia.folder;
  if (ia.is_archived) la = m.ACTION_ARCHIVED;
  if (ga._threadlistOrderMap[la]) {
   return la;
  } else return null;
 }
 function ca(ga, ha) {
  var ia = ga._threads.getThreadMetaNow(ha), ja = [ i.ALL ];
  if (!ia) {
   var ka = {
    error: "no_thread_metadata",
    tid: ha
   };
   t.warn("no_thread_metadata", ka);
   return [];
  }
  if (ia.unread_count) ja.push(m.UNREAD);
  if (!ia.is_canonical) ja.push(m.GROUPS);
  return ja;
 }
 function da(ga, ha, ia, ja) {
  var ka = ga._threads.getThreadMetaNow(ha);
  return ka && ka.timestamp && ba(ga, ha) == ia && r(ca(ga, ha), ja);
 }
 function ea(ga) {
  this._fbid = ga;
  this._serverRequests = o.getForFBID(this._fbid);
  this._threadInformer = p.getForFBID(this._fbid);
  this._threads = q.getForFBID(this._fbid);
  this._threadlistOrderMap = {};
  v.forEach(function(ha) {
   this._threadlistOrderMap[ha] = {};
   u.forEach(function(ia) {
    this._threadlistOrderMap[ha][ia] = new n(function(ja) {
     return this._threads.getThreadMetaNow(ja).timestamp;
    }.bind(this), function(ja, ka) {
     return ka - ja;
    }, this._serverRequests.canLinkExternally.bind(this._serverRequests));
   }.bind(this));
  }.bind(this));
  this._serverRequests.subscribe("update-threadlist", function(ha, ia) {
   if (!fa(ia)) return;
   var ja = ia.ordered_threadlists;
   if (ja && ja.length) {
    x(this, ja);
   } else {
    var ka = (ia.actions || []).filter(function(la) {
     return la.thread_id;
    });
    z(this, ia.threads || []);
    y(this, ka);
   }
   this._threadInformer.updatedThreadlist();
  }.bind(this));
 }
 s(ea.prototype, {
  getThreadlist: function(ga, ha, ia, ja, ka, la) {
   return this.getFilteredThreadlist(ga, ha, ia, i.ALL, ja, ka, la);
  },
  getFilteredThreadlist: function(ga, ha, ia, ja, ka, la, ma) {
   var na = this._threadlistOrderMap[ia][ja], oa = na.executeOrEnqueue(ga, ha, ka, la), pa = na.getUnavailableResources(oa), qa = na.getError(ga, ha, la);
   if (pa.length || qa) {
    if (na.getCurrentArraySize() < ga) {
     var ra = {
      start: ga,
      limit: ha,
      filter: ja,
      resources_size: na.getCurrentArraySize()
     };
     t.warn("range_with_gap", ra);
    }
    na.setError(false);
    this._serverRequests.fetchThreadlistInfo(na.getCurrentArraySize(), pa.length, ia, ja == i.ALL ? null : ja, ma);
   }
   return oa;
  },
  getThreadlistUntilTimestamp: function(ga, ha, ia) {
   ia = ia || i.ALL;
   return this._threadlistOrderMap[ha][ia].getElementsUntil(ga);
  },
  getAvailableThreadlistNow: function(ga, ha) {
   ha = ha || i.ALL;
   return this._threadlistOrderMap[ga][ha].getAllResources();
  },
  getThreadCount: function(ga, ha) {
   ha = ha || i.ALL;
   return this._threadlistOrderMap[ga][ha].getCurrentArraySize();
  },
  hasLoadedThreadlist: function(ga, ha) {
   ha = ha || i.ALL;
   return this._threadlistOrderMap[ga][ha].hasReachedEndOfArray();
  },
  unsubscribe: function(ga, ha, ia) {
   ia = ia || i.ALL;
   this._threadlistOrderMap[ha][ia].unsubscribe(ga);
  }
 });
 s(ea, l);
 function fa(ga) {
  switch (ga.payload_source) {
  case k.CLIENT_CHANGE_ARCHIVED_STATUS:
  case k.CLIENT_CHANGE_READ_STATUS:
  case k.CLIENT_CHANGE_FOLDER:
  case k.CLIENT_CHANNEL_MESSAGE:
  case k.CLIENT_DELETE_MESSAGES:
  case k.CLIENT_DELETE_THREAD:
  case k.CLIENT_SEND_MESSAGE:
  case k.SERVER_SEND_MESSAGE:
  case k.SERVER_CONFIRM_MESSAGES:
  case k.SERVER_FETCH_THREADLIST_INFO:
  case k.SERVER_THREAD_SYNC:
   return true;

  case k.SERVER_INITIAL_DATA:
   return ga.ordered_threadlists;

  default:
   return false;
  }
 }
 e.exports = ea;
}, null);

__d("MercuryStateCheck", [ "Arbiter", "ChannelConstants", "MercuryFolders", "MessagingTag", "URI", "MercuryServerRequests" ], function(a, b, c, d, e, f, g, h, i, j, k) {
 b.__markCompiled && b.__markCompiled();
 var l = b("MercuryServerRequests").get(), m = false, n = {
  initialize: function() {
   if (m) return;
   g.subscribe(h.ON_INVALID_HISTORY, o);
   d([ "ChannelConnection" ], function(p) {
    p.subscribe(p.CONNECTED, function(q, r) {
     if (!r.init) o();
    });
   });
   m = true;
  }
 };
 function o() {
  var p;
  if (k.getRequestURI().getPath().search(/messages/) !== -1) {
   p = i.getSupportedFolders();
  } else p = [ j.INBOX ];
  l.fetchMissedMessages(p);
 }
 e.exports = n;
}, null);

__d("MercuryUnreadState", [ "MercuryFolders", "LogHistory", "KeyedCallbackManager", "MercuryActionType", "MercuryGlobalActionType", "MercurySingletonMixin", "MercuryThreadlistConstants", "MessagingTag", "MercuryServerRequests", "MercuryThreadInformer", "MercuryThreads", "arrayContains", "copyProperties", "createObjectFrom" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t) {
 b.__markCompiled && b.__markCompiled();
 var u = (g.getSupportedFolders() || []).filter(function(ma) {
  return ma != n.ACTION_ARCHIVED;
 }), v = "unread_thread_hash", w = "unseen_thread_list", x = m.MAX_UNREAD_COUNT, y = h.getInstance("mercury_unread_state");
 function z(ma) {
  this._fbid = ma;
  this._serverRequests = o.getForFBID(this._fbid);
  this._threadInformer = p.getForFBID(this._fbid);
  this._threads = q.getForFBID(this._fbid);
  this._allReadTimestamp = {};
  this._threadReadTimestamp = {};
  this._initialUnreadCount = {};
  this._maxCount = {};
  this._unreadResources = {};
  u.forEach(function(na) {
   this._initialUnreadCount[na] = 0;
   this._maxCount[na] = false;
   this._unreadResources[na] = new i();
  }.bind(this));
  this._serverRequests.subscribe("update-unread", function(na, oa) {
   ea(this, oa);
   var pa = oa.global_actions || [];
   for (var qa = 0; qa < pa.length; qa++) {
    var ra = pa[qa];
    if (ra.action_type == k.MARK_ALL_READ) ha(this, ra.folder, ra.timestamp);
   }
  }.bind(this));
  this._serverRequests.subscribe("update-thread-ids", function(na, oa) {
   ja(this, oa);
  }.bind(this));
 }
 s(z.prototype, {
  getUnreadCount: function(ma) {
   if (this.exceedsMaxCount(ma)) {
    y.error("unguarded_unread_count_fetch", {});
    return 0;
   }
   return da(this, ma);
  },
  exceedsMaxCount: function(ma) {
   return this._maxCount[ma] || da(this, ma) > x;
  },
  markFolderAsRead: function(ma) {
   if (this._maxCount[ma] || da(this, ma) > 0) this._serverRequests.markFolderAsRead(ma);
  }
 });
 s(z, l);
 function aa(ma, na, oa) {
  ma._unreadResources[na].setResource(v, oa);
  ma._unreadResources[na].setResource(w, Object.keys(oa));
 }
 function ba(ma, na, oa) {
  var pa = ma._unreadResources[na].executeOrEnqueue(v, oa), qa = ma._unreadResources[na].getUnavailableResources(pa);
  if (qa.length) ma._serverRequests.fetchUnreadThreadIDs(na);
 }
 function ca(ma, na) {
  return ma._unreadResources[na].getResource(v);
 }
 function da(ma, na) {
  var oa = ma._unreadResources[na].getResource(w);
  if (oa) {
   return oa.length;
  } else return ma._initialUnreadCount[na];
 }
 function ea(ma, na) {
  var oa;
  (na.unread_thread_fbids || []).forEach(function(pa) {
   oa = pa.folder;
   if (!la(oa)) return;
   var qa = pa.thread_fbids || [];
   qa = qa.concat(pa.other_user_fbids || []);
   var ra = ia(ma, qa);
   aa(ma, oa, t(ra, true));
   if (ra.length > x) ma._maxCount[oa] = true;
   ma._threadInformer.updatedUnreadState();
  });
  (na.message_counts || []).forEach(function(pa) {
   if (pa.unread_count === void 0) return;
   oa = pa.folder;
   if (pa.unread_count > x) {
    ma._maxCount[oa] = true;
    aa(ma, oa, {});
    ma._threadInformer.updatedUnreadState();
   } else {
    ma._initialUnreadCount[oa] = pa.unread_count;
    if (ma._initialUnreadCount[oa] === 0) aa(ma, oa, {});
    ma._threadInformer.updatedUnreadState();
   }
  });
  (na.actions || []).forEach(function(pa) {
   if (pa.is_forward) return;
   var qa = j, ra = pa.other_user_fbid ? pa.other_user_fbid : pa.thread_fbid, sa = pa.thread_id ? pa.thread_id : ra;
   if (pa.action_type == qa.DELETE_THREAD) {
    u.forEach(function(ua) {
     ga(ma, ua, sa);
    });
   } else if (pa.action_type == qa.CHANGE_ARCHIVED_STATUS || pa.action_type == qa.CHANGE_FOLDER) {
    var ta = ma._threads.getThreadMetaNow(pa.thread_id);
    oa = g.getFromMeta(ta);
    if (la(oa) && ta.unread_count > 0) fa(ma, oa, sa);
    u.forEach(function(ua) {
     if (ua != oa) ga(ma, ua, sa);
    });
   } else {
    oa = ka(ma, pa);
    if (!la(oa)) return;
    if (pa.action_type == qa.CHANGE_READ_STATUS) {
     if (pa.mark_as_read) {
      ga(ma, oa, sa, pa.timestamp);
     } else fa(ma, oa, sa, pa.timestamp);
    } else if (pa.action_type == qa.USER_GENERATED_MESSAGE || pa.action_type == qa.LOG_MESSAGE) if (pa.is_unread) fa(ma, oa, sa, pa.timestamp);
   }
  });
 }
 function fa(ma, na, oa, pa) {
  if (ma._maxCount[na]) return;
  ba(ma, na, function(qa) {
   var ra = ma._allReadTimestamp[na] || 0, sa = ma._threadReadTimestamp[oa] || 0, ta = pa || Number.POSITIVE_INFINITY;
   if (ta >= ra && ta >= sa && !qa[oa]) {
    qa[oa] = pa || 0;
    aa(ma, na, qa);
    ma._threadInformer.updatedUnreadState();
   }
  });
 }
 function ga(ma, na, oa, pa) {
  if (ma._maxCount[na]) return;
  ba(ma, na, function(qa) {
   if (pa) {
    var ra = ma._threadReadTimestamp[oa];
    if (!ra || ra < pa) ma._threadReadTimestamp[oa] = pa;
   }
   var sa = qa[oa];
   if (pa && typeof sa == "number" && pa < sa) return;
   if (oa in qa) {
    delete qa[oa];
    aa(ma, na, qa);
    ma._threadInformer.updatedUnreadState();
   }
  });
 }
 function ha(ma, na, oa) {
  ma._maxCount[na] = false;
  aa(ma, na, {});
  ma._allReadTimestamp[na] = Math.max(ma._allReadTimestamp[na] || 0, oa || 0);
  ma._threadInformer.updatedUnreadState();
 }
 function ia(ma, na) {
  return na.map(ma._serverRequests.convertThreadIDIfAvailable, ma._serverRequests);
 }
 function ja(ma, na) {
  u.forEach(function(oa) {
   var pa = ca(ma, oa);
   if (!pa) return;
   for (var qa in na) {
    var ra = na[qa];
    if (pa[qa]) {
     pa[ra] = pa[qa];
     delete pa[qa];
    }
   }
   aa(ma, oa, pa);
  });
 }
 function ka(ma, na) {
  var oa = na.thread_id ? ma._threads.getThreadMetaNow(na.thread_id) : null;
  return oa ? g.getFromMeta(oa) : na.folder;
 }
 function la(ma) {
  return r(u, ma);
 }
 e.exports = z;
}, null);

__d("MercuryUnseenState", [ "MercuryFolders", "KeyedCallbackManager", "LogHistory", "MercuryActionType", "MercurySingletonMixin", "MercuryThreadInfo", "MercuryThreadlistConstants", "MessagingTag", "MercuryServerRequests", "MercuryThreadInformer", "MercuryThreads", "copyProperties", "createObjectFrom", "isEmpty" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t) {
 b.__markCompiled && b.__markCompiled();
 var u = m.MAX_UNSEEN_COUNT, v = "unseen_thread_hash", w = "unseen_thread_list", x = i.getInstance("mercury_unseen_state");
 function y(na) {
  this._fbid = na;
  this._serverRequests = o.getForFBID(this._fbid);
  this._threads = q.getForFBID(this._fbid);
  this._threadInformer = p.getForFBID(this._fbid);
  this._initialUnseenCount = null;
  this._lastSeenTimestamp = 0;
  this._maxCount = false;
  this._pendingServerUpdates = false;
  this._unseenResources = new h();
  this._serverRequests.subscribe("update-unseen", function(oa, pa) {
   ea(this, pa);
  }.bind(this));
  this._serverRequests.subscribe("update-thread-ids", function(oa, pa) {
   ka(this, pa);
  }.bind(this));
 }
 r(y.prototype, {
  getUnseenCount: function() {
   if (this.exceedsMaxCount()) {
    x.error("unguarded_unseen_count_fetch", {});
    return 0;
   }
   return da(this) || 0;
  },
  exceedsMaxCount: function() {
   return this._maxCount || da(this) > u;
  },
  markAsSeen: function() {
   var na = da(this);
   if (na === null) {
    this._pendingServerUpdates = true;
   } else if (na > 0 || this._maxCount) {
    this._serverRequests.markSeen();
    var oa = this._serverRequests.getLastActionTimestamp();
    fa(this, oa, []);
   }
  }
 });
 r(y, k);
 function z(na, oa, pa) {
  var qa = {};
  qa[oa] = 0;
  ha(na, qa, pa);
 }
 function aa(na, oa) {
  na._unseenResources.setResource(v, oa);
  na._unseenResources.setResource(w, Object.keys(oa));
 }
 function ba(na, oa) {
  var pa = na._unseenResources.executeOrEnqueue(v, oa), qa = na._unseenResources.getUnavailableResources(pa);
  if (qa.length) na._serverRequests.fetchUnseenThreadIDs();
 }
 function ca(na) {
  return na._unseenResources.getResource(v);
 }
 function da(na) {
  var oa = na._unseenResources.getResource(w);
  if (oa) {
   return oa.length;
  } else return na._initialUnseenCount;
 }
 function ea(na, oa) {
  var pa = ma(oa);
  if (oa.unseen_thread_fbids) {
   oa.unseen_thread_fbids.forEach(function(ab) {
    if (ab.folder != n.INBOX) return;
    var bb = ab.thread_fbids || [];
    bb = bb.concat(ab.other_user_fbids || []);
    var cb = ja(na, bb), db = na._lastSeenTimestamp;
    if (pa && pa.seen_timestamp) db = pa.seen_timestamp;
    fa(na, db, cb);
    if (pa && pa.unseen_count > u) na._maxCount = true;
   });
  } else if (pa && pa.seen_timestamp) {
   na._lastSeenTimestamp = pa.seen_timestamp;
   if (pa.unseen_count > u) {
    na._maxCount = true;
    aa(na, {});
   } else {
    na._initialUnseenCount = pa.unseen_count;
    if (na._initialUnseenCount === 0) aa(na, {});
   }
  } else {
   if (na._maxCount) return;
   var qa = oa.actions;
   if (!qa || !qa.length) return;
   var ra = {}, sa = {};
   for (var ta = 0; ta < qa.length; ta++) {
    var ua = qa[ta];
    if (ua.is_forward) continue;
    var va = ua.action_type, wa = ua.other_user_fbid ? ua.other_user_fbid : ua.thread_fbid, xa = ua.thread_id ? ua.thread_id : wa;
    if (va == j.MARK_THREAD_SEEN) {
     z(na, xa, ua.persistent);
     continue;
    }
    if (!la(na, ua)) continue;
    if (va == j.USER_GENERATED_MESSAGE || va == j.LOG_MESSAGE) {
     var ya = ra[xa] ? ua.timestamp > ra[xa] : false, za = ya || !ra[xa];
     if (ua.is_unread && za) na._threads.getThreadMeta(xa, function(ab) {
      var bb = false;
      if (ab && ab.last_read_timestamp) if (ab.last_read_timestamp >= ua.timestamp) bb = true;
      if (!l.isMuted(ab) && !bb) ra[xa] = ua.timestamp;
     });
    } else if (va == j.CHANGE_READ_STATUS && ua.mark_as_read) sa[xa] = ua.timestamp;
   }
   ga(na, ra);
   ha(na, sa);
  }
  if (na._pendingServerUpdates) {
   na._pendingServerUpdates = false;
   na.markAsSeen();
  }
 }
 function fa(na, oa, pa) {
  var qa = ca(na);
  if (qa === void 0 || oa > na._lastSeenTimestamp || na._maxCount) {
   na._lastSeenTimestamp = oa;
   pa = pa || [];
   if (pa.length <= u) na._maxCount = false;
   var ra = {}, sa = ca(na) || {};
   for (var ta in sa) if (sa[ta] !== true) {
    var ua = sa[ta];
    if (ia(na, ua)) ra[ta] = ua;
   }
   var va = r(s(pa, true), ra);
   aa(na, va);
   na._threadInformer.updatedUnseenState();
  }
 }
 function ga(na, oa) {
  if (na._maxCount) return;
  var pa = {}, qa = false;
  for (var ra in oa) {
   var sa = oa[ra];
   if (ia(na, sa)) {
    pa[ra] = sa;
    qa = true;
   }
  }
  if (!qa) return;
  ba(na, function(ta) {
   for (var ua in pa) {
    var va = pa[ua];
    if (!ta[ua] && ia(na, va)) ta[ua] = pa[ua];
   }
   aa(na, ta);
   na._threadInformer.updatedUnseenState();
  });
 }
 function ha(na, oa, pa) {
  var qa = false;
  if (!t(oa)) qa = true;
  if (qa) ba(na, function(ra) {
   var sa = false;
   for (var ta in oa) {
    var ua = oa[ta], va = ua > ra[ta];
    if (ra[ta] && (!ua || va)) {
     delete ra[ta];
     sa = true;
    }
   }
   if (sa) {
    aa(na, ra);
    na._threadInformer.updatedUnseenState();
    if (pa && da(na) === 0) na._serverRequests.markSeen();
   }
  });
 }
 function ia(na, oa) {
  return oa > na._lastSeenTimestamp;
 }
 function ja(na, oa) {
  return oa.map(na._serverRequests.convertThreadIDIfAvailable, na._serverRequests);
 }
 function ka(na, oa) {
  var pa = ca(na);
  if (!pa) return;
  for (var qa in oa) {
   var ra = oa[qa];
   if (pa[qa]) {
    pa[ra] = pa[qa];
    delete pa[qa];
   }
  }
  aa(na, pa);
 }
 function la(na, oa) {
  var pa = oa.thread_id ? na._threads.getThreadMetaNow(oa.thread_id) : null, qa = pa ? g.getFromMeta(pa) : oa.folder;
  return qa === n.INBOX || qa === void 0;
 }
 function ma(na) {
  var oa = na.message_counts || [];
  for (var pa = 0; pa < oa.length; pa++) if (oa[pa].folder == n.INBOX) return oa[pa];
  return null;
 }
 e.exports = y;
}, null);

__d("MercuryNotificationRenderer", [ "MercuryAssert", "MercuryParticipants", "MercuryViewer", "fbt", "MercuryMessages", "MercuryThreads" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 var k = b("MercuryMessages").get(), l = b("MercuryThreads").get();
 function m(n, o) {
  g.isThreadID(n);
  l.getThreadMeta(n, function(p) {
   k.getThreadMessagesRange(n, 0, 1, function(q) {
    var r = q.length && q[q.length - 1];
    if (r && r.author != i.getID()) {
     h.get(r.author, function(s) {
      if (p.name) {
       o(j._("{senderName} messaged {groupName}", [ j.param("senderName", s.short_name), j.param("groupName", p.name) ]));
      } else o(j._("{name} messaged you", [ j.param("name", s.short_name) ]));
     });
    } else o(j._("New message!"));
   });
  });
 }
 e.exports = {
  renderDocumentTitle: m
 };
}, null);

__d("MercuryThreadMetadataRawRenderer", [ "Event", "CSS", "DOM", "MercuryActionStatus", "MercuryErrorInfo", "MercuryStatusTemplates", "Tooltip", "cx", "fbt" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
 b.__markCompiled && b.__markCompiled();
 var p = {
  renderParticipantListWithNoThreadName: function(q, r, s, t, u, v) {
   var w = {
    callback: true,
    check_length: true,
    show_unread_count: true
   };
   v = v || {};
   var x = {};
   for (var y in v) if (w[y]) {
    x[y] = v[y];
    delete v[y];
   }
   var z = s.map(function(ea) {
    return t[ea];
   }), aa = this.renderRawParticipantList(q, z, s.length, v);
   aa = this.renderRawTitleWithUnreadCount(aa, x.show_unread_count ? r.unread_count : 0);
   var ba = v.abbr_mode, ca = {};
   for (var da in v) ca[da] = v[da];
   ca.abbr_mode = true;
   u.forEach(function(ea) {
    var fa = u.length > 1 ? this._cloneIfDOMElement(aa) : aa;
    i.setContent(ea, fa);
    if (x.check_length && !ba && ea.scrollWidth > ea.clientWidth) {
     var ga = this.renderRawParticipantList(q, z, s.length, ca), ha = this.renderRawTitleWithUnreadCount(ga, x.show_unread_count ? r.unread_count : 0);
     i.setContent(ea, ha);
    }
   }.bind(this));
   x.callback && x.callback(aa);
  },
  renderRawParticipantList: function(q, r, s, t) {
   var u = {
    abbr_mode: true,
    last_separator_uses_and: true,
    names_renderer: true
   };
   t = t || {};
   var v = null;
   if (t.names_renderer) {
    v = t.names_renderer(r);
   } else v = r.map(function(x) {
    return x.name;
   });
   var w = null;
   if (v.length === 0) {
    if (!q) {
     w = o._("New Message");
    } else w = o._("No Participants");
   } else if (v.length == 1) {
    w = v[0];
   } else if (v.length == 2) {
    if (t.last_separator_uses_and) {
     w = o._("{participant1} and {participant2}", [ o.param("participant1", v[0]), o.param("participant2", v[1]) ]);
    } else w = o._("{participant1}, {participant2}", [ o.param("participant1", v[0]), o.param("participant2", v[1]) ]);
   } else if (t.last_separator_uses_and) {
    if (t.abbr_mode) {
     w = o._("{participant1} and {others_link}", [ o.param("participant1", v[0]), o.param("others_link", this.renderRawParticipantCount({
      render_subset: true,
      count: s - 1
     })) ]);
    } else if (v.length == 3) {
     w = o._("{participant1}, {participant2} and {participant3}", [ o.param("participant1", v[0]), o.param("participant2", v[1]), o.param("participant3", v[2]) ]);
    } else w = o._("{participant1}, {participant2} and {others_link}", [ o.param("participant1", v[0]), o.param("participant2", v[1]), o.param("others_link", this.renderRawParticipantCount({
     render_subset: true,
     count: s - 2
    })) ]);
   } else if (v.length == 3) {
    w = o._("{participant1}, {participant2}, {participant3}", [ o.param("participant1", v[0]), o.param("participant2", v[1]), o.param("participant3", v[2]) ]);
   } else w = o._("{participant1}, {participant2}, {participant3}, {others_link}", [ o.param("participant1", v[0]), o.param("participant2", v[1]), o.param("participant3", v[2]), o.param("others_link", this.renderRawParticipantCount({
    render_subset: true,
    count: s - 3
   })) ]);
   if (Array.isArray(w)) w = i.create("span", {}, w);
   return w;
  },
  renderRawTitleWithUnreadCount: function(q, r) {
   var s = q;
   if (r && r > 1) s = i.create("span", {}, o._("{conversation_title} ({unread_count})", [ o.param("conversation_title", q), o.param("unread_count", r) ]));
   return s;
  },
  renderRawParticipantCount: function(q) {
   var r = q.render_subset, s;
   if (!r) {
    s = q.count > 1 ? o._({
     "*": "{num} people"
    }, [ o.param("num", q.count, [ 0 ]) ]) : o._("1 person");
   } else s = q.count > 1 ? o._({
    "*": "{others_count} others"
   }, [ o.param("others_count", q.count, [ 0 ]) ]) : o._("1 other");
   return s;
  },
  renderShortNames: function(q) {
   if (q.length == 1) return [ q[0].name ];
   return q.map(function(r) {
    return r.short_name;
   });
  },
  renderStatusIndicator: function(q, r, s) {
   var t;
   if (q == j.RESENDING) {
    t = this.renderResendIndicator();
   } else if (q !== void 0 && q != j.UNSENT && q != j.UNCONFIRMED && q != j.SUCCESS) t = this.renderErrorIndicator(r, s);
   return t;
  },
  renderResendIndicator: function() {
   return l[":fb:mercury:resend-indicator"].render();
  },
  renderErrorIndicator: function(q, r) {
   if (!q) return null;
   var s = l[":fb:mercury:error-indicator"].render(), t = q.is_transient, u = k.getMessage(q);
   if (t) if (k.isConnectionError(q)) {
    u = o._("{message} Check your internet connection and click to try again.", [ o.param("message", u) ]);
   } else u = o._("{message} Click to send again.", [ o.param("message", u) ]);
   m.set(s, u, "above", "center");
   if (r && t) {
    g.listen(s, "click", r);
    s.setAttribute("tabindex", "0");
    h.addClass(s, "_55q-");
   }
   return s;
  },
  _cloneIfDOMElement: function(q) {
   if (q && q.cloneNode) {
    return q.cloneNode();
   } else return q;
  }
 };
 e.exports = p;
}, null);

__d("MercuryMessageGroup", [ "MercuryActionType", "MercuryAttachment", "MercuryShareAttachmentRenderLocations", "MercuryThreadlistConstants", "toIterator" ], function(a, b, c, d, e, f, g, h, i, j, k) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var l = {
  calculateMessageGroups: function(o, p) {
   var q = [], r = null, s = {
    value: null
   }, t = k(o), u;
   while (!(u = t.next()).done) {
    var v = l.canAppendMessageToLastGroup(s.value, u.value, p);
    if (!v) {
     r = [];
     q.push(r);
    }
    r.push(u.value);
    s = u;
   }
   return q;
  },
  canAppendMessageToLastGroup: function(o, p, q) {
   var r = j.GROUPING_THRESHOLD;
   if (!o || m(o, q) || m(p, q) || o.author != p.author || o.timestamp < p.timestamp - r || o.is_spoof_warning !== p.is_spoof_warning) return false;
   return true;
  }
 };
 function m(o, p) {
  var q = o.has_attachment;
  if (p === i.MESSENGER) q = n(o);
  return !!(o.action_type == g.LOG_MESSAGE || q || o.forward_count || o.html_body || o.body && o.body.length > j.MAX_CHARS_BEFORE_BREAK);
 }
 function n(o) {
  var p = o.attachments;
  if (p && p.length === 1) {
   var q = p[0];
   return !q.metadata || !h.isVoiceMessage(q.metadata.type);
  }
  return !!o.has_attachment;
 }
 e.exports = l;
}, null);

__d("PhotoStore", [ "Arbiter", "PhotoStoreCore" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 g.subscribe("update-photos", function(i, j) {
  h.updateData(j);
 });
 e.exports = h;
}, null);

__d("MessagingRecipientTypeaheadItem.react", [ "BackgroundImage.react", "ChatTypeaheadConstants", "ImageBlock.react", "LeftRight.react", "React", "SplitImage.react", "MercuryThreadMetadataRawRenderer", "TypeaheadViewItem", "cx", "joinClasses" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {
 b.__markCompiled && b.__markCompiled();
 var q = k, r = q.PropTypes, s = k.createClass({
  displayName: "MessagingRecipientTypeaheadItem",
  propTypes: Object.assign({}, n.propTypes, {
   imageSize: r.number.isRequired
  }),
  mixins: [ n.Mixin ],
  isThreadRecipient: function() {
   return this.props.entry.getType() === h.THREAD_TYPE;
  },
  _getImage: function() {
   var t = this.props.entry;
   if (t.getType() === h.THREAD_TYPE && !t.getPhoto()) {
    var u = t.getAuxiliaryData();
    return k.createElement(l, {
     size: this.props.imageSize,
     srcs: u.participantsToRender.map(function(v) {
      return v.image_src;
     })
    });
   }
   if (t.getPhoto()) return k.createElement(g, {
    width: this.props.imageSize,
    height: this.props.imageSize,
    backgroundSize: "cover",
    src: t.getPhoto()
   });
   return k.createElement("span", null);
  },
  _getThreadParticipantList: function() {
   if (!this.isThreadRecipient()) return null;
   var t = this.props.entry;
   return m.renderRawParticipantList(t.getUniqueID(), t.getAuxiliaryData().participantsToRender, t.getAuxiliaryData().thread.participants.length - 1, {
    names_renderer: m.renderShortNames
   });
  },
  _getTitle: function() {
   var t = this.props.entry;
   if (this.isThreadRecipient() && !t.getTitle()) return this._getThreadParticipantList();
   return t.getTitle();
  },
  _getSubtitle: function() {
   var t = this.props.entry;
   if (this.isThreadRecipient() && !t.getTitle()) return this._getThreadParticipantList();
   return t.getSubtitle() ? t.getSubtitle().split(" · ")[0] : null;
  },
  render: function() {
   var t = this._getSubtitle(), u = p("_599m" + (" " + "_55xn") + (!t ? " " + "_5mne" : "") + (this.props.highlighted ? " " + "_599n" : ""), this.props.className);
   return k.createElement("li", {
    "aria-selected": this.props.selected,
    className: u,
    onMouseDown: this._onSelect,
    onMouseEnter: this._onHighlight,
    role: this.props.role
   }, k.createElement(i, {
    spacing: "medium"
   }, this._getImage(), k.createElement(j, null, k.createElement("div", null, k.createElement("div", {
    className: "_55xt _599p"
   }, this._getTitle()), k.createElement("div", {
    className: "_55z3 _599q"
   }, t)), this.props.children)));
  }
 });
 e.exports = s;
}, null);

__d("MessagingRecipientSelectedList.react", [ "Image.react", "LeftRight.react", "Map", "MessagingRecipientTypeaheadItem.react", "React", "cx", "fbt", "xuiglyph" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n) {
 b.__markCompiled && b.__markCompiled();
 var o = k, p = o.PropTypes, q = k.createClass({
  displayName: "MessagingRecipientSelectedList",
  propTypes: {
   entries: p.instanceOf(i),
   onSelect: p.func.isRequired
  },
  _renderSelectedEntry: function(r) {
   var s = n({
    name: "cross",
    shade: "dark",
    size: "small"
   });
   return k.createElement(j, {
    key: r.getUniqueID(),
    entry: r,
    imageSize: 24,
    onSelect: this.props.onSelect
   }, k.createElement(g, {
    className: "_1jm4",
    src: s
   }));
  },
  render: function() {
   var r = m._("Selected"), s = [];
   this.props.entries.forEach(function(t) {
    return s.push(this._renderSelectedEntry(t));
   }.bind(this));
   return k.createElement("div", {
    className: "_1jm5"
   }, k.createElement(h, {
    className: "_1jm6 _2ph-"
   }, k.createElement("span", null, r), k.createElement("span", null, this.props.entries.size)), k.createElement("ul", null, s));
  }
 });
 e.exports = q;
}, null);

__d("MessagingRecipientTypeaheadView.react", [ "CenteredContainer.react", "Link.react", "Map", "MessagingRecipientTypeaheadItem.react", "React", "TypeaheadViewPropTypes", "XUISpinner.react", "cx", "fbt" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
 b.__markCompiled && b.__markCompiled();
 var p = k, q = p.PropTypes, r = 32, s = k.createClass({
  displayName: "MessagingRecipientTypeaheadView",
  propTypes: Object.assign({}, l, {
   selectedEntries: q.instanceOf(i),
   loading: q.bool
  }),
  getDefaultProps: function() {
   return {
    role: "listbox"
   };
  },
  _renderItem: function(t) {
   var u = t === this.props.highlightedEntry, v = this.props.selectedEntries.has(t.getUniqueID());
   return k.createElement(j, {
    key: t.getUniqueID(),
    entry: t,
    highlighted: u,
    imageSize: r,
    selected: v,
    onSelect: this.props.onSelect,
    onHighlight: this.props.onHighlight,
    onRenderHighlight: this.props.onRenderHighlight
   }, k.createElement(h, {
    "aria-checked": v,
    className: "_3hqy" + (v ? " " + "_3hqz" : "") + (!v ? " " + "_3hq-" : ""),
    href: "#",
    role: "checkbox",
    tabIndex: "0"
   }));
  },
  render: function() {
   if (this.props.entries.length === 0 && !this.props.loading) return k.createElement(g, {
    className: "_2pi1"
   }, o._("No results"));
   return k.createElement("ul", {
    id: this.props.ariaOwneeID,
    className: "_51do",
    role: this.props.role
   }, this.props.entries.map(this._renderItem), k.createElement("div", {
    className: "_51dq"
   }, this.props.loading ? k.createElement(m, null) : null));
  }
 });
 e.exports = s;
}, null);

__d("XMessagingForwardAttachmentController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/mercury/attachments/forward/", {});
}, null);

__d("MessagingForwardAttachmentDialog.react", [ "AsyncRequest", "ChatMiniSidebarSearchSource", "Image.react", "LayerFadeOnHide", "Layout.react", "Map", "MessagingRecipientSelectedList.react", "MessagingRecipientTypeaheadView.react", "OrderedFriendsList", "React", "SearchableTextInput.react", "ScrollableArea.react", "XMessagingForwardAttachmentController", "XUIDialog.react", "XUIDialogBody.react", "XUIDialogButton.react", "XUIDialogCancelButton.react", "XUIDialogFooter.react", "XUIDialogTitle.react", "XUISpinner.react", "cx", "fbt", "xuiglyph" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, aa, ba, ca) {
 b.__markCompiled && b.__markCompiled();
 var da = k.Column, ea = k.FillColumn, fa = p, ga = fa.PropTypes, ha = p.createClass({
  displayName: "MessagingForwardAttachmentDialog",
  propTypes: {
   attachmentID: ga.string.isRequired,
   onClose: ga.func,
   shown: ga.bool.isRequired,
   title: ga.string.isRequired
  },
  getInitialState: function() {
   return {
    bootstrappedEntries: [],
    entries: [],
    loading: true,
    selectedEntries: new l(),
    sendError: null,
    sending: false,
    startingThreadingID: Date.now(),
    query: ""
   };
  },
  componentDidMount: function() {
   this._dataSource = new h({
    queryRequests: [ {
     uri: "/ajax/mercury/composer_query.php"
    } ]
   });
   o.getSearchableEntries(20, function(ia) {
    this.setState({
     bootstrappedEntries: ia,
     loading: false
    });
   }.bind(this));
  },
  _onSelectEntry: function(ia) {
   var ja = ia.getUniqueID(), ka = new l(this.state.selectedEntries);
   if (ka.has(ja)) {
    ka["delete"](ja);
   } else ka.set(ja, ia);
   this.setState({
    selectedEntries: ka
   });
  },
  _onSearchChange: function(ia) {
   var ja = ia.target.value;
   this.setState({
    loading: true,
    query: ja
   });
  },
  _onSearchEntriesFound: function(ia) {
   this.setState({
    entries: ia
   });
  },
  _onSearchFinished: function(ia) {
   ia === this.state.query && this.setState({
    loading: false
   });
  },
  _onSubmit: function() {
   var ia = {}, ja = this.state.startingThreadingID;
   this.state.selectedEntries.forEach(function(la) {
    ia[ja++] = la.getUniqueID();
   });
   var ka = s.getURIBuilder().getURI();
   new g(ka).setMethod("POST").setHandler(this._onSubmitResponse).setData({
    attachment_id: this.props.attachmentID,
    recipient_map: ia
   }).send();
   this.setState({
    sending: true,
    sendError: null
   });
  },
  _onSubmitResponse: function(ia) {
   if (ia.payload.success) {
    this.props.onClose && this.props.onClose();
    this.setState({
     bootstrappedEntries: [],
     selectedEntries: new l(),
     sending: false,
     startingThreadID: Date.now(),
     query: ""
    });
    return;
   }
   this.setState({
    sending: false,
    sendError: ia.payload.error
   });
  },
  render: function() {
   var ia = ba._("Send Message");
   if (this.state.selectedEntries.size > 1) ia = ba._("Send Messages");
   var ja = null;
   if (this.state.sending) {
    ja = p.createElement("div", null, p.createElement(z, null), p.createElement("span", {
     className: "_5s0d _3-99"
    }, ba._("Sending")));
   } else if (this.state.sendError) {
    var ka = ca({
     name: "error-solid",
     shade: "dark",
     size: "medium"
    });
    ja = p.createElement("div", {
     className: "_5s0d"
    }, p.createElement(i, {
     src: ka
    }), p.createElement("span", {
     className: "_3-99"
    }, this.state.sendError));
   }
   return p.createElement(t, {
    shown: this.props.shown,
    behaviors: {
     LayerFadeOnHide: j
    },
    width: 560
   }, p.createElement(y, null, this.props.title), p.createElement(u, {
    useCustomPadding: true
   }, p.createElement(k, null, p.createElement(da, {
    className: "_5s0e"
   }, p.createElement("div", {
    className: "_2ph_"
   }, p.createElement(q, {
    className: "_5s0f",
    onChange: this._onSearchChange,
    onEntriesFound: this._onSearchEntriesFound,
    placeholder: ba._("Search"),
    queryString: this.state.query,
    searchSource: this._dataSource,
    searchSourceOptions: {
     onQueryFinished: this._onSearchFinished
    }
   })), p.createElement(r, {
    className: "_5s0g",
    fade: true,
    height: 400,
    width: 360
   }, p.createElement(n, {
    entries: this.state.query ? this.state.entries : this.state.bootstrappedEntries,
    loading: this.state.loading,
    selectedEntries: this.state.selectedEntries,
    onSelect: this._onSelectEntry
   }))), p.createElement(ea, {
    className: "_5s0h"
   }, p.createElement(r, {
    fade: true,
    height: 457,
    shadow: false
   }, p.createElement(m, {
    entries: this.state.selectedEntries,
    onSelect: this._onSelectEntry
   }))))), p.createElement(x, {
    leftContent: ja
   }, p.createElement(w, null), p.createElement(v, {
    use: "confirm",
    disabled: !this.state.selectedEntries.size || this.state.sending,
    label: ia,
    onClick: this._onSubmit
   })));
  }
 });
 e.exports = ha;
}, null);

__d("SpotlightViewer", [ "React", "ReactLayeredComponentMixin", "Spotlight.react", "cx" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 var k = g.createClass({
  displayName: "SpotlightViewer",
  mixins: [ h ],
  renderLayers: function() {
   if (!this.props.open) return null;
   var l = "_n3";
   if (this.props.className) l += " " + this.props.className;
   return {
    photoLayer: g.createElement(i, {
     onBeforeHide: this.props.onBeforeHide,
     onHide: this.props.onHide,
     rootClassName: this.props.rootClassName,
     shown: this.props.open
    }, g.createElement("div", {
     className: l,
     onClick: this.props.onClick
    }, this.props.children))
   };
  },
  render: function() {
   return g.createElement("div", null);
  }
 });
 e.exports = k;
}, null);

__d("SpotlightViewerAutoResize", [ "Event", "SubscriptionsHandler", "invariant" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 function j(k) {
  "use strict";
  this.$SpotlightViewerAutoResize0 = k;
  i(typeof this.$SpotlightViewerAutoResize0.onResize === "function");
 }
 j.prototype.enable = function() {
  "use strict";
  this.$SpotlightViewerAutoResize1 = new h();
  this.$SpotlightViewerAutoResize1.addSubscriptions(g.listen(window, "resize", this.$SpotlightViewerAutoResize0.onResize));
 };
 j.prototype.disable = function() {
  "use strict";
  this.$SpotlightViewerAutoResize1.release();
  delete this.$SpotlightViewerAutoResize1;
 };
 e.exports = j;
}, null);

__d("SpotlightViewerBehaviorsMixin", [ "BehaviorsMixin", "copyProperties" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 var i = {
  componentWillMount: function() {
   this.behaviors && this.enableBehaviors(this.behaviors);
  },
  componentWillUnmount: function() {
   this.destroyBehaviors();
  }
 };
 h(i, g);
 e.exports = i;
}, null);

__d("SpotlightViewerBottomBar", [ "LeftRight.react", "React", "cx", "joinClasses" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 var k = h.createClass({
  displayName: "SpotlightViewerBottomBar",
  render: function() {
   var l = Array.isArray(this.props.children) ? this.props.children : [ this.props.children ], m = "_4_8n _51an";
   if (this.props.className) m = j(m, this.props.className);
   if (l.length === 1) return h.createElement("div", {
    className: m
   }, l[0]);
   m = j(m, "_50-m");
   return h.createElement(g, {
    className: m
   }, l[0], l[1]);
  }
 });
 e.exports = k;
}, null);

__d("SpotlightViewerBottomBarLink", [ "Link.react", "React", "cx" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 var j = h.createClass({
  displayName: "SpotlightViewerBottomBarLink",
  render: function() {
   return h.createElement(g, h.__spread({}, this.props, {
    className: "_4_8j _4_8k"
   }), this.props.children);
  }
 });
 e.exports = j;
}, null);

__d("SpotlightViewerClose", [ "React", "TooltipLink.react", "cx", "fbt", "joinClasses" ], function(a, b, c, d, e, f, g, h, i, j, k) {
 b.__markCompiled && b.__markCompiled();
 var l = g, m = l.PropTypes, n = g.createClass({
  displayName: "SpotlightViewerClose",
  propTypes: {
   position: m.oneOf([ "left", "right" ])
  },
  getDefaultProps: function() {
   return {
    position: "right"
   };
  },
  render: function() {
   var o = this.props.position == "left" ? "_5wx3" : "_5wx4", p = g.createElement("span", null, j._("Press Esc to close"));
   return g.createElement(h, {
    className: k("_4-o9 _50-m _51an", o),
    onClick: this.props.onClick,
    tooltip: p
   });
  }
 });
 e.exports = n;
}, null);

__d("PhotoLogger", [ "Event", "BanzaiScuba", "SpotlightViewerLoggingEvents", "SubscriptionsHandler" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 function k(l) {
  "use strict";
  this.$PhotoLogger0 = l;
  this.$PhotoLogger1 = {};
 }
 k.prototype.log = function(l) {
  "use strict";
  if (!this.$PhotoLogger1[l]) {
   this.$PhotoLogger2(l);
   this.$PhotoLogger1[l] = true;
  }
 };
 k.prototype.$PhotoLogger2 = function(l) {
  "use strict";
  this.$PhotoLogger3(i.LOADING, {
   uri: l
  });
  var m = new j(), n = new Image();
  m.addSubscriptions(g.listen(n, "load", function() {
   this.$PhotoLogger3(i.LOADED, {
    uri: l
   });
   m.release();
  }.bind(this)), g.listen(n, "error", function() {
   this.$PhotoLogger3(i.ERROR, {
    uri: l
   });
   m.release();
  }.bind(this)), g.listen(n, "abort", function() {
   this.$PhotoLogger3(i.ABORT, {
    uri: l
   });
   m.release();
  }.bind(this)));
  n.src = l;
 };
 k.prototype.logEvent = function(l) {
  "use strict";
  this.$PhotoLogger3(l);
 };
 k.prototype.$PhotoLogger3 = function(l, m) {
  "use strict";
  var n = new h("photos_client_loading", null, {
   addBrowserFields: true
  });
  n.addNormal("event", l);
  n.addNormal("viewer", this.$PhotoLogger0);
  for (var o in m) n.addNormal(o, m[o]);
  n.post();
 };
 e.exports = k;
}, null);

__d("PhotoUtils", [ "Event", "URI" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 var i = {
  getImagesFromData: function(j) {
   var k = [];
   for (var l in j) if (l.indexOf("image") === 0) k.push(j[l]);
   return k;
  },
  getFBIDFromData: function(j) {
   return j && j.id;
  },
  getOriginalImageFromData: function(j) {
   return j.original || j.download_image;
  },
  getDownloadURLFromData: function(j) {
   var k = this.getOriginalImageFromData(j);
   if (!k) return null;
   var l = new h(k.uri);
   l.addQueryData({
    dl: 1
   });
   return l;
  },
  getPermalinkFromData: function(j) {
   return j.permalink;
  },
  canViewerMakeCoverPhoto: function(j) {
   return !!j.can_viewer_make_cover_photo;
  },
  getCoverPhotoURLFromData: function(j) {
   return new h("/profile.php").addQueryData({
    preview_cover: i.getFBIDFromData(j)
   });
  },
  preload: function(j, k, l) {
   var m = j.getDimensions();
   for (var n = 0; n < k.length; ++n) {
    var o = m.getBestFitImageFromPhoto(k[n], m.getMaxStageDimensions()), p = new Image();
    l && g.listen(p, "load", l.bind(null, k[n]));
    j.getLogger().log(o.uri);
    p.src = o.uri;
   }
  }
 };
 e.exports = i;
}, null);

__d("PhotoViewState", [ "ArbiterMixin", "PhotoStore", "PhotoUtils", "SpotlightViewerLoggingEvents", "copyProperties", "mixin" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 var m = l(g);
 for (var n in m) if (m.hasOwnProperty(n)) p[n] = m[n];
 var o = m === null ? null : m.prototype;
 p.prototype = Object.create(o);
 p.prototype.constructor = p;
 p.__superConstructor__ = m;
 function p(q, r, s, t, u) {
  "use strict";
  this._viewer = q;
  this._setID = r;
  this._updateCallback = t;
  this._position = s || 0;
  this._preloaded = {};
  this._reverse = u;
 }
 p.prototype._fetchCallback = function(q) {
  "use strict";
  if (!this._viewer.isOpen()) return;
  this._preload(q);
  this._log(j.DATA_FETCH_COMPLETE);
 };
 p.prototype._preload = function(q) {
  "use strict";
  i.preload(this._viewer, q, function(r) {
   this._preloaded[i.getFBIDFromData(r)] = true;
  }.bind(this));
 };
 p.prototype._preloadPhotosInRange = function(q, r) {
  "use strict";
  var s = [];
  for (var t = q; t <= r; ++t) {
   var u = h.getByIndexImmediate(this._setID, t);
   if (u && !this._isPreloaded(u)) s.push(u);
  }
  this._preload(s);
 };
 p.prototype._isPreloaded = function(q) {
  "use strict";
  return this._preloaded[i.getFBIDFromData(q)];
 };
 p.prototype.getPosition = function() {
  "use strict";
  return this._position;
 };
 p.prototype.isValidMovement = function(q) {
  "use strict";
  if (!h.hasBeenCreated(this._setID)) return false;
  if (h.hasLooped(this._setID)) return true;
  var r = this._position + q, s = h.getAvailableRange(this._setID), t = s.offset + s.length - 1;
  return r >= s.offset - 1 && r <= t + 1;
 };
 p.prototype.getRelativeMovement = function(q) {
  "use strict";
  return h.getIndexForID(this._setID, q) - this._position;
 };
 p.prototype.moveCursor = function(q) {
  "use strict";
  if (!this.isValidMovement(q)) return false;
  this._position += q;
  return true;
 };
 p.prototype._page = function(q) {
  "use strict";
  if (!this.moveCursor(q)) return;
  this._log(j.PAGE_BEGIN);
  var r = h.getByIndexImmediate(this._setID, this._position);
  if (!r) {
   this.inform("photo_fetch");
   this._log(j.PHOTO_FETCH);
  } else if (!this._isPreloaded(r)) this._preload([ r ]);
  h.getByIndex(this._setID, this._position, this._updateCallback);
  this._loadMoreIfNecessary(q > 0, p.BUFFER_SIZE);
  this._log(j.PAGE_COMPLETE);
 };
 p.prototype.loadMoreForwardIfNecessary = function(q) {
  "use strict";
  var r = h.getAvailableRange(this._setID), s = r.offset + r.length - 1, t = this._position + q;
  if (t > s && !h.hasLooped(this._setID)) {
   var u = h.getCursorByIndexImmediate(this._setID, s);
   h.fetchForward(this._setID, u, q, this._fetchCallback.bind(this));
  } else this._preloadPhotosInRange(this._position + 1, t);
 };
 p.prototype.loadMoreBackwardIfNecessary = function(q) {
  "use strict";
  var r = h.getAvailableRange(this._setID), s = this._position - q;
  if (s < r.offset && !h.hasLooped(this._setID)) {
   var t = h.getCursorByIndexImmediate(this._setID, r.offset);
   h.fetchBackward(this._setID, t, q, this._fetchCallback.bind(this));
  } else this._preloadPhotosInRange(s, this._position - 1);
 };
 p.prototype._loadMoreIfNecessary = function(q, r) {
  "use strict";
  if (q) {
   this.loadMoreForwardIfNecessary(r);
  } else this.loadMoreBackwardIfNecessary(r);
 };
 p.prototype.displayFirst = function() {
  "use strict";
  if (!this._viewer.isOpen()) return;
  h.setPreFetchCallback(this._setID, function() {
   this._log(j.DATA_FETCH_BEGIN);
  }.bind(this));
  var q = function(r) {
   if (!this._isPreloaded(r)) this._preload([ r ]);
   this._updateCallback(r);
  }.bind(this);
  h.getByIndex(this._setID, this._position, q);
  if (this._reverse) {
   this.loadMoreBackwardIfNecessary(p.BUFFER_SIZE);
  } else this.loadMoreForwardIfNecessary(p.BUFFER_SIZE);
 };
 p.prototype.backward = function() {
  "use strict";
  this._page(this._reverse ? 1 : -1);
 };
 p.prototype.forward = function() {
  "use strict";
  this._page(this._reverse ? -1 : 1);
 };
 p.prototype._log = function(q) {
  "use strict";
  this._viewer.log(q);
 };
 k(p, {
  BUFFER_SIZE: 4
 });
 e.exports = p;
}, null);

__d("SpotlightViewerImage", [ "React", "cx" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 var i = g.createClass({
  displayName: "SpotlightViewerImage",
  render: function() {
   return g.createElement("img", {
    className: "_4-od",
    src: this.props.src,
    style: {
     width: this.props.dimensions.x,
     height: this.props.dimensions.y
    }
   });
  }
 });
 e.exports = i;
}, null);

__d("SpotlightViewerCoreMixin", [ "PhotoLogger", "PhotoStore", "PhotoUtils", "PhotoViewState", "React", "SpotlightViewerImage", "SpotlightViewerLoggingEvents" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m) {
 b.__markCompiled && b.__markCompiled();
 var n = {
  _displayFirstPhoto: function() {
   h.executePostCreate(this.props.setid, this.viewState.displayFirst.bind(this.viewState));
  },
  _getInitialPosition: function() {
   var o;
   if (!this.props.clearcache) o = h.getIndexForID(this.props.setid, this.props.photoid);
   if (o === void 0) {
    h.clearSetCache(this.props.setid);
    o = 0;
   }
   return o;
  },
  __displayPhoto: function() {
   var o = this._getInitialPosition();
   this.viewState = new j(this, this.props.setid, o, this._updatePhoto, this.props.reverse);
   this.inform("open");
   this._displayFirstPhoto();
  },
  componentWillMount: function() {
   this._logger = new g(this.getViewerID());
   this.log(m.OPEN_BEGIN);
   this.__displayPhoto();
  },
  componentDidMount: function() {
   this._enableSubscriptions && this._enableSubscriptions();
   this.log(m.OPEN_COMPLETE);
  },
  isOpen: function() {
   return this.state.open;
  },
  close: function() {
   if (!this.isOpen()) return;
   this.log(m.CLOSE_BEGIN);
   this.setState({
    open: false
   }, function() {
    this.inform("close");
    this.log(m.CLOSE_COMPLETE);
   });
  },
  componentWillUnmount: function() {
   this.viewState = null;
  },
  _onClickViewport: function(o) {
   o ? this.viewState.forward() : this.viewState.backward();
  },
  _getMedia: function(o, p) {
   return k.createElement(l, {
    ref: "image",
    src: o.uri,
    dimensions: p.imageDimensions
   });
  },
  _getCurrentFBID: function() {
   return i.getFBIDFromData(this.state.photoData);
  },
  _updatePhoto: function(o) {
   this.log(m.PHOTO_CHANGE_BEGIN);
   this.setState({
    photoData: o
   }, function() {
    this.inform("photo_change", this.state.photoData);
    this.log(m.PHOTO_CHANGE_COMPLETE);
   });
  },
  getLogger: function() {
   return this._logger;
  },
  log: function(o) {
   this._logger && this._logger.logEvent(o);
  }
 };
 e.exports = n;
}, null);

__d("SpotlightViewerStageResizer", [ "Event", "SubscriptionsHandler", "Vector" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 var j = 520;
 function k(l, m) {
  "use strict";
  this._subscriptionsHandler = new h();
  this._subscriptionsHandler.addSubscriptions(g.listen(window, "resize", this._resetStageDimensions.bind(this)));
  this._dimensions = l;
  this._minHeight = m.minHeight || j;
  this._minWidth = m.minWidth || j;
  this._resetStageDimensions();
 }
 k.prototype.destroy = function() {
  "use strict";
  this._dimensions = null;
  this._subscriptionsHandler.release();
 };
 k.prototype._resetStageDimensions = function() {
  "use strict";
  this._currentStageDimensions = new i(this._minWidth, this._minHeight);
 };
 k.prototype.getImageAndStageDimensions = function(l) {
  "use strict";
  var m = this._dimensions.getBestFitDimensionsFromPhoto(l, this._dimensions.getMaxStageDimensions()), n = this._dimensions.getStageDimensions(m);
  this._currentStageDimensions = new i(Math.max(n.x, this._minWidth, this._currentStageDimensions.x), Math.max(n.y, this._minHeight, this._currentStageDimensions.y));
  var o = this._dimensions.getImageDimensionsForStage(m, this._currentStageDimensions);
  return {
   stageDimensions: this._currentStageDimensions,
   imageDimensions: o
  };
 };
 k.prototype.getCurrentStageDimensions = function() {
  "use strict";
  return this._currentStageDimensions;
 };
 e.exports = k;
}, null);

__d("PhotoViewerDimensions", [ "Event", "PhotoUtils", "Vector", "copyProperties" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 var k = {
  verticalPadding: "number",
  horizontalPadding: "number",
  normalResDim: "object"
 };
 function l(m) {
  "use strict";
  for (var n in m) {
   if (!k[n]) throw new Error("Unsupported extraData value '" + n + "' should not be used");
   if (typeof m[n] === k[n]) this["_" + n] = m[n];
  }
  this._listener = g.listen(window, "resize", this._resetMaxStageDimensions.bind(this));
 }
 l.prototype.destroy = function() {
  "use strict";
  this._listener.remove();
 };
 l.prototype.getStageDimensions = function(m) {
  "use strict";
  var n = this.getMaxStageDimensions(), o = new i(Math.min(m.x, n.x), Math.min(m.y, n.y)), p = o.x / o.y, q = m.x / m.y;
  if (p < q) {
   o.y = Math.round(o.x / q);
  } else o.x = Math.round(o.y * q);
  return o;
 };
 l.prototype.getImageDimensionsForStage = function(m, n) {
  "use strict";
  var o = m.x, p = m.y, q = n.x, r = n.y;
  if (o >= q || p >= r) {
   var s = o / p, t = q / r;
   if (t < s) {
    o = q;
    p = Math.round(q / s);
   } else if (t > s) {
    o = Math.round(r * s);
    p = r;
   } else {
    o = q;
    p = r;
   }
  }
  return new i(o, p);
 };
 l.prototype.getMaxStageDimensions = function() {
  "use strict";
  if (!this._maxStageDimensions) this._maxStageDimensions = new i(i.getViewportDimensions().x - this._horizontalPadding, i.getViewportDimensions().y - this._verticalPadding);
  return this._maxStageDimensions;
 };
 l.prototype._resetMaxStageDimensions = function() {
  "use strict";
  this._maxStageDimensions = null;
 };
 l.prototype.getBestFitImageFromPhoto = function(m, n) {
  "use strict";
  var o = null, p = h.getImagesFromData(m);
  p = p.sort(function(r, s) {
   return s.width - r.width;
  });
  if (window.devicePixelRatio && window.devicePixelRatio > 1) n = new i(n.x * window.devicePixelRatio, n.y * window.devicePixelRatio);
  for (var q = 0; q < p.length; q++) if (!o || p[q].width >= n.x || p[q].height >= n.y) o = p[q];
  return o;
 };
 l.prototype.getOriginalDimensionsFromPhoto = function(m) {
  "use strict";
  var n = h.getOriginalImageFromData(m);
  return new i(n.width, n.height);
 };
 l.prototype.getBestFitDimensionsFromPhoto = function(m, n) {
  "use strict";
  var o = this.getBestFitImageFromPhoto(m, n);
  return new i(o.width, o.height);
 };
 l.prototype.getVerticalPadding = function() {
  "use strict";
  return this._verticalPadding;
 };
 l.prototype.getHorizontalPadding = function() {
  "use strict";
  return this._horizontalPadding;
 };
 j(l.prototype, {
  _verticalPadding: 40,
  _horizontalPadding: 60,
  _normalResDim: {
   x: 960,
   y: 960
  }
 });
 e.exports = l;
}, null);

__d("SpotlightViewerDimensionMixin", [ "SpotlightViewerStageResizer", "PhotoViewerDimensions" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 var i = {
  getInitialState: function() {
   this._dimensions = new h({
    verticalPadding: this.props.verticalPadding,
    horizontalPadding: this.props.horizontalPadding
   });
   this._resizer = new g(this._dimensions, {
    minHeight: this.props.minHeight,
    minWidth: this.props.minWidth
   });
   return {
    maxStageDimensions: this._dimensions.getMaxStageDimensions()
   };
  },
  componentWillUnmount: function() {
   this._resizer && this._resizer.destroy();
   this._resizer = null;
   this._dimensions && this._dimensions.destroy();
   this._dimensions = null;
  },
  getMedia: function() {
   if (this.state.photoData) {
    var j = this._resizer.getImageAndStageDimensions(this.state.photoData), k = this._dimensions.getBestFitImageFromPhoto(this.state.photoData, this.state.maxStageDimensions);
    return this._getMedia(k, j);
   } else return null;
  },
  getDimensions: function() {
   return this._dimensions;
  },
  getStageDimensions: function() {
   if (this.state.photoData) {
    return this._resizer.getImageAndStageDimensions(this.state.photoData).stageDimensions;
   } else return this._dimensions.getMaxStageDimensions();
  },
  getImageDimensions: function() {
   if (!this.state.photoData) return null;
   return this._resizer.getImageAndStageDimensions(this.state.photoData).imageDimensions;
  },
  onResize: function() {
   this.setState({
    maxStageDimensions: this._dimensions.getMaxStageDimensions()
   });
  }
 };
 e.exports = i;
}, null);

__d("SpotlightViewerPagers", [ "LeftRight.react", "Link.react", "React", "cx" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 var k = i.createClass({
  displayName: "SpotlightViewerPagers",
  render: function() {
   return i.createElement(g, null, i.createElement(h, {
    className: "_4-oa _4-ob _50-m"
   }), i.createElement(h, {
    className: "_4-oa _4-oc _50-m"
   }));
  }
 });
 e.exports = k;
}, null);

__d("SpotlightViewerPageWithKeys", [ "KeyEventController", "SubscriptionsHandler" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 function i(j) {
  "use strict";
  this.$SpotlightViewerPageWithKeys0 = j;
 }
 i.prototype.enable = function() {
  "use strict";
  this.$SpotlightViewerPageWithKeys1 = new h();
  this.$SpotlightViewerPageWithKeys1.addSubscriptions(g.registerKey("LEFT", function() {
   this.$SpotlightViewerPageWithKeys0.viewState.backward();
   return false;
  }.bind(this)), g.registerKey("RIGHT", function() {
   this.$SpotlightViewerPageWithKeys0.viewState.forward();
   return false;
  }.bind(this)));
 };
 i.prototype.disable = function() {
  "use strict";
  this.$SpotlightViewerPageWithKeys1.release();
  delete this.$SpotlightViewerPageWithKeys1;
 };
 e.exports = i;
}, null);

__d("SpotlightViewerThumbnailMixin", [ "PhotoStore", "Vector" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 var i = {
  _getInitialPhotoData: function() {
   var j = g.getIndexForID(this.props.setid, this.props.photoid), k = g.getByIndexImmediate(this.props.setid, j);
   return k ? k : this._getThumbnailPhotoData();
  },
  _getThumbnailPhotoData: function() {
   if (!this.props.dimensions || !this.props.thumbsrc) return null;
   var j = {
    id: this.props.photoid
   };
   for (var k = 0; k < this.props.dimensions.length; ++k) {
    var l = h.deserialize(this.props.dimensions[k]);
    j["image" + k] = {
     width: l.x,
     height: l.y,
     uri: this.props.thumbsrc
    };
   }
   return j;
  }
 };
 e.exports = i;
}, null);

__d("SpotlightViewport", [ "Locale", "Parent", "React", "Vector", "cx", "joinClasses" ], function(a, b, c, d, e, f, g, h, i, j, k, l) {
 b.__markCompiled && b.__markCompiled();
 var m = i, n = m.PropTypes, o = i.createClass({
  displayName: "SpotlightViewport",
  propTypes: {
   stageDimensions: n.object.isRequired,
   snapToPhoto: n.bool
  },
  PAGE_TO_PREV_PERCENTAGE: .2,
  sections: {
   NONE: null,
   FORWARD: 1,
   BACKWARD: 2
  },
  getInitialState: function() {
   return {
    currentActiveSection: this.sections.NONE,
    active: true
   };
  },
  _onMouseMove: function(event) {
   var p = j.getEventPosition(event.nativeEvent), q = j.getElementPosition(i.findDOMNode(this)), r, s = p.x - q.x, t = s / this.props.stageDimensions.x;
   if (g.isRTL()) {
    r = t > 1 - this.PAGE_TO_PREV_PERCENTAGE;
   } else r = t < this.PAGE_TO_PREV_PERCENTAGE;
   if (r) {
    this.setState({
     currentActiveSection: this.sections.BACKWARD
    });
   } else this.setState({
    currentActiveSection: this.sections.FORWARD
   });
  },
  _onClick: function(event) {
   var p = this.state.currentActiveSection == this.sections.FORWARD, q = event.target;
   if (!h.byClass(q, "_51an")) this.props.onClick && this.props.onClick(p);
  },
  _onMouseEnter: function() {
   this.setState({
    active: true
   });
  },
  _onMouseLeave: function() {
   this.setState({
    active: false
   });
  },
  render: function() {
   var p = "_4-of" + (!this.state.active && !this.props.active ? " " + "_50-l" : "") + (this.state.currentActiveSection === this.sections.BACKWARD ? " " + "_516a" : "") + (this.state.currentActiveSection === this.sections.FORWARD ? " " + "_516b" : "") + (this.props.showLoadingIndicator ? " " + "_51jp" : "");
   if (this.props.className) p = l(p, this.props.className);
   var q = {};
   if (this.props.stageDimensions) {
    var r = this.props.snapToPhoto ? [ "maxHeight", "maxWidth" ] : [ "height", "width" ];
    q[r[0]] = this.props.stageDimensions.y;
    q[r[1]] = this.props.stageDimensions.x;
   }
   return i.createElement("div", {
    className: p,
    style: q,
    onClick: this._onClick,
    onMouseMove: this._onMouseMove,
    onMouseEnter: this._onMouseEnter,
    onMouseLeave: this._onMouseLeave
   }, this.props.children, i.createElement("div", {
    className: "_4-og"
   }, i.createElement("span", {
    className: "_4-oh"
   }), this.props.media, i.createElement("div", {
    className: "_4-oi"
   })));
  }
 });
 e.exports = o;
}, null);

__d("XMessagingPhotoDownloadController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/mercury/attachments/photo/", {
  photo_id: {
   type: "String",
   required: true
  }
 });
}, null);

__d("SpotlightMessagesViewer", [ "ArbiterMixin", "MercuryConfig", "MessagingForwardAttachmentDialog.react", "PageTransitions", "React", "ReactLayeredComponentMixin", "SpotlightViewer", "SpotlightViewerAutoResize", "SpotlightViewerBehaviorsMixin", "SpotlightViewerBottomBar", "SpotlightViewerBottomBarGroup", "SpotlightViewerBottomBarLink", "SpotlightViewerClose", "SpotlightViewerCoreMixin", "SpotlightViewerDimensionMixin", "SpotlightViewerPagers", "SpotlightViewerPageWithKeys", "SpotlightViewerThumbnailMixin", "SpotlightViewport", "SubscriptionsHandler", "XMessagingPhotoDownloadController", "fbt" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, aa, ba) {
 b.__markCompiled && b.__markCompiled();
 var ca = k.createClass({
  displayName: "SpotlightMessagesViewer",
  mixins: [ g, l, o, t, x, u ],
  behaviors: [ w, n ],
  componentWillUnmount: function() {
   this._subscriptions && this._subscriptions.release();
   this._subscriptions = null;
  },
  getViewerID: function() {
   return this.props.setid;
  },
  getInitialState: function() {
   this._subscriptions = new z();
   return {
    photoData: this._getInitialPhotoData(),
    open: true,
    showForward: false
   };
  },
  _enableSubscriptions: function() {
   this.props.useloadingindicator && this._subscriptions.addSubscriptions(this.viewState.subscribe("photo_fetch", function() {
    return this.setState({
     photoData: null
    });
   }.bind(this)));
  },
  _showForwardDialog: function() {
   this.setState({
    showForward: true
   });
  },
  _hideForwardDialog: function() {
   this.setState({
    showForward: false
   });
  },
  renderLayers: function() {
   if (this.props.disableForward) return {};
   var da = ba._("Send this photo to friends");
   return {
    forwardDialog: k.createElement(i, {
     attachmentID: String(this.state.photoData.id),
     onClose: this._hideForwardDialog,
     shown: this.state.showForward,
     title: da
    })
   };
  },
  render: function() {
   var da = this.getMedia(), ea = this.getStageDimensions(), fa = this.props.useloadingindicator && !this.state.photoData;
   j.registerCompletionCallback(function() {
    if (this.state.open) this.close();
    return true;
   }.bind(this));
   return k.createElement(m, {
    rootClassName: this.props.rootClassName,
    open: this.state.open,
    onHide: this.close
   }, k.createElement(y, {
    onClick: this._onClickViewport,
    stageDimensions: ea,
    media: da,
    snapToPhoto: this.props.snapToPhoto,
    showLoadingIndicator: fa
   }, k.createElement(s, {
    onClick: this.close
   }), this.props.disablepaging ? null : k.createElement(v, null), this._renderBottomBar()));
  },
  _renderBottomBar: function() {
   var da;
   if (h.ForwardingEnabled && !this.props.disableForward) da = k.createElement(r, {
    onClick: this._showForwardDialog
   }, ba._("Send"));
   var ea = aa.getURIBuilder().setString("photo_id", String(this.state.photoData.id)).getURI();
   return k.createElement(p, null, k.createElement(q, null), k.createElement(q, null, da, k.createElement(r, {
    rel: "async",
    ajaxify: ea
   }, ba._("Download"))));
  }
 });
 e.exports = ca;
}, null);

__d("MessagesViewer", [ "AsyncRequest", "DOM", "MessagesViewerSetID", "PhotoStore", "React", "SpotlightMessagesViewer", "ge" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m) {
 b.__markCompiled && b.__markCompiled();
 var n = {
  bootstrapWithElem: function(o) {
   n.bootstrapWithConfig({
    fbid: o.getAttribute("data-fbid"),
    dimensions: o.getAttribute("data-dimensions"),
    src: o.getAttribute("href"),
    endpoint: o.getAttribute("data-endpoint"),
    disablePaging: o.getAttribute("data-disablepaging")
   }, o);
  },
  bootstrapWithConfig: function(o, p) {
   var q = o.setID;
   if (!q) q = i.MESSAGES;
   var r = k.createElement(l, {
    dimensions: [ o.dimensions ],
    disablepaging: o.disablePaging,
    disableForward: o.disableForward,
    open: true,
    photoid: o.fbid,
    reverse: false,
    rootClassName: o.rootClassName,
    setid: q,
    snapToPhoto: o.snapToPhoto,
    thumbsrc: o.src
   });
   n.render(r);
   if (!j.hasBeenCreated(q) && o.endpoint) {
    var s = new g(o.endpoint);
    if (p) s.setRelativeTo(p);
    s.send();
   }
  },
  render: function(o) {
   var p = m("messages_viewer");
   if (!p) {
    p = h.create("div", {
     id: "messages_viewer"
    });
    document.body.appendChild(p);
   }
   o = k.render(o, p);
   o.subscribeOnce("close", function() {
    k.unmountComponentAtNode(p);
   });
  }
 };
 e.exports = n;
}, null);

__d("XMessagingVideoAttachmentController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/mercury/attachments/video/", {
  video_id: {
   type: "String",
   required: true
  },
  video_container_id: {
   type: "String",
   required: true
  },
  width: {
   type: "Int",
   required: true
  },
  height: {
   type: "Int",
   required: true
  }
 });
}, null);

__d("MessagingVideoViewer.react", [ "ActorURI", "ArbiterMixin", "AsyncRequest", "MercuryConfig", "MessagingForwardAttachmentDialog.react", "React", "ReactLayeredComponentMixin", "SpotlightViewer", "SpotlightViewerBottomBar", "SpotlightViewerBottomBarGroup", "SpotlightViewerBottomBarLink", "SpotlightViewerClose", "SpotlightViewport", "PageTransitions", "PhotoViewerDimensions", "XMessagingVideoAttachmentController", "Vector", "cx", "fbt", "guid" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z) {
 b.__markCompiled && b.__markCompiled();
 var aa = l, ba = aa.PropTypes, ca = 200, da = l.createClass({
  displayName: "MessagingVideoViewer",
  propTypes: {
   disableForward: ba.bool,
   pageID: ba.number,
   rootClassName: ba.string,
   videoSize: ba.instanceOf(w).isRequired,
   videoID: ba.string.isRequired,
   videoURI: ba.string.isRequired
  },
  mixins: [ h, m ],
  getInitialState: function() {
   var ea = new u({
    verticalPadding: ca
   });
   return {
    dimensions: ea.getStageDimensions(this.props.videoSize),
    loading: true,
    open: true,
    showForward: false
   };
  },
  componentWillMount: function() {
   this._domID = z();
  },
  componentDidMount: function() {
   this._loadVideoPlayer();
   t.registerCompletionCallback(function() {
    this.close();
    return true;
   }.bind(this));
  },
  _loadVideoPlayer: function() {
   var ea = v.getURIBuilder().setString("video_id", this.props.videoID).setString("video_container_id", this._domID).setInt("width", this.state.dimensions.x).setInt("height", this.state.dimensions.y).getURI();
   if (this.props.pageID) ea = g.create(ea, this.props.pageID);
   this.request = new i().setMethod("GET").setURI(ea).setReadOnly(true).setHandler(function(fa) {
    return this.setState({
     loading: false
    });
   }.bind(this)).send();
  },
  close: function() {
   if (!this.state.open) return;
   this.setState({
    open: false
   }, function() {
    this.inform("close");
   });
  },
  _showForwardDialog: function() {
   this.setState({
    showForward: true
   });
  },
  _hideForwardDialog: function() {
   this.setState({
    showForward: false
   });
  },
  renderLayers: function() {
   var ea = y._("Send this video to friends");
   return {
    forwardDialog: l.createElement(k, {
     attachmentID: this.props.videoID,
     onClose: this._hideForwardDialog,
     shown: this.state.showForward,
     title: ea
    })
   };
  },
  render: function() {
   var ea = l.createElement("div", {
    className: "rfloat",
    id: this._domID
   }), fa = j.ForwardingEnabled && !this.props.disableForward ? l.createElement(q, {
    onClick: this._showForwardDialog
   }, y._("Send")) : null;
   return l.createElement(n, {
    onHide: this.close,
    open: this.state.open,
    rootClassName: this.props.rootClassName
   }, l.createElement(s, {
    className: "_39hc",
    media: ea,
    showLoadingIndicator: this.state.loading,
    stageDimensions: this.state.dimensions
   }, l.createElement(r, {
    onClick: this.close
   }), l.createElement(o, {
    className: "stat_elem"
   }, l.createElement(p, null), l.createElement(p, null, fa, l.createElement(q, {
    href: this.props.videoURI
   }, y._("Download"))))));
  }
 });
 e.exports = da;
}, null);

__d("DocumentTitle", [ "Arbiter" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 var h = document.title, i = null, j = 1500, k = [], l = 0, m = null, n = false;
 function o() {
  if (k.length > 0) {
   if (!n) {
    p(k[l].title);
    l = ++l % k.length;
   } else q();
  } else {
   clearInterval(m);
   m = null;
   q();
  }
 }
 function p(s) {
  document.title = s;
  n = true;
 }
 function q() {
  r.set(i || h, true);
  n = false;
 }
 var r = {
  get: function() {
   return h;
  },
  set: function(s, t) {
   document.title = s;
   if (!t) {
    h = s;
    i = null;
    g.inform("update_title", s);
   } else i = s;
  },
  blink: function(s) {
   var t = {
    title: s
   };
   k.push(t);
   if (m === null) m = setInterval(o, j);
   return {
    stop: function() {
     var u = k.indexOf(t);
     if (u >= 0) {
      k.splice(u, 1);
      if (l > u) {
       l--;
      } else if (l == u && l == k.length) l = 0;
     }
    }
   };
  }
 };
 e.exports = r;
}, null);

__d("FileInputUploader", [ "ArbiterMixin", "DOM", "DTSG", "FileForm", "Form", "copyProperties", "mixin", "submitForm" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n) {
 b.__markCompiled && b.__markCompiled();
 var o = m(g);
 for (var p in o) if (o.hasOwnProperty(p)) r[p] = o[p];
 var q = o === null ? null : o.prototype;
 r.prototype = Object.create(q);
 r.prototype.constructor = r;
 r.__superConstructor__ = o;
 function r(s) {
  "use strict";
  this._inputElem = s;
  this._data = {};
 }
 r.prototype.setInput = function(s) {
  "use strict";
  this._inputElem = s;
  return this;
 };
 r.prototype.setURI = function(s) {
  "use strict";
  this._uri = s;
  return this;
 };
 r.prototype.setData = function(s) {
  "use strict";
  this._data = s;
  return this;
 };
 r.prototype.setPreprocessHandler = function(s) {
  "use strict";
  this._preprocessHandler = s;
  return this;
 };
 r.prototype.setNetworkErrorRetryLimit = function(s) {
  "use strict";
  this._retryLimit = s;
  return this;
 };
 r.prototype.setFiles = function(s) {
  "use strict";
  this._files = s;
  return this;
 };
 r.prototype.setAllowCrossOrigin = function(s) {
  "use strict";
  this._allowCrossOrigin = !!s;
  return this;
 };
 r.prototype.setAllowCrossPageTransition = function(s) {
  "use strict";
  this._allowCrossPageTransition = !!s;
  return this;
 };
 r.prototype.setUploadInParallel = function(s) {
  "use strict";
  this._uploadInParallel = !!s;
  return this;
 };
 r.prototype.setConcurrentLimit = function(s) {
  "use strict";
  this._concurrentLimit = s;
  return this;
 };
 r.prototype.abort = function() {
  "use strict";
  if (this._fileForm) {
   this._fileForm.abort();
   this._destroyFileForm();
  }
 };
 r.prototype.send = function() {
  "use strict";
  this._createForm();
  var s = this._inputElem.cloneNode(false);
  h.replace(this._inputElem, s);
  h.appendContent(this._formElem, this._inputElem);
  h.appendContent(document.body, this._formElem);
  n(this._formElem);
  h.replace(s, this._inputElem);
  this._removeFormEl();
 };
 r.prototype._onFileFormEvent = function(s, t) {
  "use strict";
  if (s === "success" || s === "failure") this._destroyFileForm();
  this.inform(s, t);
 };
 r.prototype._createForm = function() {
  "use strict";
  this._destroyFileForm();
  this._formElem = h.create("form", {
   action: this._uri,
   method: "post"
  });
  this._fileForm = new j(this._formElem, null, {
   allowCrossOrigin: this._allowCrossOrigin,
   allowCrossPageTransition: this._allowCrossPageTransition,
   uploadInParallel: this._uploadInParallel,
   concurrentLimit: this._concurrentLimit,
   preprocessHandler: this._preprocessHandler,
   networkErrorRetryLimit: this._retryLimit
  });
  if (this._files) this._fileForm.setFiles(this._files);
  this._fileForm.subscribe(j.EVENTS, this._onFileFormEvent.bind(this));
  k.createHiddenInputs(l({
   fb_dtsg: i.getToken()
  }, this._data), this._formElem);
 };
 r.prototype._removeFormEl = function() {
  "use strict";
  h.remove(this._formElem);
  this._formElem = null;
 };
 r.prototype._destroyFileForm = function() {
  "use strict";
  if (this._fileForm) {
   this._fileForm.destroy();
   this._fileForm = null;
  }
 };
 e.exports = r;
}, null);

__d("XHPTemplate", [ "DataStore", "DOM", "HTML" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 function j(l) {
  "use strict";
  this._model = l;
 }
 j.prototype.render = function() {
  "use strict";
  if (i.isHTML(this._model)) this._model = h.setContent(document.createDocumentFragment(), this._model)[0];
  return this._model.cloneNode(true);
 };
 j.prototype.build = function() {
  "use strict";
  return new k(this.render());
 };
 j.getNode = function(l, m) {
  "use strict";
  return j.getNodes(l)[m];
 };
 j.getNodes = function(l) {
  "use strict";
  var m = g.get(l, "XHPTemplate:nodes");
  if (!m) {
   m = {};
   var n = h.scry(l, "[data-jsid]");
   n.push(l);
   var o = n.length;
   while (o--) {
    var p = n[o];
    m[p.getAttribute("data-jsid")] = p;
    p.removeAttribute("data-jsid");
   }
   g.set(l, "XHPTemplate:nodes", m);
  }
  return m;
 };
 function k(l) {
  "use strict";
  this._root = l;
  this._populateNodes();
 }
 k.prototype._populateNodes = function() {
  "use strict";
  this._nodes = {};
  this._leaves = {};
  var l = this._root.getElementsByTagName("*");
  for (var m = 0, n = l.length; m < n; m++) {
   var o = l[m], p = o.getAttribute("data-jsid");
   if (p) {
    o.removeAttribute("data-jsid");
    this._nodes[p] = o;
    this._leaves[p] = !o.childNodes.length;
   }
  }
 };
 k.prototype.getRoot = function() {
  "use strict";
  return this._root;
 };
 k.prototype.getNode = function(l) {
  "use strict";
  return this._nodes[l];
 };
 k.prototype.setNodeProperty = function(l, m, n) {
  "use strict";
  this.getNode(l)[m] = n;
  return this;
 };
 k.prototype.setNodeContent = function(l, m) {
  "use strict";
  if (!this._leaves[l]) throw new Error("Can't setContent on non-leaf node: " + l);
  h.setContent(this.getNode(l), m);
  return this;
 };
 e.exports = j;
}, null);

__d("P2PAddCreditCardDialog.react", [ "Link.react", "P2PAPI", "P2PAPIUtils", "P2PCreditCardForm.react", "P2PLoadingMask.react", "P2PLinkConstants", "React", "P2PButton.react", "P2PDialog.react", "P2PDialogTitle.react", "P2PDialogBody.react", "P2PDialogFooter.react", "P2PEnvironment", "P2PText.react", "cx", "emptyFunction", "fbt" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var x = m, y = x.PropTypes, z = "fbP2PAddCreditCardDialog_learnMoreSentenceID", aa = s.messengerdotcom, ba = m.createClass({
  displayName: "P2PAddCreditCardDialog",
  propTypes: {
   asyncRequestState: y.object,
   onCancel: y.func,
   onError: y.func,
   onSaving: y.func,
   onSuccess: y.func,
   showPayButton: y.bool
  },
  getDefaultProps: function() {
   return {
    asyncRequestState: {},
    onCancel: v,
    onError: v,
    onSaving: v,
    onSuccess: v,
    showPayButton: false
   };
  },
  getInitialState: function() {
   return {
    isValid: false,
    formData: {},
    loading: false,
    requestID: "",
    saveErrors: null
   };
  },
  componentWillReceiveProps: function(ca) {
   var da = ca.asyncRequestState ? ca.asyncRequestState[this.state.requestID] : null;
   if (da) {
    this.setState({
     requestID: ""
    });
    if (da.error) {
     this.handleOnSaveError(da.error);
    } else this.handleOnSaveSuccess(da);
   }
  },
  onSaveClick: function() {
   var ca = i.genRequestID();
   this.setState({
    loading: true,
    requestID: ca,
    saveErrors: null
   });
   this.props.onSaving();
   h.addCreditCard(Object.assign({
    requestID: ca
   }, this.state.formData));
  },
  handleOnSaveSuccess: function(ca) {
   this.props.onSuccess(ca);
  },
  handleOnSaveError: function(ca) {
   this.setState({
    loading: false,
    saveErrors: ca
   });
   this.props.onError();
  },
  handleValidation: function(ca, da) {
   this.setState({
    isValid: ca,
    formData: da
   });
  },
  isSaveButtonDisabled: function() {
   return this.state.loading || !this.state.isValid;
  },
  onToggle: function(ca) {
   if (!ca) this.props.onCancel();
  },
  getButtonType: function() {
   var ca = "default";
   if (this.props.showPayButton) ca = "confirm";
   return ca;
  },
  getButtonText: function() {
   var ca = w._("Save");
   if (this.props.showPayButton) ca = w._("Pay");
   return ca;
  },
  renderAddCardForm: function() {
   var ca;
   if (aa) ca = m.createElement(n, {
    use: "default",
    size: "medium",
    label: w._("Cancel"),
    disabled: this.state.loading,
    onClick: this.props.onCancel
   });
   return m.createElement("div", null, m.createElement(p, null, w._("Add a Debit Card")), m.createElement(q, null, m.createElement(j, {
    onValidation: this.handleValidation,
    saveErrors: this.state.saveErrors
   }), m.createElement(t, {
    className: "_3-8y",
    id: z,
    type: "secondary"
   }, w._("Your payment info is stored securely. {Learn more about p2p link}", [ w.param("Learn more about p2p link", m.createElement(g, {
    "aria-describedby": z,
    href: l.addDebitCardHelpURI,
    target: "_blank"
   }, w._("Learn more."))) ]))), m.createElement(r, null, ca, m.createElement(n, {
    use: this.getButtonType(),
    size: "medium",
    label: this.getButtonText(),
    disabled: this.isSaveButtonDisabled(),
    onClick: this.onSaveClick
   })));
  },
  render: function() {
   var ca;
   ca = aa ? 350 : 288;
   return m.createElement(o, {
    layerHideOnBlur: false,
    ref: "dialog",
    onToggle: this.onToggle,
    repositionOnUpdate: true,
    shown: true,
    width: ca
   }, this.renderAddCardForm(), m.createElement(k, {
    visible: this.state.loading
   }));
  }
 });
 e.exports = ba;
}, null);

__d("P2PConfirmAmountDialog.react", [ "P2PLoadingMask.react", "React", "P2PButton.react", "P2PDialog.react", "P2PDialogBody.react", "P2PDialogFooter.react", "P2PDialogTitle.react", "P2PEnvironment", "P2PText.react", "emptyFunction", "fbt" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q) {
 b.__markCompiled && b.__markCompiled();
 var r = h, s = r.PropTypes, t = n.messengerdotcom, u = h.createClass({
  displayName: "P2PConfirmAmountDialog",
  propTypes: {
   amount: s.string,
   currencySymbol: s.string,
   onCancel: s.func,
   onConfirm: s.func,
   receiverName: s.string
  },
  getDefaultProps: function() {
   return {
    amount: "",
    currencySymbol: "",
    onCancel: p,
    onConfirm: p,
    receiverName: s.string
   };
  },
  getInitialState: function() {
   return {
    loading: false
   };
  },
  handleCancelClick: function() {
   this.props.onCancel();
  },
  handleConfirmClick: function() {
   this.setState({
    loading: true
   });
   this.props.onConfirm();
  },
  getFormattedAmount: function() {
   var v = this.props.amount, w = parseFloat(v).toFixed(2);
   return this.props.currencySymbol + "" + w;
  },
  render: function() {
   var v = t ? 350 : 300;
   return h.createElement(j, {
    layerHideOnBlur: false,
    shown: true,
    width: v
   }, h.createElement(m, {
    showCloseButton: false
   }, q._("Confirm Payment")), h.createElement(k, null, h.createElement(o, {
    type: "primary"
   }, q._("Do you want to pay {recipient name} {amount}?", [ q.param("recipient name", this.props.receiverName), q.param("amount", this.getFormattedAmount()) ]))), h.createElement(l, null, h.createElement(i, {
    label: q._("Cancel"),
    onClick: this.handleCancelClick,
    use: "default"
   }), h.createElement(i, {
    label: q._("Pay"),
    onClick: this.handleConfirmClick,
    use: "confirm"
   })), h.createElement(g, {
    visible: this.state.loading
   }));
  }
 });
 e.exports = u;
}, null);

__d("P2PSendMoneyAmountInput.react", [ "React", "P2PEnvironment", "XUIError.react", "P2PText.react", "cx", "emptyFunction", "fbt" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var n = g, o = n.PropTypes, p = 1e4, q = h.messengerdotcom, r = g.createClass({
  displayName: "P2PSendMoneyAmountInput",
  propTypes: {
   currencySymbol: o.string,
   onInputChange: o.func,
   value: o.string
  },
  getDefaultProps: function() {
   return {
    currencySymbol: "$",
    onInputChange: l,
    value: ""
   };
  },
  getInitialState: function() {
   return {
    inputError: null,
    maxInputWidth: q ? 236 : 100,
    value: this.props.value,
    width: ""
   };
  },
  componentDidMount: function() {
   this.updateWidth(this.state.value);
  },
  handleAmountInputChange: function(s) {
   var t = s.target.value;
   this.clearInputError();
   this.updateAmount(t);
  },
  clearInputError: function() {
   this.setState({
    inputError: null
   });
  },
  setInputError: function(s) {
   this.setState({
    inputError: s
   });
  },
  updateAmount: function(s) {
   var t = true, u;
   s = s.replace(/[^0-9\.]+/g, "");
   u = parseFloat(s);
   if (u >= p) {
    t = false;
    this.setInputError(m._("Please enter a smaller amount"));
   }
   var v = s.split("."), w = v[0], x = v[1];
   if (x !== undefined) {
    s = (w && parseFloat(w) !== 0 ? w : "0") + "." + x.substr(0, 2);
   } else if (w && parseFloat(w) === 0) s = "0";
   this.setValue(s);
   u = parseFloat(s);
   t = t && !isNaN(u) && u > 0;
   this.props.onInputChange(s, t);
  },
  setValue: function(s) {
   this.setState({
    value: s
   }, this.updateWidth);
  },
  updateWidth: function() {
   var s = this.getMockWidth();
   if (s) this.setState({
    width: Math.min(s, this.state.maxInputWidth)
   });
  },
  getMockWidth: function() {
   return g.findDOMNode(this.refs.mock_input).offsetWidth;
  },
  render: function() {
   var s;
   if (q && !this.state.value.length) s = g.createElement("div", {
    ref: "placeholder_input",
    className: "_1-sv"
   }, "0");
   return g.createElement("div", {
    className: "_ipw" + (q ? " " + "_1-sw" : "")
   }, g.createElement("label", null, g.createElement(j, {
    className: "_3-91 _1-sx",
    display: "inline",
    type: "primary"
   }, m._("Enter Amount")), g.createElement("div", {
    className: "_4puh" + (!this.state.value.length ? " " + "_1-sy" : "")
   }, g.createElement("div", {
    className: "_5fbp"
   }, this.props.currencySymbol), s, g.createElement("div", {
    ref: "mock_input",
    className: "_5fbs"
   }, this.state.value), g.createElement(i, {
    xuiError: this.state.inputError
   }, g.createElement("span", {
    className: "_1-sz"
   }, g.createElement("input", {
    className: "_5fbv",
    onChange: this.handleAmountInputChange,
    ref: "textInput",
    style: {
     width: this.state.width
    },
    value: this.state.value
   }))))));
  }
 });
 e.exports = r;
}, null);

__d("P2PSendMoneyDialog.react", [ "Arbiter", "CreditCardFormParam", "Image.react", "ImageBlock.react", "Link.react", "MessengerContextualDialog.react", "P2PAPI", "P2PAddCreditCardDialog.react", "P2PButton.react", "P2PCreditCardStore", "P2PChooseCreditCardForm.react", "P2PConfirmAmountDialog.react", "P2PEditCreditCardDialog.react", "P2PLinkConstants", "P2PLoadingMask.react", "P2PLogger", "P2PPaymentLoggerEvent", "P2PPaymentLoggerEventFlow", "P2PQEValues", "P2PSendMoneyAmountInput.react", "P2PText.react", "P2PVerifyCreditCardDialog.react", "React", "ReactLayeredComponentMixin", "XUIContextualDialog.react", "cx", "fbt", "emptyFunction" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, aa, ba, ca, da, ea, fa, ga, ha) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var ia = ca, ja = ia.PropTypes, ka = ga._("Change"), la = ga._("Add a Debit Card"), ma = 100, na = ca.createClass({
  displayName: "P2PSendMoneyDialog",
  mixins: [ da ],
  propTypes: {
   currency: ja.string,
   currencySymbol: ja.string,
   onAmountInputChange: ja.func,
   onBlur: ja.func,
   onError: ja.func,
   onToggle: ja.func,
   onSendSuccess: ja.func,
   receiver: ja.object,
   theme: ja.string
  },
  getDefaultProps: function() {
   return {
    currency: "USD",
    currencySymbol: "$",
    onAmountInputChange: ha,
    onBlur: ha,
    onError: ha,
    onSendClick: ha,
    onSendSuccess: ha,
    onToggle: ha,
    receiver: {},
    theme: ""
   };
  },
  getInitialState: function() {
   var oa = p.getAll();
   return {
    asyncRequestState: p.getAsyncRequestState(),
    addCreditCardDialogShown: false,
    amount: "",
    creditCards: oa,
    confirmAmountDialogShown: false,
    isAmountValid: false,
    loading: false,
    selectedCard: oa[0],
    showChooseCreditCardForm: false,
    verifyCreditCardDialogShown: false
   };
  },
  _isAmountVerified: false,
  passwordCancelSubscribeToken: null,
  log: function(oa, pa) {
   v.log(oa, Object.assign({
    www_event_flow: x.UI_FLOW_P2P_SEND,
    object_id: this.props.receiver.userId
   }, pa));
  },
  componentWillUnmount: function() {
   if (this.passwordCancelSubscribeToken !== null) {
    g.unsubscribe(this.passwordCancelSubscribeToken);
    this.passwordCancelSubscribeToken = null;
   }
   if (this.creditCardStoreSub) {
    this.creditCardStoreSub.remove();
    this.creditCardStoreSub = null;
   }
  },
  componentWillMount: function() {
   this.creditCardStoreSub = p.addListener("change", this.onCreditCardStoreChange);
   this.log(w.UI_ACTN_INITIATE_SEND);
  },
  onAmountInputChange: function(oa, pa) {
   this.setState({
    amount: oa,
    isAmountValid: pa
   });
  },
  onCreditCardStoreChange: function() {
   var oa = p.getAll(), pa;
   if (this.state.selectedCard) pa = oa.filter(function(qa) {
    return qa.getCredentialId() === this.state.selectedCard.getCredentialId();
   }.bind(this))[0];
   if (!pa) pa = oa[0];
   this.setState({
    asyncRequestState: p.getAsyncRequestState(),
    creditCards: oa,
    selectedCard: pa
   });
  },
  shouldShowConfirmAmountDialog: function() {
   var oa = parseFloat(this.state.amount);
   return !this._isAmountVerified && oa >= ma;
  },
  shouldShowVerifyCreditCardDialog: function() {
   return !this.state.selectedCard.getIsVerified();
  },
  shouldShowEditCreditCardDialog: function() {
   return this.state.selectedCard.isExpired();
  },
  handleSendClick: function(oa) {
   if (this.isSendButtonDisabled()) return false;
   this.log(w.UI_ACTN_SEND_CLICKED, {
    raw_amount: this.state.amount,
    currency: this.props.currency
   });
   this._isAmountVerified = false;
   this.initiatePayment();
  },
  initiatePayment: function() {
   if (this.shouldShowConfirmAmountDialog()) {
    this.hideAllDialogs();
    this.setState({
     confirmAmountDialogShown: true
    });
    this.log(w.UI_ACTN_CONFIRM_AMOUNT, {
     raw_amount: this.state.amount,
     currency: this.props.currency
    });
    return;
   } else if (this.shouldShowEditCreditCardDialog()) {
    this.hideAllDialogs();
    this.setState({
     editCreditCardDialogShown: true
    });
    this.log(w.UI_ACTN_EDIT_CARD, {
     raw_amount: this.state.amount,
     currency: this.props.currency
    });
    return;
   } else if (this.shouldShowVerifyCreditCardDialog()) {
    this.hideAllDialogs();
    this.setState({
     verifyCreditCardDialogShown: true
    });
    this.log(w.UI_ACTN_VERIFY_CSC, {
     raw_amount: this.state.amount,
     currency: this.props.currency
    });
    return;
   }
   this.createTransaction();
  },
  shouldShowLoading: function() {
   return !this.state.addCreditCardDialogShown && !this.state.confirmAmountDialogShown && !this.state.verifyCreditCardDialogShown && !this.state.editCreditCardDialogShown;
  },
  createTransaction: function() {
   var oa = {};
   this.setState({
    loading: this.shouldShowLoading()
   });
   oa[h.CREDENTIAL_ID] = this.state.selectedCard.getCredentialId();
   oa.amount = this.state.amount;
   oa.receiverId = this.props.receiver.userId;
   this.passwordCancelSubscribeToken = g.subscribeOnce("PasswordReauthDialogCancelClick", this.handlePasswordReauthDialogCancelClick);
   m.createTransaction({
    formData: oa,
    error: this.setCreateTransferError,
    success: this.setCreateTransferSuccess
   });
   this.log(w.UI_ACTN_CONFIRM_SEND, {
    raw_amount: this.state.amount,
    currency: this.props.currency
   });
  },
  hideAllDialogs: function() {
   this.setState({
    addCreditCardDialogShown: false,
    confirmAmountDialogShown: false,
    verifyCreditCardDialogShown: false,
    editCreditCardDialogShown: false
   });
  },
  setCreateTransferError: function(oa) {
   if (this.isMounted()) {
    this.hideAllDialogs();
    this.setState({
     loading: false
    });
   }
   this.props.onError(oa);
   this.log(w.UI_ACTN_SEND_FAIL);
  },
  setCreateTransferSuccess: function(oa) {
   if (this.isMounted()) {
    this.setState({
     loading: false
    });
    this.hideAllDialogs();
   }
   this.props.onSendSuccess(oa);
   this.log(w.UI_ACTN_SEND_SUCCESS);
  },
  handlePasswordReauthDialogCancelClick: function() {
   this.passwordCancelSubscribeToken = null;
   this.setState({
    loading: false
   });
   this.hideAllDialogs();
  },
  onAddCreditCardCancel: function() {
   this.setState({
    addCreditCardDialogShown: false
   });
   this.log(w.UI_ACTN_CANCEL_ADD_CARD);
  },
  onAddCreditCardSaving: function() {
   this.log(w.UI_ACTN_CONFIRM_CARD_DETAILS);
  },
  onAddCreditCardSuccess: function(oa) {
   var pa = this.state.creditCards.filter(function(qa) {
    var ra = qa.getCredentialId();
    return oa[h.CREDENTIAL_ID] === ra;
   })[0];
   this.setState({
    selectedCard: pa
   });
   if (this.state.isAmountValid) {
    this.initiatePayment();
   } else {
    this.setState({
     addCreditCardDialogShown: false
    });
    this.focusAmountInput();
   }
   this.log(w.UI_ACTN_ADD_CARD_SUCCESS);
  },
  onAddCreditCardError: function() {
   this.log(w.UI_ACTN_ADD_CARD_FAIL);
  },
  onEditCreditCardSuccess: function() {
   this.initiatePayment();
  },
  onEditCreditCardCancel: function() {
   this.setState({
    editCreditCardDialogShown: false
   });
  },
  focusAmountInput: function() {
   if (this.refs.send_money_amount_input) ca.findDOMNode(this.refs.send_money_amount_input).focus();
  },
  _onBlur: function() {
   this.props.onBlur();
   if (!this.state.loading) this.log(w.UI_ACTN_SEND_MONEY_CANCELLED);
  },
  handleAddCreditCardClick: function() {
   this.setState({
    addCreditCardDialogShown: true,
    showChooseCreditCardForm: false
   });
  },
  handleBackClick: function() {
   this.setState({
    showChooseCreditCardForm: false
   }, function() {
    this.focusAmountInput();
   });
  },
  handleChooseCardNextClick: function() {
   var oa = this.refs.choose_credit_card_form.getSelectedCard();
   this.setState({
    selectedCard: oa,
    showChooseCreditCardForm: false
   }, function() {
    this.focusAmountInput();
   });
  },
  handleAddCardNextClick: function() {
   this.setState({
    addCreditCardDialogShown: true
   });
   this.log(w.UI_ACTN_INITIATE_ADD_CARD);
  },
  handleChangeSelectedCardClick: function() {
   var oa = {};
   if (this.state.creditCards.length === 1) {
    oa.addCreditCardDialogShown = true;
   } else oa.showChooseCreditCardForm = true;
   this.setState(oa);
  },
  onConfirmAmountCancel: function() {
   this.setState({
    confirmAmountDialogShown: false
   });
  },
  onConfirmAmountSuccess: function() {
   this._isAmountVerified = true;
   this.initiatePayment();
  },
  onVerifyCreditCardSuccess: function() {
   this.initiatePayment();
  },
  onVerifyCreditCardCancel: function() {
   this.setState({
    verifyCreditCardDialogShown: false
   });
  },
  isSendButtonDisabled: function() {
   return !this.state.isAmountValid || !this.state.creditCards.length || this.state.loading;
  },
  isAddCardNextButtonDisabled: function() {
   return !this.state.isAmountValid;
  },
  renderAddDebitCardLink: function() {
   return ca.createElement(aa, {
    className: "_42h3",
    type: "secondary",
    ref: "send_money_dialog_add_card_text"
   }, ca.createElement(k, {
    className: "_49nm",
    href: "#",
    onClick: this.handleAddCreditCardClick
   }, la));
  },
  renderSelectedCard: function() {
   var oa = this.state.selectedCard;
   return ca.createElement(aa, {
    className: "_21x5",
    size: "small",
    type: "primary"
   }, ca.createElement("div", {
    className: "_49nn"
   }, oa.getName()), ca.createElement("div", {
    className: "_21wx"
   }, oa.getCreditCardNumberFormatted()), ca.createElement("div", {
    className: "_21ww"
   }, "·"), ca.createElement(k, {
    className: "_21wy",
    onClick: this.handleChangeSelectedCardClick,
    href: "#"
   }, ka));
  },
  renderFormButtons: function() {
   var oa;
   if (!this.state.creditCards.length) {
    oa = this.renderAddCardNextButton();
   } else if (this.state.showChooseCreditCardForm) {
    oa = ca.createElement("div", null, this.renderChooseCardBackButton(), this.renderChooseCardNextButton());
   } else oa = this.renderPayButton();
   return oa;
  },
  renderChooseCardBackButton: function() {
   return ca.createElement(o, {
    className: "_2abj",
    label: ga._("Back"),
    onClick: this.handleBackClick,
    ref: "back_button",
    size: "medium",
    type: "secondary",
    use: "default"
   });
  },
  renderAddCardNextButton: function() {
   return ca.createElement(o, {
    className: "_5p-b",
    disabled: this.isAddCardNextButtonDisabled(),
    label: ga._("Next"),
    onClick: this.handleAddCardNextClick,
    ref: "add_card_next_button",
    size: "medium",
    type: "primary",
    use: "default"
   });
  },
  renderChooseCardNextButton: function() {
   return ca.createElement(o, {
    label: ga._("Next"),
    onClick: this.handleChooseCardNextClick,
    ref: "choose_card_next_button",
    size: "medium",
    type: "primary",
    use: "confirm"
   });
  },
  renderPayButton: function() {
   return ca.createElement(o, {
    className: "_21x6 _5p-b",
    disabled: this.isSendButtonDisabled(),
    label: ga._("Pay"),
    onClick: this.handleSendClick,
    ref: "send_button",
    size: "medium",
    type: "primary",
    use: "confirm"
   });
  },
  renderPaymentDetails: function() {
   var oa, pa = y.SendMoneyFlyoutBottomText || "";
   if (this.state.creditCards.length) {
    if (this.state.showChooseCreditCardForm) {
     oa = this.renderAddDebitCardLink();
    } else oa = this.renderSelectedCard();
   } else oa = ca.createElement("div", {
    className: "_2abl"
   }, ca.createElement(aa, {
    type: "secondary",
    ref: "send_money_dialog_add_card_next_text"
   }, pa));
   return oa;
  },
  renderSendMoneyForm: function() {
   var oa = this.props.theme === "messenger" ? 32 : 40;
   return ca.createElement("div", null, ca.createElement("div", {
    className: "_49no _2pi4",
    ref: "send_money_dialog_title"
   }, ca.createElement(j, {
    spacing: "large"
   }, ca.createElement(i, {
    className: "_5p-i",
    height: oa,
    src: this.props.receiver.big_image_src || this.props.receiver.image_src,
    width: oa
   }), ca.createElement("div", {
    className: "_3-8w"
   }, ca.createElement(aa, {
    type: "secondary"
   }, ga._("Send to")), ca.createElement(aa, {
    className: "_5p-j",
    size: "small",
    type: "primary",
    weight: "bold"
   }, this.props.receiver.name))), ca.createElement(k, {
    className: "_49np",
    href: t.helpCenterURI,
    target: "_blank"
   })), ca.createElement("div", {
    className: "_2abm"
   }, this.renderMainContainer()), ca.createElement("div", {
    className: "_21w-" + (this.props.theme === "messenger" ? " " + "_4eb_" : "")
   }, ca.createElement("div", {
    className: "_5p-k"
   }, ca.createElement("div", {
    className: "_21x4"
   }, this.renderPaymentDetails()), ca.createElement("div", {
    className: "_4zf-"
   }, this.renderFormButtons()))));
  },
  renderMainContainer: function() {
   var oa;
   if (this.state.showChooseCreditCardForm) {
    oa = ca.createElement("div", {
     className: "_xn7"
    }, ca.createElement(q, {
     creditCards: this.state.creditCards,
     selectedCard: this.state.selectedCard,
     ref: "choose_credit_card_form"
    }));
   } else oa = ca.createElement("div", {
    className: "_2abn"
   }, ca.createElement(z, {
    currencySymbol: this.props.currencySymbol,
    onInputChange: this.onAmountInputChange,
    ref: "send_money_amount_input",
    value: this.state.amount
   }));
   return oa;
  },
  renderLayers: function() {
   var oa = {};
   if (this.state.addCreditCardDialogShown) {
    oa.addCreditCard = ca.createElement(n, {
     asyncRequestState: this.state.asyncRequestState,
     ref: "send_money_dialog_add_credit_card_form",
     onCancel: this.onAddCreditCardCancel,
     onSuccess: this.onAddCreditCardSuccess,
     onError: this.onAddCreditCardError,
     onSaving: this.onAddCreditCardSaving,
     showPayButton: this.state.isAmountValid
    });
   } else if (this.state.confirmAmountDialogShown) {
    oa.confirmAmount = ca.createElement(r, {
     amount: this.state.amount,
     currencySymbol: this.props.currencySymbol,
     onCancel: this.onConfirmAmountCancel,
     onConfirm: this.onConfirmAmountSuccess,
     receiverName: this.props.receiver.short_name
    });
   } else if (this.state.verifyCreditCardDialogShown) {
    oa.verifyCreditCard = ca.createElement(ba, {
     asyncRequestState: this.state.asyncRequestState,
     creditCard: this.state.selectedCard,
     isSending: true,
     onCancel: this.onVerifyCreditCardCancel,
     onSuccess: this.onVerifyCreditCardSuccess
    });
   } else if (this.state.editCreditCardDialogShown) oa.confirmAmount = ca.createElement(s, {
    asyncRequestState: this.state.asyncRequestState,
    creditCard: this.state.selectedCard,
    onCancel: this.onEditCreditCardCancel,
    onSuccess: this.onEditCreditCardSuccess
   });
   return oa;
  },
  render: function() {
   var oa = this.props.theme === "messenger", pa = oa ? l : ea, qa = oa ? 286 : 260;
   return ca.createElement(pa, {
    alignment: oa ? "right" : "left",
    context: this.props.context,
    onBlur: this._onBlur,
    shown: true,
    width: qa,
    position: this.props.position || "above"
   }, ca.createElement("div", {
    className: "_21x9" + (oa ? " " + "_1pka" : "")
   }, this.renderSendMoneyForm(), ca.createElement(u, {
    ref: "send_money_dialog_loader",
    visible: this.state.loading
   })));
  }
 });
 e.exports = na;
}, null);

__d("P2PSendMoneyButton.react", [ "Link.react", "P2PErrorDialog.react", "P2PEnvironment", "P2PLinkConstants", "P2PPasswordProtectionNUXDialog.react", "P2PPasswordProtectionStatusTypes", "P2PSendMoneyDialog.react", "P2PTransferRiskResult", "P2PTransferParam", "P2PVerificationFlowHelper", "React", "ReactLayeredComponentMixin", "TooltipLink.react", "P2PButton.react", "P2PDialog.react", "P2PDialogTitle.react", "P2PDialogBody.react", "P2PDialogFooter.react", "P2PSuccessDialog.react", "P2PText.react", "cx", "emptyFunction", "fbt" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, aa, ba, ca) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var da = i.messengerdotcom, ea = q, fa = ea.PropTypes, ga = q.createClass({
  displayName: "P2PSendMoneyButton",
  mixins: [ r ],
  propTypes: {
   theme: fa.string,
   disabled: fa.bool,
   onTrigger: fa.func,
   receiver: fa.object
  },
  getDefaultProps: function() {
   return {
    disabled: false,
    onTrigger: ba,
    receiver: {}
   };
  },
  getInitialState: function() {
   return {
    confirmationDialogShown: false,
    dialogShown: false,
    passwordNUXPending: false,
    passwordProtectionNUXDialogShown: false,
    sendErrorObject: null,
    underManualReviewDialogShown: false
   };
  },
  originalCreateTransactionResponse: null,
  _onButtonClick: function(ha) {
   if (this._clickGuard || this.props.disabled) return;
   this.setState({
    dialogShown: true
   });
  },
  _handleDialogSendClick: function() {
   this.setState({
    dialogShown: false
   });
  },
  _handleDialogBlur: function() {
   this.setState({
    dialogShown: false
   });
  },
  _prepareForClick: function() {
   this._clickGuard = this.state.dialogShown;
  },
  handleOnSendSuccess: function(ha) {
   this.setState({
    dialogShown: false
   });
   var ia = ha[o.RISK_RESULT];
   this.originalCreateTransactionResponse = ha;
   if (ia === n.REQUIRE_VERIFICATION) {
    p.startVerificationFlow(ha.id, true, this.handlePostSendSteps);
   } else if (ia === n.UNDER_MANUAL_REVIEW) {
    this.setState({
     underManualReviewDialogShown: true
    });
   } else this.handlePostSendSteps();
  },
  handlePostSendSteps: function() {
   var ha = this.originalCreateTransactionResponse, ia = ha.passwordProtection === l.NOT_SET;
   if (ha.isFirstSend) {
    this.setState({
     confirmationDialogShown: true,
     passwordNUXPending: ia
    });
   } else if (ia) this.setState({
    passwordProtectionNUXDialogShown: true
   });
   this.originalCreateTransactionResponse = null;
   this.props.onTrigger();
  },
  onPasswordProtectionNUXComplete: function() {
   this.setState({
    passwordProtectionNUXDialogShown: false
   });
  },
  handleConfirmationOKClick: function() {
   this.setState({
    confirmationDialogShown: false,
    passwordProtectionNUXDialogShown: this.state.passwordNUXPending,
    passwordNUXPending: false
   });
  },
  handleSendError: function(ha) {
   this.setState({
    sendErrorObject: ha
   });
  },
  handleErrorDialogOKClick: function() {
   this.setState({
    sendErrorObject: null
   });
  },
  onRiskResultDialogConfirmed: function() {
   this.setState({
    underManualReviewDialogShown: false
   }, function() {
    this.handlePostSendSteps();
   }.bind(this));
  },
  renderLayers: function() {
   var ha = {};
   if (this.state.sendErrorObject) ha.sendError = q.createElement(h, {
    error: this.state.sendErrorObject,
    onOKClick: this.handleErrorDialogOKClick,
    ref: "send_error",
    title: ca._("Problem Sending Money")
   });
   if (this.state.dialogShown) ha.sendMoneyDialog = q.createElement(m, {
    context: q.findDOMNode(this.refs.p2pSendMoneyButton),
    onBlur: this._handleDialogBlur,
    onError: this.handleSendError,
    onSendClick: this._handleDialogSendClick,
    onSendSuccess: this.handleOnSendSuccess,
    receiver: this.props.receiver,
    ref: "send_money_dialog",
    theme: this.props.theme
   });
   if (this.state.confirmationDialogShown) ha.confirmationDialog = q.createElement(y, {
    onOKClick: this.handleConfirmationOKClick,
    title: ca._("Payment Sent")
   }, q.createElement(z, {
    type: "primary"
   }, ca._("When you receive money, it will go on this card too. You can update your card in {Link with text that goes to settings page}.", [ ca.param("Link with text that goes to settings page", q.createElement(g, {
    target: "_blank",
    href: j.settingsWWWURI
   }, ca._("Payments Settings"))) ])));
   if (this.state.passwordProtectionNUXDialogShown) ha.passwordProtectionNUXDialog = q.createElement(k, {
    onComplete: this.onPasswordProtectionNUXComplete
   });
   if (this.state.underManualReviewDialogShown) ha.underManualReviewDialog = q.createElement(u, {
    layerHideOnBlur: false,
    ref: "under_manual_review_dialog",
    shown: true,
    width: 300
   }, q.createElement(v, {
    showCloseButton: false
   }, ca._("Reviewing Payment Info")), q.createElement(w, null, q.createElement(z, {
    type: "primary"
   }, ca._("For your security, this payment is in review for up to 24 hours. When it's confirmed, it will go through."))), q.createElement(x, null, q.createElement(t, {
    label: ca._("OK"),
    onClick: this.onRiskResultDialogConfirmed,
    use: "confirm"
   })));
   return ha;
  },
  render: function() {
   var ha = ca._("Send money"), ia = "";
   if (this.props.receiver) ia = ca._("{receiverName} isn't able to receive money right now.", [ ca.param("receiverName", this.props.receiver.short_name) ]);
   var ja = !this.props.disabled ? ha : null, ka = this.props.disabled ? ia : "";
   return q.createElement(s, {
    alignH: "center",
    className: (this.state.dialogShown ? "open" : "") + (this.props.disabled ? " " + "disabled" : "") + (this.props.theme !== "messenger" ? " " + "_5uqy" : "") + (da ? " " + "_3ggc" : ""),
    position: "above",
    tooltip: ka,
    onClick: this._onButtonClick,
    onMouseDown: this._prepareForClick,
    title: ja,
    ref: "p2pSendMoneyButton"
   });
  }
 });
 e.exports = ga;
}, null);

__d("StickersDispatcher", [ "Dispatcher", "StickerConstants", "copyProperties", "merge" ], function(a, b, c, d, e, f, g, h, i, j) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var k = i(new g(), {
  _handleUpdate: function(l, m) {
   var n = j({
    payloadSource: l
   }, m);
   this.dispatch(n);
  },
  handleUpdateFromViewActions: function(l) {
   this._handleUpdate(h.PayloadSource.VIEW_ACTION, l);
  }
 });
 e.exports = k;
}, null);

__d("StickerActions", [ "BanzaiLogger", "StickerConstants", "StickersDispatcher" ], function(a, b, c, d, e, f, g, h, i) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var j = {
  addPack: function(k) {
   i.handleUpdateFromViewActions({
    actions: [ {
     actionType: h.ActionTypes.ADD_PACK,
     packID: k
    } ]
   });
  },
  removePack: function(k) {
   i.handleUpdateFromViewActions({
    actions: [ {
     actionType: h.ActionTypes.REMOVE_PACK,
     packID: k
    } ]
   });
  },
  selectPack: function(k, l) {
   if (!l) g.log("StickersLoggerConfig", {
    event: "select_pack",
    packid: k
   });
   i.handleUpdateFromViewActions({
    actions: [ {
     actionType: h.ActionTypes.SELECT_PACK,
     packID: k
    } ]
   });
  },
  resetNumNewPacks: function() {
   i.handleUpdateFromViewActions({
    actions: [ {
     actionType: h.ActionTypes.RESET_NUM_NEW_PACKS
    } ]
   });
  }
 };
 e.exports = j;
}, null);

__d("XStickerPackImagesController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/stickers/{pack_id}/images/", {
  pack_id: {
   type: "Int",
   required: true
  },
  sticker_size: {
   type: "Int",
   defaultValue: 50
  }
 });
}, null);

__d("XStickersAddPackController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/stickers/addpack/", {
  pack_id: {
   type: "Int"
  },
  size: {
   type: "String"
  },
  redirect_uri: {
   type: "String"
  },
  is_promoted: {
   type: "Bool",
   defaultValue: false
  }
 });
}, null);

__d("XStickersRemovePackController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/stickers/removepack/", {
  pack_id: {
   type: "Int"
  },
  size: {
   type: "String"
  },
  redirect_uri: {
   type: "String"
  }
 });
}, null);

__d("XStickerStateInitialDataController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/stickers/state/", {});
}, null);

__d("XStickerStatePackDataController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/stickers/state/pack/", {
  pack_id: {
   type: "Int",
   required: true
  }
 });
}, null);

__d("XStickerStateStoreDataController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/stickers/state/store/", {});
}, null);

__d("XStickerSearchPromotePackController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/stickers/search/promotePack/", {
  sticker_id: {
   type: "Int",
   required: true
  }
 });
}, null);

__d("XStickerSearchNUXSeenController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/stickers/searchNUX/seen/", {});
}, null);

__d("XStickerTagDataController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/stickers/tag/data/", {});
}, null);

__d("XStickerQueryImagesController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/stickers/query/images/", {
  query: {
   type: "String",
   required: true
  }
 });
}, null);

__d("StickerServerRequests", [ "AsyncRequest", "Promise", "XStickerPackImagesController", "XStickersAddPackController", "XStickersRemovePackController", "XStickerStateInitialDataController", "XStickerStatePackDataController", "XStickerStateStoreDataController", "XStickerSearchPromotePackController", "XStickerSearchNUXSeenController", "XStickerTagDataController", "XStickerQueryImagesController" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var s = {
  addPack: function(u, v, w) {
   var x = j.getURIBuilder().setInt("pack_id", u).setBool("is_promoted", v).getURI();
   new g(x).setHandler(function(y) {
    return w(y.payload);
   }).send();
  },
  removePack: function(u, v) {
   var w = k.getURIBuilder().setInt("pack_id", u).getURI();
   new g(w).setHandler(function(x) {
    return v(x.payload);
   }).send();
  },
  getStickersForPack: function(u, v) {
   var w = i.getURIBuilder().setInt("pack_id", u).setInt("sticker_size", v).getURI();
   return new h(function(x, y) {
    return new g().setURI(w).setMethod("POST").setHandler(function(z) {
     return x(z.payload);
    }).send();
   });
  },
  getStickersForQuery: function(u, v) {
   new g().setURI(r.getURIBuilder().setString("query", u).getURI()).setMethod("POST").setHandler(function(w) {
    return v(w);
   }).send();
  },
  fetchTrayData: function(u) {
   return t(l.getURIBuilder().getURI(), u, true);
  },
  fetchStoreData: function(u) {
   return t(n.getURIBuilder().getURI(), u);
  },
  fetchPackData: function(u, v) {
   return t(m.getURIBuilder().setInt("pack_id", u).getURI(), v);
  },
  fetchTagData: function(u) {
   return t(q.getURIBuilder().getURI(), u, true);
  },
  markSeenSearchNUX: function() {
   new g(p.getURIBuilder().getURI().toString()).send();
  },
  promotePackSentFromSearch: function(u, v) {
   var w = o.getURIBuilder().setInt("sticker_id", u).getURI();
   t(w, v, true);
  }
 };
 function t(u, v, w) {
  return new h(function(x, y) {
   return new g(u).setHandler(function(z) {
    return x(z.getPayload());
   }).setAllowCrossPageTransition(w).send();
  }).then(v);
 }
 e.exports = s;
}, null);

__d("StickerImages", [ "StickerServerRequests" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var h = {}, i = {}, j = {}, k = {
  getStickerTagsData: function() {
   return j;
  },
  requestStickersForPack: function(l, m, n) {
   if (!l) return;
   if (!i[l]) {
    i[l] = g.getStickersForPack(l, m);
    i[l].then(function(o) {
     o.forEach(function(p) {
      return this.cacheSticker(p);
     }.bind(this));
    }.bind(this));
   }
   i[l].then(function(o) {
    return n(o);
   });
  },
  cacheSticker: function(l) {
   h[l.id] = l;
  },
  getSticker: function(l) {
   return h[l];
  }
 };
 e.exports = k;
}, null);

__d("StickerSearch", [ "StickerServerRequests" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var h, i, j = {}, k = {
  requestStickersForQuery: function(l, m) {
   h = l;
   g.getStickersForQuery(l, function(n) {
    return h === l && m(n.payload);
   });
  },
  prepareTagsData: function() {
   if (!i) i = g.fetchTagData(function(l) {
    j = l;
   });
   return i;
  },
  getTagByName: function(l) {
   return j[l];
  },
  getTagsIndex: function() {
   return j;
  }
 };
 e.exports = k;
}, null);

__d("StickerState", [ "ImmutableObject", "StickerConfig", "PresenceState", "StickerConstants", "StickerImages", "StickersDispatcher", "StickerServerRequests", "mixInEventEmitter" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var o = {}, p, q, r, s = null, t = 0, u = {}, v = [], w = [], x = [], y = null, z = i.get();
 if (z) y = z.tray_pack_id;
 var aa = h.ShowStickerReplyNUX, ba = h.ShowStickerSearchNUX, ca = {
  onTrayDataReady: function(fa) {
   if (!q) q = m.fetchTrayData(function(ga) {
    v = ga.packs.map(function(ha) {
     return da(ha);
    });
    r = ga.mru;
    t = ga.num_new_packs;
    x = ga.tags;
   });
   q.then(fa);
  },
  onStoreDataReady: function(fa) {
   if (!p) p = m.fetchStoreData(function(ga) {
    w = ga.packs.map(function(ha) {
     return da(ha);
    });
   });
   p.then(fa);
  },
  onPackDataReady: function(fa, ga) {
   if (!o[fa]) o[fa] = m.fetchPackData(fa, function(ha) {
    da(ha);
   });
   o[fa].then(ga);
  },
  getPacksInTray: function() {
   var fa = [], ga;
   for (var ha = 0; ha < v.length; ha++) if (v[ha].id == j.EMOTICON_PACK_ID) {
    ga = v[ha];
   } else if (v[ha].isMessengerCapable) fa.push(v[ha]);
   ga && fa.push(ga);
   return fa;
  },
  getPacksInCommentsTray: function() {
   var fa = [], ga = [], ha;
   for (var ia = 0; ia < v.length; ia++) if (v[ia].id == j.EMOTICON_PACK_ID) {
    ha = v[ia];
   } else if (v[ia].isCommentsCapable) {
    fa.push(v[ia]);
   } else ga.push(v[ia]);
   var ja = fa.concat(ga);
   if (ha) ja.push(ha);
   return ja;
  },
  getPacksInComposerTray: function() {
   return v.filter(function(fa) {
    return fa.isComposerCapable;
   });
  },
  getPackIDsInTray: function() {
   return v.map(function(fa) {
    return fa.id;
   });
  },
  getPacksInStore: function() {
   return w.filter(function(fa) {
    return fa.isMessengerCapable;
   });
  },
  getComposerPacksInStore: function() {
   return w.filter(function(fa) {
    return fa.isComposerCapable;
   });
  },
  getPack: function(fa) {
   return u[fa];
  },
  getNumNewPacks: function() {
   return t;
  },
  getFeaturedTags: function() {
   return x;
  },
  resetNumNewPacks: function() {
   if (t) {
    t = 0;
    this.emit(this.NUM_NEW_PACKS_CHANGED, 0);
   }
  },
  addMRUPack: function() {
   if (r) {
    this._addPackToTray(r);
    r = null;
   }
  },
  addPack: function(fa) {
   var ga = false;
   if (u[fa]) ga = u[fa].isPromoted;
   m.addPack(fa, ga, function(ha) {
    this._addPackToTray(ha);
   }.bind(this));
  },
  removePack: function(fa) {
   m.removePack(fa, function(ga) {
    v = v.filter(function(ha) {
     return ha.id !== ga;
    });
    u[ga] = g.set(u[ga], {
     isInTray: false
    });
    w = w.map(function(ha) {
     return u[ha.id];
    });
    this.emit(this.PACKS_CHANGED, ga);
   }.bind(this));
  },
  setTrayPackID: function(fa) {
   y = fa;
   i.doSync();
   this.emit(ca.PACK_SELECTED, fa);
  },
  getTrayPackID: function() {
   return y;
  },
  shouldShowStickerReplyNUX: function() {
   return aa;
  },
  clearShowStickerReplyNUX: function() {
   aa = false;
  },
  shouldShowStickerSearchNUX: function() {
   return ba;
  },
  clearShowStickerSearchNUX: function() {
   m.markSeenSearchNUX();
   ba = false;
  },
  _addPackToTray: function(fa, ga) {
   da(fa);
   u[fa.id] = g.set(u[fa.id], {
    isPurchased: !ga,
    isInTray: true
   });
   var ha = v.filter(function(ja) {
    return ja.id === fa.id;
   }).length > 0;
   if (!ha) {
    var ia;
    if (!ga) {
     ia = v.filter(function(ja) {
      return ja.isMRU || ja.isSearch;
     }).length;
    } else ia = v.filter(function(ja) {
     return ja.id !== j.EMOTICON_PACK_ID;
    }).length;
    v.splice(ia, 0, u[fa.id]);
   }
   w = w.map(function(ja) {
    return u[ja.id];
   });
   this.emit(this.PACKS_CHANGED, fa.id);
  },
  _addRecentlyUsedSticker: function(fa) {
   for (var ga = 0; ga < s.length; ++ga) if (s[ga].id === fa.id) {
    s.splice(ga, 1);
    break;
   }
   s.unshift(fa);
  },
  getMRUStickerPack: function(fa) {
   if (!s) s = fa;
   return s;
  },
  updateRecentlyUsed: function(fa) {
   if (!s) {
    this.addMRUPack();
    return;
   }
   this._addRecentlyUsedSticker(k.getSticker(fa));
  },
  promotePackSentFromSearch: function(fa) {
   m.promotePackSentFromSearch(fa, function(ga) {
    return ga && this._addPackToTray(ga, true);
   }.bind(this));
  }
 };
 l.register(function(fa) {
  if (fa.actions && fa.actions.length) {
   var ga = j.ActionTypes;
   fa.actions.forEach(function(ha) {
    switch (ha.actionType) {
    case ga.ADD_PACK:
     ca.addPack(ha.packID);
     break;

    case ga.REMOVE_PACK:
     ca.removePack(ha.packID);
     break;

    case ga.SELECT_PACK:
     ca.setTrayPackID(ha.packID);
     break;

    case ga.RESET_NUM_NEW_PACKS:
     ca.resetNumNewPacks();
     break;
    }
   });
  }
 });
 ca.PACKS_CHANGED = "StickerState/packsChanged";
 ca.PACK_SELECTED = "StickerState/packSelected";
 ca.NUM_NEW_PACKS_CHANGED = "StickerState/numNewPacksChanged";
 i.registerStateStorer(function(fa) {
  fa.tray_pack_id = y;
 });
 function da(fa) {
  var ga = fa.id;
  if (!u[ga]) {
   return u[ga] = new g(fa);
  } else return u[ga] = g.set(u[ga], fa);
 }
 var ea = {};
 ea[ca.PACK_SELECTED] = true;
 ea[ca.PACKS_CHANGED] = true;
 ea[ca.NUM_NEW_PACKS_CHANGED] = true;
 n(ca, ea);
 e.exports = ca;
}, null);

__d("AbstractDialogFitHeight", [ "CSS", "DOM", "Event", "Style", "SubscriptionsHandler", "Vector", "csx", "cx", "throttle" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
 b.__markCompiled && b.__markCompiled();
 var p = 450, q = 100, r = 67, s = 67;
 function t(u) {
  "use strict";
  this.$AbstractDialogFitHeight0 = u;
 }
 t.prototype.enable = function() {
  "use strict";
  this.$AbstractDialogFitHeight1 = new k();
  this.$AbstractDialogFitHeight1.addSubscriptions(this.$AbstractDialogFitHeight0.subscribe("beforeshow", this.$AbstractDialogFitHeight2.bind(this)), i.listen(window, "resize", o(this.$AbstractDialogFitHeight2.bind(this))));
  this.$AbstractDialogFitHeight3 = h.find(this.$AbstractDialogFitHeight0.getRoot(), "._4-i2");
  g.addClass(this.$AbstractDialogFitHeight3, "_5pfh");
  this.$AbstractDialogFitHeight4 = q;
  if (h.scry(this.$AbstractDialogFitHeight0.getRoot(), "._4-i0").length) this.$AbstractDialogFitHeight4 += r;
  if (h.scry(this.$AbstractDialogFitHeight0.getRoot(), "._5a8u").length) this.$AbstractDialogFitHeight4 += s;
 };
 t.prototype.disable = function() {
  "use strict";
  this.$AbstractDialogFitHeight1.release();
  this.$AbstractDialogFitHeight1 = null;
  g.removeClass(this.$AbstractDialogFitHeight3, "_5pfh");
 };
 t.prototype.$AbstractDialogFitHeight2 = function() {
  "use strict";
  var u = l.getViewportDimensions().y, v = u - this.$AbstractDialogFitHeight4;
  j.set(this.$AbstractDialogFitHeight3, this.getHeightProperty(), Math.max(p, v) + "px");
  this.$AbstractDialogFitHeight0.updatePosition();
 };
 e.exports = t;
}, null);

__d("DialogFitHeight", [ "AbstractDialogFitHeight" ], function(a, b, c, d, e, f, g) {
 b.__markCompiled && b.__markCompiled();
 for (var h in g) if (g.hasOwnProperty(h)) j[h] = g[h];
 var i = g === null ? null : g.prototype;
 j.prototype = Object.create(i);
 j.prototype.constructor = j;
 j.__superConstructor__ = g;
 function j() {
  "use strict";
  if (g !== null) g.apply(this, arguments);
 }
 j.prototype.getHeightProperty = function() {
  "use strict";
  return "height";
 };
 e.exports = j;
}, null);

__d("StickerStoreController", [ "Bootloader", "DialogFitHeight", "DOM", "LayerAutoFocus", "LayerFadeOnHide", "LayerHideOnEscape", "React", "XUIDialog.react", "XUIDialogBody.react", "XUISpinner.react", "cx", "requestAnimationFrame" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var s = m, t = s.PropTypes, u = 688, v = null, w = m.createClass({
  displayName: "StoreLayer",
  propTypes: {
   isComposer: t.bool,
   packID: t.string,
   shown: t.bool
  },
  getDefaultProps: function() {
   return {
    isComposer: false,
    packID: null,
    shown: false
   };
  },
  getInitialState: function() {
   return {
    renderStore: function() {
     return m.createElement("div", {
      className: "_5r5e"
     }, m.createElement(p, {
      background: "light",
      size: "large"
     }));
    }
   };
  },
  componentDidMount: function() {
   g.loadModules([ "StickerStore.react" ], function(z) {
    this.setState({
     renderStore: function() {
      return m.createElement(z, {
       currentPackID: this.props.packID,
       isComposer: this.props.isComposer,
       onPackSelect: this._packSelected,
       shown: this.props.shown
      });
     }.bind(this)
    });
   }.bind(this));
  },
  _packSelected: function(z) {
   this.setProps({
    packID: z
   });
  },
  _onToggle: function(z) {
   r(this.setProps.bind(this, {
    shown: z
   }, null));
  },
  render: function() {
   return m.createElement(n, {
    behaviors: {
     DialogFitHeight: h,
     LayerAutoFocus: j,
     LayerFadeOnHide: k,
     LayerHideOnEscape: l
    },
    onToggle: this._onToggle,
    shown: this.props.shown,
    width: u
   }, m.createElement(o, {
    className: "_5rq- autofocus"
   }, this.state.renderStore()));
  }
 });
 function x(z, aa) {
  var ba = i.create("div");
  i.appendContent(document.body, ba);
  v = m.render(m.createElement(w, {
   isComposer: aa,
   packID: z,
   shown: true
  }), ba);
 }
 var y = {
  showStore: function(z, aa) {
   if (!v) {
    x(z, !!aa);
   } else v.setProps({
    shown: true,
    packID: z,
    isComposer: !!aa
   });
  }
 };
 e.exports = y;
}, null);

__d("StickerUtils", [], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 var g = {
  getScaledDimensions: function(h, i, j) {
   var k, l, m;
   if (i > h) {
    m = j / i;
    k = h * m;
    l = i * m;
   } else {
    m = j / h;
    k = h * m;
    l = i * m;
   }
   return {
    height: Math.round(k),
    width: Math.round(l)
   };
  },
  capitalizeWords: function(h) {
   var i = h.split(" ");
   for (var j = 0; j < i.length; j++) {
    var k = i[j].charAt(0).toUpperCase();
    i[j] = k + i[j].substr(1);
   }
   return i.join(" ");
  }
 };
 e.exports = g;
}, null);

__d("Sticker.react", [ "Arbiter", "React", "StickerConfig", "StickerConstants", "emptyFunction", "getElementPosition", "getObjectValues" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m) {
 b.__markCompiled && b.__markCompiled();
 "use strict";
 var n = h, o = n.PropTypes, p = 83, q = 5e3, r = 10, s = {
  CLICK: "click",
  HOVER: "hover",
  LOAD_AND_HOVER: "load_and_hover"
 }, t = h.createClass({
  displayName: "Sticker",
  propTypes: {
   animationTrigger: o.oneOf(m(s)),
   frameCount: o.number.isRequired,
   frameRate: o.number,
   framesPerCol: o.number.isRequired,
   framesPerRow: o.number.isRequired,
   onStickerClick: o.func,
   packID: o.string,
   sourceURI: o.string.isRequired,
   sourceWidth: o.number.isRequired,
   sourceHeight: o.number.isRequired,
   spriteURI: o.string,
   stickerID: o.string,
   subscribedThreadID: o.string
  },
  getInitialState: function() {
   return {
    index: 0,
    hasAnimated: false,
    unsubscribeID: null
   };
  },
  getDefaultProps: function() {
   return {
    frameRate: p,
    onStickerClick: k,
    packID: null
   };
  },
  componentDidMount: function() {
   this._stopIntervalID = 0;
   if (this.props.animationTrigger === s.LOAD_AND_HOVER && this.props.frameCount > 1 && this.props.spriteURI) this.startAnimation();
   if (this.props.subscribedThreadID && this.props.frameCount > 1) {
    var u = g.subscribe(this.props.subscribedThreadID, function(v, w) {
     this.isScrolledIntoView(w.scrollTop, w.viewHeight, w.top);
    }.bind(this));
    this.setState({
     unsubscribeID: u
    });
   }
  },
  componentWillUnmount: function() {
   if (this.state.unsubscribeID) g.unsubscribe(this.state.unsubscribeID);
   if (this.isAnimating()) clearInterval(this._stopIntervalID);
  },
  isAnimating: function() {
   return !!this._stopIntervalID;
  },
  getWidth: function() {
   return Math.floor(this.props.sourceWidth);
  },
  getHeight: function() {
   return Math.floor(this.props.sourceHeight);
  },
  preloadSprite: function() {
   var u = new Image();
   u.onload = function() {
    if (this.isMounted() && !this.state.hasAnimated) {
     this.setState({
      hasAnimated: true
     });
     this._stopIntervalID = setInterval(this.incrementFrameIndex, this.props.frameRate);
    }
   }.bind(this);
   if (i.ChatPaddedAnimatedStickerGK && this.props.paddedSpriteURI) {
    u.src = this.props.paddedSpriteURI;
   } else u.src = this.props.spriteURI;
  },
  isScrolledIntoView: function(u, v, w) {
   var x = l(h.findDOMNode(this)), y = u + x.y - w, z = u + v, aa = y + x.height;
   if (this.props.frameCount > 1 && !this.state.hasAnimated && aa - r <= z && y + r >= u) this.startAnimation();
  },
  startAnimation: function() {
   if (!this.state.hasAnimated && this.props.spriteURI) {
    this.preloadSprite();
   } else if (!this.isAnimating()) {
    this.setState({
     hasAnimated: true
    });
    this._stopIntervalID = setInterval(this.incrementFrameIndex, this.props.frameRate);
   }
  },
  stopAnimation: function() {
   this.setState({
    index: 0
   });
   clearInterval(this._stopIntervalID);
   this._stopIntervalID = 0;
  },
  toggleAnimation: function() {
   if (this.isAnimating()) {
    this.stopAnimation();
   } else this.startAnimation();
  },
  shouldStopAnimating: function() {
   var u = this.state.index % this.props.frameCount;
   if (!(u === 0 && this.state.index * this.props.frameRate > q)) return false;
   if (this.props.animationTrigger === s.CLICK) return true;
   return !this.state.isHovered;
  },
  incrementFrameIndex: function() {
   if (this.shouldStopAnimating()) {
    this.stopAnimation();
   } else this.setState({
    index: this.state.index + 1
   });
  },
  getStyle: function() {
   var u = 0, v = this.props.spriteURI;
   if (i.ChatPaddedAnimatedStickerGK && this.props.paddedSpriteURI) {
    v = this.props.paddedSpriteURI;
    var w = 240 / Math.min(this.getHeight(), this.getWidth());
    u = Math.floor(j.SPRITE_PADDING / w);
   }
   var x = this.state.index % this.props.frameCount, y = x % this.props.framesPerRow * (this.getWidth() + u * 2) + u, z = Math.floor(x / this.props.framesPerRow) * (this.getHeight() + u * 2) + u, aa = this.props.frameCount > 1 && this.props.animationTrigger === s.CLICK || this._isStickerClickable(this.props.packID), ba;
   if (this.props.style && this.props.style.cursor) {
    ba = this.props.style.cursor;
   } else ba = aa ? "pointer" : "default";
   if (!this.state.hasAnimated || !this.props.spriteURI) {
    return {
     backgroundImage: "url(" + this.props.sourceURI + ")",
     backgroundRepeat: "no-repeat",
     backgroundSize: this.getWidth() + "px " + this.getHeight() + "px",
     cursor: ba,
     height: this.getHeight(),
     width: this.getWidth()
    };
   } else return {
    backgroundImage: "url(" + v + ")",
    backgroundPosition: -y + "px " + -z + "px",
    backgroundSize: (this.getWidth() + u * 2) * this.props.framesPerRow + "px " + (this.getHeight() + u * 2) * this.props.framesPerCol + "px",
    cursor: ba,
    height: this.getHeight(),
    width: this.getWidth()
   };
  },
  _isStickerClickable: function(u) {
   return u && u != j.MOBILE_LIKE_STICKER_PACK_ID && u != j.GRAVEYARD_PACK_ID;
  },
  onStickerClick: function() {
   if (!this._isStickerClickable(this.props.packID)) return;
   if (this.props.onStickerClick) this.props.onStickerClick(this.props.packID, this.props.stickerID);
  },
  mouseLeft: function() {
   this.setState({
    isHovered: false
   });
  },
  mouseEntered: function() {
   this.setState({
    isHovered: true
   });
   if (!this.isAnimating()) this.startAnimation();
  },
  render: function() {
   var u, v;
   if (this.props.animationTrigger === s.CLICK && this.props.frameCount > 1 && this.props.spriteURI) {
    u = true;
   } else if ((this.props.animationTrigger === s.HOVER || this.props.animationTrigger === s.LOAD_AND_HOVER) && this.props.frameCount > 1 && this.props.spriteURI) v = true;
   var w = u ? this.toggleAnimation : null;
   if (this.props.packID) w = this.onStickerClick;
   return h.createElement("div", h.__spread({
    tabIndex: "0"
   }, this.props, {
    style: Object.assign({}, this.props.style || {}, this.getStyle()),
    onClick: w,
    onMouseEnter: v ? this.mouseEntered : null,
    onMouseLeave: v ? this.mouseLeft : null
   }));
  }
 });
 e.exports = t;
}, null);

__d("ContextualLayerUpdateOnScroll", [ "Event", "copyProperties" ], function(a, b, c, d, e, f, g, h) {
 b.__markCompiled && b.__markCompiled();
 function i(j) {
  "use strict";
  this._layer = j;
 }
 i.prototype.enable = function() {
  "use strict";
  this._subscriptions = [ this._layer.subscribe("show", this._attachScrollListener.bind(this)), this._layer.subscribe("hide", this._removeScrollListener.bind(this)) ];
 };
 i.prototype.disable = function() {
  "use strict";
  while (this._subscriptions.length) this._subscriptions.pop().unsubscribe();
 };
 i.prototype._attachScrollListener = function() {
  "use strict";
  if (this._listener) return;
  var j = this._layer.getContextScrollParent();
  this._listener = g.listen(j, "scroll", this._layer.updatePosition.bind(this._layer));
 };
 i.prototype._removeScrollListener = function() {
  "use strict";
  this._listener && this._listener.remove();
  this._listener = null;
 };
 h(i.prototype, {
  _subscriptions: []
 });
 e.exports = i;
}, null);

__d("XMessengerDotComLogoutController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/logout/", {});
}, null);

__d("XMessengerDotComSettingsEditController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/settings/edit/", {});
}, null);

__d("XStickerAssetController", [ "XController" ], function(a, b, c, d, e, f) {
 b.__markCompiled && b.__markCompiled();
 e.exports = b("XController").create("/stickers/asset/", {
  sticker_id: {
   type: "Int",
   required: true
  },
  image_type: {
   type: "Enum",
   defaultValue: "BestEffortImage",
   enumType: 1
  }
 });
}, null);